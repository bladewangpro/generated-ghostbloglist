<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=theme-color content="#FFFFFF"><meta http-equiv=x-ua-compatible content="IE=edge"><title>初探 Go 的编译命令执行过程 | prometheus</title><meta name=description content="Explore in every moment of the hard thinking"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="初探 Go 的编译命令执行过程"><meta property="og:description" content="引言 Go 语言这两年在语言排行榜上的上升势头非常猛，Go 语言虽然是静态编译型语言，但是它却拥有脚本化的语法，支持多种编程范式(函数式和面向对象)。Go 语言最最吸引人的地方可能是其原生支持并发编程(语言层面原生支持和通过第三方库支持是有很大区别的)。Go 语言的对网络通信、并发和并行编程的支持度极高，从而可以更好地利用大量的分布式和多核的计算机。开发者可以通过 goroutine 这种轻量级线程的概念来实现这个目标，然后通过 channel 来实现各个 goroutine 之间的通信。他们实现了分段栈增长和 goroutine 在线程基础上多路复用技术的自动化。
2017年7月 TIOBE 语言排行榜 Go 首次进入前十。今天就让我们来探究探究 Go 的编译命令执行过程。
一. 理解 Go 的环境变量 1. GOROOT 该环境变量的值为 Go 语言的当前安装目录。
2. GOPATH 该环境变量的值为 Go 语言的工作区的集合（意味着可以有很多个）。工作区类似于工作目录。每个不同的目录之间用：分隔。
工作区是放置 Go 源码文件的目录。一般情况下，Go 源码文件都需要存放到工作区中。
工作区一般会包含3个子文件夹，自己手动新建以下三个目录：src 目录，pkg 目录，bin 目录。
/home/halfrost/gorepo ├── bin ├── pkg └── src 这里需要额外说的一点：关于 IDE 新建 Go 项目。IDE 在新建完 Go 的项目以后，会自动的执行 go get 命令去把相应的基础包拉过来， 在这个过程中会新建 bin、pkg、src 三个目录。不用 IDE 的同学，需要自己手动创建这三个目录。
上图是 Atom 的 go-plus 插件在一个新的项目打开的时候，自动 go get 的一些基础包。"><meta property="og:type" content="article"><meta property="og:url" content="https://new.halfrost.com/go_command/"><meta property="article:published_time" content="2017-08-04T11:10:00+00:00"><meta property="article:modified_time" content="2017-08-04T11:10:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="初探 Go 的编译命令执行过程"><meta name=twitter:description content="引言 Go 语言这两年在语言排行榜上的上升势头非常猛，Go 语言虽然是静态编译型语言，但是它却拥有脚本化的语法，支持多种编程范式(函数式和面向对象)。Go 语言最最吸引人的地方可能是其原生支持并发编程(语言层面原生支持和通过第三方库支持是有很大区别的)。Go 语言的对网络通信、并发和并行编程的支持度极高，从而可以更好地利用大量的分布式和多核的计算机。开发者可以通过 goroutine 这种轻量级线程的概念来实现这个目标，然后通过 channel 来实现各个 goroutine 之间的通信。他们实现了分段栈增长和 goroutine 在线程基础上多路复用技术的自动化。
2017年7月 TIOBE 语言排行榜 Go 首次进入前十。今天就让我们来探究探究 Go 的编译命令执行过程。
一. 理解 Go 的环境变量 1. GOROOT 该环境变量的值为 Go 语言的当前安装目录。
2. GOPATH 该环境变量的值为 Go 语言的工作区的集合（意味着可以有很多个）。工作区类似于工作目录。每个不同的目录之间用：分隔。
工作区是放置 Go 源码文件的目录。一般情况下，Go 源码文件都需要存放到工作区中。
工作区一般会包含3个子文件夹，自己手动新建以下三个目录：src 目录，pkg 目录，bin 目录。
/home/halfrost/gorepo ├── bin ├── pkg └── src 这里需要额外说的一点：关于 IDE 新建 Go 项目。IDE 在新建完 Go 的项目以后，会自动的执行 go get 命令去把相应的基础包拉过来， 在这个过程中会新建 bin、pkg、src 三个目录。不用 IDE 的同学，需要自己手动创建这三个目录。
上图是 Atom 的 go-plus 插件在一个新的项目打开的时候，自动 go get 的一些基础包。"><link rel=stylesheet href=/css/style-white.min.css><link rel=manifest href=/manifest.json><link rel=stylesheet href=/prism.css><link href=/images/apple-touch-icon-60x60.png rel=apple-touch-icon sizes=60x60><link href=/images/apple-touch-icon-76x76.png rel=apple-touch-icon sizes=76x76><link href=/images/apple-touch-icon-120x120.png rel=apple-touch-icon sizes=120x120><link href=/images/apple-touch-icon-152x152.png rel=apple-touch-icon sizes=152x152><link href=/images/apple-touch-icon-180x180.png rel=apple-touch-icon sizes=180x180><link href=/images/apple-touch-icon-512x512.png rel=apple-touch-icon sizes=512x512><link href=/images/apple-touch-icon-1024x1024.png rel=apple-touch-icon sizes=1024x1024><script async>if('serviceWorker'in navigator){navigator.serviceWorker.register("\/serviceworker-v1.min.a64912b78d282eab1ad3715a0943da21616e5f326f8afea27034784ad445043b.js").then(function(){if(navigator.serviceWorker.controller){console.log('Assets cached by the controlling service worker.');}else{console.log('Please reload this page to allow the service worker to handle network operations.');}}).catch(function(error){console.log('ERROR: '+error);});}else{console.log('Service workers are not supported in the current browser.');}</script><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://new.halfrost.com/images/favicon.ico><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-82753806-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="single-max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a><a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a><a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast');" style=display:none><i class="fas fa-chevron-up fa-lg"></i></a><span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=https://books.halfrost.com/>Books</a></li><li><a href=https://github.com/halfrost/Halfrost-Field>Github</a></li><li><a href=https://halfrost.me/>About</a></li><li><a href=/index.xml>RSS</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://new.halfrost.com/new_gopher/><i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li><li><a class=icon href=https://new.halfrost.com/go_spatial_search/><i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li><li><a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');"><i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li><li><a class=icon href=#><i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fnew.halfrost.com%2fgo_command%2f"><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fnew.halfrost.com%2fgo_command%2f&text=%e5%88%9d%e6%8e%a2%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fnew.halfrost.com%2fgo_command%2f&title=%e5%88%9d%e6%8e%a2%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fnew.halfrost.com%2fgo_command%2f&is_video=false&description=%e5%88%9d%e6%8e%a2%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b"><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=%e5%88%9d%e6%8e%a2%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b&body=Check out this article: https%3a%2f%2fnew.halfrost.com%2fgo_command%2f"><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fnew.halfrost.com%2fgo_command%2f&title=%e5%88%9d%e6%8e%a2%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b"><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fgo_command%2f&title=%e5%88%9d%e6%8e%a2%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b"><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fgo_command%2f&title=%e5%88%9d%e6%8e%a2%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b"><i class="fab fa-stumbleupon" aria-hidden=true></i></a></li><li><a class=icon href="http://digg.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fgo_command%2f&title=%e5%88%9d%e6%8e%a2%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b"><i class="fab fa-digg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fnew.halfrost.com%2fgo_command%2f&name=%e5%88%9d%e6%8e%a2%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b&description=%e5%bc%95%e8%a8%80%20Go%20%e8%af%ad%e8%a8%80%e8%bf%99%e4%b8%a4%e5%b9%b4%e5%9c%a8%e8%af%ad%e8%a8%80%e6%8e%92%e8%a1%8c%e6%a6%9c%e4%b8%8a%e7%9a%84%e4%b8%8a%e5%8d%87%e5%8a%bf%e5%a4%b4%e9%9d%9e%e5%b8%b8%e7%8c%9b%ef%bc%8cGo%20%e8%af%ad%e8%a8%80%e8%99%bd%e7%84%b6%e6%98%af%e9%9d%99%e6%80%81%e7%bc%96%e8%af%91%e5%9e%8b%e8%af%ad%e8%a8%80%ef%bc%8c%e4%bd%86%e6%98%af%e5%ae%83%e5%8d%b4%e6%8b%a5%e6%9c%89%e8%84%9a%e6%9c%ac%e5%8c%96%e7%9a%84%e8%af%ad%e6%b3%95%ef%bc%8c%e6%94%af%e6%8c%81%e5%a4%9a%e7%a7%8d%e7%bc%96%e7%a8%8b%e8%8c%83%e5%bc%8f%28%e5%87%bd%e6%95%b0%e5%bc%8f%e5%92%8c%e9%9d%a2%e5%90%91%e5%af%b9%e8%b1%a1%29%e3%80%82Go%20%e8%af%ad%e8%a8%80%e6%9c%80%e6%9c%80%e5%90%b8%e5%bc%95%e4%ba%ba%e7%9a%84%e5%9c%b0%e6%96%b9%e5%8f%af%e8%83%bd%e6%98%af%e5%85%b6%e5%8e%9f%e7%94%9f%e6%94%af%e6%8c%81%e5%b9%b6%e5%8f%91%e7%bc%96%e7%a8%8b%28%e8%af%ad%e8%a8%80%e5%b1%82%e9%9d%a2%e5%8e%9f%e7%94%9f%e6%94%af%e6%8c%81%e5%92%8c%e9%80%9a%e8%bf%87%e7%ac%ac%e4%b8%89%e6%96%b9%e5%ba%93%e6%94%af%e6%8c%81%e6%98%af%e6%9c%89%e5%be%88%e5%a4%a7%e5%8c%ba%e5%88%ab%e7%9a%84%29%e3%80%82Go%20%e8%af%ad%e8%a8%80%e7%9a%84%e5%af%b9%e7%bd%91%e7%bb%9c%e9%80%9a%e4%bf%a1%e3%80%81%e5%b9%b6%e5%8f%91%e5%92%8c%e5%b9%b6%e8%a1%8c%e7%bc%96%e7%a8%8b%e7%9a%84%e6%94%af%e6%8c%81%e5%ba%a6%e6%9e%81%e9%ab%98%ef%bc%8c%e4%bb%8e%e8%80%8c%e5%8f%af%e4%bb%a5%e6%9b%b4%e5%a5%bd%e5%9c%b0%e5%88%a9%e7%94%a8%e5%a4%a7%e9%87%8f%e7%9a%84%e5%88%86%e5%b8%83%e5%bc%8f%e5%92%8c%e5%a4%9a%e6%a0%b8%e7%9a%84%e8%ae%a1%e7%ae%97%e6%9c%ba%e3%80%82%e5%bc%80%e5%8f%91%e8%80%85%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%20goroutine%20%e8%bf%99%e7%a7%8d%e8%bd%bb%e9%87%8f%e7%ba%a7%e7%ba%bf%e7%a8%8b%e7%9a%84%e6%a6%82%e5%bf%b5%e6%9d%a5%e5%ae%9e%e7%8e%b0%e8%bf%99%e4%b8%aa%e7%9b%ae%e6%a0%87%ef%bc%8c%e7%84%b6%e5%90%8e%e9%80%9a%e8%bf%87%20channel%20%e6%9d%a5%e5%ae%9e%e7%8e%b0%e5%90%84%e4%b8%aa%20goroutine%20%e4%b9%8b%e9%97%b4%e7%9a%84%e9%80%9a%e4%bf%a1%e3%80%82%e4%bb%96%e4%bb%ac%e5%ae%9e%e7%8e%b0%e4%ba%86%e5%88%86%e6%ae%b5%e6%a0%88%e5%a2%9e%e9%95%bf%e5%92%8c%20goroutine%20%e5%9c%a8%e7%ba%bf%e7%a8%8b%e5%9f%ba%e7%a1%80%e4%b8%8a%e5%a4%9a%e8%b7%af%e5%a4%8d%e7%94%a8%e6%8a%80%e6%9c%af%e7%9a%84%e8%87%aa%e5%8a%a8%e5%8c%96%e3%80%82%0a2017%e5%b9%b47%e6%9c%88%20TIOBE%20%e8%af%ad%e8%a8%80%e6%8e%92%e8%a1%8c%e6%a6%9c%20Go%20%e9%a6%96%e6%ac%a1%e8%bf%9b%e5%85%a5%e5%89%8d%e5%8d%81%e3%80%82%e4%bb%8a%e5%a4%a9%e5%b0%b1%e8%ae%a9%e6%88%91%e4%bb%ac%e6%9d%a5%e6%8e%a2%e7%a9%b6%e6%8e%a2%e7%a9%b6%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b%e3%80%82%0a%e4%b8%80.%20%e7%90%86%e8%a7%a3%20Go%20%e7%9a%84%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f%201.%20GOROOT%20%e8%af%a5%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f%e7%9a%84%e5%80%bc%e4%b8%ba%20Go%20%e8%af%ad%e8%a8%80%e7%9a%84%e5%bd%93%e5%89%8d%e5%ae%89%e8%a3%85%e7%9b%ae%e5%bd%95%e3%80%82%0a2.%20GOPATH%20%e8%af%a5%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f%e7%9a%84%e5%80%bc%e4%b8%ba%20Go%20%e8%af%ad%e8%a8%80%e7%9a%84%e5%b7%a5%e4%bd%9c%e5%8c%ba%e7%9a%84%e9%9b%86%e5%90%88%ef%bc%88%e6%84%8f%e5%91%b3%e7%9d%80%e5%8f%af%e4%bb%a5%e6%9c%89%e5%be%88%e5%a4%9a%e4%b8%aa%ef%bc%89%e3%80%82%e5%b7%a5%e4%bd%9c%e5%8c%ba%e7%b1%bb%e4%bc%bc%e4%ba%8e%e5%b7%a5%e4%bd%9c%e7%9b%ae%e5%bd%95%e3%80%82%e6%af%8f%e4%b8%aa%e4%b8%8d%e5%90%8c%e7%9a%84%e7%9b%ae%e5%bd%95%e4%b9%8b%e9%97%b4%e7%94%a8%ef%bc%9a%e5%88%86%e9%9a%94%e3%80%82%0a%e5%b7%a5%e4%bd%9c%e5%8c%ba%e6%98%af%e6%94%be%e7%bd%ae%20Go%20%e6%ba%90%e7%a0%81%e6%96%87%e4%bb%b6%e7%9a%84%e7%9b%ae%e5%bd%95%e3%80%82%e4%b8%80%e8%88%ac%e6%83%85%e5%86%b5%e4%b8%8b%ef%bc%8cGo%20%e6%ba%90%e7%a0%81%e6%96%87%e4%bb%b6%e9%83%bd%e9%9c%80%e8%a6%81%e5%ad%98%e6%94%be%e5%88%b0%e5%b7%a5%e4%bd%9c%e5%8c%ba%e4%b8%ad%e3%80%82%0a%e5%b7%a5%e4%bd%9c%e5%8c%ba%e4%b8%80%e8%88%ac%e4%bc%9a%e5%8c%85%e5%90%ab3%e4%b8%aa%e5%ad%90%e6%96%87%e4%bb%b6%e5%a4%b9%ef%bc%8c%e8%87%aa%e5%b7%b1%e6%89%8b%e5%8a%a8%e6%96%b0%e5%bb%ba%e4%bb%a5%e4%b8%8b%e4%b8%89%e4%b8%aa%e7%9b%ae%e5%bd%95%ef%bc%9asrc%20%e7%9b%ae%e5%bd%95%ef%bc%8cpkg%20%e7%9b%ae%e5%bd%95%ef%bc%8cbin%20%e7%9b%ae%e5%bd%95%e3%80%82%0a%2fhome%2fhalfrost%2fgorepo%20%e2%94%9c%e2%94%80%e2%94%80%20bin%20%e2%94%9c%e2%94%80%e2%94%80%20pkg%20%e2%94%94%e2%94%80%e2%94%80%20src%20%e8%bf%99%e9%87%8c%e9%9c%80%e8%a6%81%e9%a2%9d%e5%a4%96%e8%af%b4%e7%9a%84%e4%b8%80%e7%82%b9%ef%bc%9a%e5%85%b3%e4%ba%8e%20IDE%20%e6%96%b0%e5%bb%ba%20Go%20%e9%a1%b9%e7%9b%ae%e3%80%82IDE%20%e5%9c%a8%e6%96%b0%e5%bb%ba%e5%ae%8c%20Go%20%e7%9a%84%e9%a1%b9%e7%9b%ae%e4%bb%a5%e5%90%8e%ef%bc%8c%e4%bc%9a%e8%87%aa%e5%8a%a8%e7%9a%84%e6%89%a7%e8%a1%8c%20go%20get%20%e5%91%bd%e4%bb%a4%e5%8e%bb%e6%8a%8a%e7%9b%b8%e5%ba%94%e7%9a%84%e5%9f%ba%e7%a1%80%e5%8c%85%e6%8b%89%e8%bf%87%e6%9d%a5%ef%bc%8c%20%e5%9c%a8%e8%bf%99%e4%b8%aa%e8%bf%87%e7%a8%8b%e4%b8%ad%e4%bc%9a%e6%96%b0%e5%bb%ba%20bin%e3%80%81pkg%e3%80%81src%20%e4%b8%89%e4%b8%aa%e7%9b%ae%e5%bd%95%e3%80%82%e4%b8%8d%e7%94%a8%20IDE%20%e7%9a%84%e5%90%8c%e5%ad%a6%ef%bc%8c%e9%9c%80%e8%a6%81%e8%87%aa%e5%b7%b1%e6%89%8b%e5%8a%a8%e5%88%9b%e5%bb%ba%e8%bf%99%e4%b8%89%e4%b8%aa%e7%9b%ae%e5%bd%95%e3%80%82%0a%e4%b8%8a%e5%9b%be%e6%98%af%20Atom%20%e7%9a%84%20go-plus%20%e6%8f%92%e4%bb%b6%e5%9c%a8%e4%b8%80%e4%b8%aa%e6%96%b0%e7%9a%84%e9%a1%b9%e7%9b%ae%e6%89%93%e5%bc%80%e7%9a%84%e6%97%b6%e5%80%99%ef%bc%8c%e8%87%aa%e5%8a%a8%20go%20get%20%e7%9a%84%e4%b8%80%e4%ba%9b%e5%9f%ba%e7%a1%80%e5%8c%85%e3%80%82"><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fnew.halfrost.com%2fgo_command%2f&t=%e5%88%9d%e6%8e%a2%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><a href=#引言>引言</a></li><li><a href=#一-理解-go-的环境变量>一. 理解 Go 的环境变量</a><ul><li><a href=#1-goroot>1. GOROOT</a></li><li><a href=#2-gopath>2. GOPATH</a></li><li><a href=#3gobin>3.GOBIN</a></li><li><a href=#4path>4.PATH</a></li></ul></li><li><a href=#二-初探-go-的编译过程>二. 初探 Go 的编译过程</a><ul><li><a href=#1-go-run>1. go run</a></li><li><a href=#2-go-build>2. go build</a></li><li><a href=#3-go-install>3. go install</a></li><li><a href=#4-go-get>4. go get</a></li></ul></li><li><a href=#三-静态链接-or-动态链接->三. 静态链接 or 动态链接 ？</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">初探 Go 的编译命令执行过程</h1><div class=meta><div class=postdate><time datetime="2017-08-04 11:10:00 +0000 UTC" itemprop=datePublished>Aug 04</time></div><div class=article-category><i class="fas fa-archive"></i><a class=category-link href=/categories/go>Go</a></div><div class=article-tag><i class="fas fa-tag"></i><a class=tag-link href=/tags/go rel=tag>Go</a></div></div></header><div class=content itemprop=articleBody><h2 id=引言>引言</h2><p><img src=https://img.halfrost.com/Blog/ArticleImage/55_1.png alt></p><p>Go 语言这两年在语言排行榜上的上升势头非常猛，Go 语言虽然是静态编译型语言，但是它却拥有脚本化的语法，支持多种编程范式(函数式和面向对象)。Go 语言最最吸引人的地方可能是其原生支持并发编程(语言层面原生支持和通过第三方库支持是有很大区别的)。Go 语言的对网络通信、并发和并行编程的支持度极高，从而可以更好地利用大量的分布式和多核的计算机。开发者可以通过 goroutine 这种轻量级线程的概念来实现这个目标，然后通过 channel 来实现各个 goroutine 之间的通信。他们实现了分段栈增长和 goroutine 在线程基础上多路复用技术的自动化。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/55_2.png alt></p><p>2017年7月 TIOBE 语言排行榜 Go 首次进入前十。今天就让我们来探究探究 Go 的编译命令执行过程。</p><h2 id=一-理解-go-的环境变量>一. 理解 Go 的环境变量</h2><h3 id=1-goroot>1. GOROOT</h3><p>该环境变量的值为 Go 语言的当前安装目录。</p><h3 id=2-gopath>2. GOPATH</h3><p>该环境变量的值为 Go 语言的工作区的<strong>集合（意味着可以有很多个）</strong>。工作区类似于工作目录。每个不同的目录之间用<code>：</code>分隔。</p><p>工作区是放置 Go 源码文件的目录。一般情况下，Go 源码文件都需要存放到工作区中。</p><p>工作区一般会包含3个子文件夹，自己手动新建以下三个目录：src 目录，pkg 目录，bin 目录。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>
<span style=color:#f92672>/</span><span style=color:#a6e22e>home</span><span style=color:#f92672>/</span><span style=color:#a6e22e>halfrost</span><span style=color:#f92672>/</span><span style=color:#a6e22e>gorepo</span>
<span style=color:#960050;background-color:#1e0010>├──</span> <span style=color:#a6e22e>bin</span>
<span style=color:#960050;background-color:#1e0010>├──</span> <span style=color:#a6e22e>pkg</span>
<span style=color:#960050;background-color:#1e0010>└──</span> <span style=color:#a6e22e>src</span>
</code></pre></div><p>这里需要额外说的一点：关于 IDE 新建 Go 项目。IDE 在新建完 Go 的项目以后，会自动的执行 go get 命令去把相应的基础包拉过来，
在这个过程中会新建 bin、pkg、src 三个目录。不用 IDE 的同学，需要自己手动创建这三个目录。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/55_3.png alt></p><p>上图是 Atom 的 go-plus 插件在一个新的项目打开的时候，自动 go get 的一些基础包。</p><p>bin 目录里面存放的都是通过 go install 命令安装后，由 Go 命令源码文件生成的可执行文件（ 在 Mac 平台下是 Unix executable 文件，在 Windows 平台下是 exe 文件）。</p><blockquote><p><strong>注意</strong>：有两种情况下，bin 目录会变得没有意义。</p><ol><li>当设置了有效的 GOBIN 环境变量以后，bin 目录就变得没有意义。</li><li>如果 GOPATH 里面包含多个工作区路径的时候，必须设置 GOBIN 环境变量，否则就无法安装 Go 程序的可执行文件。</li></ol></blockquote><p>pkg 目录是用来存放通过 go install 命令安装后的代码包的归档文件(.a 文件)。归档文件的名字就是代码包的名字。所有归档文件都会被存放到该目录下的平台相关目录中，即在 $GOPATH/pkg/$GOOS_$GOARCH 中，同样以代码包为组织形式。</p><p>这里有两个隐藏的环境变量，GOOS 和 GOARCH。这两个环境变量是不用我们设置的，系统就默认的。GOOS 是 Go 所在的操作系统类型，GOARCH 是 Go 所在的计算架构。平台相关目录是以
$GOOS_$GOARCH 命名的，Mac 平台上这个目录名就是 darwin_amd64。</p><p>src 目录是以代码包的形式组织并保存 Go 源码文件的。每个代码包都和 src 目录下的文件夹一一对应。每个子目录都是一个代码包。</p><p>这里有一个<strong>特例</strong>，命令源码文件并不一定必须放在 src 文件夹中的。</p><p><strong>这里需要纠正一个错误的观点：“所有的 Go 的代码都要放在 GOPATH 目录下”（这个观点是错误的）</strong></p><p>说到这里需要谈到 Go 的源码文件分类：</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/55_4.png alt></p><p>如上图，分为三类：</p><p>（1）命令源码文件：</p><p>声明自己属于 main 代码包、包含无参数声明和结果声明的 main 函数。</p><p>命令源码文件被安装以后，GOPATH 如果只有一个工作区，那么相应的可执行文件会被存放当前工作区的 bin 文件夹下；如果有多个工作区，就会安装到 GOBIN 指向的目录下。</p><p>命令源码文件是 Go 程序的入口。</p><p>同一个代码包中最好也不要放多个命令源码文件。多个命令源码文件虽然可以分开单独 go run 运行起来，但是无法通过 go build 和 go install。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>YDZ</span> ~<span style=color:#e6db74>/LeetCode_Go/</span><span style=color:#a6e22e>helloworld</span><span style=color:#e6db74>/src/</span><span style=color:#a6e22e>me</span> $  <span style=color:#a6e22e>ls</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>helloworld</span>.<span style=color:#a6e22e>go</span>  <span style=color:#a6e22e>helloworldd</span>.<span style=color:#a6e22e>go</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>先说明一下，在上述文件夹中放了两个命令源码文件，同时都声明自己属于 main 代码包。helloworld.go 文件输出 hello world，helloworldd.go 文件输出 worldd hello。接下来执行 go build 和 go install ，看看会发生什么。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>YDZ</span> ~<span style=color:#e6db74>/LeetCode_Go/</span><span style=color:#a6e22e>helloworld</span><span style=color:#e6db74>/src/</span><span style=color:#a6e22e>me</span> $  <span style=color:#a6e22e>go</span> <span style=color:#a6e22e>build</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span># <span style=color:#a6e22e>_</span><span style=color:#e6db74>/Users/</span><span style=color:#a6e22e>YDZ</span><span style=color:#e6db74>/LeetCode_Go/</span><span style=color:#a6e22e>helloworld</span><span style=color:#e6db74>/src/</span><span style=color:#a6e22e>me</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>./<span style=color:#a6e22e>helloworldd</span>.<span style=color:#a6e22e>go</span>:<span style=color:#ae81ff>7</span>: <span style=color:#a6e22e>main</span> <span style=color:#a6e22e>redeclared</span> <span style=color:#a6e22e>in</span> <span style=color:#a6e22e>this</span> <span style=color:#a6e22e>block</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>	<span style=color:#a6e22e>previous</span> <span style=color:#a6e22e>declaration</span> <span style=color:#a6e22e>at</span> ./<span style=color:#a6e22e>helloworld</span>.<span style=color:#a6e22e>go</span>:<span style=color:#ae81ff>50</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>YDZ</span> ~<span style=color:#e6db74>/LeetCode_Go/</span><span style=color:#a6e22e>helloworld</span><span style=color:#e6db74>/src/</span><span style=color:#a6e22e>me</span> $  <span style=color:#a6e22e>go</span> <span style=color:#a6e22e>install</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span># <span style=color:#a6e22e>_</span><span style=color:#e6db74>/Users/</span><span style=color:#a6e22e>YDZ</span><span style=color:#e6db74>/LeetCode_Go/</span><span style=color:#a6e22e>helloworld</span><span style=color:#e6db74>/src/</span><span style=color:#a6e22e>me</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>./<span style=color:#a6e22e>helloworldd</span>.<span style=color:#a6e22e>go</span>:<span style=color:#ae81ff>7</span>: <span style=color:#a6e22e>main</span> <span style=color:#a6e22e>redeclared</span> <span style=color:#a6e22e>in</span> <span style=color:#a6e22e>this</span> <span style=color:#a6e22e>block</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>	<span style=color:#a6e22e>previous</span> <span style=color:#a6e22e>declaration</span> <span style=color:#a6e22e>at</span> ./<span style=color:#a6e22e>helloworld</span>.<span style=color:#a6e22e>go</span>:<span style=color:#ae81ff>50</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>这也就证明了多个命令源码文件虽然可以分开单独 go run 运行起来，但是无法通过 go build 和 go install。</p><p>同理，如果命令源码文件和库源码文件也会出现这样的问题，库源码文件不能通过 go build 和 go install 这种常规的方法编译和安装。具体例子和上述类似，这里就不再贴代码了。</p><p>所以命令源码文件应该是被单独放在一个代码包中。</p><p>（2）库源码文件</p><p>库源码文件就是不具备命令源码文件上述两个特征的源码文件。存在于某个代码包中的普通的源码文件。</p><p>库源码文件被安装后，相应的归档文件（.a 文件）会被存放到当前工作区的 pkg 的平台相关目录下。</p><p>（3）测试源码文件</p><p>名称以 _test.go 为后缀的代码文件，并且必须包含 Test 或者 Benchmark 名称前缀的函数。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>
<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>TestXXX</span>( <span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {

}

</code></pre></div><p>名称以 Test 为名称前缀的函数，只能接受 *testing.T 的参数，这种测试函数是功能测试函数。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>
<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>BenchmarkXXX</span>( <span style=color:#a6e22e>b</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>B</span>) {

}

</code></pre></div><p>名称以 Benchmark 为名称前缀的函数，只能接受 *testing.B 的参数，这种测试函数是性能测试函数。</p><p>现在答案就很明显了：</p><p>命令源码文件是可以单独运行的。可以使用 go run 命令直接运行，也可以通过 go build 或 go install 命令得到相应的可执行文件。所以命令源码文件是可以在机器的任何目录下运行的。</p><p>举个例子：</p><p>比如平时我们在 LeetCode 上刷算法题，这时候写的就是一个程序，这就是命令源码文件，可以在电脑的任意一个文件夹新建一个 go 文件就可以开始刷题了，写完就可以运行，对比执行结果，答案对了就可以提交代码。</p><p>但是公司项目里面的代码就不能这样了，只能存放在 GOPATH 目录下。因为公司项目不可能只有命令源码文件的，肯定是包含库源码文件，甚至包含测试源码文件的。</p><h3 id=3gobin>3.GOBIN</h3><p>该环境变量的值为 Go 程序的可执行文件的目录。</p><h3 id=4path>4.PATH</h3><p>为了方便使用 Go 语言命令和 Go 程序的可执行文件，需要添加其值。追加的操作还是用<code>：</code>分隔。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>
<span style=color:#a6e22e>export</span> <span style=color:#a6e22e>PATH</span>=<span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>PATH</span>:<span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>GOBIN</span>

</code></pre></div><p>以上就是关于 Go 的4个重要环境变量的理解。还有一些其他的环境变量，用 go env 命令就可以查看。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>YDZ</span> ~ $  <span style=color:#a6e22e>go</span> <span style=color:#a6e22e>env</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>GOARCH</span>=<span style=color:#e6db74>&#34;amd64&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>GOBIN</span>=<span style=color:#e6db74>&#34;/Users/YDZ/Ele_Project/clairstormeye/bin&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>GOEXE</span>=<span style=color:#e6db74>&#34;&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>GOHOSTARCH</span>=<span style=color:#e6db74>&#34;amd64&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>GOHOSTOS</span>=<span style=color:#e6db74>&#34;darwin&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>GOOS</span>=<span style=color:#e6db74>&#34;darwin&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>GOPATH</span>=<span style=color:#e6db74>&#34;/Users/YDZ/Ele_Project/clairstormeye&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>GORACE</span>=<span style=color:#e6db74>&#34;&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>GOROOT</span>=<span style=color:#e6db74>&#34;/usr/local/Cellar/go/1.8.3/libexec&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>GOTOOLDIR</span>=<span style=color:#e6db74>&#34;/usr/local/Cellar/go/1.8.3/libexec/pkg/tool/darwin_amd64&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>GCCGO</span>=<span style=color:#e6db74>&#34;gccgo&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CC</span>=<span style=color:#e6db74>&#34;clang&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>GOGCCFLAGS</span>=<span style=color:#e6db74>&#34;-fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=/var/folders/66/dcf61ty92rgd_xftrsxgx5yr0000gn/T/go-build977187889=/tmp/go-build -gno-record-gcc-switches -fno-common&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CXX</span>=<span style=color:#e6db74>&#34;clang++&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CGO_ENABLED</span>=<span style=color:#e6db74>&#34;1&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>PKG_CONFIG</span>=<span style=color:#e6db74>&#34;pkg-config&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CGO_CFLAGS</span>=<span style=color:#e6db74>&#34;-g -O2&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CGO_CPPFLAGS</span>=<span style=color:#e6db74>&#34;&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CGO_CXXFLAGS</span>=<span style=color:#e6db74>&#34;-g -O2&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CGO_FFLAGS</span>=<span style=color:#e6db74>&#34;-g -O2&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>CGO_LDFLAGS</span>=<span style=color:#e6db74>&#34;-g -O2&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p><img src=https://img.halfrost.com/Blog/ArticleImage/55_5.png alt></p><p>在探索 Go 的编译命令之前，需要说明的一点是：</p><p>Go 程序是通过 package 来组织的。</p><p>package （假设我们的例子中是 package main）这一行告诉我们当前文件属于哪个包，而包名 main 则告诉我们它是一个可独立运行的包，它在编译后会产生可执行文件。除了 main 包之外，其它的包最后都会生成 *.a 文件（也就是包文件）并放置在 $GOPATH/pkg/$GOOS_$GOARCH中（以 Mac 为例就是 $GOPATH/pkg/darwin_amd64 ）。</p><p>Go 使用 package（和 Python 的模块类似）来组织代码。main.main() 函数(这个函数位于主包）是每一个独立的可运行程序的入口点。</p><blockquote><p>每一个可独立运行的 Go 程序，必定包含一个 package main，在这个 main 包中必定包含一个入口函数 main，而这个函数既没有参数，也没有返回值。</p></blockquote><h2 id=二-初探-go-的编译过程>二. 初探 Go 的编译过程</h2><p>目前 Go 最新版1.8.3里面基本命令只有以下的16个。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>
	<span style=color:#a6e22e>build</span>       <span style=color:#a6e22e>compile</span> <span style=color:#a6e22e>packages</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>dependencies</span>
	<span style=color:#a6e22e>clean</span>       <span style=color:#a6e22e>remove</span> <span style=color:#a6e22e>object</span> <span style=color:#a6e22e>files</span>
	<span style=color:#a6e22e>doc</span>         <span style=color:#a6e22e>show</span> <span style=color:#a6e22e>documentation</span> <span style=color:#66d9ef>for</span> <span style=color:#f92672>package</span> <span style=color:#a6e22e>or</span> <span style=color:#a6e22e>symbol</span>
	<span style=color:#a6e22e>env</span>         <span style=color:#a6e22e>print</span> <span style=color:#a6e22e>Go</span> <span style=color:#a6e22e>environment</span> <span style=color:#a6e22e>information</span>
	<span style=color:#a6e22e>bug</span>         <span style=color:#a6e22e>start</span> <span style=color:#a6e22e>a</span> <span style=color:#a6e22e>bug</span> <span style=color:#a6e22e>report</span>
	<span style=color:#a6e22e>fix</span>         <span style=color:#a6e22e>run</span> <span style=color:#66d9ef>go</span> <span style=color:#a6e22e>tool</span> <span style=color:#a6e22e>fix</span> <span style=color:#a6e22e>on</span> <span style=color:#a6e22e>packages</span>
	<span style=color:#a6e22e>fmt</span>         <span style=color:#a6e22e>run</span> <span style=color:#a6e22e>gofmt</span> <span style=color:#a6e22e>on</span> <span style=color:#f92672>package</span> <span style=color:#a6e22e>sources</span>
	<span style=color:#a6e22e>generate</span>    <span style=color:#a6e22e>generate</span> <span style=color:#a6e22e>Go</span> <span style=color:#a6e22e>files</span> <span style=color:#a6e22e>by</span> <span style=color:#a6e22e>processing</span> <span style=color:#a6e22e>source</span>
	<span style=color:#a6e22e>get</span>         <span style=color:#a6e22e>download</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>install</span> <span style=color:#a6e22e>packages</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>dependencies</span>
	<span style=color:#a6e22e>install</span>     <span style=color:#a6e22e>compile</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>install</span> <span style=color:#a6e22e>packages</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>dependencies</span>
	<span style=color:#a6e22e>list</span>        <span style=color:#a6e22e>list</span> <span style=color:#a6e22e>packages</span>
	<span style=color:#a6e22e>run</span>         <span style=color:#a6e22e>compile</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>run</span> <span style=color:#a6e22e>Go</span> <span style=color:#a6e22e>program</span>
	<span style=color:#a6e22e>test</span>        <span style=color:#a6e22e>test</span> <span style=color:#a6e22e>packages</span>
	<span style=color:#a6e22e>tool</span>        <span style=color:#a6e22e>run</span> <span style=color:#a6e22e>specified</span> <span style=color:#66d9ef>go</span> <span style=color:#a6e22e>tool</span>
	<span style=color:#a6e22e>version</span>     <span style=color:#a6e22e>print</span> <span style=color:#a6e22e>Go</span> <span style=color:#a6e22e>version</span>
	<span style=color:#a6e22e>vet</span>         <span style=color:#a6e22e>run</span> <span style=color:#66d9ef>go</span> <span style=color:#a6e22e>tool</span> <span style=color:#a6e22e>vet</span> <span style=color:#a6e22e>on</span> <span style=color:#a6e22e>packages</span>



</code></pre></div><p>其中和编译相关的有 build、get、install、run 这4个。接下来就依次看看这四个的作用。</p><p>在详细分析这4个命令之前，先罗列一下通用的命令标记，以下这些命令都可适用的：</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/55_6.png alt></p><h3 id=1-go-run>1. go run</h3><p>专门用来运行命令源码文件的命令，<strong>注意，这个命令不是用来运行所有 Go 的源码文件的！</strong></p><p>go run 命令只能接受一个命令源码文件以及若干个库源码文件（必须同属于 main 包）作为文件参数，且<strong>不能接受测试源码文件</strong>。它在执行时会检查源码文件的类型。如果参数中有多个或者没有命令源码文件，那么 go run 命令就只会打印错误提示信息并退出，而不会继续执行。</p><p>这个命令具体干了些什么事情呢？来分析分析：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>YDZ</span> ~<span style=color:#e6db74>/LeetCode_Go/</span><span style=color:#a6e22e>helloworld</span><span style=color:#e6db74>/src/</span><span style=color:#a6e22e>me</span> $  <span style=color:#a6e22e>go</span> <span style=color:#a6e22e>run</span> -<span style=color:#a6e22e>n</span> <span style=color:#a6e22e>helloworld</span>.<span style=color:#a6e22e>go</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>#<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span># <span style=color:#a6e22e>command</span>-<span style=color:#a6e22e>line</span>-<span style=color:#a6e22e>arguments</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>#<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>mkdir</span> -<span style=color:#a6e22e>p</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/command-line-arguments/</span><span style=color:#a6e22e>_obj</span>/<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>mkdir</span> -<span style=color:#a6e22e>p</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/command-line-arguments/</span><span style=color:#a6e22e>_obj</span><span style=color:#e6db74>/exe/</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>cd</span> <span style=color:#e6db74>/Users/</span><span style=color:#a6e22e>YDZ</span><span style=color:#e6db74>/LeetCode_Go/</span><span style=color:#a6e22e>helloworld</span><span style=color:#e6db74>/src/</span><span style=color:#a6e22e>me</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#e6db74>/usr/</span><span style=color:#a6e22e>local</span><span style=color:#e6db74>/Cellar/</span><span style=color:#a6e22e>go</span><span style=color:#e6db74>/1.8.3/</span><span style=color:#a6e22e>libexec</span><span style=color:#e6db74>/pkg/</span><span style=color:#a6e22e>tool</span><span style=color:#e6db74>/darwin_amd64/</span><span style=color:#a6e22e>compile</span> -<span style=color:#a6e22e>o</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/command-line-arguments.a -trimpath $WORK -p main -complete -buildid 2841ae50ca62b7a3671974e64d76e198a2155ee7 -D _/</span><span style=color:#a6e22e>Users</span><span style=color:#e6db74>/YDZ/</span><span style=color:#a6e22e>LeetCode_Go</span><span style=color:#e6db74>/helloworld/</span><span style=color:#a6e22e>src</span><span style=color:#e6db74>/me -I $WORK -pack ./</span><span style=color:#a6e22e>helloworld</span>.<span style=color:#a6e22e>go</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>cd</span> .<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#e6db74>/usr/</span><span style=color:#a6e22e>local</span><span style=color:#e6db74>/Cellar/</span><span style=color:#a6e22e>go</span><span style=color:#e6db74>/1.8.3/</span><span style=color:#a6e22e>libexec</span><span style=color:#e6db74>/pkg/</span><span style=color:#a6e22e>tool</span><span style=color:#e6db74>/darwin_amd64/</span><span style=color:#a6e22e>link</span> -<span style=color:#a6e22e>o</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/command-line-arguments/</span><span style=color:#a6e22e>_obj</span><span style=color:#e6db74>/exe/</span><span style=color:#a6e22e>helloworld</span> -<span style=color:#a6e22e>L</span> $<span style=color:#a6e22e>WORK</span> -<span style=color:#a6e22e>w</span> -<span style=color:#a6e22e>extld</span>=<span style=color:#a6e22e>clang</span> -<span style=color:#a6e22e>buildmode</span>=<span style=color:#a6e22e>exe</span> -<span style=color:#a6e22e>buildid</span>=<span style=color:#ae81ff>2841</span>ae<span style=color:#ae81ff>50</span>ca<span style=color:#ae81ff>62</span>b<span style=color:#ae81ff>7</span>a<span style=color:#ae81ff>3671974</span>e<span style=color:#ae81ff>64</span>d<span style=color:#ae81ff>76</span>e<span style=color:#ae81ff>198</span>a<span style=color:#ae81ff>2155</span>ee<span style=color:#ae81ff>7</span> $<span style=color:#a6e22e>WORK</span>/<span style=color:#a6e22e>command</span>-<span style=color:#a6e22e>line</span>-<span style=color:#a6e22e>arguments</span>.<span style=color:#a6e22e>a</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/command-line-arguments/</span><span style=color:#a6e22e>_obj</span><span style=color:#e6db74>/exe/</span><span style=color:#a6e22e>helloworld</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>这里可以看到创建了两个临时文件夹 _obj 和 exe，先执行了 compile 命令，然后 link，生成了归档文件.a 和 最终可执行文件，最终的可执行文件放在 exe 文件夹里面。命令的最后一步就是执行了可执行文件。</p><p>总结一下如下图：</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/55_7.png alt></p><p>举个例子，生成的临时文件可以用 <code>go run -work</code> 看到，比如当前生成的临时文件夹是如下的路径：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#e6db74>/var/</span><span style=color:#a6e22e>folders</span><span style=color:#e6db74>/66/</span><span style=color:#a6e22e>dcf61ty92rgd_xftrsxgx5yr0000gn</span><span style=color:#e6db74>/T/</span><span style=color:#a6e22e>go</span>-<span style=color:#a6e22e>build876472071</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>打印目录结构：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>├── <span style=color:#a6e22e>command</span>-<span style=color:#a6e22e>line</span>-<span style=color:#a6e22e>arguments</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>│   └── <span style=color:#a6e22e>_obj</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>│       └── <span style=color:#a6e22e>exe</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>│           └── <span style=color:#a6e22e>helloworld</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>└── <span style=color:#a6e22e>command</span>-<span style=color:#a6e22e>line</span>-<span style=color:#a6e22e>arguments</span>.<span style=color:#a6e22e>a</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>可以看到，最终<code>go run</code>命令是生成了2个文件，一个是归档文件，一个是可执行文件。command-line-arguments 这个归档文件是 Go 语言为命令源码文件临时指定的一个代码包。在接下来的几个命令中，生成的临时代码包都叫这个名字。</p><p>go run 命令在第二次执行的时候，如果发现导入的代码包没有发生变化，那么 go run 不会再次编译这个导入的代码包。直接静态链接进来。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>go</span> <span style=color:#a6e22e>run</span> -<span style=color:#a6e22e>a</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>加上<code>-a</code>的标记可以强制编译所有的代码，即使归档文件.a存在，也会重新编译。</p><p>如果嫌弃编译速度慢，可以加上<code>-p n</code>，这个是并行编译，n是并行的数量。n一般为逻辑 CPU 的个数。</p><h3 id=2-go-build>2. go build</h3><p>当代码包中有且仅有一个命令源码文件的时候，在文件夹所在目录中执行 go build 命令，会在该目录下生成一个与目录同名的可执行文件。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#e6db74>//</span> <span style=color:#a6e22e>假设当前文件夹名叫</span> <span style=color:#a6e22e>myGoRepo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>YDZ</span>：~<span style=color:#e6db74>/helloworld/</span><span style=color:#a6e22e>src</span>/<span style=color:#a6e22e>myGoRepo</span> $ <span style=color:#a6e22e>ls</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>helloworld</span>.<span style=color:#a6e22e>go</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>YDZ</span>：~<span style=color:#e6db74>/helloworld/</span><span style=color:#a6e22e>src</span>/<span style=color:#a6e22e>myGoRepo</span> $ <span style=color:#a6e22e>go</span> <span style=color:#a6e22e>build</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>YDZ</span>：~<span style=color:#e6db74>/helloworld/</span><span style=color:#a6e22e>src</span>/<span style=color:#a6e22e>myGoRepo</span> $ <span style=color:#a6e22e>ls</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>helloworld</span>.<span style=color:#a6e22e>go</span>  <span style=color:#a6e22e>myGoRepo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>于是在当前目录直接生成了以当前文件夹为名的可执行文件（ 在 Mac 平台下是 Unix executable 文件，在 Windows 平台下是 exe 文件）</p><p>我们先记录一下这个可执行文件的 md5 值</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>YDZ</span> ~<span style=color:#e6db74>/helloworld/</span><span style=color:#a6e22e>src</span><span style=color:#e6db74>/myGoRepo $  md5 /</span><span style=color:#a6e22e>Users</span><span style=color:#e6db74>/YDZ/</span><span style=color:#a6e22e>helloworld</span><span style=color:#e6db74>/src/</span><span style=color:#a6e22e>myGoRepo</span>/<span style=color:#a6e22e>myGoRepo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>MD5</span> (<span style=color:#e6db74>/Users/</span><span style=color:#a6e22e>YDZ</span><span style=color:#e6db74>/helloworld/</span><span style=color:#a6e22e>src</span><span style=color:#e6db74>/myGoRepo/</span><span style=color:#a6e22e>myGoRepo</span>) = <span style=color:#ae81ff>1</span>f<span style=color:#ae81ff>23</span>f<span style=color:#ae81ff>6</span>efec<span style=color:#ae81ff>752</span>ed<span style=color:#ae81ff>34</span>b<span style=color:#ae81ff>9</span>bd<span style=color:#ae81ff>22</span>b<span style=color:#ae81ff>5</span>fa<span style=color:#ae81ff>1</span>ddce<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>但是这种情况下，如果使用 go install 命令，如果 GOPATH 里面只有一个工作区，就会在当前工作区的 bin 目录下生成相应的可执行文件。如果 GOPATH 下有多个工作区，则是在 GOBIN 下生成对应的可执行文件。</p><p>咱们先接着刚刚 go build 继续操作。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>YDZ</span>：~<span style=color:#e6db74>/helloworld/</span><span style=color:#a6e22e>src</span>/<span style=color:#a6e22e>myGoRepo</span> $ <span style=color:#a6e22e>ls</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>helloworld</span>.<span style=color:#a6e22e>go</span> <span style=color:#a6e22e>myGoRepo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>YDZ</span>：~<span style=color:#e6db74>/helloworld/</span><span style=color:#a6e22e>src</span>/<span style=color:#a6e22e>myGoRepo</span> $ <span style=color:#a6e22e>go</span> <span style=color:#a6e22e>install</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>YDZ</span>：~<span style=color:#e6db74>/helloworld/</span><span style=color:#a6e22e>src</span>/<span style=color:#a6e22e>myGoRepo</span> $ <span style=color:#a6e22e>ls</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>helloworld</span>.<span style=color:#a6e22e>go</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>执行完 go install 会发现可执行文件不见了！去哪里了呢？其实是被移动到了 bin 目录下了（如果 GOPATH 下有多个工作区，就会放在
GOBIN 目录下）。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>YDZ</span>：~<span style=color:#e6db74>/helloworld/</span><span style=color:#a6e22e>bin</span> $ <span style=color:#a6e22e>ls</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>myGoRepo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>再来比对一下这个文件的 md5 值：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>YDZ</span> ~<span style=color:#e6db74>/helloworld/</span><span style=color:#a6e22e>bin</span> $  <span style=color:#a6e22e>md5</span> <span style=color:#e6db74>/Users/</span><span style=color:#a6e22e>YDZ</span><span style=color:#e6db74>/helloworld/</span><span style=color:#a6e22e>bin</span>/<span style=color:#a6e22e>myGoRepo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>MD5</span> (<span style=color:#e6db74>/Users/</span><span style=color:#a6e22e>YDZ</span><span style=color:#e6db74>/helloworld/</span><span style=color:#a6e22e>bin</span>/<span style=color:#a6e22e>myGoRepo</span>) = <span style=color:#ae81ff>1</span>f<span style=color:#ae81ff>23</span>f<span style=color:#ae81ff>6</span>efec<span style=color:#ae81ff>752</span>ed<span style=color:#ae81ff>34</span>b<span style=color:#ae81ff>9</span>bd<span style=color:#ae81ff>22</span>b<span style=color:#ae81ff>5</span>fa<span style=color:#ae81ff>1</span>ddce<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>和 go build 命令执行出来的可执行文件完全一致。我们可以大胆猜想，是把刚刚 go build 命令执行出来的可执行文件移动到了 bin 目录下（如果 GOPATH 下有多个工作区，就会放在 GOBIN 目录下）。</p><p>那 go build 和 go install 究竟干了些什么呢？</p><p>这个问题一会再来解释，先来说说 go build。</p><p>go build 用于编译我们指定的源码文件或代码包以及它们的依赖包。，但是<strong>注意如果用来编译非命令源码文件，即库源码文件，go build 执行完是不会产生任何结果的。这种情况下，go build 命令只是检查库源码文件的有效性，只会做检查性的编译，而不会输出任何结果文件。</strong></p><p>go build 编译命令源码文件，则会在该命令的执行目录中生成一个可执行文件，上面的例子也印证了这个过程。</p><p>go build 后面不追加目录路径的话，它就把当前目录作为代码包并进行编译。go build 命令后面如果跟了代码包导入路径作为参数，那么该代码包及其依赖都会被编译。</p><p>go run 的<code>-a</code>标记在 go build 这里同样奏效，go build 加了<code>-a</code>强制编译所有涉及到的代码包，不加<code>-a</code>只会编译归档文件不是最新的代码包。</p><p>go build 使用<code>-o</code>标记可以指定输出文件（在这个示例中指的是可执行文件）的名称。它是最常用的一个 go build 命令标记。但需要注意的是，当使用标记<code>-o</code>的时候，不能同时对多个代码包进行编译。</p><p>标记<code>-i</code>会使 go build 命令安装那些编译目标依赖的且还未被安装的代码包。这里的安装意味着产生与代码包对应的归档文件，并将其放置到当前工作区目录的 pkg 子目录的相应子目录中。在默认情况下，这些代码包是不会被安装的。</p><p>go build 常用的一些标记如下：</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/55_8.png alt></p><p>go build 命令究竟做了些什么呢？我们来打印一下每一步的执行过程。先看看命令源码文件执行了 go build 干了什么事情。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>#<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span># <span style=color:#a6e22e>command</span>-<span style=color:#a6e22e>line</span>-<span style=color:#a6e22e>arguments</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>#<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>mkdir</span> -<span style=color:#a6e22e>p</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/command-line-arguments/</span><span style=color:#a6e22e>_obj</span>/<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>mkdir</span> -<span style=color:#a6e22e>p</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/command-line-arguments/</span><span style=color:#a6e22e>_obj</span><span style=color:#e6db74>/exe/</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>cd</span> <span style=color:#e6db74>/Users/</span><span style=color:#a6e22e>YDZ</span><span style=color:#e6db74>/MyGitHub/</span><span style=color:#a6e22e>LeetCode_Go</span><span style=color:#e6db74>/helloworld/</span><span style=color:#a6e22e>src</span>/<span style=color:#a6e22e>me</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#e6db74>/usr/</span><span style=color:#a6e22e>local</span><span style=color:#e6db74>/Cellar/</span><span style=color:#a6e22e>go</span><span style=color:#e6db74>/1.8.3/</span><span style=color:#a6e22e>libexec</span><span style=color:#e6db74>/pkg/</span><span style=color:#a6e22e>tool</span><span style=color:#e6db74>/darwin_amd64/</span><span style=color:#a6e22e>compile</span> -<span style=color:#a6e22e>o</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/command-line-arguments.a -trimpath $WORK -p main -complete -buildid 2841ae50ca62b7a3671974e64d76e198a2155ee7 -D _/</span><span style=color:#a6e22e>Users</span><span style=color:#e6db74>/YDZ/</span><span style=color:#a6e22e>MyGitHub</span><span style=color:#e6db74>/LeetCode_Go/</span><span style=color:#a6e22e>helloworld</span><span style=color:#e6db74>/src/</span><span style=color:#a6e22e>me</span> -<span style=color:#a6e22e>I</span> $<span style=color:#a6e22e>WORK</span> -<span style=color:#a6e22e>pack</span> ./<span style=color:#a6e22e>helloworld</span>.<span style=color:#a6e22e>go</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>cd</span> .<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#e6db74>/usr/</span><span style=color:#a6e22e>local</span><span style=color:#e6db74>/Cellar/</span><span style=color:#a6e22e>go</span><span style=color:#e6db74>/1.8.3/</span><span style=color:#a6e22e>libexec</span><span style=color:#e6db74>/pkg/</span><span style=color:#a6e22e>tool</span><span style=color:#e6db74>/darwin_amd64/</span><span style=color:#a6e22e>link</span> -<span style=color:#a6e22e>o</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/command-line-arguments/</span><span style=color:#a6e22e>_obj</span><span style=color:#e6db74>/exe/</span><span style=color:#a6e22e>a</span>.<span style=color:#a6e22e>out</span> -<span style=color:#a6e22e>L</span> $<span style=color:#a6e22e>WORK</span> -<span style=color:#a6e22e>extld</span>=<span style=color:#a6e22e>clang</span> -<span style=color:#a6e22e>buildmode</span>=<span style=color:#a6e22e>exe</span> -<span style=color:#a6e22e>buildid</span>=<span style=color:#ae81ff>2841</span>ae<span style=color:#ae81ff>50</span>ca<span style=color:#ae81ff>62</span>b<span style=color:#ae81ff>7</span>a<span style=color:#ae81ff>3671974</span>e<span style=color:#ae81ff>64</span>d<span style=color:#ae81ff>76</span>e<span style=color:#ae81ff>198</span>a<span style=color:#ae81ff>2155</span>ee<span style=color:#ae81ff>7</span> $<span style=color:#a6e22e>WORK</span>/<span style=color:#a6e22e>command</span>-<span style=color:#a6e22e>line</span>-<span style=color:#a6e22e>arguments</span>.<span style=color:#a6e22e>a</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>mv</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/command-line-arguments/</span><span style=color:#a6e22e>_obj</span><span style=color:#e6db74>/exe/</span><span style=color:#a6e22e>a</span>.<span style=color:#a6e22e>out</span> <span style=color:#a6e22e>helloworld</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>可以看到，执行过程和 go run 大体相同，唯一不同的就是在最后一步，go run 是执行了可执行文件，但是 go build 命令是把可执行文件移动到了当前目录的文件夹中。</p><p>打印看看生成的临时文件夹的树形结构</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>.<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>├── <span style=color:#a6e22e>command</span>-<span style=color:#a6e22e>line</span>-<span style=color:#a6e22e>arguments</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>│   └── <span style=color:#a6e22e>_obj</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>│       └── <span style=color:#a6e22e>exe</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>└── <span style=color:#a6e22e>command</span>-<span style=color:#a6e22e>line</span>-<span style=color:#a6e22e>arguments</span>.<span style=color:#a6e22e>a</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>和 go run 命令的结构基本一致，唯一的不同可执行文件不在 exe 文件夹中了，被移动到了当前执行 go build 的文件夹中了。</p><p>在来看看库源码文件执行了 go build 以后干了什么事情：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>#<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span># <span style=color:#a6e22e>_</span><span style=color:#e6db74>/Users/</span><span style=color:#a6e22e>YDZ</span><span style=color:#e6db74>/Downloads/</span><span style=color:#a6e22e>goc2p</span>-<span style=color:#a6e22e>master</span><span style=color:#e6db74>/src/</span><span style=color:#a6e22e>pkgtool</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>#<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>mkdir</span> -<span style=color:#a6e22e>p</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/_/</span><span style=color:#a6e22e>Users</span><span style=color:#e6db74>/YDZ/</span><span style=color:#a6e22e>Downloads</span><span style=color:#e6db74>/goc2p-master/</span><span style=color:#a6e22e>src</span><span style=color:#e6db74>/pkgtool/</span><span style=color:#a6e22e>_obj</span>/<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>mkdir</span> -<span style=color:#a6e22e>p</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/_/</span><span style=color:#a6e22e>Users</span><span style=color:#e6db74>/YDZ/</span><span style=color:#a6e22e>Downloads</span><span style=color:#e6db74>/goc2p-master/</span><span style=color:#a6e22e>src</span>/<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>cd</span> <span style=color:#e6db74>/Users/</span><span style=color:#a6e22e>YDZ</span><span style=color:#e6db74>/Downloads/</span><span style=color:#a6e22e>goc2p</span>-<span style=color:#a6e22e>master</span><span style=color:#e6db74>/src/</span><span style=color:#a6e22e>pkgtool</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#e6db74>/usr/</span><span style=color:#a6e22e>local</span><span style=color:#e6db74>/Cellar/</span><span style=color:#a6e22e>go</span><span style=color:#e6db74>/1.8.3/</span><span style=color:#a6e22e>libexec</span><span style=color:#e6db74>/pkg/</span><span style=color:#a6e22e>tool</span><span style=color:#e6db74>/darwin_amd64/</span><span style=color:#a6e22e>compile</span> -<span style=color:#a6e22e>o</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/_/</span><span style=color:#a6e22e>Users</span><span style=color:#e6db74>/YDZ/</span><span style=color:#a6e22e>Downloads</span><span style=color:#e6db74>/goc2p-master/</span><span style=color:#a6e22e>src</span><span style=color:#e6db74>/pkgtool.a -trimpath $WORK -p _/</span><span style=color:#a6e22e>Users</span><span style=color:#e6db74>/YDZ/</span><span style=color:#a6e22e>Downloads</span><span style=color:#e6db74>/goc2p-master/</span><span style=color:#a6e22e>src</span><span style=color:#e6db74>/pkgtool -complete -buildid cef542c3da6d3126cdae561b5f6e1470aff363ba -D _/</span><span style=color:#a6e22e>Users</span><span style=color:#e6db74>/YDZ/</span><span style=color:#a6e22e>Downloads</span><span style=color:#e6db74>/goc2p-master/</span><span style=color:#a6e22e>src</span><span style=color:#e6db74>/pkgtool -I $WORK -pack ./</span><span style=color:#a6e22e>envir</span>.<span style=color:#a6e22e>go</span> .<span style=color:#e6db74>/fpath.go ./</span><span style=color:#a6e22e>ipath</span>.<span style=color:#a6e22e>go</span> .<span style=color:#e6db74>/pnode.go ./</span><span style=color:#a6e22e>util</span>.<span style=color:#a6e22e>go</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>这里可以看到 go build 命令只是把库源码文件编译了一遍，其他什么事情都没有干。</p><p>再看看生成的临时文件夹的树形结构</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>.<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>└── <span style=color:#a6e22e>_</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    └── <span style=color:#a6e22e>Users</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>        └── <span style=color:#a6e22e>YDZ</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>            └── <span style=color:#a6e22e>Downloads</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>                └── <span style=color:#a6e22e>goc2p</span>-<span style=color:#a6e22e>master</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>                    └── <span style=color:#a6e22e>src</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>                        ├── <span style=color:#a6e22e>pkgtool</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>                        │   └── <span style=color:#a6e22e>_obj</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>                        └── <span style=color:#a6e22e>pkgtool</span>.<span style=color:#a6e22e>a</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>可以看到它的目录结构层级前段部分是该代码包所在本机的路径的相对路径。然后生成了归档文件 .a 文件。</p><p>总结一下如下图：</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/55_9.png alt></p><p>关于 go build 和 go install 的不同，接下来分析完 go install 就会明白了，接下来继续看 go install。</p><h3 id=3-go-install>3. go install</h3><p>go install 命令是用来编译并安装代码包或者源码文件的。</p><p>go install 用于编译并安装指定的代码包及它们的依赖包。当指定的代码包的依赖包还没有被编译和安装时，该命令会先去处理依赖包。与 go build 命令一样，传给 go install 命令的代码包参数应该以导入路径的形式提供。并且，go build 命令的绝大多数标记也都可以用于
go install 命令。实际上，go install 命令只比 go build 命令多做了一件事，即：安装编译后的结果文件到指定目录。</p><p>安装代码包会在当前工作区的 pkg 的平台相关目录下生成归档文件（即 .a 文件）。
安装命令源码文件会在当前工作区的 bin 目录（如果 GOPATH 下有多个工作区，就会放在 GOBIN 目录下）生成可执行文件。</p><p>同样，go install 命令如果后面不追加任何参数，它会把当前目录作为代码包并安装。这和 go build 命令是完全一样的。</p><p>go install 命令后面如果跟了代码包导入路径作为参数，那么该代码包及其依赖都会被安装。</p><p>go install 命令后面如果跟了命令源码文件以及相关库源码文件作为参数的话，只有这些文件会被编译并安装。</p><p>go install 命令究竟做了些什么呢？我们来打印一下每一步的执行过程。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>#<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span># <span style=color:#a6e22e>command</span>-<span style=color:#a6e22e>line</span>-<span style=color:#a6e22e>arguments</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>#<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>mkdir</span> -<span style=color:#a6e22e>p</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/command-line-arguments/</span><span style=color:#a6e22e>_obj</span>/<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>mkdir</span> -<span style=color:#a6e22e>p</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/command-line-arguments/</span><span style=color:#a6e22e>_obj</span><span style=color:#e6db74>/exe/</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>cd</span> <span style=color:#e6db74>/Users/</span><span style=color:#a6e22e>YDZ</span><span style=color:#e6db74>/MyGitHub/</span><span style=color:#a6e22e>LeetCode_Go</span><span style=color:#e6db74>/helloworld/</span><span style=color:#a6e22e>src</span>/<span style=color:#a6e22e>me</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#e6db74>/usr/</span><span style=color:#a6e22e>local</span><span style=color:#e6db74>/Cellar/</span><span style=color:#a6e22e>go</span><span style=color:#e6db74>/1.8.3/</span><span style=color:#a6e22e>libexec</span><span style=color:#e6db74>/pkg/</span><span style=color:#a6e22e>tool</span><span style=color:#e6db74>/darwin_amd64/</span><span style=color:#a6e22e>compile</span> -<span style=color:#a6e22e>o</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/command-line-arguments.a -trimpath $WORK -p main -complete -buildid 2841ae50ca62b7a3671974e64d76e198a2155ee7 -D _/</span><span style=color:#a6e22e>Users</span><span style=color:#e6db74>/YDZ/</span><span style=color:#a6e22e>MyGitHub</span><span style=color:#e6db74>/LeetCode_Go/</span><span style=color:#a6e22e>helloworld</span><span style=color:#e6db74>/src/</span><span style=color:#a6e22e>me</span> -<span style=color:#a6e22e>I</span> $<span style=color:#a6e22e>WORK</span> -<span style=color:#a6e22e>pack</span> ./<span style=color:#a6e22e>helloworld</span>.<span style=color:#a6e22e>go</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>cd</span> .<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#e6db74>/usr/</span><span style=color:#a6e22e>local</span><span style=color:#e6db74>/Cellar/</span><span style=color:#a6e22e>go</span><span style=color:#e6db74>/1.8.3/</span><span style=color:#a6e22e>libexec</span><span style=color:#e6db74>/pkg/</span><span style=color:#a6e22e>tool</span><span style=color:#e6db74>/darwin_amd64/</span><span style=color:#a6e22e>link</span> -<span style=color:#a6e22e>o</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/command-line-arguments/</span><span style=color:#a6e22e>_obj</span><span style=color:#e6db74>/exe/</span><span style=color:#a6e22e>a</span>.<span style=color:#a6e22e>out</span> -<span style=color:#a6e22e>L</span> $<span style=color:#a6e22e>WORK</span> -<span style=color:#a6e22e>extld</span>=<span style=color:#a6e22e>clang</span> -<span style=color:#a6e22e>buildmode</span>=<span style=color:#a6e22e>exe</span> -<span style=color:#a6e22e>buildid</span>=<span style=color:#ae81ff>2841</span>ae<span style=color:#ae81ff>50</span>ca<span style=color:#ae81ff>62</span>b<span style=color:#ae81ff>7</span>a<span style=color:#ae81ff>3671974</span>e<span style=color:#ae81ff>64</span>d<span style=color:#ae81ff>76</span>e<span style=color:#ae81ff>198</span>a<span style=color:#ae81ff>2155</span>ee<span style=color:#ae81ff>7</span> $<span style=color:#a6e22e>WORK</span>/<span style=color:#a6e22e>command</span>-<span style=color:#a6e22e>line</span>-<span style=color:#a6e22e>arguments</span>.<span style=color:#a6e22e>a</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>mkdir</span> -<span style=color:#a6e22e>p</span> <span style=color:#e6db74>/Users/</span><span style=color:#a6e22e>YDZ</span><span style=color:#e6db74>/Ele_Project/</span><span style=color:#a6e22e>clairstormeye</span><span style=color:#e6db74>/bin/</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>mv</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/command-line-arguments/</span><span style=color:#a6e22e>_obj</span><span style=color:#e6db74>/exe/</span><span style=color:#a6e22e>a</span>.<span style=color:#a6e22e>out</span> <span style=color:#e6db74>/Users/</span><span style=color:#a6e22e>YDZ</span><span style=color:#e6db74>/Ele_Project/</span><span style=color:#a6e22e>clairstormeye</span><span style=color:#e6db74>/bin/</span><span style=color:#a6e22e>helloworld</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>前面几步依旧和 go run 、go build 完全一致，只是最后一步的差别，go install 会把命令源码文件安装到当前工作区的 bin 目录（如果 GOPATH 下有多个工作区，就会放在 GOBIN 目录下）。如果是库源码文件，就会被安装到当前工作区的 pkg 的平台相关目录下。</p><p>还是来看看 go install 生成的临时文件夹的结构：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>.<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>├── <span style=color:#a6e22e>command</span>-<span style=color:#a6e22e>line</span>-<span style=color:#a6e22e>arguments</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>│   └── <span style=color:#a6e22e>_obj</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>│       └── <span style=color:#a6e22e>exe</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>└── <span style=color:#a6e22e>command</span>-<span style=color:#a6e22e>line</span>-<span style=color:#a6e22e>arguments</span>.<span style=color:#a6e22e>a</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>结构和运行了 go build 命令一样，最终生成的文件也都被移动到了相对应的目标目录中。</p><p>总结一下如下图：</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/55_10.png alt></p><p>在安装多个库源码文件时有可能遇到如下的问题：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#a6e22e>hc</span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>ubt</span>:<span style=color:#960050;background-color:#1e0010>~</span><span style=color:#f92672>/</span><span style=color:#a6e22e>golang</span><span style=color:#f92672>/</span><span style=color:#a6e22e>goc2p</span><span style=color:#f92672>/</span><span style=color:#a6e22e>src</span><span style=color:#f92672>/</span><span style=color:#a6e22e>pkgtool</span><span style=color:#960050;background-color:#1e0010>$</span> <span style=color:#66d9ef>go</span> <span style=color:#a6e22e>install</span> <span style=color:#a6e22e>envir</span>.<span style=color:#66d9ef>go</span> <span style=color:#a6e22e>fpath</span>.<span style=color:#66d9ef>go</span> <span style=color:#a6e22e>ipath</span>.<span style=color:#66d9ef>go</span> <span style=color:#a6e22e>pnode</span>.<span style=color:#66d9ef>go</span> <span style=color:#a6e22e>util</span>.<span style=color:#66d9ef>go</span>
<span style=color:#66d9ef>go</span> <span style=color:#a6e22e>install</span>: <span style=color:#a6e22e>no</span> <span style=color:#a6e22e>install</span> <span style=color:#a6e22e>location</span> <span style=color:#66d9ef>for</span> .<span style=color:#66d9ef>go</span> <span style=color:#a6e22e>files</span> <span style=color:#a6e22e>listed</span> <span style=color:#a6e22e>on</span> <span style=color:#a6e22e>command</span> <span style=color:#a6e22e>line</span> (<span style=color:#a6e22e>GOBIN</span> <span style=color:#a6e22e>not</span> <span style=color:#a6e22e>set</span>)
</code></pre></div><p>而且，在我们为环境变量 GOBIN 设置了正确的值之后，这个错误提示信息仍然会出现。这是因为，只有在安装命令源码文件的时候，命令程序才会将环境变量 GOBIN 的值作为结果文件的存放目录。而在安装库源码文件时，在命令程序内部的代表结果文件存放目录路径的那个变量不会被赋值。最后，命令程序会发现它依然是个无效的空值。所以，命令程序会同样返回一个关于“无安装位置”的错误。这就引出一个结论，我们只能使用安装代码包的方式来安装库源码文件，而不能在 go install 命令罗列并安装它们。另外，go install 命令目前无法接受标记<code>-o</code>以自定义结果文件的存放位置。这也从侧面说明了
go install 命令不支持针对库源码文件的安装操作。</p><h3 id=4-go-get>4. go get</h3><p>go get 命令用于从远程代码仓库（比如 Github ）上下载并安装代码包。<strong>注意，go get 命令会把当前的代码包下载到 $GOPATH 中的第一个工作区的 src 目录中，并安装。</strong></p><p>如果在 go get 下载过程中加入<code>-d</code> 标记，那么下载操作只会执行下载动作，而不执行安装动作。比如有些非常特殊的代码包在安装过程中需要有特殊的处理，所以我们需要先下载下来，所以就会用到<code>-d</code> 标记。</p><p>还有一个很有用的标记是<code>-u</code>标记，加上它可以利用网络来更新已有的代码包及其依赖包。如果已经下载过一个代码包，但是这个代码包又有更新了，那么这时候可以直接用<code>-u</code>标记来更新本地的对应的代码包。如果不加这个<code>-u</code>标记，执行 go get 一个已有的代码包，会发现命令什么都不执行。只有加了<code>-u</code>标记，命令会去执行 git pull 命令拉取最新的代码包的最新版本，下载并安装。</p><p>命令 go get 还有一个很值得称道的功能——智能下载。在使用它检出或更新代码包之后，它会寻找与本地已安装 Go 语言的版本号相对应的标签（tag）或分支（branch）。比如，本机安装 Go 语言的版本是1.x，那么 go get 命令会在该代码包的远程仓库中寻找名为 “go1” 的标签或者分支。如果找到指定的标签或者分支，则将本地代码包的版本切换到此标签或者分支。如果没有找到指定的标签或者分支，则将本地代码包的版本切换到主干的最新版本。</p><p>go get 常用的一些标记如下：</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/55_11.png alt></p><p>go get 命令究竟做了些什么呢？我们还是来打印一下每一步的执行过程。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>cd</span> .<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>git</span> <span style=color:#a6e22e>clone</span> <span style=color:#a6e22e>https</span>:<span style=color:#e6db74>//</span><span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#e6db74>/go-errors/</span><span style=color:#a6e22e>errors</span> <span style=color:#e6db74>/Users/</span><span style=color:#a6e22e>YDZ</span><span style=color:#e6db74>/Ele_Project/</span><span style=color:#a6e22e>clairstormeye</span><span style=color:#e6db74>/src/</span><span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#e6db74>/go-errors/</span><span style=color:#a6e22e>errors</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>cd</span> <span style=color:#e6db74>/Users/</span><span style=color:#a6e22e>YDZ</span><span style=color:#e6db74>/Ele_Project/</span><span style=color:#a6e22e>clairstormeye</span><span style=color:#e6db74>/src/</span><span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#e6db74>/go-errors/</span><span style=color:#a6e22e>errors</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>git</span> <span style=color:#a6e22e>submodule</span> <span style=color:#a6e22e>update</span> --<span style=color:#a6e22e>init</span> --<span style=color:#a6e22e>recursive</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>cd</span> <span style=color:#e6db74>/Users/</span><span style=color:#a6e22e>YDZ</span><span style=color:#e6db74>/Ele_Project/</span><span style=color:#a6e22e>clairstormeye</span><span style=color:#e6db74>/src/</span><span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#e6db74>/go-errors/</span><span style=color:#a6e22e>errors</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>git</span> <span style=color:#a6e22e>show</span>-<span style=color:#a6e22e>ref</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>cd</span> <span style=color:#e6db74>/Users/</span><span style=color:#a6e22e>YDZ</span><span style=color:#e6db74>/Ele_Project/</span><span style=color:#a6e22e>clairstormeye</span><span style=color:#e6db74>/src/</span><span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#e6db74>/go-errors/</span><span style=color:#a6e22e>errors</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>git</span> <span style=color:#a6e22e>submodule</span> <span style=color:#a6e22e>update</span> --<span style=color:#a6e22e>init</span> --<span style=color:#a6e22e>recursive</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>WORK</span>=<span style=color:#e6db74>/var/</span><span style=color:#a6e22e>folders</span><span style=color:#e6db74>/66/</span><span style=color:#a6e22e>dcf61ty92rgd_xftrsxgx5yr0000gn</span><span style=color:#e6db74>/T/</span><span style=color:#a6e22e>go</span>-<span style=color:#a6e22e>build124856678</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>mkdir</span> -<span style=color:#a6e22e>p</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/github.com/</span><span style=color:#a6e22e>go</span>-<span style=color:#a6e22e>errors</span><span style=color:#e6db74>/errors/</span><span style=color:#a6e22e>_obj</span>/<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>mkdir</span> -<span style=color:#a6e22e>p</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/github.com/</span><span style=color:#a6e22e>go</span>-<span style=color:#a6e22e>errors</span>/<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>cd</span> <span style=color:#e6db74>/Users/</span><span style=color:#a6e22e>YDZ</span><span style=color:#e6db74>/Ele_Project/</span><span style=color:#a6e22e>clairstormeye</span><span style=color:#e6db74>/src/</span><span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#e6db74>/go-errors/</span><span style=color:#a6e22e>errors</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#e6db74>/usr/</span><span style=color:#a6e22e>local</span><span style=color:#e6db74>/Cellar/</span><span style=color:#a6e22e>go</span><span style=color:#e6db74>/1.8.3/</span><span style=color:#a6e22e>libexec</span><span style=color:#e6db74>/pkg/</span><span style=color:#a6e22e>tool</span><span style=color:#e6db74>/darwin_amd64/</span><span style=color:#a6e22e>compile</span> -<span style=color:#a6e22e>o</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/github.com/</span><span style=color:#a6e22e>go</span>-<span style=color:#a6e22e>errors</span><span style=color:#e6db74>/errors.a -trimpath $WORK -p github.com/</span><span style=color:#a6e22e>go</span>-<span style=color:#a6e22e>errors</span><span style=color:#e6db74>/errors -complete -buildid bb3526a8c1c21853f852838637d531b9fcd57d30 -D _/</span><span style=color:#a6e22e>Users</span><span style=color:#e6db74>/YDZ/</span><span style=color:#a6e22e>Ele_Project</span><span style=color:#e6db74>/clairstormeye/</span><span style=color:#a6e22e>src</span><span style=color:#e6db74>/github.com/</span><span style=color:#a6e22e>go</span>-<span style=color:#a6e22e>errors</span><span style=color:#e6db74>/errors -I $WORK -pack ./</span><span style=color:#a6e22e>error</span>.<span style=color:#a6e22e>go</span> .<span style=color:#e6db74>/parse_panic.go ./</span><span style=color:#a6e22e>stackframe</span>.<span style=color:#a6e22e>go</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>mkdir</span> -<span style=color:#a6e22e>p</span> <span style=color:#e6db74>/Users/</span><span style=color:#a6e22e>YDZ</span><span style=color:#e6db74>/Ele_Project/</span><span style=color:#a6e22e>clairstormeye</span><span style=color:#e6db74>/pkg/</span><span style=color:#a6e22e>darwin_amd64</span><span style=color:#e6db74>/github.com/</span><span style=color:#a6e22e>go</span>-<span style=color:#a6e22e>errors</span>/<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>mv</span> $<span style=color:#a6e22e>WORK</span><span style=color:#e6db74>/github.com/</span><span style=color:#a6e22e>go</span>-<span style=color:#a6e22e>errors</span><span style=color:#e6db74>/errors.a /</span><span style=color:#a6e22e>Users</span><span style=color:#e6db74>/YDZ/</span><span style=color:#a6e22e>Ele_Project</span><span style=color:#e6db74>/clairstormeye/</span><span style=color:#a6e22e>pkg</span><span style=color:#e6db74>/darwin_amd64/</span><span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#e6db74>/go-errors/</span><span style=color:#a6e22e>errors</span>.<span style=color:#a6e22e>a</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>这里可以很明显的看到，执行完 go get 命令以后，会调用 git clone 方法下载源码，并编译，最终会把库源码文件编译成归档文件安装到 pkg 对应的相关平台目录下。</p><p>总结一下如下图：</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/55_12.png alt></p><p>关于工作区的问题，这里额外提一下：</p><p>一般情况下，为了分离自己与第三方的代码，我们会设置两个或更多的工作区。我们现在有一个目录路径为 /home/hc/golang/lib 的工作区，并且它是环境变量 GOPATH 值中的第一个目录路径。注意，环境变量 GOPATH 中包含的路径不能与环境变量GOROOT的值重复。好了，如果我们使用 go get 命令下载和安装代码包，那么这些代码包都会被安装在上面这个工作区中。我们暂且把这个工作区叫做
Lib 工作区。</p><blockquote><p>如果使用 vendor 管理依赖的话，常用命令是：</p></blockquote><ol><li>go get -u -x -a github.com/golang/geo/s2</li><li>rm -rf Godeps vendor && make dep</li></ol><h2 id=三-静态链接-or-动态链接->三. 静态链接 or 动态链接 ？</h2><p>Go 在最初刚刚发布的时候，静态链接被当做优点宣传，只须编译后的一个可执行文件，无须附加任何东西就能部署。将运行时、依赖库直接打包到可执行文件内部，简化了部署和发布的操作，无须事先安装运行环境和下载诸多第三方库。不过最新版本却又加入了动态链接的内容了。</p><p>普通的 go build 、go install 用的都是静态链接。可以验证一下：</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/55_13.png alt></p><p>上图是笔者用 MachOView 打开的 gofmt 文件，可以看到 fmt.Println 的地址是确定的，所以可以确定是静态链接的。</p><p>目前最新版的 Go 是如何支持动态链接的呢？</p><p>在 go build 、go install 的时候加上 -buildmode 参数。</p><p>这些是以下 buildmode 的选项：</p><p>archive: 将非 main 包构建为 .a 文件 . main 包将被忽略。
c-archive: 将 main 软件包及其导入的所有软件包构建到 C 归档文件中
c-shared: 将列出的主要软件包，以及它们导入的所有软件包构建到
C 动态库中。
shared: 将所有列出的非 main 软件包合并到一个动态库中。
exe: 构建列出的 main 包及其导入到可执行文件中的一切。 将忽略未命名为 main 的包。
默认情况下，列出的 main 软件包内置到可执行文件中，列出的非
main 软件包内置到 .a 文件中。</p><p>关于动态库，笔者还没有实践过，这里就不继续深入了，以后充分实践后，再开一篇单独的文章谈谈 Go 的动态链接。这里只是想说明一点，Go 目前不仅仅只有静态链接，动态链接也支持了！</p><hr><p>Reference：<br><a href=https://github.com/hyper0x/go_command_tutorial>《GO 命令教程》</a><br>《Go 并发编程实战》</p><blockquote><p>GitHub Repo：<a href=https://github.com/halfrost/Halfrost-Field>Halfrost-Field</a></p><p>Follow: <a href=https://github.com/halfrost>halfrost · GitHub</a></p><p>Source: <a href=https://halfrost.com/go_command/>https://halfrost.com/go_command/</a></p></blockquote><img src=https://img.halfrost.com/wechat-qr-code.png></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=https://books.halfrost.com/>Books</a></li><li><a href=https://github.com/halfrost/Halfrost-Field>Github</a></li><li><a href=https://halfrost.me/>About</a></li><li><a href=/index.xml>RSS</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#引言>引言</a></li><li><a href=#一-理解-go-的环境变量>一. 理解 Go 的环境变量</a><ul><li><a href=#1-goroot>1. GOROOT</a></li><li><a href=#2-gopath>2. GOPATH</a></li><li><a href=#3gobin>3.GOBIN</a></li><li><a href=#4path>4.PATH</a></li></ul></li><li><a href=#二-初探-go-的编译过程>二. 初探 Go 的编译过程</a><ul><li><a href=#1-go-run>1. go run</a></li><li><a href=#2-go-build>2. go build</a></li><li><a href=#3-go-install>3. go install</a></li><li><a href=#4-go-get>4. go get</a></li></ul></li><li><a href=#三-静态链接-or-动态链接->三. 静态链接 or 动态链接 ？</a></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fnew.halfrost.com%2fgo_command%2f"><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fnew.halfrost.com%2fgo_command%2f&text=%e5%88%9d%e6%8e%a2%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b"><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fnew.halfrost.com%2fgo_command%2f&title=%e5%88%9d%e6%8e%a2%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b"><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fnew.halfrost.com%2fgo_command%2f&is_video=false&description=%e5%88%9d%e6%8e%a2%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b"><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=%e5%88%9d%e6%8e%a2%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b&body=Check out this article: https%3a%2f%2fnew.halfrost.com%2fgo_command%2f"><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fnew.halfrost.com%2fgo_command%2f&title=%e5%88%9d%e6%8e%a2%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b"><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fgo_command%2f&title=%e5%88%9d%e6%8e%a2%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b"><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fgo_command%2f&title=%e5%88%9d%e6%8e%a2%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b"><i class="fab fa-stumbleupon fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://digg.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fgo_command%2f&title=%e5%88%9d%e6%8e%a2%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b"><i class="fab fa-digg fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fnew.halfrost.com%2fgo_command%2f&name=%e5%88%9d%e6%8e%a2%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b&description=%e5%bc%95%e8%a8%80%20Go%20%e8%af%ad%e8%a8%80%e8%bf%99%e4%b8%a4%e5%b9%b4%e5%9c%a8%e8%af%ad%e8%a8%80%e6%8e%92%e8%a1%8c%e6%a6%9c%e4%b8%8a%e7%9a%84%e4%b8%8a%e5%8d%87%e5%8a%bf%e5%a4%b4%e9%9d%9e%e5%b8%b8%e7%8c%9b%ef%bc%8cGo%20%e8%af%ad%e8%a8%80%e8%99%bd%e7%84%b6%e6%98%af%e9%9d%99%e6%80%81%e7%bc%96%e8%af%91%e5%9e%8b%e8%af%ad%e8%a8%80%ef%bc%8c%e4%bd%86%e6%98%af%e5%ae%83%e5%8d%b4%e6%8b%a5%e6%9c%89%e8%84%9a%e6%9c%ac%e5%8c%96%e7%9a%84%e8%af%ad%e6%b3%95%ef%bc%8c%e6%94%af%e6%8c%81%e5%a4%9a%e7%a7%8d%e7%bc%96%e7%a8%8b%e8%8c%83%e5%bc%8f%28%e5%87%bd%e6%95%b0%e5%bc%8f%e5%92%8c%e9%9d%a2%e5%90%91%e5%af%b9%e8%b1%a1%29%e3%80%82Go%20%e8%af%ad%e8%a8%80%e6%9c%80%e6%9c%80%e5%90%b8%e5%bc%95%e4%ba%ba%e7%9a%84%e5%9c%b0%e6%96%b9%e5%8f%af%e8%83%bd%e6%98%af%e5%85%b6%e5%8e%9f%e7%94%9f%e6%94%af%e6%8c%81%e5%b9%b6%e5%8f%91%e7%bc%96%e7%a8%8b%28%e8%af%ad%e8%a8%80%e5%b1%82%e9%9d%a2%e5%8e%9f%e7%94%9f%e6%94%af%e6%8c%81%e5%92%8c%e9%80%9a%e8%bf%87%e7%ac%ac%e4%b8%89%e6%96%b9%e5%ba%93%e6%94%af%e6%8c%81%e6%98%af%e6%9c%89%e5%be%88%e5%a4%a7%e5%8c%ba%e5%88%ab%e7%9a%84%29%e3%80%82Go%20%e8%af%ad%e8%a8%80%e7%9a%84%e5%af%b9%e7%bd%91%e7%bb%9c%e9%80%9a%e4%bf%a1%e3%80%81%e5%b9%b6%e5%8f%91%e5%92%8c%e5%b9%b6%e8%a1%8c%e7%bc%96%e7%a8%8b%e7%9a%84%e6%94%af%e6%8c%81%e5%ba%a6%e6%9e%81%e9%ab%98%ef%bc%8c%e4%bb%8e%e8%80%8c%e5%8f%af%e4%bb%a5%e6%9b%b4%e5%a5%bd%e5%9c%b0%e5%88%a9%e7%94%a8%e5%a4%a7%e9%87%8f%e7%9a%84%e5%88%86%e5%b8%83%e5%bc%8f%e5%92%8c%e5%a4%9a%e6%a0%b8%e7%9a%84%e8%ae%a1%e7%ae%97%e6%9c%ba%e3%80%82%e5%bc%80%e5%8f%91%e8%80%85%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%20goroutine%20%e8%bf%99%e7%a7%8d%e8%bd%bb%e9%87%8f%e7%ba%a7%e7%ba%bf%e7%a8%8b%e7%9a%84%e6%a6%82%e5%bf%b5%e6%9d%a5%e5%ae%9e%e7%8e%b0%e8%bf%99%e4%b8%aa%e7%9b%ae%e6%a0%87%ef%bc%8c%e7%84%b6%e5%90%8e%e9%80%9a%e8%bf%87%20channel%20%e6%9d%a5%e5%ae%9e%e7%8e%b0%e5%90%84%e4%b8%aa%20goroutine%20%e4%b9%8b%e9%97%b4%e7%9a%84%e9%80%9a%e4%bf%a1%e3%80%82%e4%bb%96%e4%bb%ac%e5%ae%9e%e7%8e%b0%e4%ba%86%e5%88%86%e6%ae%b5%e6%a0%88%e5%a2%9e%e9%95%bf%e5%92%8c%20goroutine%20%e5%9c%a8%e7%ba%bf%e7%a8%8b%e5%9f%ba%e7%a1%80%e4%b8%8a%e5%a4%9a%e8%b7%af%e5%a4%8d%e7%94%a8%e6%8a%80%e6%9c%af%e7%9a%84%e8%87%aa%e5%8a%a8%e5%8c%96%e3%80%82%0a2017%e5%b9%b47%e6%9c%88%20TIOBE%20%e8%af%ad%e8%a8%80%e6%8e%92%e8%a1%8c%e6%a6%9c%20Go%20%e9%a6%96%e6%ac%a1%e8%bf%9b%e5%85%a5%e5%89%8d%e5%8d%81%e3%80%82%e4%bb%8a%e5%a4%a9%e5%b0%b1%e8%ae%a9%e6%88%91%e4%bb%ac%e6%9d%a5%e6%8e%a2%e7%a9%b6%e6%8e%a2%e7%a9%b6%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b%e3%80%82%0a%e4%b8%80.%20%e7%90%86%e8%a7%a3%20Go%20%e7%9a%84%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f%201.%20GOROOT%20%e8%af%a5%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f%e7%9a%84%e5%80%bc%e4%b8%ba%20Go%20%e8%af%ad%e8%a8%80%e7%9a%84%e5%bd%93%e5%89%8d%e5%ae%89%e8%a3%85%e7%9b%ae%e5%bd%95%e3%80%82%0a2.%20GOPATH%20%e8%af%a5%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f%e7%9a%84%e5%80%bc%e4%b8%ba%20Go%20%e8%af%ad%e8%a8%80%e7%9a%84%e5%b7%a5%e4%bd%9c%e5%8c%ba%e7%9a%84%e9%9b%86%e5%90%88%ef%bc%88%e6%84%8f%e5%91%b3%e7%9d%80%e5%8f%af%e4%bb%a5%e6%9c%89%e5%be%88%e5%a4%9a%e4%b8%aa%ef%bc%89%e3%80%82%e5%b7%a5%e4%bd%9c%e5%8c%ba%e7%b1%bb%e4%bc%bc%e4%ba%8e%e5%b7%a5%e4%bd%9c%e7%9b%ae%e5%bd%95%e3%80%82%e6%af%8f%e4%b8%aa%e4%b8%8d%e5%90%8c%e7%9a%84%e7%9b%ae%e5%bd%95%e4%b9%8b%e9%97%b4%e7%94%a8%ef%bc%9a%e5%88%86%e9%9a%94%e3%80%82%0a%e5%b7%a5%e4%bd%9c%e5%8c%ba%e6%98%af%e6%94%be%e7%bd%ae%20Go%20%e6%ba%90%e7%a0%81%e6%96%87%e4%bb%b6%e7%9a%84%e7%9b%ae%e5%bd%95%e3%80%82%e4%b8%80%e8%88%ac%e6%83%85%e5%86%b5%e4%b8%8b%ef%bc%8cGo%20%e6%ba%90%e7%a0%81%e6%96%87%e4%bb%b6%e9%83%bd%e9%9c%80%e8%a6%81%e5%ad%98%e6%94%be%e5%88%b0%e5%b7%a5%e4%bd%9c%e5%8c%ba%e4%b8%ad%e3%80%82%0a%e5%b7%a5%e4%bd%9c%e5%8c%ba%e4%b8%80%e8%88%ac%e4%bc%9a%e5%8c%85%e5%90%ab3%e4%b8%aa%e5%ad%90%e6%96%87%e4%bb%b6%e5%a4%b9%ef%bc%8c%e8%87%aa%e5%b7%b1%e6%89%8b%e5%8a%a8%e6%96%b0%e5%bb%ba%e4%bb%a5%e4%b8%8b%e4%b8%89%e4%b8%aa%e7%9b%ae%e5%bd%95%ef%bc%9asrc%20%e7%9b%ae%e5%bd%95%ef%bc%8cpkg%20%e7%9b%ae%e5%bd%95%ef%bc%8cbin%20%e7%9b%ae%e5%bd%95%e3%80%82%0a%2fhome%2fhalfrost%2fgorepo%20%e2%94%9c%e2%94%80%e2%94%80%20bin%20%e2%94%9c%e2%94%80%e2%94%80%20pkg%20%e2%94%94%e2%94%80%e2%94%80%20src%20%e8%bf%99%e9%87%8c%e9%9c%80%e8%a6%81%e9%a2%9d%e5%a4%96%e8%af%b4%e7%9a%84%e4%b8%80%e7%82%b9%ef%bc%9a%e5%85%b3%e4%ba%8e%20IDE%20%e6%96%b0%e5%bb%ba%20Go%20%e9%a1%b9%e7%9b%ae%e3%80%82IDE%20%e5%9c%a8%e6%96%b0%e5%bb%ba%e5%ae%8c%20Go%20%e7%9a%84%e9%a1%b9%e7%9b%ae%e4%bb%a5%e5%90%8e%ef%bc%8c%e4%bc%9a%e8%87%aa%e5%8a%a8%e7%9a%84%e6%89%a7%e8%a1%8c%20go%20get%20%e5%91%bd%e4%bb%a4%e5%8e%bb%e6%8a%8a%e7%9b%b8%e5%ba%94%e7%9a%84%e5%9f%ba%e7%a1%80%e5%8c%85%e6%8b%89%e8%bf%87%e6%9d%a5%ef%bc%8c%20%e5%9c%a8%e8%bf%99%e4%b8%aa%e8%bf%87%e7%a8%8b%e4%b8%ad%e4%bc%9a%e6%96%b0%e5%bb%ba%20bin%e3%80%81pkg%e3%80%81src%20%e4%b8%89%e4%b8%aa%e7%9b%ae%e5%bd%95%e3%80%82%e4%b8%8d%e7%94%a8%20IDE%20%e7%9a%84%e5%90%8c%e5%ad%a6%ef%bc%8c%e9%9c%80%e8%a6%81%e8%87%aa%e5%b7%b1%e6%89%8b%e5%8a%a8%e5%88%9b%e5%bb%ba%e8%bf%99%e4%b8%89%e4%b8%aa%e7%9b%ae%e5%bd%95%e3%80%82%0a%e4%b8%8a%e5%9b%be%e6%98%af%20Atom%20%e7%9a%84%20go-plus%20%e6%8f%92%e4%bb%b6%e5%9c%a8%e4%b8%80%e4%b8%aa%e6%96%b0%e7%9a%84%e9%a1%b9%e7%9b%ae%e6%89%93%e5%bc%80%e7%9a%84%e6%97%b6%e5%80%99%ef%bc%8c%e8%87%aa%e5%8a%a8%20go%20get%20%e7%9a%84%e4%b8%80%e4%ba%9b%e5%9f%ba%e7%a1%80%e5%8c%85%e3%80%82"><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fnew.halfrost.com%2fgo_command%2f&t=%e5%88%9d%e6%8e%a2%20Go%20%e7%9a%84%e7%bc%96%e8%af%91%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu class=icon href=# onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden=true></i>Menu</a>
<a id=toc class=icon href=# onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden=true></i>TOC</a>
<a id=share class=icon href=# onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden=true></i>share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i>Top</a></div></div></div><footer id=footer><div class=footer-left><p class=copyright style=float:left;margin-bottom:0><a href=https://github.com/halfrost/Halfrost-Field class=github-repo style=height:18px><span class=gadget-github></span>Star</a>
Copyright &copy;halfrost 2016 - 2021
<a href=http://www.miit.gov.cn/>鄂ICP备16014744号</a></p><br><p class="copyright statistics" style=margin-bottom:20px><span id=busuanzi_container_site_pv>Cumulative Page Views <span id=busuanzi_value_site_pv></span>| Unique Visitors <span id=busuanzi_value_site_uv></span></span></p></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script><script src=/main.min.f870a4d110314b9e50e65f8ac982dc1c9c376c8f1a5083d39c62cfc49073f011.js></script><script async src=/prism.js></script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]},svg:{fontCache:'global'}};</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></html>