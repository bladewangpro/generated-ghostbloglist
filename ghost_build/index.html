<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=theme-color content="#FFFFFF"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Ghost 博客搭建日记 | prometheus</title><meta name=description content="Explore in every moment of the hard thinking"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Ghost 博客搭建日记"><meta property="og:description" content="前言 今年7月阴错阳差的给自己买了一台阿里云服务器，当时是想着自己折腾折腾后台，看能否打通前端和后端之间的任督二脉。直到我发现我原来放在GitPage上的博客访问速度慢的实在不能忍，痛下决心之后，就把原来Jekyll搭建的博客站点一口气都迁移到了现在自己阿里云的主机上了。原来的Jekyll博客还在，还在GitPage上。换到了国内自己的阿里云主机上，我就用了优雅的Ghost搭建我的新家了。
今年8月的时候，博客上线了，网友们看见我这个博客还不错，让我出一下搭建教程。虽然博客上线，还没有通过网络管理中心的审核，还不知道之后会发生什么。当时的我也对Ghost不是很熟，也不知道后期如何维护，所以想着先让Ghost在服务器上面跑一个月看看，有了心得体会之后在写篇文章记录一下搭建过程。
现在博客也跑了一个多月了，日常维护都玩的转了，于是就有了这一篇文章了。
目录  1.Ghost 简介 2.搭建前准备清单 3.开始搭建 4.全站 Https 5.管局备案 / 公安备案 6.CDN 优化访问速度 7.后期维护  一.Ghost简介 Ghost 是一套基于 Node.js 构建的开源博客平台（Open source blogging platform），具有易用的书写界面和体验，博客内容默认采用 Markdown 语法书写，不过原生的不支持Markdown的表格和LaTeX，如果需要使用，需要在服务器端安装插件。
Ghost目标是取代臃肿的 Wordpress，界面简洁，专注写作，支持在线预览和在线写作。
Ghost属于动态博客，页面并不是像Hexo,Jekyll这类静态博客，在编译的时候会生成所有页面。Ghost有前台和后台。后台负责写作，发布文章，系统配置，等等。
1. Ghost的优势和劣势 这里有篇文章是这样评论Ghost的优缺点的
  优势 技术上,采用NodeJs，在可预见的未来里，无疑比PHP有更多优势，并发能力远超Wordpress，虽然NodeJs后期维护成本高，但是我们只是借它做博客而已。 易用性上，专注写作，评论，超炫皮肤，完美支持 MarkDown,没有Wordpress那么臃肿，回归到博客最原始的状态,传递文字最原始的力量。 使用上，便捷，随时随地编辑，比Hexo,Jekyll这类静态博客要书写方便，特别是在不同电脑上写作时。
  劣势 需要配套支持Node环境的虚拟机，一般免费的很少支持，这时必须得掏腰包了。 后台简陋,许多功能还未完善，不过写作这一块没啥大问题。
  关于劣势，我再说一点，Ghost没有Hexo上面那么丰富的插件。
2. Ghost的亮点：  采用Mysql作为数据库,通用快速上手，这里也可以用其他数据库比如Sqlite。 Nginx作为反向代理,配置多个Ghost博客,同时也能增加了网站的负载。 非常简易化的Ubuntu的Node.js安装方法，不用编译打包。 安装系统服务,开机重启Ghost服务，免去日后以后操作。 采用Font Awesome作为社交按钮，也可以自定义图标。 highlight.js 作为主题的代码高亮引擎 整合Disqus评论系统,建立属于自己的Discuss圈 国外优秀免费Ghost主题资源分享 整合百度统计以及百度分享  二. 搭建前准备清单  一个可用的域名 一台服务器 ( 我买的阿里云ECS ，服务器系统安装的是 CentOS 7."><meta property="og:type" content="article"><meta property="og:url" content="https://new.halfrost.com/ghost_build/"><meta property="article:published_time" content="2016-10-02T22:13:00+00:00"><meta property="article:modified_time" content="2016-10-02T22:13:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Ghost 博客搭建日记"><meta name=twitter:description content="前言 今年7月阴错阳差的给自己买了一台阿里云服务器，当时是想着自己折腾折腾后台，看能否打通前端和后端之间的任督二脉。直到我发现我原来放在GitPage上的博客访问速度慢的实在不能忍，痛下决心之后，就把原来Jekyll搭建的博客站点一口气都迁移到了现在自己阿里云的主机上了。原来的Jekyll博客还在，还在GitPage上。换到了国内自己的阿里云主机上，我就用了优雅的Ghost搭建我的新家了。
今年8月的时候，博客上线了，网友们看见我这个博客还不错，让我出一下搭建教程。虽然博客上线，还没有通过网络管理中心的审核，还不知道之后会发生什么。当时的我也对Ghost不是很熟，也不知道后期如何维护，所以想着先让Ghost在服务器上面跑一个月看看，有了心得体会之后在写篇文章记录一下搭建过程。
现在博客也跑了一个多月了，日常维护都玩的转了，于是就有了这一篇文章了。
目录  1.Ghost 简介 2.搭建前准备清单 3.开始搭建 4.全站 Https 5.管局备案 / 公安备案 6.CDN 优化访问速度 7.后期维护  一.Ghost简介 Ghost 是一套基于 Node.js 构建的开源博客平台（Open source blogging platform），具有易用的书写界面和体验，博客内容默认采用 Markdown 语法书写，不过原生的不支持Markdown的表格和LaTeX，如果需要使用，需要在服务器端安装插件。
Ghost目标是取代臃肿的 Wordpress，界面简洁，专注写作，支持在线预览和在线写作。
Ghost属于动态博客，页面并不是像Hexo,Jekyll这类静态博客，在编译的时候会生成所有页面。Ghost有前台和后台。后台负责写作，发布文章，系统配置，等等。
1. Ghost的优势和劣势 这里有篇文章是这样评论Ghost的优缺点的
  优势 技术上,采用NodeJs，在可预见的未来里，无疑比PHP有更多优势，并发能力远超Wordpress，虽然NodeJs后期维护成本高，但是我们只是借它做博客而已。 易用性上，专注写作，评论，超炫皮肤，完美支持 MarkDown,没有Wordpress那么臃肿，回归到博客最原始的状态,传递文字最原始的力量。 使用上，便捷，随时随地编辑，比Hexo,Jekyll这类静态博客要书写方便，特别是在不同电脑上写作时。
  劣势 需要配套支持Node环境的虚拟机，一般免费的很少支持，这时必须得掏腰包了。 后台简陋,许多功能还未完善，不过写作这一块没啥大问题。
  关于劣势，我再说一点，Ghost没有Hexo上面那么丰富的插件。
2. Ghost的亮点：  采用Mysql作为数据库,通用快速上手，这里也可以用其他数据库比如Sqlite。 Nginx作为反向代理,配置多个Ghost博客,同时也能增加了网站的负载。 非常简易化的Ubuntu的Node.js安装方法，不用编译打包。 安装系统服务,开机重启Ghost服务，免去日后以后操作。 采用Font Awesome作为社交按钮，也可以自定义图标。 highlight.js 作为主题的代码高亮引擎 整合Disqus评论系统,建立属于自己的Discuss圈 国外优秀免费Ghost主题资源分享 整合百度统计以及百度分享  二. 搭建前准备清单  一个可用的域名 一台服务器 ( 我买的阿里云ECS ，服务器系统安装的是 CentOS 7."><link rel=stylesheet href=/css/style-white.min.css><link rel=manifest href=/manifest.json><link rel=stylesheet href=/prism.css><link href=/images/apple-touch-icon-60x60.png rel=apple-touch-icon sizes=60x60><link href=/images/apple-touch-icon-76x76.png rel=apple-touch-icon sizes=76x76><link href=/images/apple-touch-icon-120x120.png rel=apple-touch-icon sizes=120x120><link href=/images/apple-touch-icon-152x152.png rel=apple-touch-icon sizes=152x152><link href=/images/apple-touch-icon-180x180.png rel=apple-touch-icon sizes=180x180><link href=/images/apple-touch-icon-512x512.png rel=apple-touch-icon sizes=512x512><link href=/images/apple-touch-icon-1024x1024.png rel=apple-touch-icon sizes=1024x1024><script async>if('serviceWorker'in navigator){navigator.serviceWorker.register("\/serviceworker-v1.min.a64912b78d282eab1ad3715a0943da21616e5f326f8afea27034784ad445043b.js").then(function(){if(navigator.serviceWorker.controller){console.log('Assets cached by the controlling service worker.');}else{console.log('Please reload this page to allow the service worker to handle network operations.');}}).catch(function(error){console.log('ERROR: '+error);});}else{console.log('Service workers are not supported in the current browser.');}</script><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://new.halfrost.com/images/favicon.ico><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-82753806-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="single-max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a><a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a><a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast');" style=display:none><i class="fas fa-chevron-up fa-lg"></i></a><span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=https://books.halfrost.com/>Books</a></li><li><a href=https://github.com/halfrost/Halfrost-Field>Github</a></li><li><a href=https://halfrost.me/>About</a></li><li><a href=/index.xml>RSS</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://new.halfrost.com/how_to_use_runtime/><i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li><li><a class=icon href=https://new.halfrost.com/ios_aspect/><i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li><li><a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');"><i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li><li><a class=icon href=#><i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fnew.halfrost.com%2fghost_build%2f"><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fnew.halfrost.com%2fghost_build%2f&text=Ghost%20%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%e6%97%a5%e8%ae%b0"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fnew.halfrost.com%2fghost_build%2f&title=Ghost%20%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%e6%97%a5%e8%ae%b0"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fnew.halfrost.com%2fghost_build%2f&is_video=false&description=Ghost%20%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%e6%97%a5%e8%ae%b0"><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Ghost%20%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%e6%97%a5%e8%ae%b0&body=Check out this article: https%3a%2f%2fnew.halfrost.com%2fghost_build%2f"><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fnew.halfrost.com%2fghost_build%2f&title=Ghost%20%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%e6%97%a5%e8%ae%b0"><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fghost_build%2f&title=Ghost%20%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%e6%97%a5%e8%ae%b0"><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fghost_build%2f&title=Ghost%20%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%e6%97%a5%e8%ae%b0"><i class="fab fa-stumbleupon" aria-hidden=true></i></a></li><li><a class=icon href="http://digg.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fghost_build%2f&title=Ghost%20%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%e6%97%a5%e8%ae%b0"><i class="fab fa-digg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fnew.halfrost.com%2fghost_build%2f&name=Ghost%20%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%e6%97%a5%e8%ae%b0&description=%e5%89%8d%e8%a8%80%20%e4%bb%8a%e5%b9%b47%e6%9c%88%e9%98%b4%e9%94%99%e9%98%b3%e5%b7%ae%e7%9a%84%e7%bb%99%e8%87%aa%e5%b7%b1%e4%b9%b0%e4%ba%86%e4%b8%80%e5%8f%b0%e9%98%bf%e9%87%8c%e4%ba%91%e6%9c%8d%e5%8a%a1%e5%99%a8%ef%bc%8c%e5%bd%93%e6%97%b6%e6%98%af%e6%83%b3%e7%9d%80%e8%87%aa%e5%b7%b1%e6%8a%98%e8%85%be%e6%8a%98%e8%85%be%e5%90%8e%e5%8f%b0%ef%bc%8c%e7%9c%8b%e8%83%bd%e5%90%a6%e6%89%93%e9%80%9a%e5%89%8d%e7%ab%af%e5%92%8c%e5%90%8e%e7%ab%af%e4%b9%8b%e9%97%b4%e7%9a%84%e4%bb%bb%e7%9d%a3%e4%ba%8c%e8%84%89%e3%80%82%e7%9b%b4%e5%88%b0%e6%88%91%e5%8f%91%e7%8e%b0%e6%88%91%e5%8e%9f%e6%9d%a5%e6%94%be%e5%9c%a8GitPage%e4%b8%8a%e7%9a%84%e5%8d%9a%e5%ae%a2%e8%ae%bf%e9%97%ae%e9%80%9f%e5%ba%a6%e6%85%a2%e7%9a%84%e5%ae%9e%e5%9c%a8%e4%b8%8d%e8%83%bd%e5%bf%8d%ef%bc%8c%e7%97%9b%e4%b8%8b%e5%86%b3%e5%bf%83%e4%b9%8b%e5%90%8e%ef%bc%8c%e5%b0%b1%e6%8a%8a%e5%8e%9f%e6%9d%a5Jekyll%e6%90%ad%e5%bb%ba%e7%9a%84%e5%8d%9a%e5%ae%a2%e7%ab%99%e7%82%b9%e4%b8%80%e5%8f%a3%e6%b0%94%e9%83%bd%e8%bf%81%e7%a7%bb%e5%88%b0%e4%ba%86%e7%8e%b0%e5%9c%a8%e8%87%aa%e5%b7%b1%e9%98%bf%e9%87%8c%e4%ba%91%e7%9a%84%e4%b8%bb%e6%9c%ba%e4%b8%8a%e4%ba%86%e3%80%82%e5%8e%9f%e6%9d%a5%e7%9a%84Jekyll%e5%8d%9a%e5%ae%a2%e8%bf%98%e5%9c%a8%ef%bc%8c%e8%bf%98%e5%9c%a8GitPage%e4%b8%8a%e3%80%82%e6%8d%a2%e5%88%b0%e4%ba%86%e5%9b%bd%e5%86%85%e8%87%aa%e5%b7%b1%e7%9a%84%e9%98%bf%e9%87%8c%e4%ba%91%e4%b8%bb%e6%9c%ba%e4%b8%8a%ef%bc%8c%e6%88%91%e5%b0%b1%e7%94%a8%e4%ba%86%e4%bc%98%e9%9b%85%e7%9a%84Ghost%e6%90%ad%e5%bb%ba%e6%88%91%e7%9a%84%e6%96%b0%e5%ae%b6%e4%ba%86%e3%80%82%0a%e4%bb%8a%e5%b9%b48%e6%9c%88%e7%9a%84%e6%97%b6%e5%80%99%ef%bc%8c%e5%8d%9a%e5%ae%a2%e4%b8%8a%e7%ba%bf%e4%ba%86%ef%bc%8c%e7%bd%91%e5%8f%8b%e4%bb%ac%e7%9c%8b%e8%a7%81%e6%88%91%e8%bf%99%e4%b8%aa%e5%8d%9a%e5%ae%a2%e8%bf%98%e4%b8%8d%e9%94%99%ef%bc%8c%e8%ae%a9%e6%88%91%e5%87%ba%e4%b8%80%e4%b8%8b%e6%90%ad%e5%bb%ba%e6%95%99%e7%a8%8b%e3%80%82%e8%99%bd%e7%84%b6%e5%8d%9a%e5%ae%a2%e4%b8%8a%e7%ba%bf%ef%bc%8c%e8%bf%98%e6%b2%a1%e6%9c%89%e9%80%9a%e8%bf%87%e7%bd%91%e7%bb%9c%e7%ae%a1%e7%90%86%e4%b8%ad%e5%bf%83%e7%9a%84%e5%ae%a1%e6%a0%b8%ef%bc%8c%e8%bf%98%e4%b8%8d%e7%9f%a5%e9%81%93%e4%b9%8b%e5%90%8e%e4%bc%9a%e5%8f%91%e7%94%9f%e4%bb%80%e4%b9%88%e3%80%82%e5%bd%93%e6%97%b6%e7%9a%84%e6%88%91%e4%b9%9f%e5%af%b9Ghost%e4%b8%8d%e6%98%af%e5%be%88%e7%86%9f%ef%bc%8c%e4%b9%9f%e4%b8%8d%e7%9f%a5%e9%81%93%e5%90%8e%e6%9c%9f%e5%a6%82%e4%bd%95%e7%bb%b4%e6%8a%a4%ef%bc%8c%e6%89%80%e4%bb%a5%e6%83%b3%e7%9d%80%e5%85%88%e8%ae%a9Ghost%e5%9c%a8%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%b8%8a%e9%9d%a2%e8%b7%91%e4%b8%80%e4%b8%aa%e6%9c%88%e7%9c%8b%e7%9c%8b%ef%bc%8c%e6%9c%89%e4%ba%86%e5%bf%83%e5%be%97%e4%bd%93%e4%bc%9a%e4%b9%8b%e5%90%8e%e5%9c%a8%e5%86%99%e7%af%87%e6%96%87%e7%ab%a0%e8%ae%b0%e5%bd%95%e4%b8%80%e4%b8%8b%e6%90%ad%e5%bb%ba%e8%bf%87%e7%a8%8b%e3%80%82%0a%e7%8e%b0%e5%9c%a8%e5%8d%9a%e5%ae%a2%e4%b9%9f%e8%b7%91%e4%ba%86%e4%b8%80%e4%b8%aa%e5%a4%9a%e6%9c%88%e4%ba%86%ef%bc%8c%e6%97%a5%e5%b8%b8%e7%bb%b4%e6%8a%a4%e9%83%bd%e7%8e%a9%e7%9a%84%e8%bd%ac%e4%ba%86%ef%bc%8c%e4%ba%8e%e6%98%af%e5%b0%b1%e6%9c%89%e4%ba%86%e8%bf%99%e4%b8%80%e7%af%87%e6%96%87%e7%ab%a0%e4%ba%86%e3%80%82%0a%e7%9b%ae%e5%bd%95%20%201.Ghost%20%e7%ae%80%e4%bb%8b%202.%e6%90%ad%e5%bb%ba%e5%89%8d%e5%87%86%e5%a4%87%e6%b8%85%e5%8d%95%203.%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%ba%204.%e5%85%a8%e7%ab%99%20Https%205.%e7%ae%a1%e5%b1%80%e5%a4%87%e6%a1%88%20%2f%20%e5%85%ac%e5%ae%89%e5%a4%87%e6%a1%88%206.CDN%20%e4%bc%98%e5%8c%96%e8%ae%bf%e9%97%ae%e9%80%9f%e5%ba%a6%207.%e5%90%8e%e6%9c%9f%e7%bb%b4%e6%8a%a4%20%20%e4%b8%80.Ghost%e7%ae%80%e4%bb%8b%20Ghost%20%e6%98%af%e4%b8%80%e5%a5%97%e5%9f%ba%e4%ba%8e%20Node.js%20%e6%9e%84%e5%bb%ba%e7%9a%84%e5%bc%80%e6%ba%90%e5%8d%9a%e5%ae%a2%e5%b9%b3%e5%8f%b0%ef%bc%88Open%20source%20blogging%20platform%ef%bc%89%ef%bc%8c%e5%85%b7%e6%9c%89%e6%98%93%e7%94%a8%e7%9a%84%e4%b9%a6%e5%86%99%e7%95%8c%e9%9d%a2%e5%92%8c%e4%bd%93%e9%aa%8c%ef%bc%8c%e5%8d%9a%e5%ae%a2%e5%86%85%e5%ae%b9%e9%bb%98%e8%ae%a4%e9%87%87%e7%94%a8%20Markdown%20%e8%af%ad%e6%b3%95%e4%b9%a6%e5%86%99%ef%bc%8c%e4%b8%8d%e8%bf%87%e5%8e%9f%e7%94%9f%e7%9a%84%e4%b8%8d%e6%94%af%e6%8c%81Markdown%e7%9a%84%e8%a1%a8%e6%a0%bc%e5%92%8cLaTeX%ef%bc%8c%e5%a6%82%e6%9e%9c%e9%9c%80%e8%a6%81%e4%bd%bf%e7%94%a8%ef%bc%8c%e9%9c%80%e8%a6%81%e5%9c%a8%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%ab%af%e5%ae%89%e8%a3%85%e6%8f%92%e4%bb%b6%e3%80%82%0aGhost%e7%9b%ae%e6%a0%87%e6%98%af%e5%8f%96%e4%bb%a3%e8%87%83%e8%82%bf%e7%9a%84%20Wordpress%ef%bc%8c%e7%95%8c%e9%9d%a2%e7%ae%80%e6%b4%81%ef%bc%8c%e4%b8%93%e6%b3%a8%e5%86%99%e4%bd%9c%ef%bc%8c%e6%94%af%e6%8c%81%e5%9c%a8%e7%ba%bf%e9%a2%84%e8%a7%88%e5%92%8c%e5%9c%a8%e7%ba%bf%e5%86%99%e4%bd%9c%e3%80%82%0aGhost%e5%b1%9e%e4%ba%8e%e5%8a%a8%e6%80%81%e5%8d%9a%e5%ae%a2%ef%bc%8c%e9%a1%b5%e9%9d%a2%e5%b9%b6%e4%b8%8d%e6%98%af%e5%83%8fHexo%2cJekyll%e8%bf%99%e7%b1%bb%e9%9d%99%e6%80%81%e5%8d%9a%e5%ae%a2%ef%bc%8c%e5%9c%a8%e7%bc%96%e8%af%91%e7%9a%84%e6%97%b6%e5%80%99%e4%bc%9a%e7%94%9f%e6%88%90%e6%89%80%e6%9c%89%e9%a1%b5%e9%9d%a2%e3%80%82Ghost%e6%9c%89%e5%89%8d%e5%8f%b0%e5%92%8c%e5%90%8e%e5%8f%b0%e3%80%82%e5%90%8e%e5%8f%b0%e8%b4%9f%e8%b4%a3%e5%86%99%e4%bd%9c%ef%bc%8c%e5%8f%91%e5%b8%83%e6%96%87%e7%ab%a0%ef%bc%8c%e7%b3%bb%e7%bb%9f%e9%85%8d%e7%bd%ae%ef%bc%8c%e7%ad%89%e7%ad%89%e3%80%82%0a1.%20Ghost%e7%9a%84%e4%bc%98%e5%8a%bf%e5%92%8c%e5%8a%a3%e5%8a%bf%20%e8%bf%99%e9%87%8c%e6%9c%89%e7%af%87%e6%96%87%e7%ab%a0%e6%98%af%e8%bf%99%e6%a0%b7%e8%af%84%e8%ae%baGhost%e7%9a%84%e4%bc%98%e7%bc%ba%e7%82%b9%e7%9a%84%0a%20%20%e4%bc%98%e5%8a%bf%20%e6%8a%80%e6%9c%af%e4%b8%8a%2c%e9%87%87%e7%94%a8NodeJs%ef%bc%8c%e5%9c%a8%e5%8f%af%e9%a2%84%e8%a7%81%e7%9a%84%e6%9c%aa%e6%9d%a5%e9%87%8c%ef%bc%8c%e6%97%a0%e7%96%91%e6%af%94PHP%e6%9c%89%e6%9b%b4%e5%a4%9a%e4%bc%98%e5%8a%bf%ef%bc%8c%e5%b9%b6%e5%8f%91%e8%83%bd%e5%8a%9b%e8%bf%9c%e8%b6%85Wordpress%ef%bc%8c%e8%99%bd%e7%84%b6NodeJs%e5%90%8e%e6%9c%9f%e7%bb%b4%e6%8a%a4%e6%88%90%e6%9c%ac%e9%ab%98%ef%bc%8c%e4%bd%86%e6%98%af%e6%88%91%e4%bb%ac%e5%8f%aa%e6%98%af%e5%80%9f%e5%ae%83%e5%81%9a%e5%8d%9a%e5%ae%a2%e8%80%8c%e5%b7%b2%e3%80%82%20%e6%98%93%e7%94%a8%e6%80%a7%e4%b8%8a%ef%bc%8c%e4%b8%93%e6%b3%a8%e5%86%99%e4%bd%9c%ef%bc%8c%e8%af%84%e8%ae%ba%ef%bc%8c%e8%b6%85%e7%82%ab%e7%9a%ae%e8%82%a4%ef%bc%8c%e5%ae%8c%e7%be%8e%e6%94%af%e6%8c%81%20MarkDown%2c%e6%b2%a1%e6%9c%89Wordpress%e9%82%a3%e4%b9%88%e8%87%83%e8%82%bf%ef%bc%8c%e5%9b%9e%e5%bd%92%e5%88%b0%e5%8d%9a%e5%ae%a2%e6%9c%80%e5%8e%9f%e5%a7%8b%e7%9a%84%e7%8a%b6%e6%80%81%2c%e4%bc%a0%e9%80%92%e6%96%87%e5%ad%97%e6%9c%80%e5%8e%9f%e5%a7%8b%e7%9a%84%e5%8a%9b%e9%87%8f%e3%80%82%20%e4%bd%bf%e7%94%a8%e4%b8%8a%ef%bc%8c%e4%be%bf%e6%8d%b7%ef%bc%8c%e9%9a%8f%e6%97%b6%e9%9a%8f%e5%9c%b0%e7%bc%96%e8%be%91%ef%bc%8c%e6%af%94Hexo%2cJekyll%e8%bf%99%e7%b1%bb%e9%9d%99%e6%80%81%e5%8d%9a%e5%ae%a2%e8%a6%81%e4%b9%a6%e5%86%99%e6%96%b9%e4%be%bf%ef%bc%8c%e7%89%b9%e5%88%ab%e6%98%af%e5%9c%a8%e4%b8%8d%e5%90%8c%e7%94%b5%e8%84%91%e4%b8%8a%e5%86%99%e4%bd%9c%e6%97%b6%e3%80%82%0a%20%20%e5%8a%a3%e5%8a%bf%20%e9%9c%80%e8%a6%81%e9%85%8d%e5%a5%97%e6%94%af%e6%8c%81Node%e7%8e%af%e5%a2%83%e7%9a%84%e8%99%9a%e6%8b%9f%e6%9c%ba%ef%bc%8c%e4%b8%80%e8%88%ac%e5%85%8d%e8%b4%b9%e7%9a%84%e5%be%88%e5%b0%91%e6%94%af%e6%8c%81%ef%bc%8c%e8%bf%99%e6%97%b6%e5%bf%85%e9%a1%bb%e5%be%97%e6%8e%8f%e8%85%b0%e5%8c%85%e4%ba%86%e3%80%82%20%e5%90%8e%e5%8f%b0%e7%ae%80%e9%99%8b%2c%e8%ae%b8%e5%a4%9a%e5%8a%9f%e8%83%bd%e8%bf%98%e6%9c%aa%e5%ae%8c%e5%96%84%ef%bc%8c%e4%b8%8d%e8%bf%87%e5%86%99%e4%bd%9c%e8%bf%99%e4%b8%80%e5%9d%97%e6%b2%a1%e5%95%a5%e5%a4%a7%e9%97%ae%e9%a2%98%e3%80%82%0a%20%20%e5%85%b3%e4%ba%8e%e5%8a%a3%e5%8a%bf%ef%bc%8c%e6%88%91%e5%86%8d%e8%af%b4%e4%b8%80%e7%82%b9%ef%bc%8cGhost%e6%b2%a1%e6%9c%89Hexo%e4%b8%8a%e9%9d%a2%e9%82%a3%e4%b9%88%e4%b8%b0%e5%af%8c%e7%9a%84%e6%8f%92%e4%bb%b6%e3%80%82%0a2.%20Ghost%e7%9a%84%e4%ba%ae%e7%82%b9%ef%bc%9a%20%20%e9%87%87%e7%94%a8Mysql%e4%bd%9c%e4%b8%ba%e6%95%b0%e6%8d%ae%e5%ba%93%2c%e9%80%9a%e7%94%a8%e5%bf%ab%e9%80%9f%e4%b8%8a%e6%89%8b%ef%bc%8c%e8%bf%99%e9%87%8c%e4%b9%9f%e5%8f%af%e4%bb%a5%e7%94%a8%e5%85%b6%e4%bb%96%e6%95%b0%e6%8d%ae%e5%ba%93%e6%af%94%e5%a6%82Sqlite%e3%80%82%20Nginx%e4%bd%9c%e4%b8%ba%e5%8f%8d%e5%90%91%e4%bb%a3%e7%90%86%2c%e9%85%8d%e7%bd%ae%e5%a4%9a%e4%b8%aaGhost%e5%8d%9a%e5%ae%a2%2c%e5%90%8c%e6%97%b6%e4%b9%9f%e8%83%bd%e5%a2%9e%e5%8a%a0%e4%ba%86%e7%bd%91%e7%ab%99%e7%9a%84%e8%b4%9f%e8%bd%bd%e3%80%82%20%e9%9d%9e%e5%b8%b8%e7%ae%80%e6%98%93%e5%8c%96%e7%9a%84Ubuntu%e7%9a%84Node.js%e5%ae%89%e8%a3%85%e6%96%b9%e6%b3%95%ef%bc%8c%e4%b8%8d%e7%94%a8%e7%bc%96%e8%af%91%e6%89%93%e5%8c%85%e3%80%82%20%e5%ae%89%e8%a3%85%e7%b3%bb%e7%bb%9f%e6%9c%8d%e5%8a%a1%2c%e5%bc%80%e6%9c%ba%e9%87%8d%e5%90%afGhost%e6%9c%8d%e5%8a%a1%ef%bc%8c%e5%85%8d%e5%8e%bb%e6%97%a5%e5%90%8e%e4%bb%a5%e5%90%8e%e6%93%8d%e4%bd%9c%e3%80%82%20%e9%87%87%e7%94%a8Font%20Awesome%e4%bd%9c%e4%b8%ba%e7%a4%be%e4%ba%a4%e6%8c%89%e9%92%ae%ef%bc%8c%e4%b9%9f%e5%8f%af%e4%bb%a5%e8%87%aa%e5%ae%9a%e4%b9%89%e5%9b%be%e6%a0%87%e3%80%82%20highlight.js%c2%a0%e4%bd%9c%e4%b8%ba%e4%b8%bb%e9%a2%98%e7%9a%84%e4%bb%a3%e7%a0%81%e9%ab%98%e4%ba%ae%e5%bc%95%e6%93%8e%20%e6%95%b4%e5%90%88Disqus%e8%af%84%e8%ae%ba%e7%b3%bb%e7%bb%9f%2c%e5%bb%ba%e7%ab%8b%e5%b1%9e%e4%ba%8e%e8%87%aa%e5%b7%b1%e7%9a%84Discuss%e5%9c%88%20%e5%9b%bd%e5%a4%96%e4%bc%98%e7%a7%80%e5%85%8d%e8%b4%b9Ghost%e4%b8%bb%e9%a2%98%e8%b5%84%e6%ba%90%e5%88%86%e4%ba%ab%20%e6%95%b4%e5%90%88%e7%99%be%e5%ba%a6%e7%bb%9f%e8%ae%a1%e4%bb%a5%e5%8f%8a%e7%99%be%e5%ba%a6%e5%88%86%e4%ba%ab%20%20%e4%ba%8c.%20%e6%90%ad%e5%bb%ba%e5%89%8d%e5%87%86%e5%a4%87%e6%b8%85%e5%8d%95%20%20%e4%b8%80%e4%b8%aa%e5%8f%af%e7%94%a8%e7%9a%84%e5%9f%9f%e5%90%8d%20%e4%b8%80%e5%8f%b0%e6%9c%8d%e5%8a%a1%e5%99%a8%20%28%20%e6%88%91%e4%b9%b0%e7%9a%84%e9%98%bf%e9%87%8c%e4%ba%91ECS%20%ef%bc%8c%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%b3%bb%e7%bb%9f%e5%ae%89%e8%a3%85%e7%9a%84%e6%98%af%c2%a0CentOS%207."><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fnew.halfrost.com%2fghost_build%2f&t=Ghost%20%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%e6%97%a5%e8%ae%b0"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#前言>前言</a></li><li><a href=#目录>目录</a></li><li><a href=#一ghost简介>一.Ghost简介</a></li><li><a href=#二-搭建前准备清单>二. 搭建前准备清单</a></li><li><a href=#三-开始搭建>三. 开始搭建</a></li><li><a href=#四-全站https>四. 全站Https</a></li><li><a href=#五-管局备案--公安备案>五. 管局备案 / 公安备案</a></li><li><a href=#六-cdn优化访问速度>六. CDN优化访问速度</a></li><li><a href=#七-后期维护>七. 后期维护</a></li><li><a href=#最后>最后</a></li></ul></li></ul></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Ghost 博客搭建日记</h1><div class=meta><div class=postdate><time datetime="2016-10-02 22:13:00 +0000 UTC" itemprop=datePublished>Oct 02</time></div><div class=article-category><i class="fas fa-archive"></i><a class=category-link href=/categories/ghost>Ghost</a></div><div class=article-tag><i class="fas fa-tag"></i><a class=tag-link href=/tags/ghost rel=tag>Ghost</a></div></div></header><div class=content itemprop=articleBody><h4 id=前言>前言</h4><p>今年7月阴错阳差的给自己买了一台阿里云服务器，当时是想着自己折腾折腾后台，看能否打通前端和后端之间的任督二脉。直到我发现我原来放在GitPage上的博客访问速度慢的实在不能忍，痛下决心之后，就把原来Jekyll搭建的博客站点一口气都迁移到了现在自己阿里云的主机上了。原来的Jekyll博客还在，还在GitPage上。换到了国内自己的阿里云主机上，我就用了优雅的Ghost搭建我的新家了。</p><p>今年8月的时候，博客上线了，网友们看见我这个博客还不错，让我出一下搭建教程。虽然博客上线，还没有通过网络管理中心的审核，还不知道之后会发生什么。当时的我也对Ghost不是很熟，也不知道后期如何维护，所以想着先让Ghost在服务器上面跑一个月看看，有了心得体会之后在写篇文章记录一下搭建过程。</p><p>现在博客也跑了一个多月了，日常维护都玩的转了，于是就有了这一篇文章了。</p><h4 id=目录>目录</h4><ul><li>1.Ghost 简介</li><li>2.搭建前准备清单</li><li>3.开始搭建</li><li>4.全站 Https</li><li>5.管局备案 / 公安备案</li><li>6.CDN 优化访问速度</li><li>7.后期维护</li></ul><h4 id=一ghost简介>一.Ghost简介</h4><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_1.png alt></p><p>Ghost 是一套基于 Node.js 构建的开源博客平台（Open source blogging platform），具有易用的书写界面和体验，博客内容默认采用 Markdown 语法书写，不过原生的不支持Markdown的表格和<a href="http://www.baidu.com/link?url=K_4JBAR3uS6xnec99adJX0IzXiUT0ANv52nbth0WUNaf3Z52ob2qSLRPX0KjGNEBBBXE5d8hEvOhKdgBR77EDa">LaTeX</a>，如果需要使用，需要在服务器端安装插件。</p><p>Ghost目标是取代臃肿的 Wordpress，界面简洁，专注写作，支持在线预览和在线写作。</p><p>Ghost属于动态博客，页面并不是像<a href=http://hexo.io/>Hexo</a>,<a href=http://jekyllrb.com/>Jekyll</a>这类静态博客，在编译的时候会生成所有页面。Ghost有前台和后台。后台负责写作，发布文章，系统配置，等等。</p><h5 id=1-ghost的优势和劣势>1. Ghost的优势和劣势</h5><p>这里有篇<a href=https://segmentfault.com/a/1190000002947497>文章</a>是这样评论Ghost的优缺点的</p><ul><li><p>优势
技术上,采用<a href=https://nodejs.org/en>NodeJs</a>，在可预见的未来里，无疑比<a href=http://php.net/>PHP</a>有更多优势，并发能力远超Wordpress，虽然NodeJs后期维护成本高，但是我们只是借它做博客而已。
易用性上，专注写作，评论，超炫皮肤，完美支持 MarkDown,没有Wordpress那么臃肿，回归到博客最原始的状态,传递文字最原始的力量。
使用上，便捷，随时随地编辑，比<a href=http://hexo.io/>Hexo</a>,<a href=http://jekyllrb.com/>Jekyll</a>这类静态博客要书写方便，特别是在不同电脑上写作时。</p></li><li><p>劣势
需要配套支持Node环境的虚拟机，一般免费的很少支持，这时必须得掏腰包了。
后台简陋,许多功能还未完善，不过写作这一块没啥大问题。</p></li></ul><p>关于劣势，我再说一点，Ghost没有Hexo上面那么丰富的插件。</p><h5 id=2-ghost的亮点>2. Ghost的亮点：</h5><ul><li>采用Mysql作为数据库,通用快速上手，这里也可以用其他数据库比如Sqlite。</li><li>Nginx作为反向代理,配置多个Ghost博客,同时也能增加了网站的负载。</li><li>非常简易化的Ubuntu的Node.js安装方法，不用编译打包。</li><li>安装系统服务,开机重启Ghost服务，免去日后以后操作。</li><li>采用<a href=http://fontawesome.io/icons/>Font Awesome</a>作为社交按钮，也可以自定义图标。</li><li><a href=http://highlightjs.org/>highlight.js</a> 作为主题的代码高亮引擎</li><li>整合<a href=https://disqus.com/>Disqus</a>评论系统,建立属于自己的Discuss圈</li><li>国外优秀免费<a href=http://themeforest.net/category/blogging/ghost-themes>Ghost主题</a>资源分享</li><li>整合<a href=http://tongji.baidu.com/web/welcome/login>百度统计</a>以及<a href=http://share.baidu.com/>百度分享</a></li></ul><h4 id=二-搭建前准备清单>二. 搭建前准备清单</h4><ul><li>一个可用的域名</li><li>一台服务器 ( 我买的<a href="https://www.aliyun.com/product/ecs?spm=5176.8048432.416540.25.gO4w50">阿里云ECS</a> ，服务器系统安装的是 CentOS 7.0 64位)</li><li>Node v0.10.40（官方建议版本，<strong>注意，安装Ghost中文版，只能安装这个版本的Node，安装高版本的会不识别，安装其他版本的Ghost也一定要注意对准版本号</strong>）</li><li>Nginx 1.80</li><li>Mysql</li><li>Ghost v0.7.4 full (zh)（<strong>中文汉化</strong>、支持<strong>七牛</strong>、<strong>又拍云</strong>、<strong>阿里云OSS</strong>存储) 目前Ghost最新版是v<strong>0.11.1</strong> (3.8mb zip)，中文版最新版本号只到v0.7.4。</li></ul><p>Ghost官网 <a href=https://ghost.org/>https://ghost.org/</a><br>Ghost中文官网 <a href=http://www.ghostchina.com/>http://www.ghostchina.com/</a><br>Ghost中文文档 <a href=http://docs.ghostchina.com/zh/>http://docs.ghostchina.com/zh/</a></p><h4 id=三-开始搭建>三. 开始搭建</h4><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_2.png alt></p><h5 id=1-安装node>1. 安装Node</h5><p>Ghost是基于Node.js构建的开源博客平台，所以我们首先搭建Node环境。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_3.png alt></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>wget</span> <span style=color:#a6e22e>http</span>:<span style=color:#e6db74>//</span><span style=color:#a6e22e>nodejs</span>.<span style=color:#a6e22e>org</span><span style=color:#e6db74>/dist/</span><span style=color:#a6e22e>v0</span>.<span style=color:#ae81ff>10</span>.<span style=color:#ae81ff>40</span>/<span style=color:#a6e22e>node</span>-<span style=color:#a6e22e>v0</span>.<span style=color:#ae81ff>10</span>.<span style=color:#ae81ff>40</span>.<span style=color:#a6e22e>tar</span>.<span style=color:#a6e22e>gz</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>tar</span> <span style=color:#a6e22e>zxvf</span> <span style=color:#a6e22e>node</span>-<span style=color:#a6e22e>v0</span>.<span style=color:#ae81ff>10</span>.<span style=color:#ae81ff>40</span>.<span style=color:#a6e22e>tar</span>.<span style=color:#a6e22e>gz</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>cd</span> <span style=color:#a6e22e>node</span>-<span style=color:#a6e22e>v0</span>.<span style=color:#ae81ff>10</span>.<span style=color:#ae81ff>40</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ ./<span style=color:#a6e22e>configure</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>make</span> &amp;&amp; <span style=color:#a6e22e>make</span> <span style=color:#a6e22e>install</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>命令执行完毕之后，检测一下环境是否配置成功。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>node</span> -<span style=color:#a6e22e>v</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>v0</span>.<span style=color:#ae81ff>10</span>.<span style=color:#ae81ff>40</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>显示node的版本号，即为安装成功。</p><p><strong>一定要注意node的版本号和Ghost的版本是否对应</strong>，如果不对应，会报下面的错误</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_26.png alt></p><p>解决办法就是更改node的版本。</p><h5 id=2-安装nginx>2. 安装Nginx</h5><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_4.png alt></p><p>Nginx是一款轻量级的Web服务器/反向代理服务器及电子邮件（IMAP/POP3）代理服务器，并在一个BSD-like 协议下发行。</p><p>首先在/etc/yum.repos.d/目录下创建一个源配置文件nginx.repo</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>vi</span> <span style=color:#e6db74>/etc/</span><span style=color:#a6e22e>yum</span>.<span style=color:#a6e22e>repos</span>.<span style=color:#a6e22e>d</span>/<span style=color:#a6e22e>nginx</span>.<span style=color:#a6e22e>repo</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>写入以下内容：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>[<span style=color:#a6e22e>nginx</span>] <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>name</span>=<span style=color:#a6e22e>nginx</span> <span style=color:#a6e22e>repo</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>baseurl</span>= <span style=color:#a6e22e>http</span>:<span style=color:#e6db74>//</span><span style=color:#a6e22e>nginx</span>.<span style=color:#a6e22e>org</span><span style=color:#e6db74>/packages/</span><span style=color:#a6e22e>centos</span><span style=color:#e6db74>/$releasever/</span>$<span style=color:#a6e22e>basearch</span>/ <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>gpgcheck</span>=<span style=color:#ae81ff>0</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>enabled</span>=<span style=color:#ae81ff>1</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>保存。</p><p>按i编辑，按Esc结束编辑，:x保存修改并退出，:q!强制退出，放弃修改，:wq也是保存并退出。</p><p>初始化好Nginx之后，继续执行以下指令：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>yum</span> <span style=color:#a6e22e>install</span> <span style=color:#a6e22e>nginx</span> -<span style=color:#a6e22e>y</span> # <span style=color:#a6e22e>安装</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>Nginx</span> <span style=color:#a6e22e>service</span> <span style=color:#a6e22e>nginx</span> <span style=color:#a6e22e>start</span> # <span style=color:#a6e22e>启动</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>Nginx</span> <span style=color:#a6e22e>chkconfig</span> <span style=color:#a6e22e>nginx</span> <span style=color:#a6e22e>on</span> # <span style=color:#a6e22e>设置开机启动Nginx</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>这样Nginx就安装成功了，在浏览器中输入你的服务器的IP地址就可以看到提示：“Welcome to Nginx!”</p><h5 id=3-配置nginx>3. 配置Nginx</h5><p>安装好了nginx后，我们需要设置一个代理服务器让我们的博客可以使用域名访问。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>cd</span> <span style=color:#e6db74>/etc/</span><span style=color:#a6e22e>nginx</span>/<span style=color:#a6e22e>conf</span>.<span style=color:#a6e22e>d</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>在这个目录下创建一个配置文件ghost.conf</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>vi</span> <span style=color:#e6db74>/etc/</span><span style=color:#a6e22e>nginx</span><span style=color:#e6db74>/conf.d/</span><span style=color:#a6e22e>ghost</span>.<span style=color:#a6e22e>conf</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>粘贴以下内容：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>server</span> {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#a6e22e>listen</span> <span style=color:#ae81ff>443</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#a6e22e>server_name</span> <span style=color:#a6e22e>halfrost</span>.<span style=color:#a6e22e>com</span> <span style=color:#a6e22e>www</span>.<span style=color:#a6e22e>halfrost</span>.<span style=color:#a6e22e>com</span>; #<span style=color:#a6e22e>这里写你的域名或者ip地址</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#a6e22e>ssl</span> <span style=color:#a6e22e>on</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#a6e22e>ssl_certificate</span> <span style=color:#e6db74>/etc/</span><span style=color:#a6e22e>letsencrypt</span><span style=color:#e6db74>/live/</span><span style=color:#a6e22e>halfrost</span>.<span style=color:#a6e22e>com</span>/<span style=color:#a6e22e>fullchain</span>.<span style=color:#a6e22e>pem</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#a6e22e>ssl_certificate_key</span> <span style=color:#e6db74>/etc/</span><span style=color:#a6e22e>letsencrypt</span><span style=color:#e6db74>/live/</span><span style=color:#a6e22e>halfrost</span>.<span style=color:#a6e22e>com</span>/<span style=color:#a6e22e>privkey</span>.<span style=color:#a6e22e>pem</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#a6e22e>location</span> / {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>        <span style=color:#a6e22e>proxy_set_header</span>   <span style=color:#a6e22e>X</span>-<span style=color:#a6e22e>Real</span>-<span style=color:#a6e22e>IP</span> $<span style=color:#a6e22e>remote_addr</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>        <span style=color:#a6e22e>proxy_set_header</span>   <span style=color:#a6e22e>Host</span>      $<span style=color:#a6e22e>http_host</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>        <span style=color:#a6e22e>proxy_pass</span>         <span style=color:#a6e22e>http</span>:<span style=color:#e6db74>//</span><span style=color:#ae81ff>127</span>.<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>2368</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    }<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>}<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>中间有3行SSL的，是为了后面全站配置Https的，如果不需要Https，中间3行不需要加。</p><p>保存退出，重启nginx：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>service</span> <span style=color:#a6e22e>nginx</span> <span style=color:#a6e22e>restart</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>Nginx 就配置完成了。</p><h5 id=4-安装mysql>4. 安装Mysql</h5><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_5.png alt></p><p>Ghost 默认使用 sqlite3 数据库，对于一般使用足够了，但是内容多的话，就会拖慢整个系统，也就影响页面打开速度了，不想使用Mysql的朋友可以跳过这步。 </p><p>CentOS7的yum源中默认好像是没有mysql的。为了解决这个问题，我们要先下载mysql的repo源。</p><p>1.下载mysql的repo源</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>wget</span> <span style=color:#a6e22e>http</span>:<span style=color:#e6db74>//</span><span style=color:#a6e22e>repo</span>.<span style=color:#a6e22e>mysql</span>.<span style=color:#a6e22e>com</span>/<span style=color:#a6e22e>mysql</span>-<span style=color:#a6e22e>community</span>-<span style=color:#a6e22e>release</span>-<span style=color:#a6e22e>el7</span><span style=color:#ae81ff>-5</span>.<span style=color:#a6e22e>noarch</span>.<span style=color:#a6e22e>rpm</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>2.安装mysql-community-release-el7-5.noarch.rpm包</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>sudo</span> <span style=color:#a6e22e>rpm</span> -<span style=color:#a6e22e>ivh</span> <span style=color:#a6e22e>mysql</span>-<span style=color:#a6e22e>community</span>-<span style=color:#a6e22e>release</span>-<span style=color:#a6e22e>el7</span><span style=color:#ae81ff>-5</span>.<span style=color:#a6e22e>noarch</span>.<span style=color:#a6e22e>rpm</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>安装这个包后，会获得两个mysql的yum repo源：<br>/etc/yum.repos.d/mysql-community.repo，
/etc/yum.repos.d/mysql-community-source.repo。</p><p>3.安装mysql</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>sudo</span> <span style=color:#a6e22e>yum</span> <span style=color:#a6e22e>install</span> <span style=color:#a6e22e>mysql</span>-<span style=color:#a6e22e>server</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>根据步骤安装就可以了，不过安装完成后，没有密码，需要重置密码。</p><p>4.重置密码</p><p>重置密码前，首先要登录</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>mysql</span> -<span style=color:#a6e22e>u</span> <span style=color:#a6e22e>root</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>登录时有可能报这样的错：ERROR 2002 (HY000): Can‘t connect to local MySQL server through socket ‘/var/lib/mysql/mysql.sock‘ (2)，原因是/var/lib/mysql的访问权限问题。下面的命令把/var/lib/mysql的拥有者改为当前用户：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>sudo</span> <span style=color:#a6e22e>chown</span> -<span style=color:#a6e22e>R</span> <span style=color:#a6e22e>openscanner</span>:<span style=color:#a6e22e>openscanner</span> <span style=color:#e6db74>/var/</span><span style=color:#a6e22e>lib</span>/<span style=color:#a6e22e>mysql</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>然后，重启服务：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>service</span> <span style=color:#a6e22e>mysqld</span> <span style=color:#a6e22e>restart</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>chkconfig</span> <span style=color:#a6e22e>mysqld</span> <span style=color:#a6e22e>on</span> # <span style=color:#a6e22e>设置开机启动Mysql</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><h5 id=5-配置mysql>5. 配置Mysql</h5><p>输入mysql_secure_installation配置Mysql：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>Set</span> <span style=color:#a6e22e>root</span> <span style=color:#a6e22e>password</span>? [<span style=color:#a6e22e>Y</span>/<span style=color:#a6e22e>n</span>] # <span style=color:#a6e22e>设置root密码</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>anonymous</span> <span style=color:#a6e22e>users</span>? [<span style=color:#a6e22e>Y</span>/<span style=color:#a6e22e>n</span>] # <span style=color:#a6e22e>删除匿名用户</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>Disallow</span> <span style=color:#a6e22e>root</span> <span style=color:#a6e22e>login</span> <span style=color:#a6e22e>remotely</span>? [<span style=color:#a6e22e>Y</span>/<span style=color:#a6e22e>n</span>] # <span style=color:#a6e22e>禁止root用户远程登录</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>Remove</span> <span style=color:#a6e22e>test</span> <span style=color:#a6e22e>database</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>access</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>it</span>? [<span style=color:#a6e22e>Y</span>/<span style=color:#a6e22e>n</span>] # <span style=color:#a6e22e>删除默认的</span> <span style=color:#a6e22e>test</span> <span style=color:#a6e22e>数据库</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>Reload</span> <span style=color:#a6e22e>privilege</span> <span style=color:#a6e22e>tables</span> <span style=color:#a6e22e>now</span>? [<span style=color:#a6e22e>Y</span>/<span style=color:#a6e22e>n</span>] # <span style=color:#a6e22e>刷新授权表使修改生效</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>为了避免数据库存放的中文是乱码，我们还需要设置Mysql的编码：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>vi</span> <span style=color:#e6db74>/etc/</span><span style=color:#a6e22e>my</span>.<span style=color:#a6e22e>cnf</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>粘贴以下内容：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>[<span style=color:#a6e22e>client</span>]<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>default</span>-<span style=color:#a6e22e>character</span>-<span style=color:#a6e22e>set</span>=<span style=color:#a6e22e>utf8</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>[<span style=color:#a6e22e>mysql</span>]<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>default</span>-<span style=color:#a6e22e>character</span>-<span style=color:#a6e22e>set</span>=<span style=color:#a6e22e>utf8</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>[<span style=color:#a6e22e>mysqld</span>]<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>character</span>-<span style=color:#a6e22e>set</span>-<span style=color:#a6e22e>server</span>=<span style=color:#a6e22e>utf8</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>collation</span>-<span style=color:#a6e22e>server</span>=<span style=color:#a6e22e>utf8_general_ci</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>保存退出，重启Mysql：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>service</span> <span style=color:#a6e22e>mysqld</span> <span style=color:#a6e22e>restart</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>最后我们需要新建一个数据库，用来存放博客的数据：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>mysql</span> -<span style=color:#a6e22e>u</span> <span style=color:#a6e22e>root</span> -<span style=color:#a6e22e>p</span> # <span style=color:#a6e22e>输入设置好的密码</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>create</span> <span style=color:#a6e22e>database</span> <span style=color:#a6e22e>ghost</span>; # <span style=color:#a6e22e>创建ghost数据库</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>grant</span> <span style=color:#a6e22e>all</span> <span style=color:#a6e22e>privileges</span> <span style=color:#a6e22e>on</span> <span style=color:#a6e22e>ghost</span>.* <span style=color:#a6e22e>to</span> <span style=color:#e6db74>&#39;ghost&#39;</span>@<span style=color:#e6db74>&#39;%&#39;</span> <span style=color:#a6e22e>identified</span> <span style=color:#a6e22e>by</span> <span style=color:#e6db74>&#39;123456&#39;</span>; # <span style=color:#a6e22e>新建一个用户ghost</span>，<span style=color:#a6e22e>密码为123456</span>，<span style=color:#a6e22e>这里自己设置</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>flush</span> <span style=color:#a6e22e>privileges</span> # <span style=color:#a6e22e>重新读取权限表中的数据到内存</span>，<span style=color:#a6e22e>不用重启mysql就可以让权限生效</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>Mysql数据库就安装配置完成了。</p><h5 id=6-安装ghost>6. 安装Ghost</h5><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_6.jpg alt></p><p>首先下载Ghost：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>cd</span> <span style=color:#e6db74>/var/</span><span style=color:#a6e22e>www</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>wget</span> <span style=color:#a6e22e>http</span>:<span style=color:#e6db74>//</span><span style=color:#a6e22e>dl</span>.<span style=color:#a6e22e>ghostchina</span>.<span style=color:#a6e22e>com</span>/<span style=color:#a6e22e>Ghost</span><span style=color:#ae81ff>-0</span>.<span style=color:#ae81ff>7</span>.<span style=color:#ae81ff>4</span>-<span style=color:#a6e22e>zh</span>-<span style=color:#a6e22e>full</span>.<span style=color:#a6e22e>zip</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>unzip</span> <span style=color:#a6e22e>Ghost</span><span style=color:#ae81ff>-0</span>.<span style=color:#ae81ff>7</span>.<span style=color:#ae81ff>4</span>-<span style=color:#a6e22e>zh</span>-<span style=color:#a6e22e>full</span>.<span style=color:#a6e22e>zip</span> -<span style=color:#a6e22e>d</span> <span style=color:#a6e22e>ghost</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>cd</span> <span style=color:#a6e22e>ghost</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>接着修改默认配置：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>cp</span> <span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>example</span>.<span style=color:#a6e22e>js</span> <span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>js</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>vi</span> <span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>js</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>Ghost有产品模式、开发模式和测试模式等多种运行模式，这里我们需要在配置文件中找到production模式：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>config</span> = {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#e6db74>//</span> ### <span style=color:#a6e22e>Production</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#e6db74>//</span> <span style=color:#a6e22e>When</span> <span style=color:#a6e22e>running</span> <span style=color:#a6e22e>Ghost</span> <span style=color:#a6e22e>in</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>wild</span>, <span style=color:#a6e22e>use</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>production</span> <span style=color:#a6e22e>environment</span>.<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#e6db74>//</span> <span style=color:#a6e22e>Configure</span> <span style=color:#a6e22e>your</span> <span style=color:#a6e22e>URL</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>mail</span> <span style=color:#a6e22e>settings</span> <span style=color:#a6e22e>here</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#a6e22e>production</span>: {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>        <span style=color:#a6e22e>url</span>: <span style=color:#e6db74>&#39;http://www.halfrost.com&#39;</span>,<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>        <span style=color:#a6e22e>mail</span>: {},<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>        <span style=color:#a6e22e>database</span>: {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>            <span style=color:#a6e22e>client</span>: <span style=color:#e6db74>&#39;mysql&#39;</span>,<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>            <span style=color:#a6e22e>connection</span>: {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>               <span style=color:#e6db74>//</span> <span style=color:#a6e22e>filename</span>: <span style=color:#a6e22e>path</span>.<span style=color:#a6e22e>join</span>(<span style=color:#a6e22e>__dirname</span>, <span style=color:#e6db74>&#39;/content/data/ghost.db&#39;</span>)<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>               <span style=color:#a6e22e>host</span>:<span style=color:#e6db74>&#39;127.0.0.1&#39;</span>,<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>               <span style=color:#a6e22e>user</span>:<span style=color:#e6db74>&#39;ghost&#39;</span>,  #<span style=color:#a6e22e>数据库连接的用户</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>               <span style=color:#a6e22e>password</span>:<span style=color:#e6db74>&#39;iloveghost&#39;</span>, #<span style=color:#a6e22e>之前数据库创建的密码</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>               <span style=color:#a6e22e>database</span>:<span style=color:#e6db74>&#39;ghost&#39;</span>,  #<span style=color:#a6e22e>之前创建的数据库名字</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>               <span style=color:#a6e22e>charset</span>:<span style=color:#e6db74>&#39;utf8&#39;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>            },<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>            <span style=color:#a6e22e>debug</span>: <span style=color:#a6e22e>false</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>        },<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span> <span style=color:#e6db74>//</span> <span style=color:#a6e22e>配置MySQL</span> <span style=color:#a6e22e>数据库</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>        /*<span style=color:#a6e22e>database</span>: {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>            <span style=color:#a6e22e>client</span>: <span style=color:#e6db74>&#39;mysql&#39;</span>,<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>            <span style=color:#a6e22e>connection</span>: {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>                <span style=color:#a6e22e>host</span>     : <span style=color:#e6db74>&#39;host&#39;</span>,<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>                <span style=color:#a6e22e>user</span>     : <span style=color:#e6db74>&#39;user&#39;</span>,<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>                <span style=color:#a6e22e>password</span> : <span style=color:#e6db74>&#39;password&#39;</span>,<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>                <span style=color:#a6e22e>database</span> : <span style=color:#e6db74>&#39;database&#39;</span>,<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>                <span style=color:#a6e22e>charset</span>  : <span style=color:#e6db74>&#39;utf8&#39;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>            },<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>            <span style=color:#a6e22e>debug</span>: <span style=color:#a6e22e>false</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>        },*/<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>        <span style=color:#a6e22e>server</span>: {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>            <span style=color:#a6e22e>host</span>: <span style=color:#e6db74>&#39;127.0.0.1&#39;</span>,<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>            <span style=color:#a6e22e>port</span>: <span style=color:#e6db74>&#39;2368&#39;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>        },<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>       <span style=color:#e6db74>//</span><span style=color:#a6e22e>Storage</span>.<span style=color:#a6e22e>Now</span>,<span style=color:#a6e22e>we</span> <span style=color:#a6e22e>can</span> <span style=color:#a6e22e>support</span> `<span style=color:#a6e22e>qiniu</span>`,`<span style=color:#a6e22e>upyun</span>`, `<span style=color:#a6e22e>aliyun</span> <span style=color:#a6e22e>oss</span>`, `<span style=color:#a6e22e>aliyun</span> <span style=color:#a6e22e>ace</span>-<span style=color:#a6e22e>storage</span>` <span style=color:#a6e22e>and</span> `<span style=color:#a6e22e>local</span>-<span style=color:#a6e22e>file</span>-<span style=color:#a6e22e>store</span>`<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>       <span style=color:#e6db74>//</span> <span style=color:#a6e22e>storage</span>: {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>           <span style=color:#e6db74>//</span> <span style=color:#a6e22e>provider</span>: <span style=color:#e6db74>&#39;local-file-store&#39;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>       <span style=color:#e6db74>//</span> }<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>        <span style=color:#e6db74>//</span> <span style=color:#a6e22e>or</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>        <span style=color:#e6db74>//</span> <span style=color:#a6e22e>参考文档</span>： <span style=color:#a6e22e>http</span>:<span style=color:#e6db74>//</span><span style=color:#a6e22e>www</span>.<span style=color:#a6e22e>ghostchina</span>.<span style=color:#a6e22e>com</span><span style=color:#e6db74>/qiniu-cdn-for-ghost/</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>        <span style=color:#a6e22e>storage</span>: {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>            <span style=color:#a6e22e>provider</span>: <span style=color:#e6db74>&#39;qiniu&#39;</span>,<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>            <span style=color:#a6e22e>bucketname</span>: <span style=color:#e6db74>&#39;Mybucketname&#39;</span>,<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>            <span style=color:#a6e22e>ACCESS_KEY</span>: <span style=color:#e6db74>&#39;TZmRdasfdasfps5NDJEK4d*JsdgYGFFgWOsy5k_k0Zu&#39;</span>,<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>            <span style=color:#a6e22e>SECRET_KEY</span>: <span style=color:#e6db74>&#39;7IsGSDDf1ef4HEsafsagLPDfs3gCkr$FERFe6ivfT&#39;</span>,<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>            <span style=color:#a6e22e>root</span>: <span style=color:#e6db74>&#39;/Blog/&#39;</span>,<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>            <span style=color:#a6e22e>prefix</span>: <span style=color:#e6db74>&#39;https://odd2zeri30g.qnssl.com/&#39;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>        }<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>storage这一项是配置云存储的，支持七牛，又拍云，阿里云等等，具体设置需要查看相应文档。如果只需要本地存储，改成下面的样子：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>   <span style=color:#a6e22e>storage</span>: { <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>     <span style=color:#a6e22e>provider</span>: <span style=color:#e6db74>&#39;local-file-store&#39;</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>}<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>保存并退出，Ghost就配置完成了。</p><p>运行</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>npm</span> <span style=color:#a6e22e>start</span> --<span style=color:#a6e22e>production</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>启动浏览器，输入之前配置的域名或者IP，我们就可以看到建立好的Ghost博客啦。 （Ctrl+C 中断掉开发者模式）</p><h5 id=7部署ghost>7.部署Ghost</h5><p>前面提到的启动 Ghost 使用 npm start &ndash;production 命令。这是一个在开发模式下启动和测试的不错的选择，但是通过这种命令行启动的方式有个缺点，即当你关闭终端窗口或者从 SSH 断开连接时，Ghost 就停止了。为了防止 Ghost 停止工作，我们得解决这个问题。</p><p>以下有几种解决方案：<br>PM2(<a href=https://github.com/Unitech/pm2>https://github.com/Unitech/pm2</a>) <br>Forever (<a href=https://npmjs.org/package/forever>https://npmjs.org/package/forever</a>) <br>Supervisor (<a href=http://supervisord.org/>http://supervisord.org/</a>)</p><p>这里我们使用PM2让Ghost保持运行：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>cd</span> <span style=color:#e6db74>/var/</span><span style=color:#a6e22e>www</span>/<span style=color:#a6e22e>ghost</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>npm</span> <span style=color:#a6e22e>install</span> <span style=color:#a6e22e>pm2</span> -<span style=color:#a6e22e>g</span> # <span style=color:#a6e22e>安装PM2</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>NODE_ENV</span>=<span style=color:#a6e22e>production</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>pm2</span> <span style=color:#a6e22e>start</span> <span style=color:#a6e22e>index</span>.<span style=color:#a6e22e>js</span> --<span style=color:#a6e22e>name</span> <span style=color:#e6db74>&#34;ghost&#34;</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>pm2</span> <span style=color:#a6e22e>startup</span> <span style=color:#a6e22e>centos</span> <span style=color:#a6e22e>pm2</span> <span style=color:#a6e22e>save</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>如果npm安装依赖的时候无法安装，需要把镜像换成淘宝的，再试试。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>npm</span> <span style=color:#a6e22e>install</span> -<span style=color:#a6e22e>g</span> <span style=color:#a6e22e>cnpm</span> --<span style=color:#a6e22e>registry</span>= <span style=color:#a6e22e>https</span>:<span style=color:#e6db74>//</span><span style=color:#a6e22e>registry</span>.<span style=color:#a6e22e>npm</span>.<span style=color:#a6e22e>taobao</span>.<span style=color:#a6e22e>org</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>cnpm</span> <span style=color:#a6e22e>install</span> <span style=color:#a6e22e>pm2</span> -<span style=color:#a6e22e>g</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>NODE_ENV</span>=<span style=color:#a6e22e>production</span> <span style=color:#a6e22e>pm2</span> <span style=color:#a6e22e>start</span> <span style=color:#a6e22e>index</span>.<span style=color:#a6e22e>js</span> --<span style=color:#a6e22e>name</span> <span style=color:#e6db74>&#34;ghost&#34;</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>pm2</span> <span style=color:#a6e22e>startup</span> <span style=color:#a6e22e>centos</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>pm2</span> <span style=color:#a6e22e>save</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>这样一来，我们的Ghost博客就可以保持运行啦，你可以使用以下指令来控制Ghost博客：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>pm2</span> <span style=color:#a6e22e>start</span><span style=color:#e6db74>/stop/</span><span style=color:#a6e22e>restart</span> <span style=color:#a6e22e>ghost</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><h5 id=8-初始化ghost>8. 初始化Ghost</h5><p>现在所有准备工作都做好了，打开你的浏览器，在浏览器中输入 域名地址/ghost/，开始初始化用户名，密码，就可以开始愉快的Ghost之旅了。</p><h4 id=四-全站https>四. 全站Https</h4><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_7.png alt></p><p>Let&rsquo;s Encrypt是国外一个公共的免费SSL项目，由 Linux 基金会托管，它的来头不小，由Mozilla、思科、Akamai、IdenTrust和EFF等组织发起，目的就是向网站自动签发和管理免费证书，以便加速互联网由HTTP过渡到HTTPS，目前Facebook等大公司开始加入赞助行列。</p><p>Let&rsquo;s Encrypt已经得了 IdenTrust 的交叉签名，这意味着其证书现在已经可以被Mozilla、Google、Microsoft和Apple等主流的浏览器所信任，你只需要在Web 服务器证书链中配置交叉签名，浏览器客户端会自动处理好其它的一切，Let&rsquo;s Encrypt安装简单，未来大规模采用可能性非常大。</p><p>Let&rsquo;s Encrypt官网：<br>1、官方网站：https://letsencrypt.org/<br>2、项目主页：https://github.com/letsencrypt/letsencrypt</p><h5 id=1-安装lets-encrypt免费ssl准备>1、 安装Let&rsquo;s Encrypt免费SSL准备</h5><p>安装Let&rsquo;s Encrypt脚本依赖环境：（这一部分可以跳过，因为官方提供的Let&rsquo;s Encrypt脚本会自动检测并安装）</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span># <span style=color:#a6e22e>Debian</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>apt</span>-<span style=color:#a6e22e>get</span> <span style=color:#a6e22e>install</span> <span style=color:#a6e22e>git</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span># <span style=color:#a6e22e>CentOS</span> <span style=color:#ae81ff>6</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>yum</span> <span style=color:#a6e22e>install</span> <span style=color:#a6e22e>centos</span>-<span style=color:#a6e22e>release</span>-<span style=color:#a6e22e>SCL</span> &amp;&amp; <span style=color:#a6e22e>yum</span> <span style=color:#a6e22e>update</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>yum</span> <span style=color:#a6e22e>install</span> <span style=color:#a6e22e>python27</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>scl</span> <span style=color:#a6e22e>enable</span> <span style=color:#a6e22e>python27</span> <span style=color:#a6e22e>bash</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>yum</span> <span style=color:#a6e22e>install</span> <span style=color:#a6e22e>python27</span>-<span style=color:#a6e22e>python</span>-<span style=color:#a6e22e>devel</span> <span style=color:#a6e22e>python27</span>-<span style=color:#a6e22e>python</span>-<span style=color:#a6e22e>setuptools</span> <span style=color:#a6e22e>python27</span>-<span style=color:#a6e22e>python</span>-<span style=color:#a6e22e>tools</span> <span style=color:#a6e22e>python27</span>-<span style=color:#a6e22e>python</span>-<span style=color:#a6e22e>virtualenv</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>yum</span> <span style=color:#a6e22e>install</span> <span style=color:#a6e22e>augeas</span>-<span style=color:#a6e22e>libs</span> <span style=color:#a6e22e>dialog</span> <span style=color:#a6e22e>gcc</span> <span style=color:#a6e22e>libffi</span>-<span style=color:#a6e22e>devel</span> <span style=color:#a6e22e>openssl</span>-<span style=color:#a6e22e>devel</span> <span style=color:#a6e22e>python</span>-<span style=color:#a6e22e>devel</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>yum</span> <span style=color:#a6e22e>install</span> <span style=color:#a6e22e>python</span>-<span style=color:#a6e22e>argparse</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span># <span style=color:#a6e22e>CentOS</span> <span style=color:#ae81ff>7</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>yum</span> <span style=color:#a6e22e>install</span> -<span style=color:#a6e22e>y</span> <span style=color:#a6e22e>git</span> <span style=color:#a6e22e>python27</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>yum</span> <span style=color:#a6e22e>install</span> -<span style=color:#a6e22e>y</span> <span style=color:#a6e22e>augeas</span>-<span style=color:#a6e22e>libs</span> <span style=color:#a6e22e>dialog</span> <span style=color:#a6e22e>gcc</span> <span style=color:#a6e22e>libffi</span>-<span style=color:#a6e22e>devel</span> <span style=color:#a6e22e>openssl</span>-<span style=color:#a6e22e>devel</span> <span style=color:#a6e22e>python</span>-<span style=color:#a6e22e>devel</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>yum</span> <span style=color:#a6e22e>install</span> <span style=color:#a6e22e>python</span>-<span style=color:#a6e22e>argparse</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>查看自己的VPS主机到底是安装了哪个操作系统版本，可以执行命令：cat /etc/issue 或者 cat /etc/redhat-release。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_8.png alt></p><h5 id=2-获取lets-encrypt免费ssl证书>2. 获取Let&rsquo;s Encrypt免费SSL证书</h5><p>获取Let&rsquo;s Encrypt免费SSL证书很简单，你只需要执行以下命令，就会自动在你的VPS上生成SSL证书和私钥。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>git</span> <span style=color:#a6e22e>clone</span> <span style=color:#a6e22e>https</span>:<span style=color:#e6db74>//</span><span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#e6db74>/letsencrypt/</span><span style=color:#a6e22e>letsencrypt</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>cd</span> <span style=color:#a6e22e>letsencrypt</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ ./<span style=color:#a6e22e>letsencrypt</span>-<span style=color:#a6e22e>auto</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>经过测试，上述代码对于Debian系统支持最好，可以完成自动检测并安装相应的软件。如果你是使用其它的Linux系统，Redhat或CentOS 6可能需要配置EPEL软件源，Python需要2.7版本以上。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_9.png alt></p><p>执行上述命令后，会弹出对话框，同意用户协议。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_10.png alt></p><p>接着会提示让你关闭Nginx或者Apache。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_11.png alt></p><p>Let&rsquo;s Encrypt需要用到80和443端口，所以你需要关闭那些占用这两个端口的应用。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_12.png alt></p><p>当你看以下内容时，就表明你的Let&rsquo;s Encrypt免费SSL证书获取成功了。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>IMPORTANT</span> <span style=color:#a6e22e>NOTES</span>:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span> - <span style=color:#a6e22e>Congratulations</span>! <span style=color:#a6e22e>Your</span> <span style=color:#a6e22e>certificate</span> <span style=color:#a6e22e>and</span> <span style=color:#a6e22e>chain</span> <span style=color:#a6e22e>have</span> <span style=color:#a6e22e>been</span> <span style=color:#a6e22e>saved</span> <span style=color:#a6e22e>at</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>   <span style=color:#e6db74>/etc/</span><span style=color:#a6e22e>letsencrypt</span><span style=color:#e6db74>/live/</span><span style=color:#a6e22e>freehao123</span>.<span style=color:#a6e22e>org</span>/<span style=color:#a6e22e>fullchain</span>.<span style=color:#a6e22e>pem</span>. <span style=color:#a6e22e>Your</span> <span style=color:#a6e22e>cert</span> <span style=color:#a6e22e>will</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>   <span style=color:#a6e22e>expire</span> <span style=color:#a6e22e>on</span> <span style=color:#ae81ff>2016-03-09</span>. <span style=color:#a6e22e>To</span> <span style=color:#a6e22e>obtain</span> <span style=color:#a6e22e>a</span> <span style=color:#a6e22e>new</span> <span style=color:#a6e22e>version</span> <span style=color:#a6e22e>of</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>certificate</span> <span style=color:#a6e22e>in</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>   <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>future</span>, <span style=color:#a6e22e>simply</span> <span style=color:#a6e22e>run</span> <span style=color:#a6e22e>Let</span>&#39;<span style=color:#a6e22e>s</span> <span style=color:#a6e22e>Encrypt</span> <span style=color:#a6e22e>again</span>.<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span> - <span style=color:#a6e22e>If</span> <span style=color:#a6e22e>like</span> <span style=color:#a6e22e>Let</span>&#39;<span style=color:#a6e22e>s</span> <span style=color:#a6e22e>Encrypt</span>, <span style=color:#a6e22e>please</span> <span style=color:#a6e22e>consider</span> <span style=color:#a6e22e>supporting</span> <span style=color:#a6e22e>our</span> <span style=color:#a6e22e>work</span> <span style=color:#a6e22e>by</span>:<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>   <span style=color:#a6e22e>Donating</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>ISRG</span> <span style=color:#e6db74>/ Let&#39;s Encrypt:   https://letsencrypt.org/</span><span style=color:#a6e22e>donate</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>   <span style=color:#a6e22e>Donating</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>EFF</span>:                    <span style=color:#a6e22e>https</span>:<span style=color:#e6db74>//</span><span style=color:#a6e22e>eff</span>.<span style=color:#a6e22e>org</span>/<span style=color:#a6e22e>donate</span>-<span style=color:#a6e22e>le</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>见下图：</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_13.png alt></p><p>到此，证书就申请结束了。</p><h5 id=3-配置ssl证书>3. 配置SSL证书</h5><p>接下来要配置一下本地的Nginx，在Nginx的config文件里面加入ssl的配置，配置在上面配置Nginx的时候已经写过了。</p><h5 id=4脚本自动获取ssl证书>4.脚本自动获取SSL证书</h5><p>免费申请的SSL证书是每3个月就会过期，如果每次都要手动去申请证书，有点麻烦，而且一旦忘记了，SSL证书就过期了。</p><p>利用脚本快速获取Let&rsquo;s Encrypt SSL证书，调用 acme_tiny.py 认证、获取、更新证书，不需要额外的依赖。</p><p>项目主页：https://github.com/xdtianyu/scripts/tree/master/lets-encrypt</p><p>下载项目到本地</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>wget</span> <span style=color:#a6e22e>https</span>:<span style=color:#e6db74>//</span><span style=color:#a6e22e>raw</span>.<span style=color:#a6e22e>githubusercontent</span>.<span style=color:#a6e22e>com</span><span style=color:#e6db74>/xdtianyu/</span><span style=color:#a6e22e>scripts</span><span style=color:#e6db74>/master/</span><span style=color:#a6e22e>lets</span>-<span style=color:#a6e22e>encrypt</span>/<span style=color:#a6e22e>letsencrypt</span>.<span style=color:#a6e22e>conf</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>wget</span> <span style=color:#a6e22e>https</span>:<span style=color:#e6db74>//</span><span style=color:#a6e22e>raw</span>.<span style=color:#a6e22e>githubusercontent</span>.<span style=color:#a6e22e>com</span><span style=color:#e6db74>/xdtianyu/</span><span style=color:#a6e22e>scripts</span><span style=color:#e6db74>/master/</span><span style=color:#a6e22e>lets</span>-<span style=color:#a6e22e>encrypt</span>/<span style=color:#a6e22e>letsencrypt</span>.<span style=color:#a6e22e>sh</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>chmod</span> +<span style=color:#a6e22e>x</span> <span style=color:#a6e22e>letsencrypt</span>.<span style=color:#a6e22e>sh</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_14.png alt></p><p>配置文件。只需要修改 DOMAIN_KEY DOMAIN_DIR DOMAINS 为你自己的信息</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>ACCOUNT_KEY</span>=<span style=color:#e6db74>&#34;letsencrypt-account.key&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>DOMAIN_KEY</span>=<span style=color:#e6db74>&#34;freehao123.com.key&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>DOMAIN_DIR</span>=<span style=color:#e6db74>&#34;/var/www/freehao123.com&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>DOMAINS</span>=<span style=color:#e6db74>&#34;DNS:freehao123.com,DNS:www.freehao123.com&#34;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>执行过程中会自动生成需要的 key 文件。运行：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>./<span style=color:#a6e22e>letsencrypt</span>.<span style=color:#a6e22e>sh</span> <span style=color:#a6e22e>letsencrypt</span>.<span style=color:#a6e22e>conf</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>注意需要已经绑定域名到 /var/www/www.freehao123.com 目录，即通过 <a href=http://freehao123.com>http://freehao123.com</a> <a href=https://www.freehao123.com>https://www.freehao123.com</a> 可以访问到 /var/www/freehao123.com目录，用于域名的验证。</p><p>正常按照上面的操作即可成功获取到Let&rsquo;s Encrypt SSL证书，不过经过测试最大的问题就是“DNS query timed out”，由于域名DNS解析的问题导致无法验证域名从而获取SSL证书不成功。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>Traceback</span> (<span style=color:#a6e22e>most</span> <span style=color:#a6e22e>recent</span> <span style=color:#a6e22e>call</span> <span style=color:#a6e22e>last</span>):<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#a6e22e>File</span> <span style=color:#e6db74>&#34;/tmp/acme_tiny.py&#34;</span>, <span style=color:#a6e22e>line</span> <span style=color:#ae81ff>198</span>, <span style=color:#a6e22e>in</span> <span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#a6e22e>main</span>(<span style=color:#a6e22e>sys</span>.<span style=color:#a6e22e>argv</span>[<span style=color:#ae81ff>1</span>:])<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#a6e22e>File</span> <span style=color:#e6db74>&#34;/tmp/acme_tiny.py&#34;</span>, <span style=color:#a6e22e>line</span> <span style=color:#ae81ff>194</span>, <span style=color:#a6e22e>in</span> <span style=color:#a6e22e>main</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#a6e22e>signed_crt</span> = <span style=color:#a6e22e>get_crt</span>(<span style=color:#a6e22e>args</span>.<span style=color:#a6e22e>account_key</span>, <span style=color:#a6e22e>args</span>.<span style=color:#a6e22e>csr</span>, <span style=color:#a6e22e>args</span>.<span style=color:#a6e22e>acme_dir</span>, <span style=color:#a6e22e>log</span>=<span style=color:#a6e22e>LOGGER</span>, <span style=color:#a6e22e>CA</span>=<span style=color:#a6e22e>args</span>.<span style=color:#a6e22e>ca</span>)<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#a6e22e>File</span> <span style=color:#e6db74>&#34;/tmp/acme_tiny.py&#34;</span>, <span style=color:#a6e22e>line</span> <span style=color:#ae81ff>149</span>, <span style=color:#a6e22e>in</span> <span style=color:#a6e22e>get_crt</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>    <span style=color:#a6e22e>domain</span>, <span style=color:#a6e22e>challenge_status</span>))<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>ValueError</span>: <span style=color:#a6e22e>hkh</span>.<span style=color:#a6e22e>freehao123</span>.<span style=color:#a6e22e>info</span> <span style=color:#a6e22e>challenge</span> <span style=color:#a6e22e>did</span> <span style=color:#a6e22e>not</span> <span style=color:#a6e22e>pass</span>: {<span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;status&#39;</span>: <span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;invalid&#39;</span>, <span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;validationRecord&#39;</span>: [{<span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;url&#39;</span>: <span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;http://hkh.freehao123.info/.well-known/acme-challenge/sikHlqvbN4MrWkScgr1oZ9RX-lR1l__Z7FWVLhlYR0Q&#39;</span>, <span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;hostname&#39;</span>: <span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;hkh.freehao123.info&#39;</span>, <span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;addressUsed&#39;</span>: <span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;port&#39;</span>: <span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;80&#39;</span>, <span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;addressesResolved&#39;</span>: <span style=color:#a6e22e>None</span>}],  <span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;https://acme-v01.api.letsencrypt.org/acme/challenge/5m1su6O5MmJYlGzCJnEUAnvhweAJwECBhEcvsQi5B2Q/1408863&#39;</span>, <span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;token&#39;</span>: <span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;sikHlqvbN4MrWkScgr1oZ9RX-lR1l__Z7FWVLhlYR0Q&#39;</span>, <span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;error&#39;</span>: {<span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;type&#39;</span>: <span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;urn:acme:error:connection&#39;</span>, <span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;detail&#39;</span>: <span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;DNS query timed out&#39;</span>}, <span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;type&#39;</span>: <span style=color:#a6e22e>u</span><span style=color:#e6db74>&#39;http-01&#39;</span>}<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>如果遇到这种情况，请加上VPN再试一次了。</p><p>配置好了自动获取SSL证书的脚本以后，就不用担心自己的SSL证书会过期啦。</p><p>到这里，访问你博客网站对应的443端口就是https了。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_23.png alt></p><h4 id=五-管局备案--公安备案>五. 管局备案 / 公安备案</h4><p>进行到这一步，其实网站已经“上线”，并且可以成功访问了。不过正常访问80端口会出现以下的界面。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_15.png alt></p><p>但是如果配置好了Https，正常访问443端口是没问题的。</p><p>我猜想这里应该可以把80端口的所有请求都转发到443，那不就可以避开80端口的请求了？不过我没有这么尝试。</p><p>想让我们辛辛苦苦搭建的博客能以正常的方式访问到，那么需要申请管局的备案。我在阿里云买的服务器，申请备案有直达链接，很方便。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_16.png alt></p><p>申请过程需要先填写个人信息，申请地要写身份证所在地。个别地方有特殊规定，比如上海和北京，如果有居住证，可以写居住证的所在地。然后还要上传手持身份证图片，和一些需要亲手签字的扫描件。</p><p>这些提交好了之后，会给你邮寄一块幕布，需要你拍照再次上传备案。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_17.png alt></p><p>之后就是等待了，一般备案从提交到审核通过大概10个工作日左右。如果觉得慢，还可以电话咨询审核进度。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_18.png alt></p><p>当管局备案通过之后，会给你发邮件，里面还有一个公安备案。我看很多教程没有说要公安备案。也许是新出的。点邮件里面的链接，继续进行公安备案。</p><p>公安备案也是需要填写个人信息。这里全部提交完全之后提交就好了，没有管局的备案麻烦，只需要等待审核通过即可。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_19.png alt></p><p>当这两个备案都完美通过之后，就可以算是备案通过，网站可以正常上线了。上线前，记得需要在网站页脚处加上备案号。这些说明在备案通过的邮件里面有详细的说明，把邮件里面说到的事情都做一遍，就OK了。</p><h4 id=六-cdn优化访问速度>六. CDN优化访问速度</h4><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_20.png alt></p><p>网站上线以后，访问速度会比服务器在国外的GitPage访问快一点。但是如果网站图片很多，或者文章图片质量很高，很多，访问速度还是会随之下降。</p><p>这是我们需要加入CDN来加速。</p><p>这里我用的七牛的CDN云服务。申请一个正好，建立好自己的仓库，就可以把需要缓存到CDN的资源都上传进去。图片，视频，音乐都可以放进去。博客里面引用的就是七牛上面这些资源的外链。</p><p>这里需要提醒注意的一点是，七牛记得设置好防盗链和流量提醒，否则别人会偷偷的从你这里盗走好多流量，到月底，我们就白白花掉了好多冤枉钱了。</p><p>由于之前全站设置了Https，所以七牛这里的图片也需要用https的，https的流量比http的免费流量少很多。</p><p>设置好了以后，我跑了一个分，对比之前放在GitPage上的博客访问速度。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_21.png alt></p><h4 id=七-后期维护>七. 后期维护</h4><p>这里的维护基本上指的是博客更新和发布以及Ghost配置的更改。</p><p>在自己的github上把所有的Ghost的配置都放在仓库里面，并把自己服务器的SSH Key加入到Github的key里面去。</p><p>git clone 一份到本地，每次在本地更改了，调试好之后，就先push一份到远端。然后登陆到服务器上，把最新的代码pull下来，应用就好了。pull完之后只要执行</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>service</span> <span style=color:#a6e22e>nginx</span> <span style=color:#a6e22e>restart</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>$ <span style=color:#a6e22e>pm2</span> <span style=color:#a6e22e>restart</span> <span style=color:#a6e22e>ghost</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>执行这两句就可以了。</p><p>平时还可能会出现一些https的问题，遇到了就Google查找错误代码就可以了。</p><p>这里说一个https不兼容百度分享的问题。</p><p>这里有一份修改好的分享代码Github地址<a href=https://github.com/hrwhisper/baiduShare>https://github.com/hrwhisper/baiduShare</a></p><p>static 解压后丢到站点根目录下即可。</p><p>然后对应的百度分享代码中，把http://bdimg.share.baidu.com/改为 /</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>.<span style=color:#a6e22e>src</span>=<span style=color:#e6db74>&#39;http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion=&#39;</span>+~(-<span style=color:#a6e22e>new</span> <span style=color:#a6e22e>Date</span>()<span style=color:#e6db74>/36e5)];&lt;/</span><span style=color:#a6e22e>script</span>&gt;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>改为</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>.<span style=color:#a6e22e>src</span>=<span style=color:#e6db74>&#39;/static/api/js/share.js?v=89860593.js?cdnversion=&#39;</span>+~(-<span style=color:#a6e22e>new</span> <span style=color:#a6e22e>Date</span>()<span style=color:#e6db74>/36e5)];&lt;/</span><span style=color:#a6e22e>script</span>&gt;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>这样就可以了。如果想知道具体是怎么实现了，就看看作者<a href=https://www.hrwhisper.me/baidu-share-not-support-https-solution/>这篇文章</a></p><p>解决百度分享不支持https的还有一个办法是利用七牛的镜像存储</p><p>看了下从百度分享获取的代码，里面主要加载了这个：http://bdimg.share.baidu.com/static/api/js/share.js， 访问了一下确实不支持 HTTPS。利用七牛的镜像存储，或者自己利用服务器的Nginx反向代理一下就可以支持https了。</p><p>具体实现可以看<a href=https://iyaozhen.com/use-qiniu-image-storage-allow-baidu-share-support-https.html>这篇文章</a></p><h4 id=最后>最后</h4><p><img src=https://img.halfrost.com/Blog/ArticleImage/26_22.png alt></p><p>经过我们自己辛辛苦苦一路踩坑过来，搭建出来的博客，一定会好好珍惜。这是我们程序员自己的家，让我们用一篇篇的用心的博客来装饰我们的新家吧。</p><p>参考链接：</p><p><a href=http://docs.ghostchina.com/zh/installation/>安装Ghost & 开始尝试</a><br><a href=https://segmentfault.com/a/1190000002947497>「搭建Ghost博客」经典教程</a><br><a href=http://www.zhihu.com/question/22755373>如何搭建一个Ghost平台的博客</a><br><a href=https://www.digitalocean.com/community/tutorials/how-to-create-a-blog-with-ghost-and-nginx-on-ubuntu-14-04>How To Create a Blog with Ghost and Nginx on Ubuntu 14.04</a><br><a href=https://www.freehao123.com/lets-encrypt/>免费SSL证书Let’s Encrypt安装使用教程:Apache和Nginx配置SSL</a><br><a href=https://snowz.me/how-to-install-ghost/>手把手教你搭建一个属于自己的Ghost博客</a></p><blockquote><p>GitHub Repo：<a href=https://github.com/halfrost/Halfrost-Field>Halfrost-Field</a></p><p>Follow: <a href=https://github.com/halfrost>halfrost · GitHub</a></p><p>Source: <a href=https://halfrost.com/ghost_build/>https://halfrost.com/ghost_build/</a></p></blockquote><img src=https://img.halfrost.com/wechat-qr-code.png></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=https://books.halfrost.com/>Books</a></li><li><a href=https://github.com/halfrost/Halfrost-Field>Github</a></li><li><a href=https://halfrost.me/>About</a></li><li><a href=/index.xml>RSS</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#前言>前言</a></li><li><a href=#目录>目录</a></li><li><a href=#一ghost简介>一.Ghost简介</a></li><li><a href=#二-搭建前准备清单>二. 搭建前准备清单</a></li><li><a href=#三-开始搭建>三. 开始搭建</a></li><li><a href=#四-全站https>四. 全站Https</a></li><li><a href=#五-管局备案--公安备案>五. 管局备案 / 公安备案</a></li><li><a href=#六-cdn优化访问速度>六. CDN优化访问速度</a></li><li><a href=#七-后期维护>七. 后期维护</a></li><li><a href=#最后>最后</a></li></ul></li></ul></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fnew.halfrost.com%2fghost_build%2f"><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fnew.halfrost.com%2fghost_build%2f&text=Ghost%20%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%e6%97%a5%e8%ae%b0"><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fnew.halfrost.com%2fghost_build%2f&title=Ghost%20%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%e6%97%a5%e8%ae%b0"><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fnew.halfrost.com%2fghost_build%2f&is_video=false&description=Ghost%20%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%e6%97%a5%e8%ae%b0"><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Ghost%20%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%e6%97%a5%e8%ae%b0&body=Check out this article: https%3a%2f%2fnew.halfrost.com%2fghost_build%2f"><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fnew.halfrost.com%2fghost_build%2f&title=Ghost%20%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%e6%97%a5%e8%ae%b0"><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fghost_build%2f&title=Ghost%20%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%e6%97%a5%e8%ae%b0"><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fghost_build%2f&title=Ghost%20%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%e6%97%a5%e8%ae%b0"><i class="fab fa-stumbleupon fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://digg.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fghost_build%2f&title=Ghost%20%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%e6%97%a5%e8%ae%b0"><i class="fab fa-digg fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fnew.halfrost.com%2fghost_build%2f&name=Ghost%20%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%e6%97%a5%e8%ae%b0&description=%e5%89%8d%e8%a8%80%20%e4%bb%8a%e5%b9%b47%e6%9c%88%e9%98%b4%e9%94%99%e9%98%b3%e5%b7%ae%e7%9a%84%e7%bb%99%e8%87%aa%e5%b7%b1%e4%b9%b0%e4%ba%86%e4%b8%80%e5%8f%b0%e9%98%bf%e9%87%8c%e4%ba%91%e6%9c%8d%e5%8a%a1%e5%99%a8%ef%bc%8c%e5%bd%93%e6%97%b6%e6%98%af%e6%83%b3%e7%9d%80%e8%87%aa%e5%b7%b1%e6%8a%98%e8%85%be%e6%8a%98%e8%85%be%e5%90%8e%e5%8f%b0%ef%bc%8c%e7%9c%8b%e8%83%bd%e5%90%a6%e6%89%93%e9%80%9a%e5%89%8d%e7%ab%af%e5%92%8c%e5%90%8e%e7%ab%af%e4%b9%8b%e9%97%b4%e7%9a%84%e4%bb%bb%e7%9d%a3%e4%ba%8c%e8%84%89%e3%80%82%e7%9b%b4%e5%88%b0%e6%88%91%e5%8f%91%e7%8e%b0%e6%88%91%e5%8e%9f%e6%9d%a5%e6%94%be%e5%9c%a8GitPage%e4%b8%8a%e7%9a%84%e5%8d%9a%e5%ae%a2%e8%ae%bf%e9%97%ae%e9%80%9f%e5%ba%a6%e6%85%a2%e7%9a%84%e5%ae%9e%e5%9c%a8%e4%b8%8d%e8%83%bd%e5%bf%8d%ef%bc%8c%e7%97%9b%e4%b8%8b%e5%86%b3%e5%bf%83%e4%b9%8b%e5%90%8e%ef%bc%8c%e5%b0%b1%e6%8a%8a%e5%8e%9f%e6%9d%a5Jekyll%e6%90%ad%e5%bb%ba%e7%9a%84%e5%8d%9a%e5%ae%a2%e7%ab%99%e7%82%b9%e4%b8%80%e5%8f%a3%e6%b0%94%e9%83%bd%e8%bf%81%e7%a7%bb%e5%88%b0%e4%ba%86%e7%8e%b0%e5%9c%a8%e8%87%aa%e5%b7%b1%e9%98%bf%e9%87%8c%e4%ba%91%e7%9a%84%e4%b8%bb%e6%9c%ba%e4%b8%8a%e4%ba%86%e3%80%82%e5%8e%9f%e6%9d%a5%e7%9a%84Jekyll%e5%8d%9a%e5%ae%a2%e8%bf%98%e5%9c%a8%ef%bc%8c%e8%bf%98%e5%9c%a8GitPage%e4%b8%8a%e3%80%82%e6%8d%a2%e5%88%b0%e4%ba%86%e5%9b%bd%e5%86%85%e8%87%aa%e5%b7%b1%e7%9a%84%e9%98%bf%e9%87%8c%e4%ba%91%e4%b8%bb%e6%9c%ba%e4%b8%8a%ef%bc%8c%e6%88%91%e5%b0%b1%e7%94%a8%e4%ba%86%e4%bc%98%e9%9b%85%e7%9a%84Ghost%e6%90%ad%e5%bb%ba%e6%88%91%e7%9a%84%e6%96%b0%e5%ae%b6%e4%ba%86%e3%80%82%0a%e4%bb%8a%e5%b9%b48%e6%9c%88%e7%9a%84%e6%97%b6%e5%80%99%ef%bc%8c%e5%8d%9a%e5%ae%a2%e4%b8%8a%e7%ba%bf%e4%ba%86%ef%bc%8c%e7%bd%91%e5%8f%8b%e4%bb%ac%e7%9c%8b%e8%a7%81%e6%88%91%e8%bf%99%e4%b8%aa%e5%8d%9a%e5%ae%a2%e8%bf%98%e4%b8%8d%e9%94%99%ef%bc%8c%e8%ae%a9%e6%88%91%e5%87%ba%e4%b8%80%e4%b8%8b%e6%90%ad%e5%bb%ba%e6%95%99%e7%a8%8b%e3%80%82%e8%99%bd%e7%84%b6%e5%8d%9a%e5%ae%a2%e4%b8%8a%e7%ba%bf%ef%bc%8c%e8%bf%98%e6%b2%a1%e6%9c%89%e9%80%9a%e8%bf%87%e7%bd%91%e7%bb%9c%e7%ae%a1%e7%90%86%e4%b8%ad%e5%bf%83%e7%9a%84%e5%ae%a1%e6%a0%b8%ef%bc%8c%e8%bf%98%e4%b8%8d%e7%9f%a5%e9%81%93%e4%b9%8b%e5%90%8e%e4%bc%9a%e5%8f%91%e7%94%9f%e4%bb%80%e4%b9%88%e3%80%82%e5%bd%93%e6%97%b6%e7%9a%84%e6%88%91%e4%b9%9f%e5%af%b9Ghost%e4%b8%8d%e6%98%af%e5%be%88%e7%86%9f%ef%bc%8c%e4%b9%9f%e4%b8%8d%e7%9f%a5%e9%81%93%e5%90%8e%e6%9c%9f%e5%a6%82%e4%bd%95%e7%bb%b4%e6%8a%a4%ef%bc%8c%e6%89%80%e4%bb%a5%e6%83%b3%e7%9d%80%e5%85%88%e8%ae%a9Ghost%e5%9c%a8%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%b8%8a%e9%9d%a2%e8%b7%91%e4%b8%80%e4%b8%aa%e6%9c%88%e7%9c%8b%e7%9c%8b%ef%bc%8c%e6%9c%89%e4%ba%86%e5%bf%83%e5%be%97%e4%bd%93%e4%bc%9a%e4%b9%8b%e5%90%8e%e5%9c%a8%e5%86%99%e7%af%87%e6%96%87%e7%ab%a0%e8%ae%b0%e5%bd%95%e4%b8%80%e4%b8%8b%e6%90%ad%e5%bb%ba%e8%bf%87%e7%a8%8b%e3%80%82%0a%e7%8e%b0%e5%9c%a8%e5%8d%9a%e5%ae%a2%e4%b9%9f%e8%b7%91%e4%ba%86%e4%b8%80%e4%b8%aa%e5%a4%9a%e6%9c%88%e4%ba%86%ef%bc%8c%e6%97%a5%e5%b8%b8%e7%bb%b4%e6%8a%a4%e9%83%bd%e7%8e%a9%e7%9a%84%e8%bd%ac%e4%ba%86%ef%bc%8c%e4%ba%8e%e6%98%af%e5%b0%b1%e6%9c%89%e4%ba%86%e8%bf%99%e4%b8%80%e7%af%87%e6%96%87%e7%ab%a0%e4%ba%86%e3%80%82%0a%e7%9b%ae%e5%bd%95%20%201.Ghost%20%e7%ae%80%e4%bb%8b%202.%e6%90%ad%e5%bb%ba%e5%89%8d%e5%87%86%e5%a4%87%e6%b8%85%e5%8d%95%203.%e5%bc%80%e5%a7%8b%e6%90%ad%e5%bb%ba%204.%e5%85%a8%e7%ab%99%20Https%205.%e7%ae%a1%e5%b1%80%e5%a4%87%e6%a1%88%20%2f%20%e5%85%ac%e5%ae%89%e5%a4%87%e6%a1%88%206.CDN%20%e4%bc%98%e5%8c%96%e8%ae%bf%e9%97%ae%e9%80%9f%e5%ba%a6%207.%e5%90%8e%e6%9c%9f%e7%bb%b4%e6%8a%a4%20%20%e4%b8%80.Ghost%e7%ae%80%e4%bb%8b%20Ghost%20%e6%98%af%e4%b8%80%e5%a5%97%e5%9f%ba%e4%ba%8e%20Node.js%20%e6%9e%84%e5%bb%ba%e7%9a%84%e5%bc%80%e6%ba%90%e5%8d%9a%e5%ae%a2%e5%b9%b3%e5%8f%b0%ef%bc%88Open%20source%20blogging%20platform%ef%bc%89%ef%bc%8c%e5%85%b7%e6%9c%89%e6%98%93%e7%94%a8%e7%9a%84%e4%b9%a6%e5%86%99%e7%95%8c%e9%9d%a2%e5%92%8c%e4%bd%93%e9%aa%8c%ef%bc%8c%e5%8d%9a%e5%ae%a2%e5%86%85%e5%ae%b9%e9%bb%98%e8%ae%a4%e9%87%87%e7%94%a8%20Markdown%20%e8%af%ad%e6%b3%95%e4%b9%a6%e5%86%99%ef%bc%8c%e4%b8%8d%e8%bf%87%e5%8e%9f%e7%94%9f%e7%9a%84%e4%b8%8d%e6%94%af%e6%8c%81Markdown%e7%9a%84%e8%a1%a8%e6%a0%bc%e5%92%8cLaTeX%ef%bc%8c%e5%a6%82%e6%9e%9c%e9%9c%80%e8%a6%81%e4%bd%bf%e7%94%a8%ef%bc%8c%e9%9c%80%e8%a6%81%e5%9c%a8%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%ab%af%e5%ae%89%e8%a3%85%e6%8f%92%e4%bb%b6%e3%80%82%0aGhost%e7%9b%ae%e6%a0%87%e6%98%af%e5%8f%96%e4%bb%a3%e8%87%83%e8%82%bf%e7%9a%84%20Wordpress%ef%bc%8c%e7%95%8c%e9%9d%a2%e7%ae%80%e6%b4%81%ef%bc%8c%e4%b8%93%e6%b3%a8%e5%86%99%e4%bd%9c%ef%bc%8c%e6%94%af%e6%8c%81%e5%9c%a8%e7%ba%bf%e9%a2%84%e8%a7%88%e5%92%8c%e5%9c%a8%e7%ba%bf%e5%86%99%e4%bd%9c%e3%80%82%0aGhost%e5%b1%9e%e4%ba%8e%e5%8a%a8%e6%80%81%e5%8d%9a%e5%ae%a2%ef%bc%8c%e9%a1%b5%e9%9d%a2%e5%b9%b6%e4%b8%8d%e6%98%af%e5%83%8fHexo%2cJekyll%e8%bf%99%e7%b1%bb%e9%9d%99%e6%80%81%e5%8d%9a%e5%ae%a2%ef%bc%8c%e5%9c%a8%e7%bc%96%e8%af%91%e7%9a%84%e6%97%b6%e5%80%99%e4%bc%9a%e7%94%9f%e6%88%90%e6%89%80%e6%9c%89%e9%a1%b5%e9%9d%a2%e3%80%82Ghost%e6%9c%89%e5%89%8d%e5%8f%b0%e5%92%8c%e5%90%8e%e5%8f%b0%e3%80%82%e5%90%8e%e5%8f%b0%e8%b4%9f%e8%b4%a3%e5%86%99%e4%bd%9c%ef%bc%8c%e5%8f%91%e5%b8%83%e6%96%87%e7%ab%a0%ef%bc%8c%e7%b3%bb%e7%bb%9f%e9%85%8d%e7%bd%ae%ef%bc%8c%e7%ad%89%e7%ad%89%e3%80%82%0a1.%20Ghost%e7%9a%84%e4%bc%98%e5%8a%bf%e5%92%8c%e5%8a%a3%e5%8a%bf%20%e8%bf%99%e9%87%8c%e6%9c%89%e7%af%87%e6%96%87%e7%ab%a0%e6%98%af%e8%bf%99%e6%a0%b7%e8%af%84%e8%ae%baGhost%e7%9a%84%e4%bc%98%e7%bc%ba%e7%82%b9%e7%9a%84%0a%20%20%e4%bc%98%e5%8a%bf%20%e6%8a%80%e6%9c%af%e4%b8%8a%2c%e9%87%87%e7%94%a8NodeJs%ef%bc%8c%e5%9c%a8%e5%8f%af%e9%a2%84%e8%a7%81%e7%9a%84%e6%9c%aa%e6%9d%a5%e9%87%8c%ef%bc%8c%e6%97%a0%e7%96%91%e6%af%94PHP%e6%9c%89%e6%9b%b4%e5%a4%9a%e4%bc%98%e5%8a%bf%ef%bc%8c%e5%b9%b6%e5%8f%91%e8%83%bd%e5%8a%9b%e8%bf%9c%e8%b6%85Wordpress%ef%bc%8c%e8%99%bd%e7%84%b6NodeJs%e5%90%8e%e6%9c%9f%e7%bb%b4%e6%8a%a4%e6%88%90%e6%9c%ac%e9%ab%98%ef%bc%8c%e4%bd%86%e6%98%af%e6%88%91%e4%bb%ac%e5%8f%aa%e6%98%af%e5%80%9f%e5%ae%83%e5%81%9a%e5%8d%9a%e5%ae%a2%e8%80%8c%e5%b7%b2%e3%80%82%20%e6%98%93%e7%94%a8%e6%80%a7%e4%b8%8a%ef%bc%8c%e4%b8%93%e6%b3%a8%e5%86%99%e4%bd%9c%ef%bc%8c%e8%af%84%e8%ae%ba%ef%bc%8c%e8%b6%85%e7%82%ab%e7%9a%ae%e8%82%a4%ef%bc%8c%e5%ae%8c%e7%be%8e%e6%94%af%e6%8c%81%20MarkDown%2c%e6%b2%a1%e6%9c%89Wordpress%e9%82%a3%e4%b9%88%e8%87%83%e8%82%bf%ef%bc%8c%e5%9b%9e%e5%bd%92%e5%88%b0%e5%8d%9a%e5%ae%a2%e6%9c%80%e5%8e%9f%e5%a7%8b%e7%9a%84%e7%8a%b6%e6%80%81%2c%e4%bc%a0%e9%80%92%e6%96%87%e5%ad%97%e6%9c%80%e5%8e%9f%e5%a7%8b%e7%9a%84%e5%8a%9b%e9%87%8f%e3%80%82%20%e4%bd%bf%e7%94%a8%e4%b8%8a%ef%bc%8c%e4%be%bf%e6%8d%b7%ef%bc%8c%e9%9a%8f%e6%97%b6%e9%9a%8f%e5%9c%b0%e7%bc%96%e8%be%91%ef%bc%8c%e6%af%94Hexo%2cJekyll%e8%bf%99%e7%b1%bb%e9%9d%99%e6%80%81%e5%8d%9a%e5%ae%a2%e8%a6%81%e4%b9%a6%e5%86%99%e6%96%b9%e4%be%bf%ef%bc%8c%e7%89%b9%e5%88%ab%e6%98%af%e5%9c%a8%e4%b8%8d%e5%90%8c%e7%94%b5%e8%84%91%e4%b8%8a%e5%86%99%e4%bd%9c%e6%97%b6%e3%80%82%0a%20%20%e5%8a%a3%e5%8a%bf%20%e9%9c%80%e8%a6%81%e9%85%8d%e5%a5%97%e6%94%af%e6%8c%81Node%e7%8e%af%e5%a2%83%e7%9a%84%e8%99%9a%e6%8b%9f%e6%9c%ba%ef%bc%8c%e4%b8%80%e8%88%ac%e5%85%8d%e8%b4%b9%e7%9a%84%e5%be%88%e5%b0%91%e6%94%af%e6%8c%81%ef%bc%8c%e8%bf%99%e6%97%b6%e5%bf%85%e9%a1%bb%e5%be%97%e6%8e%8f%e8%85%b0%e5%8c%85%e4%ba%86%e3%80%82%20%e5%90%8e%e5%8f%b0%e7%ae%80%e9%99%8b%2c%e8%ae%b8%e5%a4%9a%e5%8a%9f%e8%83%bd%e8%bf%98%e6%9c%aa%e5%ae%8c%e5%96%84%ef%bc%8c%e4%b8%8d%e8%bf%87%e5%86%99%e4%bd%9c%e8%bf%99%e4%b8%80%e5%9d%97%e6%b2%a1%e5%95%a5%e5%a4%a7%e9%97%ae%e9%a2%98%e3%80%82%0a%20%20%e5%85%b3%e4%ba%8e%e5%8a%a3%e5%8a%bf%ef%bc%8c%e6%88%91%e5%86%8d%e8%af%b4%e4%b8%80%e7%82%b9%ef%bc%8cGhost%e6%b2%a1%e6%9c%89Hexo%e4%b8%8a%e9%9d%a2%e9%82%a3%e4%b9%88%e4%b8%b0%e5%af%8c%e7%9a%84%e6%8f%92%e4%bb%b6%e3%80%82%0a2.%20Ghost%e7%9a%84%e4%ba%ae%e7%82%b9%ef%bc%9a%20%20%e9%87%87%e7%94%a8Mysql%e4%bd%9c%e4%b8%ba%e6%95%b0%e6%8d%ae%e5%ba%93%2c%e9%80%9a%e7%94%a8%e5%bf%ab%e9%80%9f%e4%b8%8a%e6%89%8b%ef%bc%8c%e8%bf%99%e9%87%8c%e4%b9%9f%e5%8f%af%e4%bb%a5%e7%94%a8%e5%85%b6%e4%bb%96%e6%95%b0%e6%8d%ae%e5%ba%93%e6%af%94%e5%a6%82Sqlite%e3%80%82%20Nginx%e4%bd%9c%e4%b8%ba%e5%8f%8d%e5%90%91%e4%bb%a3%e7%90%86%2c%e9%85%8d%e7%bd%ae%e5%a4%9a%e4%b8%aaGhost%e5%8d%9a%e5%ae%a2%2c%e5%90%8c%e6%97%b6%e4%b9%9f%e8%83%bd%e5%a2%9e%e5%8a%a0%e4%ba%86%e7%bd%91%e7%ab%99%e7%9a%84%e8%b4%9f%e8%bd%bd%e3%80%82%20%e9%9d%9e%e5%b8%b8%e7%ae%80%e6%98%93%e5%8c%96%e7%9a%84Ubuntu%e7%9a%84Node.js%e5%ae%89%e8%a3%85%e6%96%b9%e6%b3%95%ef%bc%8c%e4%b8%8d%e7%94%a8%e7%bc%96%e8%af%91%e6%89%93%e5%8c%85%e3%80%82%20%e5%ae%89%e8%a3%85%e7%b3%bb%e7%bb%9f%e6%9c%8d%e5%8a%a1%2c%e5%bc%80%e6%9c%ba%e9%87%8d%e5%90%afGhost%e6%9c%8d%e5%8a%a1%ef%bc%8c%e5%85%8d%e5%8e%bb%e6%97%a5%e5%90%8e%e4%bb%a5%e5%90%8e%e6%93%8d%e4%bd%9c%e3%80%82%20%e9%87%87%e7%94%a8Font%20Awesome%e4%bd%9c%e4%b8%ba%e7%a4%be%e4%ba%a4%e6%8c%89%e9%92%ae%ef%bc%8c%e4%b9%9f%e5%8f%af%e4%bb%a5%e8%87%aa%e5%ae%9a%e4%b9%89%e5%9b%be%e6%a0%87%e3%80%82%20highlight.js%c2%a0%e4%bd%9c%e4%b8%ba%e4%b8%bb%e9%a2%98%e7%9a%84%e4%bb%a3%e7%a0%81%e9%ab%98%e4%ba%ae%e5%bc%95%e6%93%8e%20%e6%95%b4%e5%90%88Disqus%e8%af%84%e8%ae%ba%e7%b3%bb%e7%bb%9f%2c%e5%bb%ba%e7%ab%8b%e5%b1%9e%e4%ba%8e%e8%87%aa%e5%b7%b1%e7%9a%84Discuss%e5%9c%88%20%e5%9b%bd%e5%a4%96%e4%bc%98%e7%a7%80%e5%85%8d%e8%b4%b9Ghost%e4%b8%bb%e9%a2%98%e8%b5%84%e6%ba%90%e5%88%86%e4%ba%ab%20%e6%95%b4%e5%90%88%e7%99%be%e5%ba%a6%e7%bb%9f%e8%ae%a1%e4%bb%a5%e5%8f%8a%e7%99%be%e5%ba%a6%e5%88%86%e4%ba%ab%20%20%e4%ba%8c.%20%e6%90%ad%e5%bb%ba%e5%89%8d%e5%87%86%e5%a4%87%e6%b8%85%e5%8d%95%20%20%e4%b8%80%e4%b8%aa%e5%8f%af%e7%94%a8%e7%9a%84%e5%9f%9f%e5%90%8d%20%e4%b8%80%e5%8f%b0%e6%9c%8d%e5%8a%a1%e5%99%a8%20%28%20%e6%88%91%e4%b9%b0%e7%9a%84%e9%98%bf%e9%87%8c%e4%ba%91ECS%20%ef%bc%8c%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%b3%bb%e7%bb%9f%e5%ae%89%e8%a3%85%e7%9a%84%e6%98%af%c2%a0CentOS%207."><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fnew.halfrost.com%2fghost_build%2f&t=Ghost%20%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%e6%97%a5%e8%ae%b0"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu class=icon href=# onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden=true></i>Menu</a>
<a id=toc class=icon href=# onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden=true></i>TOC</a>
<a id=share class=icon href=# onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden=true></i>share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i>Top</a></div></div></div><footer id=footer><div class=footer-left><p class=copyright style=float:left;margin-bottom:0><a href=https://github.com/halfrost/Halfrost-Field class=github-repo style=height:18px><span class=gadget-github></span>Star</a>
Copyright &copy;halfrost 2016 - 2021
<a href=http://www.miit.gov.cn/>鄂ICP备16014744号</a></p><br><p class="copyright statistics" style=margin-bottom:20px><span id=busuanzi_container_site_pv>Cumulative Page Views <span id=busuanzi_value_site_pv></span>| Unique Visitors <span id=busuanzi_value_site_uv></span></span></p></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script><script src=/main.min.f870a4d110314b9e50e65f8ac982dc1c9c376c8f1a5083d39c62cfc49073f011.js></script><script async src=/prism.js></script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]},svg:{fontCache:'global'}};</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></html>