<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=theme-color content="#FFFFFF"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Algorithm in LeetCode —— Segment Tree | prometheus</title><meta name=description content="Explore in every moment of the hard thinking"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Algorithm in LeetCode —— Segment Tree"><meta property="og:description" content="Segment Tree 的 Tips:  线段数的经典数组实现写法。将合并两个节点 pushUp 逻辑抽象出来了，可以实现任意操作(常见的操作有：加法，取 max，min 等等)。第 218 题，第 303 题，第 307 题，第 699 题。 计数线段树的经典写法。第 315 题，第 327 题，第 493 题。 线段树的树的实现写法。第 715 题，第 732 题。 区间懒惰更新。第 218 题，第 699 题。 离散化。离散化需要注意一个特殊情况：假如三个区间为 [1,10] [1,4] [6,10]，离散化后 x[1]=1,x[2]=4,x[3]=6,x[4]=10。第一个区间为 [1,4]，第二个区间为 [1,2]，第三个区间为 [3,4]，这样一来，区间一 = 区间二 + 区间三，这和离散前的模型不符，离散前，很明显，区间一 > 区间二 + 区间三。正确的做法是：在相差大于 1 的数间加一个数，例如在上面 1 4 6 10 中间加 5，即可 x[1]=1,x[2]=4,x[3]=5,x[4]=6,x[5]=10。这样处理之后，区间一是 1-5 ，区间二是 1-2 ，区间三是 4-5 。 灵活构建线段树。线段树节点可以存储多条信息，合并两个节点的 pushUp 操作也可以是多样的。第 850 题，第 1157 题。  线段树题型从简单到困难:"><meta property="og:type" content="article"><meta property="og:url" content="https://new.halfrost.com/segment_tree/"><meta property="article:published_time" content="2019-12-21T11:54:00+00:00"><meta property="article:modified_time" content="2019-12-21T11:54:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Algorithm in LeetCode —— Segment Tree"><meta name=twitter:description content="Segment Tree 的 Tips:  线段数的经典数组实现写法。将合并两个节点 pushUp 逻辑抽象出来了，可以实现任意操作(常见的操作有：加法，取 max，min 等等)。第 218 题，第 303 题，第 307 题，第 699 题。 计数线段树的经典写法。第 315 题，第 327 题，第 493 题。 线段树的树的实现写法。第 715 题，第 732 题。 区间懒惰更新。第 218 题，第 699 题。 离散化。离散化需要注意一个特殊情况：假如三个区间为 [1,10] [1,4] [6,10]，离散化后 x[1]=1,x[2]=4,x[3]=6,x[4]=10。第一个区间为 [1,4]，第二个区间为 [1,2]，第三个区间为 [3,4]，这样一来，区间一 = 区间二 + 区间三，这和离散前的模型不符，离散前，很明显，区间一 > 区间二 + 区间三。正确的做法是：在相差大于 1 的数间加一个数，例如在上面 1 4 6 10 中间加 5，即可 x[1]=1,x[2]=4,x[3]=5,x[4]=6,x[5]=10。这样处理之后，区间一是 1-5 ，区间二是 1-2 ，区间三是 4-5 。 灵活构建线段树。线段树节点可以存储多条信息，合并两个节点的 pushUp 操作也可以是多样的。第 850 题，第 1157 题。  线段树题型从简单到困难:"><link rel=stylesheet href=/css/style-white.min.css><link rel=manifest href=/manifest.json><link rel=stylesheet href=/prism.css><link href=/images/apple-touch-icon-60x60.png rel=apple-touch-icon sizes=60x60><link href=/images/apple-touch-icon-76x76.png rel=apple-touch-icon sizes=76x76><link href=/images/apple-touch-icon-120x120.png rel=apple-touch-icon sizes=120x120><link href=/images/apple-touch-icon-152x152.png rel=apple-touch-icon sizes=152x152><link href=/images/apple-touch-icon-180x180.png rel=apple-touch-icon sizes=180x180><link href=/images/apple-touch-icon-512x512.png rel=apple-touch-icon sizes=512x512><link href=/images/apple-touch-icon-1024x1024.png rel=apple-touch-icon sizes=1024x1024><script async>if('serviceWorker'in navigator){navigator.serviceWorker.register("\/serviceworker-v1.min.a64912b78d282eab1ad3715a0943da21616e5f326f8afea27034784ad445043b.js").then(function(){if(navigator.serviceWorker.controller){console.log('Assets cached by the controlling service worker.');}else{console.log('Please reload this page to allow the service worker to handle network operations.');}}).catch(function(error){console.log('ERROR: '+error);});}else{console.log('Service workers are not supported in the current browser.');}</script><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://new.halfrost.com/images/favicon.ico><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-82753806-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="single-max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a><a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a><a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast');" style=display:none><i class="fas fa-chevron-up fa-lg"></i></a><span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=https://books.halfrost.com/>Books</a></li><li><a href=https://github.com/halfrost/Halfrost-Field>Github</a></li><li><a href=https://halfrost.me/>About</a></li><li><a href=/index.xml>RSS</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://new.halfrost.com/sliding_window/><i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li><li><a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');"><i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li><li><a class=icon href=#><i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f"><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f&text=Algorithm%20in%20LeetCode%20%e2%80%94%e2%80%94%20Segment%20Tree"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f&title=Algorithm%20in%20LeetCode%20%e2%80%94%e2%80%94%20Segment%20Tree"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f&is_video=false&description=Algorithm%20in%20LeetCode%20%e2%80%94%e2%80%94%20Segment%20Tree"><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Algorithm%20in%20LeetCode%20%e2%80%94%e2%80%94%20Segment%20Tree&body=Check out this article: https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f"><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f&title=Algorithm%20in%20LeetCode%20%e2%80%94%e2%80%94%20Segment%20Tree"><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f&title=Algorithm%20in%20LeetCode%20%e2%80%94%e2%80%94%20Segment%20Tree"><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f&title=Algorithm%20in%20LeetCode%20%e2%80%94%e2%80%94%20Segment%20Tree"><i class="fab fa-stumbleupon" aria-hidden=true></i></a></li><li><a class=icon href="http://digg.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f&title=Algorithm%20in%20LeetCode%20%e2%80%94%e2%80%94%20Segment%20Tree"><i class="fab fa-digg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f&name=Algorithm%20in%20LeetCode%20%e2%80%94%e2%80%94%20Segment%20Tree&description=Segment%20Tree%20%e7%9a%84%20Tips%3a%20%20%e7%ba%bf%e6%ae%b5%e6%95%b0%e7%9a%84%e7%bb%8f%e5%85%b8%e6%95%b0%e7%bb%84%e5%ae%9e%e7%8e%b0%e5%86%99%e6%b3%95%e3%80%82%e5%b0%86%e5%90%88%e5%b9%b6%e4%b8%a4%e4%b8%aa%e8%8a%82%e7%82%b9%20pushUp%20%e9%80%bb%e8%be%91%e6%8a%bd%e8%b1%a1%e5%87%ba%e6%9d%a5%e4%ba%86%ef%bc%8c%e5%8f%af%e4%bb%a5%e5%ae%9e%e7%8e%b0%e4%bb%bb%e6%84%8f%e6%93%8d%e4%bd%9c%28%e5%b8%b8%e8%a7%81%e7%9a%84%e6%93%8d%e4%bd%9c%e6%9c%89%ef%bc%9a%e5%8a%a0%e6%b3%95%ef%bc%8c%e5%8f%96%20max%ef%bc%8cmin%20%e7%ad%89%e7%ad%89%29%e3%80%82%e7%ac%ac%20218%20%e9%a2%98%ef%bc%8c%e7%ac%ac%20303%20%e9%a2%98%ef%bc%8c%e7%ac%ac%20307%20%e9%a2%98%ef%bc%8c%e7%ac%ac%20699%20%e9%a2%98%e3%80%82%20%e8%ae%a1%e6%95%b0%e7%ba%bf%e6%ae%b5%e6%a0%91%e7%9a%84%e7%bb%8f%e5%85%b8%e5%86%99%e6%b3%95%e3%80%82%e7%ac%ac%20315%20%e9%a2%98%ef%bc%8c%e7%ac%ac%20327%20%e9%a2%98%ef%bc%8c%e7%ac%ac%20493%20%e9%a2%98%e3%80%82%20%e7%ba%bf%e6%ae%b5%e6%a0%91%e7%9a%84%e6%a0%91%e7%9a%84%e5%ae%9e%e7%8e%b0%e5%86%99%e6%b3%95%e3%80%82%e7%ac%ac%20715%20%e9%a2%98%ef%bc%8c%e7%ac%ac%20732%20%e9%a2%98%e3%80%82%20%e5%8c%ba%e9%97%b4%e6%87%92%e6%83%b0%e6%9b%b4%e6%96%b0%e3%80%82%e7%ac%ac%20218%20%e9%a2%98%ef%bc%8c%e7%ac%ac%20699%20%e9%a2%98%e3%80%82%20%e7%a6%bb%e6%95%a3%e5%8c%96%e3%80%82%e7%a6%bb%e6%95%a3%e5%8c%96%e9%9c%80%e8%a6%81%e6%b3%a8%e6%84%8f%e4%b8%80%e4%b8%aa%e7%89%b9%e6%ae%8a%e6%83%85%e5%86%b5%ef%bc%9a%e5%81%87%e5%a6%82%e4%b8%89%e4%b8%aa%e5%8c%ba%e9%97%b4%e4%b8%ba%20%5b1%2c10%5d%20%5b1%2c4%5d%20%5b6%2c10%5d%ef%bc%8c%e7%a6%bb%e6%95%a3%e5%8c%96%e5%90%8e%20x%5b1%5d%3d1%2cx%5b2%5d%3d4%2cx%5b3%5d%3d6%2cx%5b4%5d%3d10%e3%80%82%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%8c%ba%e9%97%b4%e4%b8%ba%20%5b1%2c4%5d%ef%bc%8c%e7%ac%ac%e4%ba%8c%e4%b8%aa%e5%8c%ba%e9%97%b4%e4%b8%ba%20%5b1%2c2%5d%ef%bc%8c%e7%ac%ac%e4%b8%89%e4%b8%aa%e5%8c%ba%e9%97%b4%e4%b8%ba%20%5b3%2c4%5d%ef%bc%8c%e8%bf%99%e6%a0%b7%e4%b8%80%e6%9d%a5%ef%bc%8c%e5%8c%ba%e9%97%b4%e4%b8%80%20%3d%20%e5%8c%ba%e9%97%b4%e4%ba%8c%20%2b%20%e5%8c%ba%e9%97%b4%e4%b8%89%ef%bc%8c%e8%bf%99%e5%92%8c%e7%a6%bb%e6%95%a3%e5%89%8d%e7%9a%84%e6%a8%a1%e5%9e%8b%e4%b8%8d%e7%ac%a6%ef%bc%8c%e7%a6%bb%e6%95%a3%e5%89%8d%ef%bc%8c%e5%be%88%e6%98%8e%e6%98%be%ef%bc%8c%e5%8c%ba%e9%97%b4%e4%b8%80%20%26gt%3b%20%e5%8c%ba%e9%97%b4%e4%ba%8c%20%2b%20%e5%8c%ba%e9%97%b4%e4%b8%89%e3%80%82%e6%ad%a3%e7%a1%ae%e7%9a%84%e5%81%9a%e6%b3%95%e6%98%af%ef%bc%9a%e5%9c%a8%e7%9b%b8%e5%b7%ae%e5%a4%a7%e4%ba%8e%201%20%e7%9a%84%e6%95%b0%e9%97%b4%e5%8a%a0%e4%b8%80%e4%b8%aa%e6%95%b0%ef%bc%8c%e4%be%8b%e5%a6%82%e5%9c%a8%e4%b8%8a%e9%9d%a2%201%204%206%2010%20%e4%b8%ad%e9%97%b4%e5%8a%a0%205%ef%bc%8c%e5%8d%b3%e5%8f%af%20x%5b1%5d%3d1%2cx%5b2%5d%3d4%2cx%5b3%5d%3d5%2cx%5b4%5d%3d6%2cx%5b5%5d%3d10%e3%80%82%e8%bf%99%e6%a0%b7%e5%a4%84%e7%90%86%e4%b9%8b%e5%90%8e%ef%bc%8c%e5%8c%ba%e9%97%b4%e4%b8%80%e6%98%af%201-5%20%ef%bc%8c%e5%8c%ba%e9%97%b4%e4%ba%8c%e6%98%af%201-2%20%ef%bc%8c%e5%8c%ba%e9%97%b4%e4%b8%89%e6%98%af%204-5%20%e3%80%82%20%e7%81%b5%e6%b4%bb%e6%9e%84%e5%bb%ba%e7%ba%bf%e6%ae%b5%e6%a0%91%e3%80%82%e7%ba%bf%e6%ae%b5%e6%a0%91%e8%8a%82%e7%82%b9%e5%8f%af%e4%bb%a5%e5%ad%98%e5%82%a8%e5%a4%9a%e6%9d%a1%e4%bf%a1%e6%81%af%ef%bc%8c%e5%90%88%e5%b9%b6%e4%b8%a4%e4%b8%aa%e8%8a%82%e7%82%b9%e7%9a%84%20pushUp%20%e6%93%8d%e4%bd%9c%e4%b9%9f%e5%8f%af%e4%bb%a5%e6%98%af%e5%a4%9a%e6%a0%b7%e7%9a%84%e3%80%82%e7%ac%ac%20850%20%e9%a2%98%ef%bc%8c%e7%ac%ac%201157%20%e9%a2%98%e3%80%82%20%20%e7%ba%bf%e6%ae%b5%e6%a0%91%e9%a2%98%e5%9e%8b%e4%bb%8e%e7%ae%80%e5%8d%95%e5%88%b0%e5%9b%b0%e9%9a%be%3a"><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f&t=Algorithm%20in%20LeetCode%20%e2%80%94%e2%80%94%20Segment%20Tree"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><a href=#segment-tree-的-tips>Segment Tree 的 Tips:</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Algorithm in LeetCode —— Segment Tree</h1><div class=meta><div class=postdate><time datetime="2019-12-21 11:54:00 +0000 UTC" itemprop=datePublished>Dec 21</time></div><div class=article-category><i class="fas fa-archive"></i><a class=category-link href=/categories/algorithm>Algorithm</a>
,
<a class=category-link href=/categories/segment-tree>Segment Tree</a></div><div class=article-tag><i class="fas fa-tag"></i><a class=tag-link href=/tags/algorithm rel=tag>Algorithm</a>
,
<a class=tag-link href=/tags/segment-tree rel=tag>Segment Tree</a></div></div></header><div class=content itemprop=articleBody><p><img src=https://img.halfrost.com/Blog/ArticleImage/144_1.png alt></p><h2 id=segment-tree-的-tips>Segment Tree 的 Tips:</h2><ul><li>线段数的经典数组实现写法。将合并两个节点 pushUp 逻辑抽象出来了，可以实现任意操作(常见的操作有：加法，取 max，min 等等)。第 218 题，第 303 题，第 307 题，第 699 题。</li><li>计数线段树的经典写法。第 315 题，第 327 题，第 493 题。</li><li>线段树的树的实现写法。第 715 题，第 732 题。</li><li>区间懒惰更新。第 218 题，第 699 题。</li><li>离散化。离散化需要注意一个特殊情况：假如三个区间为 [1,10] [1,4] [6,10]，离散化后 x[1]=1,x[2]=4,x[3]=6,x[4]=10。第一个区间为 [1,4]，第二个区间为 [1,2]，第三个区间为 [3,4]，这样一来，区间一 = 区间二 + 区间三，这和离散前的模型不符，离散前，很明显，区间一 > 区间二 + 区间三。正确的做法是：在相差大于 1 的数间加一个数，例如在上面 1 4 6 10 中间加 5，即可 x[1]=1,x[2]=4,x[3]=5,x[4]=6,x[5]=10。这样处理之后，区间一是 1-5 ，区间二是 1-2 ，区间三是 4-5 。</li><li>灵活构建线段树。线段树节点可以存储多条信息，合并两个节点的 pushUp 操作也可以是多样的。第 850 题，第 1157 题。</li></ul><p>线段树<a href=https://blog.csdn.net/xuechelingxiao/article/details/38313105>题型</a>从简单到困难:</p><ol><li>单点更新:<br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1166">HDU 1166 敌兵布阵</a> update:单点增减 query:区间求和<br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1754">HDU 1754 I Hate It</a> update:单点替换 query:区间最值<br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1394">HDU 1394 Minimum Inversion Number</a> update:单点增减 query:区间求和<br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=2795">HDU 2795 Billboard</a> query:区间求最大值的位子(直接把update的操作在query里做了)</li><li>区间更新:<br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1698">HDU 1698 Just a Hook</a> update:成段替换 (由于只query一次总区间,所以可以直接输出 1 结点的信息)<br><a href="http://poj.org/problem?id=3468">POJ 3468 A Simple Problem with Integers</a> update:成段增减 query:区间求和<br><a href="http://poj.org/problem?id=2528">POJ 2528 Mayor’s posters</a> 离散化 + update:成段替换 query:简单hash<br><a href="http://poj.org/problem?id=3225">POJ 3225 Help with Intervals</a> update:成段替换,区间异或 query:简单hash</li><li>区间合并(这类题目会询问区间中满足条件的连续最长区间,所以PushUp的时候需要对左右儿子的区间进行合并):<br><a href="http://poj.org/problem?id=3667">POJ 3667 Hotel</a> update:区间替换 query:询问满足条件的最左端点</li><li>扫描线(这类题目需要将一些操作排序,然后从左到右用一根扫描线扫过去最典型的就是矩形面积并,周长并等题):<br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1542">HDU 1542 Atlantis</a> update:区间增减 query:直接取根节点的值<br><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1828">HDU 1828 Picture</a> update:区间增减 query:直接取根节点的值</li></ol><table><thead><tr><th>Title</th><th align=center>Solution</th><th align=center>Difficulty</th><th align=center>Time</th><th align=center>Space</th><th align=center>收藏</th></tr></thead><tbody><tr><td><a href=https://leetcode.com/problems/the-skyline-problem>218. The Skyline Problem</a></td><td align=center><a href=https://github.com/halfrost/LeetCode-Go/tree/master/Algorithms/0218.%20The%20Skyline%20Problem>Go</a></td><td align=center>Hard</td><td align=center>O(n log n)</td><td align=center>O(n)</td><td align=center>❤️</td></tr><tr><td><a href=https://leetcode.com/problems/range-sum-query-mutable>307. Range Sum Query - Mutable</a></td><td align=center><a href=https://github.com/halfrost/LeetCode-Go/tree/master/Algorithms/0307.%20Range%20Sum%20Query%20-%20Mutable>Go</a></td><td align=center>Hard</td><td align=center>O(1)</td><td align=center>O(n)</td><td></td></tr><tr><td><a href=https://leetcode.com/problems/count-of-smaller-numbers-after-self>315. Count of Smaller Numbers After Self</a></td><td align=center><a href=https://github.com/halfrost/LeetCode-Go/tree/master/Algorithms/0315.%20Count%20of%20Smaller%20Numbers%20After%20Self>Go</a></td><td align=center>Hard</td><td align=center>O(n log n)</td><td align=center>O(n)</td><td></td></tr><tr><td><a href=https://leetcode.com/problems/count-of-range-sum>327. Count of Range Sum</a></td><td align=center><a href=https://github.com/halfrost/LeetCode-Go/tree/master/Algorithms/0327.%20Count%20of%20Range%20Sum>Go</a></td><td align=center>Hard</td><td align=center>O(n log n)</td><td align=center>O(n)</td><td align=center>❤️</td></tr><tr><td><a href=https://leetcode.com/problems/reverse-pairs>493. Reverse Pairs</a></td><td align=center><a href=https://github.com/halfrost/LeetCode-Go/tree/master/Algorithms/0493.%20Reverse%20Pairs>Go</a></td><td align=center>Hard</td><td align=center>O(n log n)</td><td align=center>O(n)</td><td></td></tr><tr><td><a href=https://leetcode.com/problems/falling-squares>699. Falling Squares</a></td><td align=center><a href=https://github.com/halfrost/LeetCode-Go/tree/master/Algorithms/0699.%20Falling%20Squares>Go</a></td><td align=center>Hard</td><td align=center>O(n log n)</td><td align=center>O(n)</td><td align=center>❤️</td></tr><tr><td><a href=https://leetcode.com/problems/range-module>715. Range Module</a></td><td align=center><a href=https://github.com/halfrost/LeetCode-Go/tree/master/Algorithms/0715.%20Range%20Module>Go</a></td><td align=center>Hard</td><td align=center>O(log n)</td><td align=center>O(n)</td><td align=center>❤️</td></tr><tr><td><a href=https://leetcode.com/problems/my-calendar-iii>732. My Calendar III</a></td><td align=center><a href=https://github.com/halfrost/LeetCode-Go/tree/master/Algorithms/0732.%20My%20Calendar%20III>Go</a></td><td align=center>Hard</td><td align=center>O(log n)</td><td align=center>O(n)</td><td align=center>❤️</td></tr><tr><td><a href=https://leetcode.com/problems/rectangle-area-ii>850. Rectangle Area II</a></td><td align=center><a href=https://github.com/halfrost/LeetCode-Go/tree/master/Algorithms/0850.%20Rectangle%20Area%20II>Go</a></td><td align=center>Hard</td><td align=center>O(n log n)</td><td align=center>O(n)</td><td align=center>❤️</td></tr><tr><td><a href=https://leetcode.com/problems/online-majority-element-in-subarray>1157. Online Majority Element In Subarray</a></td><td align=center><a href=https://github.com/halfrost/LeetCode-Go/tree/master/Algorithms/1157.%20Online%20Majority%20Element%20In%20Subarray>Go</a></td><td align=center>Hard</td><td align=center>O(log n)</td><td align=center>O(n)</td><td align=center>❤️</td></tr></tbody></table><img src=https://img.halfrost.com/wechat-qr-code.png></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=https://books.halfrost.com/>Books</a></li><li><a href=https://github.com/halfrost/Halfrost-Field>Github</a></li><li><a href=https://halfrost.me/>About</a></li><li><a href=/index.xml>RSS</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#segment-tree-的-tips>Segment Tree 的 Tips:</a></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f"><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f&text=Algorithm%20in%20LeetCode%20%e2%80%94%e2%80%94%20Segment%20Tree"><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f&title=Algorithm%20in%20LeetCode%20%e2%80%94%e2%80%94%20Segment%20Tree"><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f&is_video=false&description=Algorithm%20in%20LeetCode%20%e2%80%94%e2%80%94%20Segment%20Tree"><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Algorithm%20in%20LeetCode%20%e2%80%94%e2%80%94%20Segment%20Tree&body=Check out this article: https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f"><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f&title=Algorithm%20in%20LeetCode%20%e2%80%94%e2%80%94%20Segment%20Tree"><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f&title=Algorithm%20in%20LeetCode%20%e2%80%94%e2%80%94%20Segment%20Tree"><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f&title=Algorithm%20in%20LeetCode%20%e2%80%94%e2%80%94%20Segment%20Tree"><i class="fab fa-stumbleupon fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://digg.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f&title=Algorithm%20in%20LeetCode%20%e2%80%94%e2%80%94%20Segment%20Tree"><i class="fab fa-digg fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f&name=Algorithm%20in%20LeetCode%20%e2%80%94%e2%80%94%20Segment%20Tree&description=Segment%20Tree%20%e7%9a%84%20Tips%3a%20%20%e7%ba%bf%e6%ae%b5%e6%95%b0%e7%9a%84%e7%bb%8f%e5%85%b8%e6%95%b0%e7%bb%84%e5%ae%9e%e7%8e%b0%e5%86%99%e6%b3%95%e3%80%82%e5%b0%86%e5%90%88%e5%b9%b6%e4%b8%a4%e4%b8%aa%e8%8a%82%e7%82%b9%20pushUp%20%e9%80%bb%e8%be%91%e6%8a%bd%e8%b1%a1%e5%87%ba%e6%9d%a5%e4%ba%86%ef%bc%8c%e5%8f%af%e4%bb%a5%e5%ae%9e%e7%8e%b0%e4%bb%bb%e6%84%8f%e6%93%8d%e4%bd%9c%28%e5%b8%b8%e8%a7%81%e7%9a%84%e6%93%8d%e4%bd%9c%e6%9c%89%ef%bc%9a%e5%8a%a0%e6%b3%95%ef%bc%8c%e5%8f%96%20max%ef%bc%8cmin%20%e7%ad%89%e7%ad%89%29%e3%80%82%e7%ac%ac%20218%20%e9%a2%98%ef%bc%8c%e7%ac%ac%20303%20%e9%a2%98%ef%bc%8c%e7%ac%ac%20307%20%e9%a2%98%ef%bc%8c%e7%ac%ac%20699%20%e9%a2%98%e3%80%82%20%e8%ae%a1%e6%95%b0%e7%ba%bf%e6%ae%b5%e6%a0%91%e7%9a%84%e7%bb%8f%e5%85%b8%e5%86%99%e6%b3%95%e3%80%82%e7%ac%ac%20315%20%e9%a2%98%ef%bc%8c%e7%ac%ac%20327%20%e9%a2%98%ef%bc%8c%e7%ac%ac%20493%20%e9%a2%98%e3%80%82%20%e7%ba%bf%e6%ae%b5%e6%a0%91%e7%9a%84%e6%a0%91%e7%9a%84%e5%ae%9e%e7%8e%b0%e5%86%99%e6%b3%95%e3%80%82%e7%ac%ac%20715%20%e9%a2%98%ef%bc%8c%e7%ac%ac%20732%20%e9%a2%98%e3%80%82%20%e5%8c%ba%e9%97%b4%e6%87%92%e6%83%b0%e6%9b%b4%e6%96%b0%e3%80%82%e7%ac%ac%20218%20%e9%a2%98%ef%bc%8c%e7%ac%ac%20699%20%e9%a2%98%e3%80%82%20%e7%a6%bb%e6%95%a3%e5%8c%96%e3%80%82%e7%a6%bb%e6%95%a3%e5%8c%96%e9%9c%80%e8%a6%81%e6%b3%a8%e6%84%8f%e4%b8%80%e4%b8%aa%e7%89%b9%e6%ae%8a%e6%83%85%e5%86%b5%ef%bc%9a%e5%81%87%e5%a6%82%e4%b8%89%e4%b8%aa%e5%8c%ba%e9%97%b4%e4%b8%ba%20%5b1%2c10%5d%20%5b1%2c4%5d%20%5b6%2c10%5d%ef%bc%8c%e7%a6%bb%e6%95%a3%e5%8c%96%e5%90%8e%20x%5b1%5d%3d1%2cx%5b2%5d%3d4%2cx%5b3%5d%3d6%2cx%5b4%5d%3d10%e3%80%82%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%8c%ba%e9%97%b4%e4%b8%ba%20%5b1%2c4%5d%ef%bc%8c%e7%ac%ac%e4%ba%8c%e4%b8%aa%e5%8c%ba%e9%97%b4%e4%b8%ba%20%5b1%2c2%5d%ef%bc%8c%e7%ac%ac%e4%b8%89%e4%b8%aa%e5%8c%ba%e9%97%b4%e4%b8%ba%20%5b3%2c4%5d%ef%bc%8c%e8%bf%99%e6%a0%b7%e4%b8%80%e6%9d%a5%ef%bc%8c%e5%8c%ba%e9%97%b4%e4%b8%80%20%3d%20%e5%8c%ba%e9%97%b4%e4%ba%8c%20%2b%20%e5%8c%ba%e9%97%b4%e4%b8%89%ef%bc%8c%e8%bf%99%e5%92%8c%e7%a6%bb%e6%95%a3%e5%89%8d%e7%9a%84%e6%a8%a1%e5%9e%8b%e4%b8%8d%e7%ac%a6%ef%bc%8c%e7%a6%bb%e6%95%a3%e5%89%8d%ef%bc%8c%e5%be%88%e6%98%8e%e6%98%be%ef%bc%8c%e5%8c%ba%e9%97%b4%e4%b8%80%20%26gt%3b%20%e5%8c%ba%e9%97%b4%e4%ba%8c%20%2b%20%e5%8c%ba%e9%97%b4%e4%b8%89%e3%80%82%e6%ad%a3%e7%a1%ae%e7%9a%84%e5%81%9a%e6%b3%95%e6%98%af%ef%bc%9a%e5%9c%a8%e7%9b%b8%e5%b7%ae%e5%a4%a7%e4%ba%8e%201%20%e7%9a%84%e6%95%b0%e9%97%b4%e5%8a%a0%e4%b8%80%e4%b8%aa%e6%95%b0%ef%bc%8c%e4%be%8b%e5%a6%82%e5%9c%a8%e4%b8%8a%e9%9d%a2%201%204%206%2010%20%e4%b8%ad%e9%97%b4%e5%8a%a0%205%ef%bc%8c%e5%8d%b3%e5%8f%af%20x%5b1%5d%3d1%2cx%5b2%5d%3d4%2cx%5b3%5d%3d5%2cx%5b4%5d%3d6%2cx%5b5%5d%3d10%e3%80%82%e8%bf%99%e6%a0%b7%e5%a4%84%e7%90%86%e4%b9%8b%e5%90%8e%ef%bc%8c%e5%8c%ba%e9%97%b4%e4%b8%80%e6%98%af%201-5%20%ef%bc%8c%e5%8c%ba%e9%97%b4%e4%ba%8c%e6%98%af%201-2%20%ef%bc%8c%e5%8c%ba%e9%97%b4%e4%b8%89%e6%98%af%204-5%20%e3%80%82%20%e7%81%b5%e6%b4%bb%e6%9e%84%e5%bb%ba%e7%ba%bf%e6%ae%b5%e6%a0%91%e3%80%82%e7%ba%bf%e6%ae%b5%e6%a0%91%e8%8a%82%e7%82%b9%e5%8f%af%e4%bb%a5%e5%ad%98%e5%82%a8%e5%a4%9a%e6%9d%a1%e4%bf%a1%e6%81%af%ef%bc%8c%e5%90%88%e5%b9%b6%e4%b8%a4%e4%b8%aa%e8%8a%82%e7%82%b9%e7%9a%84%20pushUp%20%e6%93%8d%e4%bd%9c%e4%b9%9f%e5%8f%af%e4%bb%a5%e6%98%af%e5%a4%9a%e6%a0%b7%e7%9a%84%e3%80%82%e7%ac%ac%20850%20%e9%a2%98%ef%bc%8c%e7%ac%ac%201157%20%e9%a2%98%e3%80%82%20%20%e7%ba%bf%e6%ae%b5%e6%a0%91%e9%a2%98%e5%9e%8b%e4%bb%8e%e7%ae%80%e5%8d%95%e5%88%b0%e5%9b%b0%e9%9a%be%3a"><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fnew.halfrost.com%2fsegment_tree%2f&t=Algorithm%20in%20LeetCode%20%e2%80%94%e2%80%94%20Segment%20Tree"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu class=icon href=# onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden=true></i>Menu</a>
<a id=toc class=icon href=# onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden=true></i>TOC</a>
<a id=share class=icon href=# onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden=true></i>share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i>Top</a></div></div></div><footer id=footer><div class=footer-left><p class=copyright style=float:left;margin-bottom:0><a href=https://github.com/halfrost/Halfrost-Field class=github-repo style=height:18px><span class=gadget-github></span>Star</a>
Copyright &copy;halfrost 2016 - 2021
<a href=http://www.miit.gov.cn/>鄂ICP备16014744号</a></p><br><p class="copyright statistics" style=margin-bottom:20px><span id=busuanzi_container_site_pv>Cumulative Page Views <span id=busuanzi_value_site_pv></span>| Unique Visitors <span id=busuanzi_value_site_uv></span></span></p></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script><script src=/main.min.f870a4d110314b9e50e65f8ac982dc1c9c376c8f1a5083d39c62cfc49073f011.js></script><script async src=/prism.js></script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]},svg:{fontCache:'global'}};</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></html>