<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=theme-color content="#FFFFFF"><meta http-equiv=x-ua-compatible content="IE=edge"><title>WWDC 2016 Session 笔记 - Xcode 8 Auto Layout 新特性 | prometheus</title><meta name=description content="Explore in every moment of the hard thinking"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="WWDC 2016 Session 笔记 - Xcode 8 Auto Layout 新特性"><meta property="og:description" content="####目录
 1.Incrementally Adopting Auto Layout 2.Design and Runtime Constraints 3.NSGridView 4.Layout Feedback Loop Debugging  ####一.Incrementally Adopting Auto Layout Incrementally Adopting Auto Layout是什么意思呢？在我们IB里面布局我们的View的时候，我们并不需要一次性就添加好所有的constraints。我们可以一步步的增加constraints，简化我们的步骤，而且能让我们的设置起来更加灵活。
再谈新特性之前，先介绍一下这个特性对应的背景来源。
有这样一种场景，试想，我们把一个view放在父view上，这个时候并没有设置constraints，当我们运行完程序，就会出现下图的样子。
看上去一切都还正常。但是一旦当我们把设备旋转90°以后，就会出现下图的样子。
这个时候可以发现，这个View的长，宽，以及top和left的边距都没有发生变化。这时我们并没有设置constraints，这是怎么做到的呢？
在程序的编译期，Auto Layout的引擎会自动隐式的给View加上一些constraints约束，以保证View的大小不会发生变化。这个例子中，View被加上了top，left，width，height这4个约束。
如果我们需要更加动态的resize的行为，就需要我们在IB里面自定义约束了。现在问题就来了，有没有更好的方式来做这件事情？最好是能有一种不用约束的方法，也能达到简单的resize的效果。
现在这个问题有了解决办法。在Xcode8中，我们可以给View指定autoresizing masks，而不用去设置constraints。这就意味着我们可以不用约束，我们也能做到简单的resize的效果。
在Autolayout时代之前，可能会有人认出这种UI方式。这是一种Springs & Struts的UI。我们可以设定边缘约束(注：这里的约束并不是指的是Autolayout里面的constraints，是autoresizing masks里面的规则)，无论View的长宽如何变化，这些View都会跟随着设置了约束的view一起变化。
上述的例子中，Xcode 8 中在没有加如何constraint就可以做到旋转屏幕之后，View的边距并没有发生变化。这是怎么做到的呢？事实上，Xcode 8的做法是先取出autoresizing masks，然后把它转换成对应的constraints，这个转换的时机发生在Runtime期间。生成对应的constraints是发生在运行时，而不是编译时的原因是可以给我们开发者更加便利的方式为View添加更加细致的约束。
在View上，我们可以设置translatesAutoresizingMaskIntoConstraints属性。
translatesAutoresizingMaskIntoConstraints == true 假设如果View已经在Interface Builder里面加过constraints，“Show the Size inspector”面板依旧会和以前一样。点击View，查看给它加的所有的constraints，这个时候Autoresizing masks就被忽略了，而且translatesAutoresizingMask的属性也会变成false。如下图，我们这个时候在“Show the Size inspector”面板上面就已经看不到AutoresizingMask的设置面板了。
上图就是在Autolayout时代之前，我们一直使用的是autoresizing masks，但是Autolayout时代来临之后，一旦勾选上了这个Autolayout，之前的AutoresizingMask也就失效了。
回到我们最原始的问题上来，Xcode 8 现在针对View可以支持增量的适用Autolayout。这就意味着我们可以从AutoresizingMask开始，先做简单的resize的工作，然后如果有更加复杂的需求，我们再加上适当的约束constraints来进行适配。简而概之，Xcode 8 Autolayout ≈ AutoresizingMask + Autolayout 。
接下来用一个demo的例子来说明一下Xcode 8 Autolayout新特性。"><meta property="og:type" content="article"><meta property="og:url" content="https://new.halfrost.com/wwdc2016_xcode8autolayout_features/"><meta property="article:published_time" content="2016-07-17T03:36:00+00:00"><meta property="article:modified_time" content="2016-07-17T03:36:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="WWDC 2016 Session 笔记 - Xcode 8 Auto Layout 新特性"><meta name=twitter:description content="####目录
 1.Incrementally Adopting Auto Layout 2.Design and Runtime Constraints 3.NSGridView 4.Layout Feedback Loop Debugging  ####一.Incrementally Adopting Auto Layout Incrementally Adopting Auto Layout是什么意思呢？在我们IB里面布局我们的View的时候，我们并不需要一次性就添加好所有的constraints。我们可以一步步的增加constraints，简化我们的步骤，而且能让我们的设置起来更加灵活。
再谈新特性之前，先介绍一下这个特性对应的背景来源。
有这样一种场景，试想，我们把一个view放在父view上，这个时候并没有设置constraints，当我们运行完程序，就会出现下图的样子。
看上去一切都还正常。但是一旦当我们把设备旋转90°以后，就会出现下图的样子。
这个时候可以发现，这个View的长，宽，以及top和left的边距都没有发生变化。这时我们并没有设置constraints，这是怎么做到的呢？
在程序的编译期，Auto Layout的引擎会自动隐式的给View加上一些constraints约束，以保证View的大小不会发生变化。这个例子中，View被加上了top，left，width，height这4个约束。
如果我们需要更加动态的resize的行为，就需要我们在IB里面自定义约束了。现在问题就来了，有没有更好的方式来做这件事情？最好是能有一种不用约束的方法，也能达到简单的resize的效果。
现在这个问题有了解决办法。在Xcode8中，我们可以给View指定autoresizing masks，而不用去设置constraints。这就意味着我们可以不用约束，我们也能做到简单的resize的效果。
在Autolayout时代之前，可能会有人认出这种UI方式。这是一种Springs & Struts的UI。我们可以设定边缘约束(注：这里的约束并不是指的是Autolayout里面的constraints，是autoresizing masks里面的规则)，无论View的长宽如何变化，这些View都会跟随着设置了约束的view一起变化。
上述的例子中，Xcode 8 中在没有加如何constraint就可以做到旋转屏幕之后，View的边距并没有发生变化。这是怎么做到的呢？事实上，Xcode 8的做法是先取出autoresizing masks，然后把它转换成对应的constraints，这个转换的时机发生在Runtime期间。生成对应的constraints是发生在运行时，而不是编译时的原因是可以给我们开发者更加便利的方式为View添加更加细致的约束。
在View上，我们可以设置translatesAutoresizingMaskIntoConstraints属性。
translatesAutoresizingMaskIntoConstraints == true 假设如果View已经在Interface Builder里面加过constraints，“Show the Size inspector”面板依旧会和以前一样。点击View，查看给它加的所有的constraints，这个时候Autoresizing masks就被忽略了，而且translatesAutoresizingMask的属性也会变成false。如下图，我们这个时候在“Show the Size inspector”面板上面就已经看不到AutoresizingMask的设置面板了。
上图就是在Autolayout时代之前，我们一直使用的是autoresizing masks，但是Autolayout时代来临之后，一旦勾选上了这个Autolayout，之前的AutoresizingMask也就失效了。
回到我们最原始的问题上来，Xcode 8 现在针对View可以支持增量的适用Autolayout。这就意味着我们可以从AutoresizingMask开始，先做简单的resize的工作，然后如果有更加复杂的需求，我们再加上适当的约束constraints来进行适配。简而概之，Xcode 8 Autolayout ≈ AutoresizingMask + Autolayout 。
接下来用一个demo的例子来说明一下Xcode 8 Autolayout新特性。"><link rel=stylesheet href=/css/style-white.min.css><link rel=manifest href=/manifest.json><link rel=stylesheet href=/prism.css><link href=/images/apple-touch-icon-60x60.png rel=apple-touch-icon sizes=60x60><link href=/images/apple-touch-icon-76x76.png rel=apple-touch-icon sizes=76x76><link href=/images/apple-touch-icon-120x120.png rel=apple-touch-icon sizes=120x120><link href=/images/apple-touch-icon-152x152.png rel=apple-touch-icon sizes=152x152><link href=/images/apple-touch-icon-180x180.png rel=apple-touch-icon sizes=180x180><link href=/images/apple-touch-icon-512x512.png rel=apple-touch-icon sizes=512x512><link href=/images/apple-touch-icon-1024x1024.png rel=apple-touch-icon sizes=1024x1024><script async>if('serviceWorker'in navigator){navigator.serviceWorker.register("\/serviceworker-v1.min.a64912b78d282eab1ad3715a0943da21616e5f326f8afea27034784ad445043b.js").then(function(){if(navigator.serviceWorker.controller){console.log('Assets cached by the controlling service worker.');}else{console.log('Please reload this page to allow the service worker to handle network operations.');}}).catch(function(error){console.log('ERROR: '+error);});}else{console.log('Service workers are not supported in the current browser.');}</script><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://new.halfrost.com/images/favicon.ico><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-82753806-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="single-max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a><a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a><a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast');" style=display:none><i class="fas fa-chevron-up fa-lg"></i></a><span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=https://books.halfrost.com/>Books</a></li><li><a href=https://github.com/halfrost/Halfrost-Field>Github</a></li><li><a href=https://halfrost.me/>About</a></li><li><a href=/index.xml>RSS</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://new.halfrost.com/functional_reactive_programming_concept/><i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li><li><a class=icon href=https://new.halfrost.com/ios_ib_designable_ibinspectable/><i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li><li><a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');"><i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li><li><a class=icon href=#><i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f"><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f&text=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20Xcode%208%20Auto%20Layout%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f&title=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20Xcode%208%20Auto%20Layout%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f&is_video=false&description=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20Xcode%208%20Auto%20Layout%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20Xcode%208%20Auto%20Layout%20%e6%96%b0%e7%89%b9%e6%80%a7&body=Check out this article: https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f"><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f&title=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20Xcode%208%20Auto%20Layout%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f&title=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20Xcode%208%20Auto%20Layout%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f&title=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20Xcode%208%20Auto%20Layout%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-stumbleupon" aria-hidden=true></i></a></li><li><a class=icon href="http://digg.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f&title=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20Xcode%208%20Auto%20Layout%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-digg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f&name=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20Xcode%208%20Auto%20Layout%20%e6%96%b0%e7%89%b9%e6%80%a7&description=%23%23%23%23%e7%9b%ae%e5%bd%95%0a%201.Incrementally%20Adopting%20Auto%20Layout%202.Design%20and%20Runtime%20Constraints%203.NSGridView%204.Layout%20Feedback%20Loop%20Debugging%20%20%23%23%23%23%e4%b8%80.Incrementally%20Adopting%20Auto%20Layout%20Incrementally%20Adopting%20Auto%20Layout%e6%98%af%e4%bb%80%e4%b9%88%e6%84%8f%e6%80%9d%e5%91%a2%ef%bc%9f%e5%9c%a8%e6%88%91%e4%bb%acIB%e9%87%8c%e9%9d%a2%e5%b8%83%e5%b1%80%e6%88%91%e4%bb%ac%e7%9a%84View%e7%9a%84%e6%97%b6%e5%80%99%ef%bc%8c%e6%88%91%e4%bb%ac%e5%b9%b6%e4%b8%8d%e9%9c%80%e8%a6%81%e4%b8%80%e6%ac%a1%e6%80%a7%e5%b0%b1%e6%b7%bb%e5%8a%a0%e5%a5%bd%e6%89%80%e6%9c%89%e7%9a%84constraints%e3%80%82%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e4%b8%80%e6%ad%a5%e6%ad%a5%e7%9a%84%e5%a2%9e%e5%8a%a0constraints%ef%bc%8c%e7%ae%80%e5%8c%96%e6%88%91%e4%bb%ac%e7%9a%84%e6%ad%a5%e9%aa%a4%ef%bc%8c%e8%80%8c%e4%b8%94%e8%83%bd%e8%ae%a9%e6%88%91%e4%bb%ac%e7%9a%84%e8%ae%be%e7%bd%ae%e8%b5%b7%e6%9d%a5%e6%9b%b4%e5%8a%a0%e7%81%b5%e6%b4%bb%e3%80%82%0a%e5%86%8d%e8%b0%88%e6%96%b0%e7%89%b9%e6%80%a7%e4%b9%8b%e5%89%8d%ef%bc%8c%e5%85%88%e4%bb%8b%e7%bb%8d%e4%b8%80%e4%b8%8b%e8%bf%99%e4%b8%aa%e7%89%b9%e6%80%a7%e5%af%b9%e5%ba%94%e7%9a%84%e8%83%8c%e6%99%af%e6%9d%a5%e6%ba%90%e3%80%82%0a%e6%9c%89%e8%bf%99%e6%a0%b7%e4%b8%80%e7%a7%8d%e5%9c%ba%e6%99%af%ef%bc%8c%e8%af%95%e6%83%b3%ef%bc%8c%e6%88%91%e4%bb%ac%e6%8a%8a%e4%b8%80%e4%b8%aaview%e6%94%be%e5%9c%a8%e7%88%b6view%e4%b8%8a%ef%bc%8c%e8%bf%99%e4%b8%aa%e6%97%b6%e5%80%99%e5%b9%b6%e6%b2%a1%e6%9c%89%e8%ae%be%e7%bd%aeconstraints%ef%bc%8c%e5%bd%93%e6%88%91%e4%bb%ac%e8%bf%90%e8%a1%8c%e5%ae%8c%e7%a8%8b%e5%ba%8f%ef%bc%8c%e5%b0%b1%e4%bc%9a%e5%87%ba%e7%8e%b0%e4%b8%8b%e5%9b%be%e7%9a%84%e6%a0%b7%e5%ad%90%e3%80%82%0a%e7%9c%8b%e4%b8%8a%e5%8e%bb%e4%b8%80%e5%88%87%e9%83%bd%e8%bf%98%e6%ad%a3%e5%b8%b8%e3%80%82%e4%bd%86%e6%98%af%e4%b8%80%e6%97%a6%e5%bd%93%e6%88%91%e4%bb%ac%e6%8a%8a%e8%ae%be%e5%a4%87%e6%97%8b%e8%bd%ac90%c2%b0%e4%bb%a5%e5%90%8e%ef%bc%8c%e5%b0%b1%e4%bc%9a%e5%87%ba%e7%8e%b0%e4%b8%8b%e5%9b%be%e7%9a%84%e6%a0%b7%e5%ad%90%e3%80%82%0a%e8%bf%99%e4%b8%aa%e6%97%b6%e5%80%99%e5%8f%af%e4%bb%a5%e5%8f%91%e7%8e%b0%ef%bc%8c%e8%bf%99%e4%b8%aaView%e7%9a%84%e9%95%bf%ef%bc%8c%e5%ae%bd%ef%bc%8c%e4%bb%a5%e5%8f%8atop%e5%92%8cleft%e7%9a%84%e8%be%b9%e8%b7%9d%e9%83%bd%e6%b2%a1%e6%9c%89%e5%8f%91%e7%94%9f%e5%8f%98%e5%8c%96%e3%80%82%e8%bf%99%e6%97%b6%e6%88%91%e4%bb%ac%e5%b9%b6%e6%b2%a1%e6%9c%89%e8%ae%be%e7%bd%aeconstraints%ef%bc%8c%e8%bf%99%e6%98%af%e6%80%8e%e4%b9%88%e5%81%9a%e5%88%b0%e7%9a%84%e5%91%a2%ef%bc%9f%0a%e5%9c%a8%e7%a8%8b%e5%ba%8f%e7%9a%84%e7%bc%96%e8%af%91%e6%9c%9f%ef%bc%8cAuto%20Layout%e7%9a%84%e5%bc%95%e6%93%8e%e4%bc%9a%e8%87%aa%e5%8a%a8%e9%9a%90%e5%bc%8f%e7%9a%84%e7%bb%99View%e5%8a%a0%e4%b8%8a%e4%b8%80%e4%ba%9bconstraints%e7%ba%a6%e6%9d%9f%ef%bc%8c%e4%bb%a5%e4%bf%9d%e8%af%81View%e7%9a%84%e5%a4%a7%e5%b0%8f%e4%b8%8d%e4%bc%9a%e5%8f%91%e7%94%9f%e5%8f%98%e5%8c%96%e3%80%82%e8%bf%99%e4%b8%aa%e4%be%8b%e5%ad%90%e4%b8%ad%ef%bc%8cView%e8%a2%ab%e5%8a%a0%e4%b8%8a%e4%ba%86top%ef%bc%8cleft%ef%bc%8cwidth%ef%bc%8cheight%e8%bf%994%e4%b8%aa%e7%ba%a6%e6%9d%9f%e3%80%82%0a%e5%a6%82%e6%9e%9c%e6%88%91%e4%bb%ac%e9%9c%80%e8%a6%81%e6%9b%b4%e5%8a%a0%e5%8a%a8%e6%80%81%e7%9a%84resize%e7%9a%84%e8%a1%8c%e4%b8%ba%ef%bc%8c%e5%b0%b1%e9%9c%80%e8%a6%81%e6%88%91%e4%bb%ac%e5%9c%a8IB%e9%87%8c%e9%9d%a2%e8%87%aa%e5%ae%9a%e4%b9%89%e7%ba%a6%e6%9d%9f%e4%ba%86%e3%80%82%e7%8e%b0%e5%9c%a8%e9%97%ae%e9%a2%98%e5%b0%b1%e6%9d%a5%e4%ba%86%ef%bc%8c%e6%9c%89%e6%b2%a1%e6%9c%89%e6%9b%b4%e5%a5%bd%e7%9a%84%e6%96%b9%e5%bc%8f%e6%9d%a5%e5%81%9a%e8%bf%99%e4%bb%b6%e4%ba%8b%e6%83%85%ef%bc%9f%e6%9c%80%e5%a5%bd%e6%98%af%e8%83%bd%e6%9c%89%e4%b8%80%e7%a7%8d%e4%b8%8d%e7%94%a8%e7%ba%a6%e6%9d%9f%e7%9a%84%e6%96%b9%e6%b3%95%ef%bc%8c%e4%b9%9f%e8%83%bd%e8%be%be%e5%88%b0%e7%ae%80%e5%8d%95%e7%9a%84resize%e7%9a%84%e6%95%88%e6%9e%9c%e3%80%82%0a%e7%8e%b0%e5%9c%a8%e8%bf%99%e4%b8%aa%e9%97%ae%e9%a2%98%e6%9c%89%e4%ba%86%e8%a7%a3%e5%86%b3%e5%8a%9e%e6%b3%95%e3%80%82%e5%9c%a8Xcode8%e4%b8%ad%ef%bc%8c%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e7%bb%99View%e6%8c%87%e5%ae%9aautoresizing%20masks%ef%bc%8c%e8%80%8c%e4%b8%8d%e7%94%a8%e5%8e%bb%e8%ae%be%e7%bd%aeconstraints%e3%80%82%e8%bf%99%e5%b0%b1%e6%84%8f%e5%91%b3%e7%9d%80%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e4%b8%8d%e7%94%a8%e7%ba%a6%e6%9d%9f%ef%bc%8c%e6%88%91%e4%bb%ac%e4%b9%9f%e8%83%bd%e5%81%9a%e5%88%b0%e7%ae%80%e5%8d%95%e7%9a%84resize%e7%9a%84%e6%95%88%e6%9e%9c%e3%80%82%0a%e5%9c%a8Autolayout%e6%97%b6%e4%bb%a3%e4%b9%8b%e5%89%8d%ef%bc%8c%e5%8f%af%e8%83%bd%e4%bc%9a%e6%9c%89%e4%ba%ba%e8%ae%a4%e5%87%ba%e8%bf%99%e7%a7%8dUI%e6%96%b9%e5%bc%8f%e3%80%82%e8%bf%99%e6%98%af%e4%b8%80%e7%a7%8dSprings%20%26amp%3b%20Struts%e7%9a%84UI%e3%80%82%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e8%ae%be%e5%ae%9a%e8%be%b9%e7%bc%98%e7%ba%a6%e6%9d%9f%28%e6%b3%a8%ef%bc%9a%e8%bf%99%e9%87%8c%e7%9a%84%e7%ba%a6%e6%9d%9f%e5%b9%b6%e4%b8%8d%e6%98%af%e6%8c%87%e7%9a%84%e6%98%afAutolayout%e9%87%8c%e9%9d%a2%e7%9a%84constraints%ef%bc%8c%e6%98%afautoresizing%20masks%e9%87%8c%e9%9d%a2%e7%9a%84%e8%a7%84%e5%88%99%29%ef%bc%8c%e6%97%a0%e8%ae%baView%e7%9a%84%e9%95%bf%e5%ae%bd%e5%a6%82%e4%bd%95%e5%8f%98%e5%8c%96%ef%bc%8c%e8%bf%99%e4%ba%9bView%e9%83%bd%e4%bc%9a%e8%b7%9f%e9%9a%8f%e7%9d%80%e8%ae%be%e7%bd%ae%e4%ba%86%e7%ba%a6%e6%9d%9f%e7%9a%84view%e4%b8%80%e8%b5%b7%e5%8f%98%e5%8c%96%e3%80%82%0a%e4%b8%8a%e8%bf%b0%e7%9a%84%e4%be%8b%e5%ad%90%e4%b8%ad%ef%bc%8cXcode%208%20%e4%b8%ad%e5%9c%a8%e6%b2%a1%e6%9c%89%e5%8a%a0%e5%a6%82%e4%bd%95constraint%e5%b0%b1%e5%8f%af%e4%bb%a5%e5%81%9a%e5%88%b0%e6%97%8b%e8%bd%ac%e5%b1%8f%e5%b9%95%e4%b9%8b%e5%90%8e%ef%bc%8cView%e7%9a%84%e8%be%b9%e8%b7%9d%e5%b9%b6%e6%b2%a1%e6%9c%89%e5%8f%91%e7%94%9f%e5%8f%98%e5%8c%96%e3%80%82%e8%bf%99%e6%98%af%e6%80%8e%e4%b9%88%e5%81%9a%e5%88%b0%e7%9a%84%e5%91%a2%ef%bc%9f%e4%ba%8b%e5%ae%9e%e4%b8%8a%ef%bc%8cXcode%208%e7%9a%84%e5%81%9a%e6%b3%95%e6%98%af%e5%85%88%e5%8f%96%e5%87%baautoresizing%20masks%ef%bc%8c%e7%84%b6%e5%90%8e%e6%8a%8a%e5%ae%83%e8%bd%ac%e6%8d%a2%e6%88%90%e5%af%b9%e5%ba%94%e7%9a%84constraints%ef%bc%8c%e8%bf%99%e4%b8%aa%e8%bd%ac%e6%8d%a2%e7%9a%84%e6%97%b6%e6%9c%ba%e5%8f%91%e7%94%9f%e5%9c%a8Runtime%e6%9c%9f%e9%97%b4%e3%80%82%e7%94%9f%e6%88%90%e5%af%b9%e5%ba%94%e7%9a%84constraints%e6%98%af%e5%8f%91%e7%94%9f%e5%9c%a8%e8%bf%90%e8%a1%8c%e6%97%b6%ef%bc%8c%e8%80%8c%e4%b8%8d%e6%98%af%e7%bc%96%e8%af%91%e6%97%b6%e7%9a%84%e5%8e%9f%e5%9b%a0%e6%98%af%e5%8f%af%e4%bb%a5%e7%bb%99%e6%88%91%e4%bb%ac%e5%bc%80%e5%8f%91%e8%80%85%e6%9b%b4%e5%8a%a0%e4%be%bf%e5%88%a9%e7%9a%84%e6%96%b9%e5%bc%8f%e4%b8%baView%e6%b7%bb%e5%8a%a0%e6%9b%b4%e5%8a%a0%e7%bb%86%e8%87%b4%e7%9a%84%e7%ba%a6%e6%9d%9f%e3%80%82%0a%e5%9c%a8View%e4%b8%8a%ef%bc%8c%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e8%ae%be%e7%bd%aetranslatesAutoresizingMaskIntoConstraints%e5%b1%9e%e6%80%a7%e3%80%82%0atranslatesAutoresizingMaskIntoConstraints%20%3d%3d%20true%20%e5%81%87%e8%ae%be%e5%a6%82%e6%9e%9cView%e5%b7%b2%e7%bb%8f%e5%9c%a8Interface%20Builder%e9%87%8c%e9%9d%a2%e5%8a%a0%e8%bf%87constraints%ef%bc%8c%e2%80%9cShow%20the%20Size%20inspector%e2%80%9d%e9%9d%a2%e6%9d%bf%e4%be%9d%e6%97%a7%e4%bc%9a%e5%92%8c%e4%bb%a5%e5%89%8d%e4%b8%80%e6%a0%b7%e3%80%82%e7%82%b9%e5%87%bbView%ef%bc%8c%e6%9f%a5%e7%9c%8b%e7%bb%99%e5%ae%83%e5%8a%a0%e7%9a%84%e6%89%80%e6%9c%89%e7%9a%84constraints%ef%bc%8c%e8%bf%99%e4%b8%aa%e6%97%b6%e5%80%99Autoresizing%20masks%e5%b0%b1%e8%a2%ab%e5%bf%bd%e7%95%a5%e4%ba%86%ef%bc%8c%e8%80%8c%e4%b8%94translatesAutoresizingMask%e7%9a%84%e5%b1%9e%e6%80%a7%e4%b9%9f%e4%bc%9a%e5%8f%98%e6%88%90false%e3%80%82%e5%a6%82%e4%b8%8b%e5%9b%be%ef%bc%8c%e6%88%91%e4%bb%ac%e8%bf%99%e4%b8%aa%e6%97%b6%e5%80%99%e5%9c%a8%e2%80%9cShow%20the%20Size%20inspector%e2%80%9d%e9%9d%a2%e6%9d%bf%e4%b8%8a%e9%9d%a2%e5%b0%b1%e5%b7%b2%e7%bb%8f%e7%9c%8b%e4%b8%8d%e5%88%b0AutoresizingMask%e7%9a%84%e8%ae%be%e7%bd%ae%e9%9d%a2%e6%9d%bf%e4%ba%86%e3%80%82%0a%e4%b8%8a%e5%9b%be%e5%b0%b1%e6%98%af%e5%9c%a8Autolayout%e6%97%b6%e4%bb%a3%e4%b9%8b%e5%89%8d%ef%bc%8c%e6%88%91%e4%bb%ac%e4%b8%80%e7%9b%b4%e4%bd%bf%e7%94%a8%e7%9a%84%e6%98%afautoresizing%20masks%ef%bc%8c%e4%bd%86%e6%98%afAutolayout%e6%97%b6%e4%bb%a3%e6%9d%a5%e4%b8%b4%e4%b9%8b%e5%90%8e%ef%bc%8c%e4%b8%80%e6%97%a6%e5%8b%be%e9%80%89%e4%b8%8a%e4%ba%86%e8%bf%99%e4%b8%aaAutolayout%ef%bc%8c%e4%b9%8b%e5%89%8d%e7%9a%84AutoresizingMask%e4%b9%9f%e5%b0%b1%e5%a4%b1%e6%95%88%e4%ba%86%e3%80%82%0a%e5%9b%9e%e5%88%b0%e6%88%91%e4%bb%ac%e6%9c%80%e5%8e%9f%e5%a7%8b%e7%9a%84%e9%97%ae%e9%a2%98%e4%b8%8a%e6%9d%a5%ef%bc%8cXcode%208%20%e7%8e%b0%e5%9c%a8%e9%92%88%e5%af%b9View%e5%8f%af%e4%bb%a5%e6%94%af%e6%8c%81%e5%a2%9e%e9%87%8f%e7%9a%84%e9%80%82%e7%94%a8Autolayout%e3%80%82%e8%bf%99%e5%b0%b1%e6%84%8f%e5%91%b3%e7%9d%80%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e4%bb%8eAutoresizingMask%e5%bc%80%e5%a7%8b%ef%bc%8c%e5%85%88%e5%81%9a%e7%ae%80%e5%8d%95%e7%9a%84resize%e7%9a%84%e5%b7%a5%e4%bd%9c%ef%bc%8c%e7%84%b6%e5%90%8e%e5%a6%82%e6%9e%9c%e6%9c%89%e6%9b%b4%e5%8a%a0%e5%a4%8d%e6%9d%82%e7%9a%84%e9%9c%80%e6%b1%82%ef%bc%8c%e6%88%91%e4%bb%ac%e5%86%8d%e5%8a%a0%e4%b8%8a%e9%80%82%e5%bd%93%e7%9a%84%e7%ba%a6%e6%9d%9fconstraints%e6%9d%a5%e8%bf%9b%e8%a1%8c%e9%80%82%e9%85%8d%e3%80%82%e7%ae%80%e8%80%8c%e6%a6%82%e4%b9%8b%ef%bc%8cXcode%208%20Autolayout%20%e2%89%88%20AutoresizingMask%20%2b%20Autolayout%20%e3%80%82%0a%e6%8e%a5%e4%b8%8b%e6%9d%a5%e7%94%a8%e4%b8%80%e4%b8%aademo%e7%9a%84%e4%be%8b%e5%ad%90%e6%9d%a5%e8%af%b4%e6%98%8e%e4%b8%80%e4%b8%8bXcode%208%20Autolayout%e6%96%b0%e7%89%b9%e6%80%a7%e3%80%82"><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f&t=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20Xcode%208%20Auto%20Layout%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#二design-and-runtime-constraints>二.Design and Runtime Constraints</a></li><li><a href=#总结>总结</a></li></ul></li></ul></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">WWDC 2016 Session 笔记 - Xcode 8 Auto Layout 新特性</h1><div class=meta><div class=postdate><time datetime="2016-07-17 03:36:00 +0000 UTC" itemprop=datePublished>Jul 17</time></div><div class=article-category><i class="fas fa-archive"></i><a class=category-link href=/categories/ios>iOS</a>
,
<a class=category-link href=/categories/xcode-8>Xcode 8</a>
,
<a class=category-link href=/categories/autolayout>AutoLayout</a>
,
<a class=category-link href=/categories/autoresizing-masks>AutoResizing Masks</a>
,
<a class=category-link href=/categories/wwdc2016>WWDC2016</a></div><div class=article-tag><i class="fas fa-tag"></i><a class=tag-link href=/tags/ios rel=tag>iOS</a>
,
<a class=tag-link href=/tags/xcode-8 rel=tag>Xcode 8</a>
,
<a class=tag-link href=/tags/autolayout rel=tag>AutoLayout</a>
,
<a class=tag-link href=/tags/autoresizing-masks rel=tag>AutoResizing Masks</a>
,
<a class=tag-link href=/tags/wwdc2016 rel=tag>WWDC2016</a></div></div></header><div class=content itemprop=articleBody><p>####目录</p><ul><li>1.Incrementally Adopting Auto Layout</li><li>2.Design and Runtime Constraints</li><li>3.NSGridView</li><li>4.Layout Feedback Loop Debugging</li></ul><p>####一.Incrementally Adopting Auto Layout
Incrementally Adopting Auto Layout是什么意思呢？在我们IB里面布局我们的View的时候，我们并不需要一次性就添加好所有的constraints。我们可以一步步的增加constraints，简化我们的步骤，而且能让我们的设置起来更加灵活。</p><p>再谈新特性之前，先介绍一下这个特性对应的背景来源。</p><p>有这样一种场景，试想，我们把一个view放在父view上，这个时候并没有设置constraints，当我们运行完程序，就会出现下图的样子。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_2.png alt></p><p>看上去一切都还正常。但是一旦当我们把设备旋转90°以后，就会出现下图的样子。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_3.png alt></p><p>这个时候可以发现，这个View的长，宽，以及top和left的边距都没有发生变化。这时我们并没有设置constraints，这是怎么做到的呢？</p><p>在程序的编译期，Auto Layout的引擎会自动隐式的给View加上一些constraints约束，以保证View的大小不会发生变化。这个例子中，View被加上了top，left，width，height这4个约束。</p><p>如果我们需要更加动态的resize的行为，就需要我们在IB里面自定义约束了。现在问题就来了，有没有更好的方式来做这件事情？最好是能有一种不用约束的方法，也能达到简单的resize的效果。</p><p>现在这个问题有了解决办法。在Xcode8中，我们可以给View指定autoresizing masks，而不用去设置constraints。这就意味着我们可以不用约束，我们也能做到简单的resize的效果。</p><p>在Autolayout时代之前，可能会有人认出这种UI方式。这是一种Springs & Struts的UI。我们可以设定边缘约束(注：这里的约束并不是指的是Autolayout里面的constraints，是autoresizing masks里面的规则)，无论View的长宽如何变化，这些View都会跟随着设置了约束的view一起变化。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_4.png alt></p><p>上述的例子中，Xcode 8 中在没有加如何constraint就可以做到旋转屏幕之后，View的边距并没有发生变化。这是怎么做到的呢？事实上，Xcode 8的做法是先取出autoresizing masks，然后把它转换成对应的constraints，这个转换的时机发生在Runtime期间。生成对应的constraints是发生在运行时，而不是编译时的原因是可以给我们开发者更加便利的方式为View添加更加细致的约束。</p><p>在View上，我们可以设置translatesAutoresizingMaskIntoConstraints属性。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec>translatesAutoresizingMaskIntoConstraints <span style=color:#f92672>==</span> true
</code></pre></div><p>假设如果View已经在Interface Builder里面加过constraints，“Show the Size inspector”面板依旧会和以前一样。点击View，查看给它加的所有的constraints，这个时候Autoresizing masks就被忽略了，而且translatesAutoresizingMask的属性也会变成false。如下图，我们这个时候在“Show the Size inspector”面板上面就已经看不到AutoresizingMask的设置面板了。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_5.png alt></p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_6.png alt></p><p>上图就是在Autolayout时代之前，我们一直使用的是autoresizing masks，但是Autolayout时代来临之后，一旦勾选上了这个Autolayout，之前的AutoresizingMask也就失效了。</p><p>回到我们最原始的问题上来，Xcode 8 现在针对View可以支持增量的适用Autolayout。这就意味着我们可以从AutoresizingMask开始，先做简单的resize的工作，然后如果有更加复杂的需求，我们再加上适当的约束constraints来进行适配。简而概之，Xcode 8 Autolayout ≈ AutoresizingMask + Autolayout 。</p><p>接下来用一个demo的例子来说明一下Xcode 8 Autolayout新特性。<br>在说例子之前我们先来说一下Xcode 8在storyboard上新增了哪些功能。如下图，我们可以看到，在最下方新增加了一栏，可以切换不同的屏幕大小，可以看出，iPhone现在已经分化成6种屏幕大小需要我们适配了，从大到小，依次是：iPad pro 12.9, iPad 9.7 , iPhone 6s Plus/iPhone 6 Plus , iPhone 6s/iPhone 6, iPhone SE/iPhone5s/iPhone5, iPhone4s/iPhone4。下面还可以选择横竖屏，和不用屏幕百分比的适应性。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_7.png alt></p><p>回到例子，我们现在对页面上这些view来做简单的AutoresizingMask。右边的那个预览界面是可以看到我们加上这些Mask之后的效果。</p><p>先是粉色的父View，我们给它加上如下的AutoresizingMask。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_8.png alt></p><p>给"雨天"的imageView加上如下AutoresizingMask</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_9.png alt></p><p>给"阴天"的imageView加上如下的AutoresizingMask</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_10.png alt></p><p>最后给我们的中间的Label加上AutoresizingMask</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_11.png alt></p><p>这个时候我们旋转一下屏幕，一切正常，View的排版都如我们所愿。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_12.png alt></p><p>这个时候我们再选择一下，3：2分屏，这个时候就出现了不对的情况了。Label的Width被挤压了。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_13.png alt></p><p>原因是因为Autoresizing masks并不会向Autolayout一样，会考虑View的content，所以这里被挤压了。</p><p>想fix这个Label，我们可以很容易的添加一个constraints来修复。不过这里我们来谈谈另外一种做法。</p><p>进入到Attributes Inspector面板，找到Autoshrink属性，把“fixed font size”切换成“minimum font size”</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_14.png alt></p><p>这个时候就fix上述的问题了。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_15.png alt></p><p>此时就算是回到landscape，分屏的情况下，已经可以显示正常。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_16.png alt></p><p>接着我们再来处理一下中间的温度的Label。这个时候我们有比较复杂的需求。这个时候我们就需要用到constraint了。</p><p>这个时候我们按时control键，然后拖到父View上，释放，会弹出菜单。我们再按住shift，这样我们可以一次性选择多个constraints。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_17.png alt></p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_18.png alt></p><p>我们一次性选择“Center Horizontally in Container” 和 “Center Vertically in Container”。注意这个时候右边还是AutoresizingMask的面板，因为这个时候Label还没有任何的constraint。当我们点击“Add Constraints”的时候，就给Label加上了约束，右边的面板也变成了constraints面板了。</p><p>我们再给这个Label继续加2个constraints。“Horizontal Spacing”和“Baseline”。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_19.png alt></p><p>同样的，从Label拖拽到“太阳”的那个imageView上，再添加“Horizontal Spacing”和“Baseline”约束。</p><p>这个时候我们更新一下frame。如下图所示，选择“Update Frames”，这个时候所有的frame就都完成了。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_20.png alt></p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_21.png alt></p><p>这个时候我们更新一下中间温度的Label的字体大小，这时候计算变大，由于我们的constraints都是正确的，两边的View也会随着Label字体变大而变大。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_22.png alt></p><p>Xocde 8在这个时候就变得更加智能了，会立即自动更新frame。</p><p>我们在继续给晴天的上海加上一个背景图。添加一个imageView，然后大小铺满整个父View，把mode 选择成“Aspect Fill”</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_23.png alt></p><p>接下面一般的做法就是在这个imageView上面添加constraints，来使这个View和父View大小一样。但是这种简单的resize的行为在Xocde 8里面就不需要再添加Constraint了，这里我们改用Autoresizing masks来实现。给imageView添加一下这些mask。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_24.png alt></p><p>我们把imageView放到背景去。这时，我们所有的界面就布局完成了。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_25.png alt></p><p>测试一下横屏的效果</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_26.png alt></p><p>甚至分屏的一样可以完成任务！</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_27.png alt></p><p><a href=https://github.com/halfrost/Halfrost-Field/tree/master/contents/iOS/Xcode8AutolayoutDemo-master>Demo的Github地址</a>，这个demo没啥难的，就是看看效果。</p><p>这就是Xcode 8 的Incrementally Adopting Auto Layout，Autoresizing masks + Auto Layout Constraint 一起协同工作！</p><h4 id=二design-and-runtime-constraints>二.Design and Runtime Constraints</h4><p>在我们开发过程中有这样一种情况，View的constraints会依据你所加载的数据来添加的。所以在app运行之前，我们是无法知道所有的constraints的。</p><p>这里有3种方法可以对应以上的情况。</p><h5 id=1placeholder-constraints>1.Placeholder Constraints</h5><p>假设现在我们需要把一张图片放在View的垂直和水平的中间，并且距离左边的边缘有一个leading margin。并且还需要保持其长宽的比例。而这种图片的最终样子，我们并不知道。只有到运行时，我们才能知道这样图片的样子。</p><p>为了能在Interface Builder看到我们的图片，我们要先预估一下图片的长宽比例。假设我们估计为4：3。这时候就给图片加上constraints，并且勾上“place order constraint”，这个约束会在build time的时候被移除。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_28.png alt></p><p>当我们在运行时拿到图片之后，这个是时候我们再给它加上适当的约束和长宽比例即可。</p><h5 id=2intrinsic-content-size>2.Intrinsic Content Size</h5><p>还是类似上面那种场景，我们有时候会自定义一些UIView或者NSView，这些View里面的content是动态的。Interface Builder并不会运行我们的代码，所以不到app运行的时候我们并不知道里面的大小。我们可以给它设置一个内在的content的大小。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_29.png alt></p><blockquote><p>Setting a design time intrinsic content size only affects a view while editing in Interface Builder.The view will not have this intrinsic content size at runtime.</p></blockquote><p>注意一下上面的说明intrinsic content size仅仅相当于是在布局的时候一个placeholder，在运行时这个size就没有了。所以如果开发过程中真的需要用到这个内在的content的大小，那么我们需要overriding的content size</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec>
override var intrinsicContentSize: CGSize
</code></pre></div><h5 id=3turn-off-ambiguity-per-view>3.Turn Off Ambiguity Per View</h5><p>这个是Xcode 8的一个新特性。当上述2种方法都无法解决我们的需求的时候。这个时候就需要用到这种方法了。Xcode 8给了我们可以在constraints产生歧义的时候，可以动态调整警告级别的能力。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_30.png alt></p><p>在这个场景中，我们仅仅只知道我们需要把这个imageView放在水平位置的中央，但是imageView的大小和它的水平位置我们并不知道。如果我们仅仅只加上了这一个约束的话，Interface Builder就会报红，因为IB这时候根据我们给的constraints，并不能唯一确定当前的view的位置。</p><p>如果我们在之后的运行时，拿到图片的完整信息之后，我们自己知道该如何去加constraints，我们知道该如何去排版保证imageView能唯一确定位置的时候，这时我们可以关掉IB的红色警告。找到“Ambiguous”，这里是警告的级别，我们这里选择“Never Verify”，这时就没有红色的警告和错误提醒了。但是选择这一项的前提是，我们能保证之后运行时我们可以加上足够的constraints保证view的位置信息完整。</p><p>以上3种方法就是我们在运行时给view增加constraints的解决办法。</p><p>####三.NSGridView</p><p>这是macOS给我们带来的一个新的layout容器。</p><p>有时候我们为了维护constraints的正确性是件比较麻烦的事情，比如即使我们就是一组简单的checkboxes，维护constraints也不容易。这个时候我们会选择用stack view来让我们开发更容易一些。</p><p>下图是macOS的app常见到的一组checkboxes。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_31.png alt></p><p>这时候我们选用NS/UIStackView来实现，因为它有以下的优点，它可以排列一组items，重要的是它可以处理好content size并且可以控制好每个item之间的spacing。</p><p>但是stack view依旧有一些场景无法很顺手的处理。例如下图的场景。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_32.png alt></p><p>这时依旧可以用stack view来实现，但是它不能帮我们根据content完成行和列的对齐。</p><p>这就是为什么要引入新的NSGridView的原因。</p><p>使用NSGridView，我们可以很容易的做到content在X轴和Y轴上的对齐。仅仅只需要我们把content放进预先定义好的网格中即可，NSGridView会帮我们管理好接下来对齐的一切事情。</p><p>我们来看看下面的例子。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_33.png alt></p><p>NSGridView有2个子类，NSGridRow 和 NSGridColumn，它们俩会自动的管理好content的大小。当然我们可以在需要的时候指定size的大小，padding和spacing的大小。我们也可以动态的隐藏一些rows行和colunms列。</p><p>NSGridCell的工作就是管理每个cell里面content view的layout。如果某个cell的内容超出cell的边界，cell会合并起来，就像普通的电子表格app的做法一样。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_34.png alt></p><p>我们来构建一个简单的界面。设计图如下：</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_35.png alt></p><p>我们并不需要去关心网格的sizing，我们只用关心每一行每一列究竟有多少个content需要被显示出来。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec>let empty <span style=color:#f92672>=</span> NSGridCell.emptyContentView
let gridView <span style=color:#f92672>=</span> NSGridView(views: [
 [brailleTranslationLabel, brailleTranslationPopup], 
 [empty, showContractedCheckbox], 
 [empty, showEightDotCheckbox], 
 [statusCellsLabel, showGeneralDisplayCB],
 [empty, textStyleCB], 
 [showAlertCB] 
])
</code></pre></div><p>用上述代码运行出来的界面是这样的：</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_36.png alt></p><p>虽然我们调用构造函数没错，但是出来的界面和设计的明显有一些差距。最明显的问题就是UI被拉开了，有很多空白的地方。</p><p>产生问题的原因就在于，网格被约束到了window的边缘。我们的意图应该是window来匹配我们的网格大小，但是现在出现的问题变成了，网格被拉伸了，去匹配window的大小了。</p><p>我们解决这个问题的办法就是去改变 grid view内容的hugging的优先级。尽管页面上的constraints已经具有了高优先级，但是我们现在仍可以继续提高优先级，来让constraints推动content，使其远离window的边缘。我们提高一些优先级：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec>gridView.setContentHuggingPriority(<span style=color:#ae81ff>600</span>, <span style=color:#66d9ef>for</span><span style=color:#f92672>:</span> .horizontal)
gridView.setContentHuggingPriority(<span style=color:#ae81ff>600</span>, <span style=color:#66d9ef>for</span><span style=color:#f92672>:</span> .vertical)
</code></pre></div><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_37.png alt></p><p>我们会发现，window里面的content更加聚合了，中间的大段空白消失了。</p><p>我们再来解决一下window中间的空白，左边的label和右边的content距离太远。根据设计，我们应该让label居右排列。这件事很容易，只要我们调整一下cell的位置信息即可完成。排列的位置信息会影响到cell，行，列，网格视图。</p><p>如果没有指定cell的placement这个属性值，那么行列就会根据gridview的placement属性值来确定。这个规则可以使我们在一处设定好placement，瞬间可以改变大量的cell的布局。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec><span style=color:#75715e>//first column needs to be right-justified:
</span><span style=color:#75715e></span>gridView.column(at: <span style=color:#ae81ff>0</span>).xPlacement <span style=color:#f92672>=</span> .trailing
</code></pre></div><p>我们找到gridView的第一列，改变它的xPlacement属性值，这样一列的cell都会变成居右排列。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_38.png alt></p><p>居右之后，我们又会出现新的问题，baseline不对齐了。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_39.png alt></p><p>行的对齐和列的对齐原理一样的，同理，我们只需要设置一处，将会影响整个网格视图。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec><span style=color:#75715e>// all cells use firstBaseline alignment
</span><span style=color:#75715e></span>gridView.rowAlignment <span style=color:#f92672>=</span> .firstBaseline
</code></pre></div><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_40.png alt></p><p>设置完成之后，整个网格视图就对齐了。</p><p>接下来我们再来改变一下pop-up button的边距。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_41.png alt></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec>let row <span style=color:#f92672>=</span> gridView.cell(<span style=color:#66d9ef>for</span><span style=color:#f92672>:</span> brailleTranslationPopup)<span style=color:#f92672>!</span>.row<span style=color:#f92672>!</span>
row.topPadding <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>
row.bottomPadding <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>
</code></pre></div><p>这里取第一行的做法也可以和之前取第一列的做法一样，直接取下标0的row即可。这里换一种更好的做法来做。在gridView里面找到包含pop-up button的cell，根据cell找到对应的row行。这种方式比直接去下标index的好处在于，日后如果有人在index 0的位置又增加了一行，那么代码就出错了，而我们这里的代码一直都不会出错，因为保证是取出了包含pop-up button的cell。所以代码里面尽量不要写死固定的index，这样以后维护起来比较困难。</p><p>同理，我们也给“status cells”也一起加上Padding</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec>ridView.cell(<span style=color:#66d9ef>for</span><span style=color:#f92672>:</span>statusCellsLabel)<span style=color:#f92672>!</span>.row<span style=color:#f92672>!</span>.topPadding <span style=color:#f92672>=</span> <span style=color:#ae81ff>6</span>
</code></pre></div><p>这里需要对比一下padding 和 spacing的区别。</p><p>padding是针对每个行或者每个列之间的间距，我们可以增加padding来改变两两之间的间距。
spacing是针对整个gridview来说的，改变了它，将会影响整个网格视图的布局。</p><p>再来看看我们的设计图：</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_42.png alt></p><p>如果没有padding那么就是下图的样子：</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_43.png alt></p><p>如果没有spacing那么就会出现下图的样子：</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_44.png alt></p><p>如果spacing和padding都没有的话，那就都挤在一起了：</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_45.png alt></p><p>最后我们来处理一下最下面那一行包含checkbox的cell</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_46.png alt></p><p>这里就需要用到之前提到了，合并2个cell了。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec><span style=color:#75715e>// Special treatment for centered checkbox:
</span><span style=color:#75715e></span>let cell <span style=color:#f92672>=</span> gridView.cell(<span style=color:#66d9ef>for</span><span style=color:#f92672>:</span> showAlertCB)<span style=color:#f92672>!</span>
cell.row<span style=color:#f92672>!</span>.topPadding <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>
cell.row<span style=color:#f92672>!</span>.mergeCells(<span style=color:#66d9ef>in</span><span style=color:#f92672>:</span> NSMakeRange(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>2</span>))
</code></pre></div><p>这里我们直接指出了，合并前2个cell。</p><p>执行完代码之后，就会是这个样子。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_47.png alt></p><p>最后一行的cell就会横跨2个cell的位置。虽然占了2个cell的位置，但是它依旧还继承着第一列的居右的排列规则。</p><p>现在我们的需求是既不希望它居右，也不希望它居左。
checkbox其实是支持排列在2个列之间的，但是由于这相邻的2个列的宽度并不相等，所以gridview不知道该怎么排列了。这时就需要我们手动来改变布局了。</p><p>这里可能有人会想，直接把</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec>cell.xPlacement <span style=color:#f92672>=</span> .none
</code></pre></div><p>把cell的xPlacement直接变成none，这样做会一下子打乱整个gridview的constraints布局，我们不能这样做。我们需要再继续给cell加上额外的constraints来维护整个gridview的constraints的平衡。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec>cell.xPlacement <span style=color:#f92672>=</span> .none
let centering <span style=color:#f92672>=</span> showAlertCB.centerXAnchor.constraint(equalTo: textStyleCB.leadingAnchor)
cell.customPlacementConstraints <span style=color:#f92672>=</span> [centering]
</code></pre></div><p>我们只需要在给出checkbox在x轴方面的锚点即可。这时候checkbox就会排列成我们想要的样子了。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_48.png alt></p><p>至此，我们就完成了需求。总结一下，NSGridView是一个新的控件，能很好的帮助我们进行网格似布局。它能很快很方便的把我们需要展示的content排列整齐。之后我们仅仅只需要调整一下padding和spacing这些信息即可。</p><p>####四.Layout Feedback Loop Debugging</p><p>有时候我们设置好了constraint之后，没有报任何错误，但是有些情况当我们运行起来的时候就有一堆constraint冲突在debug窗口里面，严重的还会使app直接崩溃。崩溃的情况就是遇到了layout feedback loop。</p><p>遇到这种情况，往往是发生在“过渡期”，开始或者结束的时候。如果说你点击了一个button，button相应了你的点击，但是之后button不弹起，一直保持着被按下的状态。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_49.png alt></p><p>然后会观察到CPU使用率爆表，内存倍增，然后app就崩溃了，与此同时返回了一大堆的layout的栈回溯信息。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_50.png alt></p><p>发生这个情况的原因是某个view的layout被一直执行，一直执行，陷入了死循环中。Runloop就不会停下，CPU的使用率会一直处于峰值。所有的消息都会被收集到自动释放的对象中去，消息一直发送，就会一直收集。所以内存也会倍增。</p><p>导致这个原因之一，是setNeedsLayout这个方法。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_51.png alt></p><p>当其中一个view调用完setNeedsLayout之后，会传递到父视图继续调用setNeedsLayout，父视图的setNeedsLayout可能又会调用到其他视图的layout信息。如果我们能在这相互之后调用找到调用者，也就是那个view调用了这个方法，那我们就可以分析清楚这些setNeedsLayout从哪里来，到哪里去，就能找到死循环的地方了。</p><p>这些信息确实很难收集，这也是为何苹果要为我们专门开发这样一个工具，方便我们来调试，查找问题的原因。</p><p>开启这个工具的开关在“Arguments”选项里面。如下图。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_52.png alt></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec>-<span style=color:#a6e22e>UIViewLayoutFeedbackLoopDebuggingThreshold</span> <span style=color:#ae81ff>100</span> <span style=color:#75715e>// 50...1000
</span><span style=color:#75715e></span><span style=color:#f92672>-</span>NSViewLayoutFeedbackLoopDebuggingThreshold <span style=color:#ae81ff>100</span> <span style=color:#75715e>// 50...1000
</span><span style=color:#75715e>// Logs to com.apple.UIKit:LayoutLoop or com.apple.AppKit:LayoutLoop
</span></code></pre></div><p>UIView是在iOS里面使用的，NSView是在macOS里面使用的。一旦我们开启了这个开关，那么layout feedback loop debugger就会开始记录每一个调用了setNeedsLayout的信息。</p><p>这里我给它设置了阀值是100。</p><p>如果发现在一个Runloop中，layout在一个view上面调用的次数超过了阀值，这里设置的是100，也就是说次数超过100，这个死循环还会在跑一小段，因为这个时候要给debugger一个记录信息的时间。当记录完成之后，就会立即抛出异常。并且信息会显示在logs中。log会被记录在com.apple.UIKit:LayoutLoop(iOS)/com.apple.AppKit:LayoutLoop(macOS)中</p><p>我们也可以打全局的异常断点exception break point。
在调试窗口也可以用LLDB命令po出一些调试信息。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_53.png alt></p><p>接下来看2个实用的例子。</p><p>#####1.Upstream Geometry Change</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_54.png alt></p><p>这里有这么多个view，层级如上图。</p><p>现在右子串上面10个子view在一次的层级变化中，被移除了。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_55.png alt></p><p>那么最上层圈起来的3个view都会被影响。<del>于是这3个view的bounds就发生了变化。于是就会隐式的调用setNeedsLayout，来获取新的bounds的信息。</del>**(这里经过@kuailejim @冬瓜争做全栈瓜 和大神们实验，setNeedsLayout是需要我们开发者手动调用的，系统并不会在bounds改变的时候隐式调用setNeedsLayout方法)**。当前view的bounds改变，但是如果父view没有layout完成，那么父view也会继续收到setNeedsLayout消息。这个消息就会一直被往上传递，直到传到最顶层的view，顶层的view layout完成之后，将会重置下面关联的view的bounds，调用layoutSubview()方法。这时候，死循环就产生了。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_56.png alt></p><p><del>这3个view就是上面3个view，下面的view需要setNeedsLayout，需要获取最新的bounds信息，中间蓝色的view也同样需要setNeedsLayout，于是又会让上层的view调用setNeedsLayout()方法，这个时候死循环就产生了。上下各有2个环，共同的view就是中间蓝色的view。环内的view都在相互的请求setNeedsLayout()，并且在自己layout完成以后又会去重置关联的view的bounds。这就形成了triggers layout。</del></p><p>大家对这里产生2个环产生了极大的好奇，热烈讨论这里会产生环的情况。目前可以想到会产生环的场景是这样子的:在上面的3颗子树，当某种场景下，突然删掉了右边的子树，假设用户的屏幕现在是全屏，由于一下子突然删掉了一堆view，那么原来那里就会变成空白，这个时候开发者想要把其他的view平铺到屏幕上。这个时候就需要改变上面父view的bounds，最下面的view会代码里面手动调用上面蓝色的view，setNeedsLayout()方法，并且把蓝色view的bounds设置成全屏，由于蓝色view的bounds改变，这个时候开发者代码里面又手动调用了蓝色view的父view，去执行setNeedsLayout()方法。top view代码里面又写了bounds = origRect，这时候就触发了蓝色view的layout，更新bounds。这样就产生了循环。同理下面也会形成循环。这样就产生了2个死循环了。<strong>这些总结需要感谢@kuailejim @冬瓜争做全栈瓜 给出的指点。</strong></p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_57.png alt></p><p>这里是我们用工具收集到的log，第一行就是top-level view，接下来的就是递归的过程。往下看，我们会看见一些数字，这些数字就是view接到layout的次数，并且这些数字是有序的。一次死循环中这些数字就是循环时候的顺序。当然一个循环中，每个view可以是起点也可以是终点。这里我们默认把top view设置成起点。这样就可以向我们展示出死循环中一共牵扯进来了多少个view。</p><p>从log上看，上面有3个view，下面有10个view，加起来也不等于23，这是为什么呢？我们继续往下看log，来看看“Views receiving layout in order”这里面记录了些什么吧。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_58.png alt></p><p>这里我们可以很明显的看到，view接收到layout的顺序，一共正好23个。也可以看出，在一起循环中，一个view接收到layout的次数不止一次。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_59.png alt></p><p>如上图所标示的，有2段在循环，有10个view接收到layout之后，再是2个view，紧接着又是10个view，再是1个view。</p><p>回到最初我们使用这个工具的用途上来，最初我们使用这个工具是用来查看 top-level view 接收到setNeedsLayout消息到底从哪里来。继续往下查找，找到调用的栈信息那里。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_60.png alt></p><p>从上往下看，前几行肯定都是UIViewLayoutFeedbackLoopDebugging的信息。往下看，看到第6行，可以看到DropShadowView接受到了信息，准备setBounds。回看之前的层级信息，我们会发现DropShadowView是TransitionView的子view。</p><p>引起DropShadowView触发setBounds的唯一途径是，它的父view，TransitionView触发了setNeedsLayout()方法。因为这个时候TransitionView还没有layout。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_61.png alt></p><p>回到“geometry change records”,这个时候我们可以看到选中的这3行信息在一遍遍的循环。看第2行和第3行，我们可以看到是来自于TransitionView的layout。这时是合理的。再看第一行，会发现这个时候有一个TransitionView的子view调用了viewLayoutSubviews。</p><p>这个时候我们就定位到了bug的根源了，只要想方设法在layout的时候，不要改变superview的bounds即可以去掉这个死循环。</p><p>#####2.Ambiguous Layout From Constraints</p><p>在我们设置constraints约束的时候，常常会产生一些歧义的constraints。歧义的constraints通常不可怕，我们只需要稍稍做些调整，然后update all frame即可。</p><p>但是有如下的场景会导出形成环：</p><p>当你的view在旋转之后，constraints也随之变化，然后有些view在旋转之后的constraint就会相互冲突。因次有些constraint就形成了环。</p><p>这个问题在没有这个debugger工具的时候，思考起来很烧脑，没有任何头绪，这也是为什么log把top-level view放在第一行的原因，给我们暗示，从这里开始找bug的原因。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_62.png alt></p><p>在log，我们会看到好多的“Ambiguous Layout”。注意：tAMIC是Translates Auto Resizing Mask into Constraints的缩写。</p><p>我们来看看详细的log。看log之前，我们应该知道，constraint虽然冲突很多，但是可能引起冲突的constraint只有一个，也就是说当我们更正了其中一个constraint，很可能所有的冲突都解决了。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_63.png alt></p><p>如上图log所示，在minX这里我们设置了2个带有冲突性的constraint，一个是-60，一个是-120。我们可以一个个的检查约束，但是这个列表很长，检查起来也比较麻烦。</p><p>那我们画图来分析一下这个问题。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/16_64.png alt></p><p>如图，label有leading和trailing padding，label是container的子view，container是action的子父，action是representation的子view。container和action view之间有一个居中的centering constraint。action view在representation view上有一个autoresizing mask constraints。</p><p>然后每个representation view之间是alignment对齐的。自此看来，这些view并没有足够的constraints能让这些view都能确定位置信息。比如在X轴上，这一串view是可以存在在任何的位置，所以产生了歧义的constraint。</p><p>解决上面的歧义的</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec>-<span style=color:#a6e22e>UIViewLayoutFeedbackLoopDebuggingThreshold</span> <span style=color:#ae81ff>100</span> <span style=color:#75715e>// 50...1000
</span><span style=color:#75715e></span><span style=color:#f92672>-</span>NSViewLayoutFeedbackLoopDebuggingThreshold <span style=color:#ae81ff>100</span> <span style=color:#75715e>// 50...1000
</span><span style=color:#75715e></span> <span style=color:#75715e>//Logs to com.apple.UIKit:LayoutLoop or com.apple.AppKit:LayoutLoop
</span></code></pre></div><p>用debugger就可以解决上述的问题。</p><h4 id=总结>总结</h4><p>这个Xcode 8 给我们的Autolayout融合了之前Autoresizing masks的用法，使两个合并在一起使用，这样不同场景我们可以有更多的选择，可以更加灵活的处理布局的问题。还允许我们能手动调节constraints警告优先级别。</p><p>针对macOS的布局问题，又给我们带来了新的控件NSGridView</p><p>最后给我们带来的新的调试Layout Feedback Loop Debugging的工具，能让我们平时调试起来比较头疼的问题，有了工具可以有据可循，迅速定位问题，查找问题。</p><p>最后，请大家多多指教。</p><img src=https://img.halfrost.com/wechat-qr-code.png></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=https://books.halfrost.com/>Books</a></li><li><a href=https://github.com/halfrost/Halfrost-Field>Github</a></li><li><a href=https://halfrost.me/>About</a></li><li><a href=/index.xml>RSS</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#二design-and-runtime-constraints>二.Design and Runtime Constraints</a></li><li><a href=#总结>总结</a></li></ul></li></ul></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f"><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f&text=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20Xcode%208%20Auto%20Layout%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f&title=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20Xcode%208%20Auto%20Layout%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f&is_video=false&description=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20Xcode%208%20Auto%20Layout%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20Xcode%208%20Auto%20Layout%20%e6%96%b0%e7%89%b9%e6%80%a7&body=Check out this article: https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f"><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f&title=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20Xcode%208%20Auto%20Layout%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f&title=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20Xcode%208%20Auto%20Layout%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f&title=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20Xcode%208%20Auto%20Layout%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-stumbleupon fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://digg.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f&title=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20Xcode%208%20Auto%20Layout%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-digg fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f&name=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20Xcode%208%20Auto%20Layout%20%e6%96%b0%e7%89%b9%e6%80%a7&description=%23%23%23%23%e7%9b%ae%e5%bd%95%0a%201.Incrementally%20Adopting%20Auto%20Layout%202.Design%20and%20Runtime%20Constraints%203.NSGridView%204.Layout%20Feedback%20Loop%20Debugging%20%20%23%23%23%23%e4%b8%80.Incrementally%20Adopting%20Auto%20Layout%20Incrementally%20Adopting%20Auto%20Layout%e6%98%af%e4%bb%80%e4%b9%88%e6%84%8f%e6%80%9d%e5%91%a2%ef%bc%9f%e5%9c%a8%e6%88%91%e4%bb%acIB%e9%87%8c%e9%9d%a2%e5%b8%83%e5%b1%80%e6%88%91%e4%bb%ac%e7%9a%84View%e7%9a%84%e6%97%b6%e5%80%99%ef%bc%8c%e6%88%91%e4%bb%ac%e5%b9%b6%e4%b8%8d%e9%9c%80%e8%a6%81%e4%b8%80%e6%ac%a1%e6%80%a7%e5%b0%b1%e6%b7%bb%e5%8a%a0%e5%a5%bd%e6%89%80%e6%9c%89%e7%9a%84constraints%e3%80%82%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e4%b8%80%e6%ad%a5%e6%ad%a5%e7%9a%84%e5%a2%9e%e5%8a%a0constraints%ef%bc%8c%e7%ae%80%e5%8c%96%e6%88%91%e4%bb%ac%e7%9a%84%e6%ad%a5%e9%aa%a4%ef%bc%8c%e8%80%8c%e4%b8%94%e8%83%bd%e8%ae%a9%e6%88%91%e4%bb%ac%e7%9a%84%e8%ae%be%e7%bd%ae%e8%b5%b7%e6%9d%a5%e6%9b%b4%e5%8a%a0%e7%81%b5%e6%b4%bb%e3%80%82%0a%e5%86%8d%e8%b0%88%e6%96%b0%e7%89%b9%e6%80%a7%e4%b9%8b%e5%89%8d%ef%bc%8c%e5%85%88%e4%bb%8b%e7%bb%8d%e4%b8%80%e4%b8%8b%e8%bf%99%e4%b8%aa%e7%89%b9%e6%80%a7%e5%af%b9%e5%ba%94%e7%9a%84%e8%83%8c%e6%99%af%e6%9d%a5%e6%ba%90%e3%80%82%0a%e6%9c%89%e8%bf%99%e6%a0%b7%e4%b8%80%e7%a7%8d%e5%9c%ba%e6%99%af%ef%bc%8c%e8%af%95%e6%83%b3%ef%bc%8c%e6%88%91%e4%bb%ac%e6%8a%8a%e4%b8%80%e4%b8%aaview%e6%94%be%e5%9c%a8%e7%88%b6view%e4%b8%8a%ef%bc%8c%e8%bf%99%e4%b8%aa%e6%97%b6%e5%80%99%e5%b9%b6%e6%b2%a1%e6%9c%89%e8%ae%be%e7%bd%aeconstraints%ef%bc%8c%e5%bd%93%e6%88%91%e4%bb%ac%e8%bf%90%e8%a1%8c%e5%ae%8c%e7%a8%8b%e5%ba%8f%ef%bc%8c%e5%b0%b1%e4%bc%9a%e5%87%ba%e7%8e%b0%e4%b8%8b%e5%9b%be%e7%9a%84%e6%a0%b7%e5%ad%90%e3%80%82%0a%e7%9c%8b%e4%b8%8a%e5%8e%bb%e4%b8%80%e5%88%87%e9%83%bd%e8%bf%98%e6%ad%a3%e5%b8%b8%e3%80%82%e4%bd%86%e6%98%af%e4%b8%80%e6%97%a6%e5%bd%93%e6%88%91%e4%bb%ac%e6%8a%8a%e8%ae%be%e5%a4%87%e6%97%8b%e8%bd%ac90%c2%b0%e4%bb%a5%e5%90%8e%ef%bc%8c%e5%b0%b1%e4%bc%9a%e5%87%ba%e7%8e%b0%e4%b8%8b%e5%9b%be%e7%9a%84%e6%a0%b7%e5%ad%90%e3%80%82%0a%e8%bf%99%e4%b8%aa%e6%97%b6%e5%80%99%e5%8f%af%e4%bb%a5%e5%8f%91%e7%8e%b0%ef%bc%8c%e8%bf%99%e4%b8%aaView%e7%9a%84%e9%95%bf%ef%bc%8c%e5%ae%bd%ef%bc%8c%e4%bb%a5%e5%8f%8atop%e5%92%8cleft%e7%9a%84%e8%be%b9%e8%b7%9d%e9%83%bd%e6%b2%a1%e6%9c%89%e5%8f%91%e7%94%9f%e5%8f%98%e5%8c%96%e3%80%82%e8%bf%99%e6%97%b6%e6%88%91%e4%bb%ac%e5%b9%b6%e6%b2%a1%e6%9c%89%e8%ae%be%e7%bd%aeconstraints%ef%bc%8c%e8%bf%99%e6%98%af%e6%80%8e%e4%b9%88%e5%81%9a%e5%88%b0%e7%9a%84%e5%91%a2%ef%bc%9f%0a%e5%9c%a8%e7%a8%8b%e5%ba%8f%e7%9a%84%e7%bc%96%e8%af%91%e6%9c%9f%ef%bc%8cAuto%20Layout%e7%9a%84%e5%bc%95%e6%93%8e%e4%bc%9a%e8%87%aa%e5%8a%a8%e9%9a%90%e5%bc%8f%e7%9a%84%e7%bb%99View%e5%8a%a0%e4%b8%8a%e4%b8%80%e4%ba%9bconstraints%e7%ba%a6%e6%9d%9f%ef%bc%8c%e4%bb%a5%e4%bf%9d%e8%af%81View%e7%9a%84%e5%a4%a7%e5%b0%8f%e4%b8%8d%e4%bc%9a%e5%8f%91%e7%94%9f%e5%8f%98%e5%8c%96%e3%80%82%e8%bf%99%e4%b8%aa%e4%be%8b%e5%ad%90%e4%b8%ad%ef%bc%8cView%e8%a2%ab%e5%8a%a0%e4%b8%8a%e4%ba%86top%ef%bc%8cleft%ef%bc%8cwidth%ef%bc%8cheight%e8%bf%994%e4%b8%aa%e7%ba%a6%e6%9d%9f%e3%80%82%0a%e5%a6%82%e6%9e%9c%e6%88%91%e4%bb%ac%e9%9c%80%e8%a6%81%e6%9b%b4%e5%8a%a0%e5%8a%a8%e6%80%81%e7%9a%84resize%e7%9a%84%e8%a1%8c%e4%b8%ba%ef%bc%8c%e5%b0%b1%e9%9c%80%e8%a6%81%e6%88%91%e4%bb%ac%e5%9c%a8IB%e9%87%8c%e9%9d%a2%e8%87%aa%e5%ae%9a%e4%b9%89%e7%ba%a6%e6%9d%9f%e4%ba%86%e3%80%82%e7%8e%b0%e5%9c%a8%e9%97%ae%e9%a2%98%e5%b0%b1%e6%9d%a5%e4%ba%86%ef%bc%8c%e6%9c%89%e6%b2%a1%e6%9c%89%e6%9b%b4%e5%a5%bd%e7%9a%84%e6%96%b9%e5%bc%8f%e6%9d%a5%e5%81%9a%e8%bf%99%e4%bb%b6%e4%ba%8b%e6%83%85%ef%bc%9f%e6%9c%80%e5%a5%bd%e6%98%af%e8%83%bd%e6%9c%89%e4%b8%80%e7%a7%8d%e4%b8%8d%e7%94%a8%e7%ba%a6%e6%9d%9f%e7%9a%84%e6%96%b9%e6%b3%95%ef%bc%8c%e4%b9%9f%e8%83%bd%e8%be%be%e5%88%b0%e7%ae%80%e5%8d%95%e7%9a%84resize%e7%9a%84%e6%95%88%e6%9e%9c%e3%80%82%0a%e7%8e%b0%e5%9c%a8%e8%bf%99%e4%b8%aa%e9%97%ae%e9%a2%98%e6%9c%89%e4%ba%86%e8%a7%a3%e5%86%b3%e5%8a%9e%e6%b3%95%e3%80%82%e5%9c%a8Xcode8%e4%b8%ad%ef%bc%8c%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e7%bb%99View%e6%8c%87%e5%ae%9aautoresizing%20masks%ef%bc%8c%e8%80%8c%e4%b8%8d%e7%94%a8%e5%8e%bb%e8%ae%be%e7%bd%aeconstraints%e3%80%82%e8%bf%99%e5%b0%b1%e6%84%8f%e5%91%b3%e7%9d%80%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e4%b8%8d%e7%94%a8%e7%ba%a6%e6%9d%9f%ef%bc%8c%e6%88%91%e4%bb%ac%e4%b9%9f%e8%83%bd%e5%81%9a%e5%88%b0%e7%ae%80%e5%8d%95%e7%9a%84resize%e7%9a%84%e6%95%88%e6%9e%9c%e3%80%82%0a%e5%9c%a8Autolayout%e6%97%b6%e4%bb%a3%e4%b9%8b%e5%89%8d%ef%bc%8c%e5%8f%af%e8%83%bd%e4%bc%9a%e6%9c%89%e4%ba%ba%e8%ae%a4%e5%87%ba%e8%bf%99%e7%a7%8dUI%e6%96%b9%e5%bc%8f%e3%80%82%e8%bf%99%e6%98%af%e4%b8%80%e7%a7%8dSprings%20%26amp%3b%20Struts%e7%9a%84UI%e3%80%82%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e8%ae%be%e5%ae%9a%e8%be%b9%e7%bc%98%e7%ba%a6%e6%9d%9f%28%e6%b3%a8%ef%bc%9a%e8%bf%99%e9%87%8c%e7%9a%84%e7%ba%a6%e6%9d%9f%e5%b9%b6%e4%b8%8d%e6%98%af%e6%8c%87%e7%9a%84%e6%98%afAutolayout%e9%87%8c%e9%9d%a2%e7%9a%84constraints%ef%bc%8c%e6%98%afautoresizing%20masks%e9%87%8c%e9%9d%a2%e7%9a%84%e8%a7%84%e5%88%99%29%ef%bc%8c%e6%97%a0%e8%ae%baView%e7%9a%84%e9%95%bf%e5%ae%bd%e5%a6%82%e4%bd%95%e5%8f%98%e5%8c%96%ef%bc%8c%e8%bf%99%e4%ba%9bView%e9%83%bd%e4%bc%9a%e8%b7%9f%e9%9a%8f%e7%9d%80%e8%ae%be%e7%bd%ae%e4%ba%86%e7%ba%a6%e6%9d%9f%e7%9a%84view%e4%b8%80%e8%b5%b7%e5%8f%98%e5%8c%96%e3%80%82%0a%e4%b8%8a%e8%bf%b0%e7%9a%84%e4%be%8b%e5%ad%90%e4%b8%ad%ef%bc%8cXcode%208%20%e4%b8%ad%e5%9c%a8%e6%b2%a1%e6%9c%89%e5%8a%a0%e5%a6%82%e4%bd%95constraint%e5%b0%b1%e5%8f%af%e4%bb%a5%e5%81%9a%e5%88%b0%e6%97%8b%e8%bd%ac%e5%b1%8f%e5%b9%95%e4%b9%8b%e5%90%8e%ef%bc%8cView%e7%9a%84%e8%be%b9%e8%b7%9d%e5%b9%b6%e6%b2%a1%e6%9c%89%e5%8f%91%e7%94%9f%e5%8f%98%e5%8c%96%e3%80%82%e8%bf%99%e6%98%af%e6%80%8e%e4%b9%88%e5%81%9a%e5%88%b0%e7%9a%84%e5%91%a2%ef%bc%9f%e4%ba%8b%e5%ae%9e%e4%b8%8a%ef%bc%8cXcode%208%e7%9a%84%e5%81%9a%e6%b3%95%e6%98%af%e5%85%88%e5%8f%96%e5%87%baautoresizing%20masks%ef%bc%8c%e7%84%b6%e5%90%8e%e6%8a%8a%e5%ae%83%e8%bd%ac%e6%8d%a2%e6%88%90%e5%af%b9%e5%ba%94%e7%9a%84constraints%ef%bc%8c%e8%bf%99%e4%b8%aa%e8%bd%ac%e6%8d%a2%e7%9a%84%e6%97%b6%e6%9c%ba%e5%8f%91%e7%94%9f%e5%9c%a8Runtime%e6%9c%9f%e9%97%b4%e3%80%82%e7%94%9f%e6%88%90%e5%af%b9%e5%ba%94%e7%9a%84constraints%e6%98%af%e5%8f%91%e7%94%9f%e5%9c%a8%e8%bf%90%e8%a1%8c%e6%97%b6%ef%bc%8c%e8%80%8c%e4%b8%8d%e6%98%af%e7%bc%96%e8%af%91%e6%97%b6%e7%9a%84%e5%8e%9f%e5%9b%a0%e6%98%af%e5%8f%af%e4%bb%a5%e7%bb%99%e6%88%91%e4%bb%ac%e5%bc%80%e5%8f%91%e8%80%85%e6%9b%b4%e5%8a%a0%e4%be%bf%e5%88%a9%e7%9a%84%e6%96%b9%e5%bc%8f%e4%b8%baView%e6%b7%bb%e5%8a%a0%e6%9b%b4%e5%8a%a0%e7%bb%86%e8%87%b4%e7%9a%84%e7%ba%a6%e6%9d%9f%e3%80%82%0a%e5%9c%a8View%e4%b8%8a%ef%bc%8c%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e8%ae%be%e7%bd%aetranslatesAutoresizingMaskIntoConstraints%e5%b1%9e%e6%80%a7%e3%80%82%0atranslatesAutoresizingMaskIntoConstraints%20%3d%3d%20true%20%e5%81%87%e8%ae%be%e5%a6%82%e6%9e%9cView%e5%b7%b2%e7%bb%8f%e5%9c%a8Interface%20Builder%e9%87%8c%e9%9d%a2%e5%8a%a0%e8%bf%87constraints%ef%bc%8c%e2%80%9cShow%20the%20Size%20inspector%e2%80%9d%e9%9d%a2%e6%9d%bf%e4%be%9d%e6%97%a7%e4%bc%9a%e5%92%8c%e4%bb%a5%e5%89%8d%e4%b8%80%e6%a0%b7%e3%80%82%e7%82%b9%e5%87%bbView%ef%bc%8c%e6%9f%a5%e7%9c%8b%e7%bb%99%e5%ae%83%e5%8a%a0%e7%9a%84%e6%89%80%e6%9c%89%e7%9a%84constraints%ef%bc%8c%e8%bf%99%e4%b8%aa%e6%97%b6%e5%80%99Autoresizing%20masks%e5%b0%b1%e8%a2%ab%e5%bf%bd%e7%95%a5%e4%ba%86%ef%bc%8c%e8%80%8c%e4%b8%94translatesAutoresizingMask%e7%9a%84%e5%b1%9e%e6%80%a7%e4%b9%9f%e4%bc%9a%e5%8f%98%e6%88%90false%e3%80%82%e5%a6%82%e4%b8%8b%e5%9b%be%ef%bc%8c%e6%88%91%e4%bb%ac%e8%bf%99%e4%b8%aa%e6%97%b6%e5%80%99%e5%9c%a8%e2%80%9cShow%20the%20Size%20inspector%e2%80%9d%e9%9d%a2%e6%9d%bf%e4%b8%8a%e9%9d%a2%e5%b0%b1%e5%b7%b2%e7%bb%8f%e7%9c%8b%e4%b8%8d%e5%88%b0AutoresizingMask%e7%9a%84%e8%ae%be%e7%bd%ae%e9%9d%a2%e6%9d%bf%e4%ba%86%e3%80%82%0a%e4%b8%8a%e5%9b%be%e5%b0%b1%e6%98%af%e5%9c%a8Autolayout%e6%97%b6%e4%bb%a3%e4%b9%8b%e5%89%8d%ef%bc%8c%e6%88%91%e4%bb%ac%e4%b8%80%e7%9b%b4%e4%bd%bf%e7%94%a8%e7%9a%84%e6%98%afautoresizing%20masks%ef%bc%8c%e4%bd%86%e6%98%afAutolayout%e6%97%b6%e4%bb%a3%e6%9d%a5%e4%b8%b4%e4%b9%8b%e5%90%8e%ef%bc%8c%e4%b8%80%e6%97%a6%e5%8b%be%e9%80%89%e4%b8%8a%e4%ba%86%e8%bf%99%e4%b8%aaAutolayout%ef%bc%8c%e4%b9%8b%e5%89%8d%e7%9a%84AutoresizingMask%e4%b9%9f%e5%b0%b1%e5%a4%b1%e6%95%88%e4%ba%86%e3%80%82%0a%e5%9b%9e%e5%88%b0%e6%88%91%e4%bb%ac%e6%9c%80%e5%8e%9f%e5%a7%8b%e7%9a%84%e9%97%ae%e9%a2%98%e4%b8%8a%e6%9d%a5%ef%bc%8cXcode%208%20%e7%8e%b0%e5%9c%a8%e9%92%88%e5%af%b9View%e5%8f%af%e4%bb%a5%e6%94%af%e6%8c%81%e5%a2%9e%e9%87%8f%e7%9a%84%e9%80%82%e7%94%a8Autolayout%e3%80%82%e8%bf%99%e5%b0%b1%e6%84%8f%e5%91%b3%e7%9d%80%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e4%bb%8eAutoresizingMask%e5%bc%80%e5%a7%8b%ef%bc%8c%e5%85%88%e5%81%9a%e7%ae%80%e5%8d%95%e7%9a%84resize%e7%9a%84%e5%b7%a5%e4%bd%9c%ef%bc%8c%e7%84%b6%e5%90%8e%e5%a6%82%e6%9e%9c%e6%9c%89%e6%9b%b4%e5%8a%a0%e5%a4%8d%e6%9d%82%e7%9a%84%e9%9c%80%e6%b1%82%ef%bc%8c%e6%88%91%e4%bb%ac%e5%86%8d%e5%8a%a0%e4%b8%8a%e9%80%82%e5%bd%93%e7%9a%84%e7%ba%a6%e6%9d%9fconstraints%e6%9d%a5%e8%bf%9b%e8%a1%8c%e9%80%82%e9%85%8d%e3%80%82%e7%ae%80%e8%80%8c%e6%a6%82%e4%b9%8b%ef%bc%8cXcode%208%20Autolayout%20%e2%89%88%20AutoresizingMask%20%2b%20Autolayout%20%e3%80%82%0a%e6%8e%a5%e4%b8%8b%e6%9d%a5%e7%94%a8%e4%b8%80%e4%b8%aademo%e7%9a%84%e4%be%8b%e5%ad%90%e6%9d%a5%e8%af%b4%e6%98%8e%e4%b8%80%e4%b8%8bXcode%208%20Autolayout%e6%96%b0%e7%89%b9%e6%80%a7%e3%80%82"><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_xcode8autolayout_features%2f&t=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20Xcode%208%20Auto%20Layout%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu class=icon href=# onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden=true></i>Menu</a>
<a id=toc class=icon href=# onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden=true></i>TOC</a>
<a id=share class=icon href=# onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden=true></i>share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i>Top</a></div></div></div><footer id=footer><div class=footer-left><p class=copyright style=float:left;margin-bottom:0><a href=https://github.com/halfrost/Halfrost-Field class=github-repo style=height:18px><span class=gadget-github></span>Star</a>
Copyright &copy;halfrost 2016 - 2021
<a href=http://www.miit.gov.cn/>鄂ICP备16014744号</a></p><br><p class="copyright statistics" style=margin-bottom:20px><span id=busuanzi_container_site_pv>Cumulative Page Views <span id=busuanzi_value_site_pv></span>| Unique Visitors <span id=busuanzi_value_site_uv></span></span></p></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script><script src=/main.min.f870a4d110314b9e50e65f8ac982dc1c9c376c8f1a5083d39c62cfc49073f011.js></script><script async src=/prism.js></script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]},svg:{fontCache:'global'}};</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></html>