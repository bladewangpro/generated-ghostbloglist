<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=theme-color content="#FFFFFF"><meta http-equiv=x-ua-compatible content="IE=edge"><title>函数响应式编程(FRP)从入门到"放弃"——图解RACSignal篇 | prometheus</title><meta name=description content="Explore in every moment of the hard thinking"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="函数响应式编程(FRP)从入门到&#34;放弃&#34;——图解RACSignal篇"><meta property="og:description" content="目录  1.RACSignal的创建 2.RACSignal的订阅 3.RACSignal各类操作  ####一.RACSignal的创建
1.创建单元信号
 NSError *errorObject = [NSError errorWithDomain:@&#34;Something wrong&#34; code:500 userInfo:nil]; //基本的4种创建方法 RACSignal *signal1 = [RACSignal return:@&#34;Some Value&#34;]; RACSignal *signal2 = [RACSignal error:errorObject]; RACSignal *signal3 = [RACSignal empty]; RACSignal *signal4 = [RACSignal never]; 2.创建动态信号
RACSignal *signal5 = [RACSignal createSignal: ^RACDisposable *(id<RACSubscriber> subscriber) { [subscriber sendNext:@1]; [subscriber sendNext:@2]; [subscriber sendError:errorObject]; [subscriber sendCompleted]; return [RACDisposable disposableWithBlock:^{ }]; }]; 3.通过Cocoa桥接方式获得一个信号
 RACSignal *signal6 = [view rac_signalForSelector:@selector(setFrame:)]; RACSignal *signal7 = [view rac_signalForControlEvents:UIControlEventTouchUpInside]; RACSignal *signal8 = [view rac_willDeallocSignal]; //KVO的原理实现 RACSignal *signal9 = RACObserve(view, backgroundColor); 4."><meta property="og:type" content="article"><meta property="og:url" content="https://new.halfrost.com/ios_rac_racsignal/"><meta property="article:published_time" content="2016-07-24T10:54:00+00:00"><meta property="article:modified_time" content="2016-07-24T10:54:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="函数响应式编程(FRP)从入门到&#34;放弃&#34;——图解RACSignal篇"><meta name=twitter:description content="目录  1.RACSignal的创建 2.RACSignal的订阅 3.RACSignal各类操作  ####一.RACSignal的创建
1.创建单元信号
 NSError *errorObject = [NSError errorWithDomain:@&#34;Something wrong&#34; code:500 userInfo:nil]; //基本的4种创建方法 RACSignal *signal1 = [RACSignal return:@&#34;Some Value&#34;]; RACSignal *signal2 = [RACSignal error:errorObject]; RACSignal *signal3 = [RACSignal empty]; RACSignal *signal4 = [RACSignal never]; 2.创建动态信号
RACSignal *signal5 = [RACSignal createSignal: ^RACDisposable *(id<RACSubscriber> subscriber) { [subscriber sendNext:@1]; [subscriber sendNext:@2]; [subscriber sendError:errorObject]; [subscriber sendCompleted]; return [RACDisposable disposableWithBlock:^{ }]; }]; 3.通过Cocoa桥接方式获得一个信号
 RACSignal *signal6 = [view rac_signalForSelector:@selector(setFrame:)]; RACSignal *signal7 = [view rac_signalForControlEvents:UIControlEventTouchUpInside]; RACSignal *signal8 = [view rac_willDeallocSignal]; //KVO的原理实现 RACSignal *signal9 = RACObserve(view, backgroundColor); 4."><link rel=stylesheet href=/css/style-white.min.css><link rel=manifest href=/manifest.json><link rel=stylesheet href=/prism.css><link href=/images/apple-touch-icon-60x60.png rel=apple-touch-icon sizes=60x60><link href=/images/apple-touch-icon-76x76.png rel=apple-touch-icon sizes=76x76><link href=/images/apple-touch-icon-120x120.png rel=apple-touch-icon sizes=120x120><link href=/images/apple-touch-icon-152x152.png rel=apple-touch-icon sizes=152x152><link href=/images/apple-touch-icon-180x180.png rel=apple-touch-icon sizes=180x180><link href=/images/apple-touch-icon-512x512.png rel=apple-touch-icon sizes=512x512><link href=/images/apple-touch-icon-1024x1024.png rel=apple-touch-icon sizes=1024x1024><script async>if('serviceWorker'in navigator){navigator.serviceWorker.register("\/serviceworker-v1.min.a64912b78d282eab1ad3715a0943da21616e5f326f8afea27034784ad445043b.js").then(function(){if(navigator.serviceWorker.controller){console.log('Assets cached by the controlling service worker.');}else{console.log('Please reload this page to allow the service worker to handle network operations.');}}).catch(function(error){console.log('ERROR: '+error);});}else{console.log('Service workers are not supported in the current browser.');}</script><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://new.halfrost.com/images/favicon.ico><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-82753806-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="single-max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a><a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a><a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast');" style=display:none><i class="fas fa-chevron-up fa-lg"></i></a><span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=https://books.halfrost.com/>Books</a></li><li><a href=https://github.com/halfrost/Halfrost-Field>Github</a></li><li><a href=https://halfrost.me/>About</a></li><li><a href=/index.xml>RSS</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://new.halfrost.com/ios_ib_designable_ibinspectable/><i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li><li><a class=icon href=https://new.halfrost.com/ios_jenkins/><i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li><li><a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');"><i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li><li><a class=icon href=#><i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f"><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f&text=%e5%87%bd%e6%95%b0%e5%93%8d%e5%ba%94%e5%bc%8f%e7%bc%96%e7%a8%8b%28FRP%29%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%22%e6%94%be%e5%bc%83%22%e2%80%94%e2%80%94%e5%9b%be%e8%a7%a3RACSignal%e7%af%87"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f&title=%e5%87%bd%e6%95%b0%e5%93%8d%e5%ba%94%e5%bc%8f%e7%bc%96%e7%a8%8b%28FRP%29%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%22%e6%94%be%e5%bc%83%22%e2%80%94%e2%80%94%e5%9b%be%e8%a7%a3RACSignal%e7%af%87"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f&is_video=false&description=%e5%87%bd%e6%95%b0%e5%93%8d%e5%ba%94%e5%bc%8f%e7%bc%96%e7%a8%8b%28FRP%29%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%22%e6%94%be%e5%bc%83%22%e2%80%94%e2%80%94%e5%9b%be%e8%a7%a3RACSignal%e7%af%87"><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=%e5%87%bd%e6%95%b0%e5%93%8d%e5%ba%94%e5%bc%8f%e7%bc%96%e7%a8%8b%28FRP%29%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%22%e6%94%be%e5%bc%83%22%e2%80%94%e2%80%94%e5%9b%be%e8%a7%a3RACSignal%e7%af%87&body=Check out this article: https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f"><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f&title=%e5%87%bd%e6%95%b0%e5%93%8d%e5%ba%94%e5%bc%8f%e7%bc%96%e7%a8%8b%28FRP%29%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%22%e6%94%be%e5%bc%83%22%e2%80%94%e2%80%94%e5%9b%be%e8%a7%a3RACSignal%e7%af%87"><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f&title=%e5%87%bd%e6%95%b0%e5%93%8d%e5%ba%94%e5%bc%8f%e7%bc%96%e7%a8%8b%28FRP%29%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%22%e6%94%be%e5%bc%83%22%e2%80%94%e2%80%94%e5%9b%be%e8%a7%a3RACSignal%e7%af%87"><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f&title=%e5%87%bd%e6%95%b0%e5%93%8d%e5%ba%94%e5%bc%8f%e7%bc%96%e7%a8%8b%28FRP%29%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%22%e6%94%be%e5%bc%83%22%e2%80%94%e2%80%94%e5%9b%be%e8%a7%a3RACSignal%e7%af%87"><i class="fab fa-stumbleupon" aria-hidden=true></i></a></li><li><a class=icon href="http://digg.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f&title=%e5%87%bd%e6%95%b0%e5%93%8d%e5%ba%94%e5%bc%8f%e7%bc%96%e7%a8%8b%28FRP%29%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%22%e6%94%be%e5%bc%83%22%e2%80%94%e2%80%94%e5%9b%be%e8%a7%a3RACSignal%e7%af%87"><i class="fab fa-digg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f&name=%e5%87%bd%e6%95%b0%e5%93%8d%e5%ba%94%e5%bc%8f%e7%bc%96%e7%a8%8b%28FRP%29%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%22%e6%94%be%e5%bc%83%22%e2%80%94%e2%80%94%e5%9b%be%e8%a7%a3RACSignal%e7%af%87&description=%e7%9b%ae%e5%bd%95%20%201.RACSignal%e7%9a%84%e5%88%9b%e5%bb%ba%202.RACSignal%e7%9a%84%e8%ae%a2%e9%98%85%203.RACSignal%e5%90%84%e7%b1%bb%e6%93%8d%e4%bd%9c%20%20%23%23%23%23%e4%b8%80.RACSignal%e7%9a%84%e5%88%9b%e5%bb%ba%0a1.%e5%88%9b%e5%bb%ba%e5%8d%95%e5%85%83%e4%bf%a1%e5%8f%b7%0a%20NSError%20%2aerrorObject%20%3d%20%5bNSError%20errorWithDomain%3a%40%26quot%3bSomething%20wrong%26quot%3b%20code%3a500%20userInfo%3anil%5d%3b%20%2f%2f%e5%9f%ba%e6%9c%ac%e7%9a%844%e7%a7%8d%e5%88%9b%e5%bb%ba%e6%96%b9%e6%b3%95%20RACSignal%20%2asignal1%20%3d%20%5bRACSignal%20return%3a%40%26quot%3bSome%20Value%26quot%3b%5d%3b%20RACSignal%20%2asignal2%20%3d%20%5bRACSignal%20error%3aerrorObject%5d%3b%20RACSignal%20%2asignal3%20%3d%20%5bRACSignal%20empty%5d%3b%20RACSignal%20%2asignal4%20%3d%20%5bRACSignal%20never%5d%3b%202.%e5%88%9b%e5%bb%ba%e5%8a%a8%e6%80%81%e4%bf%a1%e5%8f%b7%0aRACSignal%20%2asignal5%20%3d%20%5bRACSignal%20createSignal%3a%20%5eRACDisposable%20%2a%28id%26lt%3bRACSubscriber%26gt%3b%20subscriber%29%20%7b%20%5bsubscriber%20sendNext%3a%401%5d%3b%20%5bsubscriber%20sendNext%3a%402%5d%3b%20%5bsubscriber%20sendError%3aerrorObject%5d%3b%20%5bsubscriber%20sendCompleted%5d%3b%20return%20%5bRACDisposable%20disposableWithBlock%3a%5e%7b%20%7d%5d%3b%20%7d%5d%3b%203.%e9%80%9a%e8%bf%87Cocoa%e6%a1%a5%e6%8e%a5%e6%96%b9%e5%bc%8f%e8%8e%b7%e5%be%97%e4%b8%80%e4%b8%aa%e4%bf%a1%e5%8f%b7%0a%20RACSignal%20%2asignal6%20%3d%20%5bview%20rac_signalForSelector%3a%40selector%28setFrame%3a%29%5d%3b%20RACSignal%20%2asignal7%20%3d%20%5bview%20rac_signalForControlEvents%3aUIControlEventTouchUpInside%5d%3b%20RACSignal%20%2asignal8%20%3d%20%5bview%20rac_willDeallocSignal%5d%3b%20%2f%2fKVO%e7%9a%84%e5%8e%9f%e7%90%86%e5%ae%9e%e7%8e%b0%20RACSignal%20%2asignal9%20%3d%20RACObserve%28view%2c%20backgroundColor%29%3b%204."><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f&t=%e5%87%bd%e6%95%b0%e5%93%8d%e5%ba%94%e5%bc%8f%e7%bc%96%e7%a8%8b%28FRP%29%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%22%e6%94%be%e5%bc%83%22%e2%80%94%e2%80%94%e5%9b%be%e8%a7%a3RACSignal%e7%af%87"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#目录>目录</a></li></ul></li></ul></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">函数响应式编程(FRP)从入门到"放弃"——图解RACSignal篇</h1><div class=meta><div class=postdate><time datetime="2016-07-24 10:54:00 +0000 UTC" itemprop=datePublished>Jul 24</time></div><div class=article-category><i class="fas fa-archive"></i><a class=category-link href=/categories/ios>iOS</a>
,
<a class=category-link href=/categories/rac>RAC</a>
,
<a class=category-link href=/categories/reactivecocoa>ReactiveCocoa</a>
,
<a class=category-link href=/categories/frp>FRP</a></div><div class=article-tag><i class="fas fa-tag"></i><a class=tag-link href=/tags/ios rel=tag>iOS</a>
,
<a class=tag-link href=/tags/rac rel=tag>RAC</a>
,
<a class=tag-link href=/tags/reactivecocoa rel=tag>ReactiveCocoa</a>
,
<a class=tag-link href=/tags/frp rel=tag>FRP</a></div></div></header><div class=content itemprop=articleBody><h4 id=目录>目录</h4><ul><li>1.RACSignal的创建</li><li>2.RACSignal的订阅</li><li>3.RACSignal各类操作</li></ul><p>####一.RACSignal的创建</p><p>1.创建单元信号</p><pre><code>
    NSError *errorObject = [NSError errorWithDomain:@&quot;Something wrong&quot; code:500 userInfo:nil];  

    //基本的4种创建方法
    RACSignal *signal1 = [RACSignal return:@&quot;Some Value&quot;];
    RACSignal *signal2 = [RACSignal error:errorObject];
    RACSignal *signal3 = [RACSignal empty];
    RACSignal *signal4 = [RACSignal never];
</code></pre><p>2.创建动态信号</p><pre><code class=language-   data-lang=  >    RACSignal *signal5 = [RACSignal createSignal:
                          ^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) {
        [subscriber sendNext:@1];
        [subscriber sendNext:@2];
        [subscriber sendError:errorObject];
        [subscriber sendCompleted];
        return [RACDisposable disposableWithBlock:^{
        }];
    }];
</code></pre><p>3.通过Cocoa桥接方式获得一个信号</p><pre><code>
    RACSignal *signal6 = [view rac_signalForSelector:@selector(setFrame:)];
    RACSignal *signal7 = [view rac_signalForControlEvents:UIControlEventTouchUpInside];
    RACSignal *signal8 = [view rac_willDeallocSignal];

    //KVO的原理实现
    RACSignal *signal9 = RACObserve(view, backgroundColor);
</code></pre><p>4.通过信号变换获得</p><pre><code>RACSignal *signal10 = [signal1 map:^id(NSString *value) {
        return [value substringFromIndex:1];
    }];
</code></pre><p>5.通过序列转换获得</p><pre><code>
RACSequence *sequence = @[@&quot;A&quot;, @&quot;B&quot;, @&quot;C&quot;].rac_sequence;

//这里转换之后获得的signal11是一个很快把信号值吐出的一个信号
RACSignal *signal11 = sequence.signal;
</code></pre><p>####二.RACSignal的订阅</p><p>1.订阅方法</p><pre><code>
    [signal11 subscribeNext:^(id x) {
        NSLog(@&quot;next value is %@&quot;, x);
    } error:^(NSError *error) {
        NSLog(@&quot;Ops! Get some error: %@&quot;, error);
    } completed:^{
        NSLog(@&quot;It finished success&quot;);
    }];
</code></pre><p>2.绑定方法</p><pre><code>//这里相当于KVO，signal每次产生一个color，都是对backgroundColor进行赋值
RAC(view, backgroundColor) = signal10;

</code></pre><p>3.Cocoa桥接</p><pre><code>
[view rac_liftSelector:@selector(convertPoint:toView:)
               withSignals:signal1, signal2, nil];

[view rac_liftSelector:@selector(convertRect:toView:)
      withSignalsFromArray:@[signal3, signal4]];

[view rac_liftSelector:@selector(convertRect:toLayer:)
     withSignalOfArguments:signal5];
</code></pre><p>值得说明的是:如果selector有返回值，那么调用rac_liftSelector会得到一个新的信号。新的信号是调用selector之后的返回值。</p><p>4.订阅过程的执行过程</p><pre><code>
    RACSignal *signal = [RACSignal createSignal:
                         ^RACDisposable *(id&lt;RACSubscriber&gt; subscriber)
    {
1        [subscriber sendNext:@1];
2        [subscriber sendNext:@2];
3        [subscriber sendCompleted];
4        return [RACDisposable disposableWithBlock:^{
5            NSLog(@&quot;dispose&quot;);
        }];
    }];
    
    RACDisposable *disposable = [signal subscribeNext:^(id x) {
6        NSLog(@&quot;next value is %@&quot;, x);
    } error:^(NSError *error) {
7        NSLog(@&quot;Ops! Get some error: %@&quot;, error);
    } completed:^{
8        NSLog(@&quot;It finished success&quot;);
    }];
    
9    [disposable dispose];
</code></pre><p>如果一个signal信号被订阅，那么就会先进入到信号创建的block中，当运行到sendNext，sendCompleted，sendError，接下来就会走到订阅者的对应的subscribeNext，completed，error对应的block块中。主要顺序还是在signal的创建的block中进行执行，只是到了特性的sendNext，sendCompleted，sendError，才会跳到订阅者的对应的block中去执行。订阅者的相应的block执行完了之后，再次回到signal信号的block中继续往下执行。最后signal信号执行完之后会执行disposable。当signal信号发现了disposable，会立即调用创建signal信号里面RACDisposable的block块。</p><p>执行过程：1-6-2-6-3-8-4-5-9</p><p>RACStream 和 RACSignal的区别 在于 返回数据还是返回事件。
事件总共3种 ：值，错误，结束。</p><p>值可能是OC对象，RACTuple，甚至是一个RACSignal。</p><p>先来说一下RACTuple，RACTuple也是RAC定义的一种数据类型，可以说是NSArray的简化版</p><pre><code>
    RACTuple *tuple = RACTuplePack(@1, @&quot;haha&quot;);
    
    id first = tuple.first;
    id second = tuple.second;
    id last = tuple.last;
    id index1 = tuple[1];
    
    RACTupleUnpack(NSNumber *num, NSString *str) = tuple;
</code></pre><p>这里有两个宏，RACTuplePack是可以把后面2个对象打包成一个RACTuple。RACTuple也实现了下标访问。使用的过程中并不是id类型，所以需要强转一下类型。类似于这种用法，RACTupleUnpack(NSNumber *num, NSString *str)。</p><p>####三.RACSignal的各类操作</p><p>先来约定好图例</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-31823227ffed454f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><p>####1.单个信号的变换</p><ul><li>1.对值的操作</li><li>2.对数量的操作</li><li>3.对维度的操作</li><li>4.对时间间隔的操作</li></ul><p><img src=http://upload-images.jianshu.io/upload_images/1194012-493f98c66bfdf7cb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><p>1.对值的操作</p><ul><li>Map操作</li><li>MapReplace操作</li><li>ReduceEach操作</li><li>not操作</li><li>and操作</li><li>or操作</li><li>reduceApply操作</li><li>materialize操作</li><li>dematerialize操作</li></ul><p>(1)Map操作</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-9558edfc6d89d701.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
RACSignal *signalA = @[@1, @2, @3, @4].rac_sequence.signal;
    
RACSignal *SignalB = [signalA map:^id(NSNumber *value) {
        return @(value.integerValue * 2);
    }];
</code></pre><p>如果Map过程中遇到了Error，Error并不会进行Map，而是直接Error返回</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-75fd1b2e7ca6bae4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><p>(2)MapReplace操作</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-adcd0aab1318ee97.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
RACSignal *signalA = @[@1, @2, @3, @4].rac_sequence.signal;
    
RACSignal *signalB = [signalA map:^id(id value) {
        return @8;
    }]; // signalB is --8--8--8--8--|
    
RACSignal *signalC = [signalA mapReplace:@8];
    // signalC is --8--8--8--8--| too.
</code></pre><p>(3)ReduceEach操作</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-54d88f54d117b0e0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
RACTuple *a = RACTuplePack(@1, @2);
RACTuple *b = RACTuplePack(@2, @3);
RACTuple *c = RACTuplePack(@3, @5);
    
RACSignal *signalA = @[a, b, c].rac_sequence.signal;
    
RACSignal *signalB = [signalA reduceEach:^id(NSNumber *first,
                                                 NSNumber *second) {
        return @(first.integerValue + second.integerValue);
    }];
</code></pre><p>reduceEach后面可以跟一些具体类型的参数。</p><p>(4)not操作</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-7628d11ce0b4f366.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
 RACSignal *signalA = @[@0, @1, @1, @0].rac_sequence.signal;
    
 RACSignal *signalB = [signalA not];
</code></pre><p>(5)and操作</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-7ce7facd5d03c956.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
    RACTuple *a = RACTuplePack(@0, @1);
    RACTuple *b = RACTuplePack(@0, @0);
    RACTuple *c = RACTuplePack(@1, @1);
    RACTuple *d = RACTuplePack(@1, @0);
    
    RACSignal *signalA = @[a, b, c, d].rac_sequence.signal;
    
    RACSignal *signalB = [signalA and];
</code></pre><p>(6)or操作</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-b69324ddb36bbc0f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>

    RACTuple *a = RACTuplePack(@0, @1);
    RACTuple *b = RACTuplePack(@0, @0);
    RACTuple *c = RACTuplePack(@1, @1);
    RACTuple *d = RACTuplePack(@1, @0);

    RACSignal *signalA = @[a, b, c, d].rac_sequence.signal;
    
    RACSignal *signalB = [signalA or];
</code></pre><p>(7)reduceApply操作
这里把一个block当做RACTuple的first，然后second，third是其他的参数，当执行reduceApply操作的时候，就会取出第一个参数的block，然后把第二个和第三个参数代入这个block中。</p><p>(8)materialize操作
这个操作会把普通的Complete，Error，Next事件，都变成普通的值事件传递出来。</p><p>(9)dematerialize操作<br>RACEvent有一些值</p><pre><code>RACEventTypeCompleted,
RACEventTypeError,
RACEventTypeNext
</code></pre><p>使用dematerialize操作之后，可以把上面的值重新转换成对应的事件。</p><p>(10)Scan操作</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-adb11010c6fb63a3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
    RACSignal *signalA = @[@1, @2, @3, @4].rac_sequence.signal;
    
    RACSignal *signalB = [signalA scanWithStart:@0
                                         reduce:^id(NSNumber *running,
                                                    NSNumber *next) {
        return @(running.integerValue + next.integerValue);
    }];
</code></pre><p>对比下面对数量操作里面的Aggregate操作，这里的优点很明显，每次“扫描”都可以拿到一个值。</p><pre><code>- (RACSignal *)scanWithStart:(id)startingValue   
             reduceWithIndex:(id (^)(id running, id next, NSUInteger index))reduceBlock;
</code></pre><p>上面这个是scan的变种函数。</p><p>2.对数量的操作</p><ul><li>Filter操作</li><li>Ignore / IgnoreValues操作</li><li>DistinctUntilChanged操作</li><li>Take操作</li><li>Skip操作</li><li>StartWith操作</li><li>Repeat操作</li><li>Retry操作</li><li>Collect操作</li><li>Aggregate操作</li></ul><p>(1)Filter操作</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-f3fb1cb8c3aca987.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
    RACSignal *signalA = @[@&quot;ab&quot;, @&quot;hello&quot;, @&quot;ppp&quot;, @&quot;0&quot;].rac_sequence.signal;
    
    RACSignal *signalB = [signalA filter:^BOOL(NSString *value) {
        return value.length &gt; 2;
    }];
</code></pre><p>(2)Ignore / IgnoreValues操作</p><p>Ignore操作</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-4646fa07e4ea4c97.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
    RACSignal *signalA = @[@1, @2, @1, @3].rac_sequence.signal;
    
    RACSignal *signalB = [signalA filter:^BOOL(id value) {
        return ![@1 isEqual:value];
    }];
    
    RACSignal *signalC = [signalA ignore:@1];
</code></pre><p>IgnoreValues操作</p><p>进行这个操作之后，新信号就没有值了，只剩下Error，Complete事件了。</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-a951993bccbc6a0d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
    RACSignal *signalA = @[@1, @2, @1, @3].rac_sequence.signal;
    
    RACSignal *signalB = [signalA ignoreValues];
</code></pre><p>(3)DistinctUntilChanged操作
这个操作其实就是去重操作。</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-dfacd25c58482b05.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
    RACSignal *signalA = @[@1,@1,@2,@2,@3].rac_sequence.signal;
    
    RACSignal *signalB = [signalA distinctUntilChanged];
</code></pre><p>(4)Take操作</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-4c1a699dfe83bde4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
    RACSignal *signalA = @[@1, @2, @3].rac_sequence.signal;
    
    RACSignal *signalB = [signalA take:2];
</code></pre><p>(5)Skip操作</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-d1779d3ae60f7baa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
    RACSignal *signalA = @[@1, @2, @3].rac_sequence.signal;
    
    RACSignal *signalB = [signalA skip:2];
</code></pre><p>take和Skip变种方法</p><pre><code>
- (RACSignal *)takeLast:(NSUInteger)count;
- (RACSignal *)takeUntilBlock:(BOOL (^)(id x))predicate;
- (RACSignal *)takeWhileBlock:(BOOL (^)(id x))predicate;
- (RACSignal *)skipUntilBlock:(BOOL (^)(id x))predicate;
- (RACSignal *)skipWhileBlock:(BOOL (^)(id x))predicate;
</code></pre><p>predicate是传入一个要不要或者跳不跳过的规则。</p><p>(6)StartWith操作</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-5eb4c8a859ad7de9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
RACSignal *signalA = @[@&quot;ab&quot;, @&quot;hello&quot;, @&quot;app&quot;, @&quot;1&quot;].rac_sequence.signal;
    
RACSignal *signalB = [signalA startWith:@&quot;Start&quot;];
</code></pre><p>(7)Repeat操作</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-3187c446c645f073.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
RACSignal *signalA = @[@&quot;ab&quot;, @&quot;hello&quot;].rac_sequence.signal;
RACSignal *signalB = [signalA repeat];
</code></pre><p>(8)Retry操作</p><p>在一些网络请求中，如果我们把网络获取封装成一个信号,网络请求失败的时候，这时候就会抛出一个错误，网络不能连接。这个时候客户端可能会有重新连接的需求。</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-5cf8576101a3875c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>RACSignal *signalA = @[@&quot;ab&quot;].rac_sequence.signal;
RACSignal *signalB = [signalA retry:2];
</code></pre><p>Retry后面是重试的次数</p><p>这里会引出副作用操作</p><pre><code>
    RACSignal *signalA = @[@&quot;ab&quot;, @&quot;hello&quot;, @&quot;ppp&quot;, @&quot;0&quot;].rac_sequence.signal;
    
    RACSignal *signalB = [signalA map:^id(id value) {
        // do some thing;
        return value;
    }];
    
    RACSignal *signalC = [signalA doNext:^(id x) {
        // do some thing;
    }];
</code></pre><p>副作用操作就是指的是不影响值，额外做的一些操作，比如说做一些动画，屏幕是打出一些字，弹框等等。
有以下一些便捷方法</p><pre><code>- (RACSignal *)doError:(void (^)(NSError *error))block;
- (RACSignal *)doCompleted:(void (^)(void))block;
- (RACSignal *)initially:(void (^)(void))block;
- (RACSignal *)finally:(void (^)(void))block;
</code></pre><p>(9)Collect操作</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-f1b01ecbc516c887.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>RACSignal *signalA = @[@&quot;ab&quot;, @&quot;hello&quot;, @&quot;ppp&quot;, @&quot;0&quot;].rac_sequence.signal;
    
RACSignal *signalB = [signalA collect];
</code></pre><p>(10)Aggregate操作
这个函数其实是一个“折叠函数”</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-995c1563638f089b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>RACSignal *signalA = @[@1, @2, @3, @4].rac_sequence.signal;
    
RACSignal *signalB = [signalA aggregateWithStart:@0
                                              reduce:^id(NSNumber *running,
                                                         NSNumber *next) {
        return @(running.integerValue + next.integerValue);
    }];
</code></pre><p>值得注意的是，这个函数在终止的时候才有返回，不终止就一直不返回，如果遇到了Repeat信号，那就一直都不会返回了。aggregateWithStart有一个初始值。缺点是变化中拿不到值，只有最后才有值，对比值操作里面的Scan操作，还是Scan操作比较好。</p><pre><code> - (RACSignal *)aggregateWithStart:(id)start 
                   reduceWithIndex:(id (^)(id running, id next, NSUInteger index))reduceBlock;
 - (RACSignal *)aggregateWithStartFactory:(id (^)(void))startFactory 
                                   reduce:(id (^)(id running, id next))reduceBlock;
</code></pre><p>这个是aggregate的变种函数。</p><p>3.对时间间隔的操作</p><ul><li>单位间隔时间信号</li><li>Delay操作</li><li>Throttle操作(节流操作)</li></ul><p>(1)单位间隔时间信号</p><pre><code>
+ (RACSignal *)interval:(NSTimeInterval)interval onScheduler:(RACScheduler *)scheduler;
+ (RACSignal *)interval:(NSTimeInterval)interval onScheduler:(RACScheduler *)scheduler withLeeway:(NSTimeInterval)leeway;
</code></pre><p>上面这2个方法，会返回以interval为时间间隔的时间信号。每隔interval就会发出一个信号。</p><p>(2)Delay操作</p><p>将源信号延迟1秒发送。
<img src=http://upload-images.jianshu.io/upload_images/1194012-736b439f164785be.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
RACSignal *signalB = [signalA delay:1];
</code></pre><p>(3)Throttle操作(节流操作)</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-122ce82b819396ec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
RACSignal *signalB = [signalA throttle:2];
</code></pre><p>throttle后面跟着是间隔多少秒。如果间隔多少秒之后都没有值，就把之前监听到的值发出来。比如上述的例子，1发出来之后，间隔2秒，2秒内又来了2，继续监听2秒，2秒内又来了3，继续监听2秒，2秒内没有其他的值了，这时候就把3发送出来。如此道理，会发出5，6。</p><p>这个函数在我们开发中会用到的场景是，搜索操作。
用户拼命在搜索框内输入，这个时候如果每输入一次就网络请求一次，那又浪费流量，又没有必要。这个时候就可以用到这个throttle了。用户输完1秒内没有输入了，这个时候就可以去请求网络了。</p><pre><code>
- (RACSignal *)throttle:(NSTimeInterval)interval valuesPassingTest:(BOOL (^)(id next))predicate;
- (RACSignal *)bufferWithTime:(NSTimeInterval)interval onScheduler:(RACScheduler *)scheduler;
</code></pre><p>这些是Throttle的变种函数。</p><p>####2.多个信号的组合</p><ul><li>1.Concat组合操作</li><li>2.Merge组合操作</li><li>3.Zip组合操作</li><li>4.CombineLatest组合操作</li><li>5.Sample组合操作</li><li>6.TakeUntil / TakeUntilReplacement组合操作</li></ul><p>1.Concat组合操作</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-21fdb249e315d32d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
    RACSignal *signalA = @[@1, @2, @3, @4, @5].rac_sequence.signal;
    RACSignal *signalB = @[@6, @7].rac_sequence.signal;
    
    RACSignal *signalC = [signalA concat:signalB];
</code></pre><p>Concat工作原理：先订阅A，当A都结束了之后才会继续订阅B，这个时候可以看到，B早已结束了。这里也体现出了一个信号的定义和一个信号的订阅，是分离的。</p><p>如果A发生了错误，那就没有B什么事了。</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-3930552684a844ab.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><p>如果B发生了一个错误，那么C就会传递这个错误。</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-ed1fc826ac7dab4a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><p>2.Merge组合操作</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-33c271814737d904.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
    RACSignal *signalA = @[@1, @2, @3, @4, @5].rac_sequence.signal;
    RACSignal *signalB = @[@6, @7].rac_sequence.signal;
    
    RACSignal *signalC = [signalA merge:signalB];
    RACSignal *signalC = [RACSignal merge:@[signalA, signalB]];
    RACSignal *signalC = [RACSignal merge:RACTuplePack(signalA, signalB)];
 
</code></pre><p>如果SignalA，SignalB，是2个线程，那么SignalC会穿梭在2个线程中发送。如上图的例子，1，2，3，5发在线程A，4，6，7发在线程B里。</p><p>Merge在实际开发中的使用场景可能会出现如下场景：</p><pre><code>
RACSignal *appearSignal = [[self rac_signalForSelector:@selector(viewDidAppear:)]
                               mapReplace:@YES];
RACSignal *disappearSignal = [[self rac_signalForSelector:@selector(viewWillDisappear:)]
                                  mapReplace:@NO];
RACSignal *activeSignal = [RACSignal merge:@[appearSignal, disappearSignal]];
</code></pre><p>activeSignal信号得到的就是app是否在前台的信号。</p><p>3.Zip组合操作</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-a04d8e0c02c57c7d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>RACSignal *signalA = @[@1, @2, @3, @5].rac_sequence.signal;
RACSignal *signalB = @[@4, @6, @7].rac_sequence.signal;

RACSignal *signalC = [signalA zipWith:signalB];
RACSignal *signalC = [RACSignal zip:@[signalA, signalB]];
RACSignal *signalC = [RACSignal zip:RACTuplePack(signalA, signalB)];
</code></pre><p>注意图中的RACTuple的颜色。谁来控制终止由谁短来控制。发送的时机是谁更晚，就发送谁。(1，4)4更晚，就在4的时候发送RACTuple，(2，6)6更晚，6的时候发送RACTuple。(3，7)3更晚，3的时候发送RACTuple。</p><p>4.CombineLatest组合操作</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-723e854a562298a5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
    RACSignal *signalA = @[@1, @2, @3].rac_sequence.signal;
    RACSignal *signalB = @[@4, @6, @7].rac_sequence.signal;
    
     RACSignal *signalC = [signalA combineLatestWith:signalB];
     RACSignal *signalC = [RACSignal combineLatest:@[signalA, signalB]];
     RACSignal *signalC = [RACSignal combineLatest:RACTuplePack(signalA, signalB)];
</code></pre><p>永远都结合最新的值作为新值返回。谁来控制终止由谁长来控制。</p><pre><code>+ (RACSignal *)combineLatest:(id&lt;NSFastEnumeration&gt;)signals reduce:(id (^)())reduceBlock;
+ (RACSignal *)zip:(id&lt;NSFastEnumeration&gt;)streams reduce:(id (^)())reduceBlock;
</code></pre><p>这分别是对应的combineLatest和Zip的语法糖似的便捷操作。都只不过是在后面加了一个Reduce。</p><p>5.Sample组合操作</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-107e725a6813f7c3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>RACSignal *signalC = [signalA sample:signalB];
</code></pre><p>谁早结束，那么结果信号就跟着谁一起结束。</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-13e69a0e9ac4f21b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><p>如果遇到了错误，这个函数相当于快门。一样会把Error取得,并返回。</p><p>6.TakeUntil / TakeUntilReplacement组合操作</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-e6868359cb0ae356.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
RACSignal *signalC = [signalA takeUntil:signalB];
</code></pre><p>当出现B的时候，就终止A。</p><p><img src=http://upload-images.jianshu.io/upload_images/1194012-3126818c4567512b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240 alt></p><pre><code>
RACSignal *signalC = [signalA takeUntilReplacement:signalB];
</code></pre><p>当出现B的时候，就终止A，后面再紧接着B。</p><img src=https://img.halfrost.com/wechat-qr-code.png></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=https://books.halfrost.com/>Books</a></li><li><a href=https://github.com/halfrost/Halfrost-Field>Github</a></li><li><a href=https://halfrost.me/>About</a></li><li><a href=/index.xml>RSS</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#目录>目录</a></li></ul></li></ul></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f"><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f&text=%e5%87%bd%e6%95%b0%e5%93%8d%e5%ba%94%e5%bc%8f%e7%bc%96%e7%a8%8b%28FRP%29%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%22%e6%94%be%e5%bc%83%22%e2%80%94%e2%80%94%e5%9b%be%e8%a7%a3RACSignal%e7%af%87"><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f&title=%e5%87%bd%e6%95%b0%e5%93%8d%e5%ba%94%e5%bc%8f%e7%bc%96%e7%a8%8b%28FRP%29%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%22%e6%94%be%e5%bc%83%22%e2%80%94%e2%80%94%e5%9b%be%e8%a7%a3RACSignal%e7%af%87"><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f&is_video=false&description=%e5%87%bd%e6%95%b0%e5%93%8d%e5%ba%94%e5%bc%8f%e7%bc%96%e7%a8%8b%28FRP%29%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%22%e6%94%be%e5%bc%83%22%e2%80%94%e2%80%94%e5%9b%be%e8%a7%a3RACSignal%e7%af%87"><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=%e5%87%bd%e6%95%b0%e5%93%8d%e5%ba%94%e5%bc%8f%e7%bc%96%e7%a8%8b%28FRP%29%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%22%e6%94%be%e5%bc%83%22%e2%80%94%e2%80%94%e5%9b%be%e8%a7%a3RACSignal%e7%af%87&body=Check out this article: https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f"><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f&title=%e5%87%bd%e6%95%b0%e5%93%8d%e5%ba%94%e5%bc%8f%e7%bc%96%e7%a8%8b%28FRP%29%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%22%e6%94%be%e5%bc%83%22%e2%80%94%e2%80%94%e5%9b%be%e8%a7%a3RACSignal%e7%af%87"><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f&title=%e5%87%bd%e6%95%b0%e5%93%8d%e5%ba%94%e5%bc%8f%e7%bc%96%e7%a8%8b%28FRP%29%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%22%e6%94%be%e5%bc%83%22%e2%80%94%e2%80%94%e5%9b%be%e8%a7%a3RACSignal%e7%af%87"><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f&title=%e5%87%bd%e6%95%b0%e5%93%8d%e5%ba%94%e5%bc%8f%e7%bc%96%e7%a8%8b%28FRP%29%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%22%e6%94%be%e5%bc%83%22%e2%80%94%e2%80%94%e5%9b%be%e8%a7%a3RACSignal%e7%af%87"><i class="fab fa-stumbleupon fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://digg.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f&title=%e5%87%bd%e6%95%b0%e5%93%8d%e5%ba%94%e5%bc%8f%e7%bc%96%e7%a8%8b%28FRP%29%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%22%e6%94%be%e5%bc%83%22%e2%80%94%e2%80%94%e5%9b%be%e8%a7%a3RACSignal%e7%af%87"><i class="fab fa-digg fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f&name=%e5%87%bd%e6%95%b0%e5%93%8d%e5%ba%94%e5%bc%8f%e7%bc%96%e7%a8%8b%28FRP%29%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%22%e6%94%be%e5%bc%83%22%e2%80%94%e2%80%94%e5%9b%be%e8%a7%a3RACSignal%e7%af%87&description=%e7%9b%ae%e5%bd%95%20%201.RACSignal%e7%9a%84%e5%88%9b%e5%bb%ba%202.RACSignal%e7%9a%84%e8%ae%a2%e9%98%85%203.RACSignal%e5%90%84%e7%b1%bb%e6%93%8d%e4%bd%9c%20%20%23%23%23%23%e4%b8%80.RACSignal%e7%9a%84%e5%88%9b%e5%bb%ba%0a1.%e5%88%9b%e5%bb%ba%e5%8d%95%e5%85%83%e4%bf%a1%e5%8f%b7%0a%20NSError%20%2aerrorObject%20%3d%20%5bNSError%20errorWithDomain%3a%40%26quot%3bSomething%20wrong%26quot%3b%20code%3a500%20userInfo%3anil%5d%3b%20%2f%2f%e5%9f%ba%e6%9c%ac%e7%9a%844%e7%a7%8d%e5%88%9b%e5%bb%ba%e6%96%b9%e6%b3%95%20RACSignal%20%2asignal1%20%3d%20%5bRACSignal%20return%3a%40%26quot%3bSome%20Value%26quot%3b%5d%3b%20RACSignal%20%2asignal2%20%3d%20%5bRACSignal%20error%3aerrorObject%5d%3b%20RACSignal%20%2asignal3%20%3d%20%5bRACSignal%20empty%5d%3b%20RACSignal%20%2asignal4%20%3d%20%5bRACSignal%20never%5d%3b%202.%e5%88%9b%e5%bb%ba%e5%8a%a8%e6%80%81%e4%bf%a1%e5%8f%b7%0aRACSignal%20%2asignal5%20%3d%20%5bRACSignal%20createSignal%3a%20%5eRACDisposable%20%2a%28id%26lt%3bRACSubscriber%26gt%3b%20subscriber%29%20%7b%20%5bsubscriber%20sendNext%3a%401%5d%3b%20%5bsubscriber%20sendNext%3a%402%5d%3b%20%5bsubscriber%20sendError%3aerrorObject%5d%3b%20%5bsubscriber%20sendCompleted%5d%3b%20return%20%5bRACDisposable%20disposableWithBlock%3a%5e%7b%20%7d%5d%3b%20%7d%5d%3b%203.%e9%80%9a%e8%bf%87Cocoa%e6%a1%a5%e6%8e%a5%e6%96%b9%e5%bc%8f%e8%8e%b7%e5%be%97%e4%b8%80%e4%b8%aa%e4%bf%a1%e5%8f%b7%0a%20RACSignal%20%2asignal6%20%3d%20%5bview%20rac_signalForSelector%3a%40selector%28setFrame%3a%29%5d%3b%20RACSignal%20%2asignal7%20%3d%20%5bview%20rac_signalForControlEvents%3aUIControlEventTouchUpInside%5d%3b%20RACSignal%20%2asignal8%20%3d%20%5bview%20rac_willDeallocSignal%5d%3b%20%2f%2fKVO%e7%9a%84%e5%8e%9f%e7%90%86%e5%ae%9e%e7%8e%b0%20RACSignal%20%2asignal9%20%3d%20RACObserve%28view%2c%20backgroundColor%29%3b%204."><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fnew.halfrost.com%2fios_rac_racsignal%2f&t=%e5%87%bd%e6%95%b0%e5%93%8d%e5%ba%94%e5%bc%8f%e7%bc%96%e7%a8%8b%28FRP%29%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%22%e6%94%be%e5%bc%83%22%e2%80%94%e2%80%94%e5%9b%be%e8%a7%a3RACSignal%e7%af%87"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu class=icon href=# onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden=true></i>Menu</a>
<a id=toc class=icon href=# onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden=true></i>TOC</a>
<a id=share class=icon href=# onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden=true></i>share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i>Top</a></div></div></div><footer id=footer><div class=footer-left><p class=copyright style=float:left;margin-bottom:0><a href=https://github.com/halfrost/Halfrost-Field class=github-repo style=height:18px><span class=gadget-github></span>Star</a>
Copyright &copy;halfrost 2016 - 2021
<a href=http://www.miit.gov.cn/>鄂ICP备16014744号</a></p><br><p class="copyright statistics" style=margin-bottom:20px><span id=busuanzi_container_site_pv>Cumulative Page Views <span id=busuanzi_value_site_pv></span>| Unique Visitors <span id=busuanzi_value_site_uv></span></span></p></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script><script src=/main.min.f870a4d110314b9e50e65f8ac982dc1c9c376c8f1a5083d39c62cfc49073f011.js></script><script async src=/prism.js></script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]},svg:{fontCache:'global'}};</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></html>