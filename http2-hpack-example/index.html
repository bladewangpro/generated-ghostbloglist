<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=theme-color content="#FFFFFF"><meta http-equiv=x-ua-compatible content="IE=edge"><title>HTTP/2 HPACK 实际应用举例 | prometheus</title><meta name=description content="Explore in every moment of the hard thinking"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="HTTP/2 HPACK 实际应用举例"><meta property="og:description" content="在上篇文章中，具体说明了 HPACK 算法中的 8 种场景(7 种 Name-value 的场景 + 1 种动态表更新场景)。
 动态表大小更新有两种方式，一种是在 HEADERS 帧中直接修改(“001” 3 位模式开始)，另外一种方式是通过 SETTINGS 帧中的 SETTINGS_HEADER_TABLE_SIZE 中设置的。
 在介绍 HPACK 实际应用之前，需要先来看看静态表的定义和 HTTP/2 中霍夫曼编码的定义。
一. 静态表定义 静态表（请参阅第 2.3.1 节）包含一个预定义且不可更改的 header 字段列表。
静态表是根据流行网站使用的最频繁的 header 字段创建的，并添加了 HTTP/2 特定的伪 header 字段（请参见 [HTTP2]的 8.1.2.1 节）。对于具有一些频繁值的 header 字段，为每个这些频繁值添加了一个条目。对于其他标题字段，添加了带有空值的条目。
表 1 列出了构成静态表的预定义 header 字段，并提供了每个条目的索引。
   Index Header Name Header Value     1 :authority    2 :method GET   3 :method POST   4 :path /   5 :path /index."><meta property="og:type" content="article"><meta property="og:url" content="https://new.halfrost.com/http2-hpack-example/"><meta property="article:published_time" content="2019-07-14T07:37:00+00:00"><meta property="article:modified_time" content="2019-07-14T07:37:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="HTTP/2 HPACK 实际应用举例"><meta name=twitter:description content="在上篇文章中，具体说明了 HPACK 算法中的 8 种场景(7 种 Name-value 的场景 + 1 种动态表更新场景)。
 动态表大小更新有两种方式，一种是在 HEADERS 帧中直接修改(“001” 3 位模式开始)，另外一种方式是通过 SETTINGS 帧中的 SETTINGS_HEADER_TABLE_SIZE 中设置的。
 在介绍 HPACK 实际应用之前，需要先来看看静态表的定义和 HTTP/2 中霍夫曼编码的定义。
一. 静态表定义 静态表（请参阅第 2.3.1 节）包含一个预定义且不可更改的 header 字段列表。
静态表是根据流行网站使用的最频繁的 header 字段创建的，并添加了 HTTP/2 特定的伪 header 字段（请参见 [HTTP2]的 8.1.2.1 节）。对于具有一些频繁值的 header 字段，为每个这些频繁值添加了一个条目。对于其他标题字段，添加了带有空值的条目。
表 1 列出了构成静态表的预定义 header 字段，并提供了每个条目的索引。
   Index Header Name Header Value     1 :authority    2 :method GET   3 :method POST   4 :path /   5 :path /index."><link rel=stylesheet href=/css/style-white.min.css><link rel=manifest href=/manifest.json><link rel=stylesheet href=/prism.css><link href=/images/apple-touch-icon-60x60.png rel=apple-touch-icon sizes=60x60><link href=/images/apple-touch-icon-76x76.png rel=apple-touch-icon sizes=76x76><link href=/images/apple-touch-icon-120x120.png rel=apple-touch-icon sizes=120x120><link href=/images/apple-touch-icon-152x152.png rel=apple-touch-icon sizes=152x152><link href=/images/apple-touch-icon-180x180.png rel=apple-touch-icon sizes=180x180><link href=/images/apple-touch-icon-512x512.png rel=apple-touch-icon sizes=512x512><link href=/images/apple-touch-icon-1024x1024.png rel=apple-touch-icon sizes=1024x1024><script async>if('serviceWorker'in navigator){navigator.serviceWorker.register("\/serviceworker-v1.min.a64912b78d282eab1ad3715a0943da21616e5f326f8afea27034784ad445043b.js").then(function(){if(navigator.serviceWorker.controller){console.log('Assets cached by the controlling service worker.');}else{console.log('Please reload this page to allow the service worker to handle network operations.');}}).catch(function(error){console.log('ERROR: '+error);});}else{console.log('Service workers are not supported in the current browser.');}</script><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://new.halfrost.com/images/favicon.ico><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-82753806-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="single-max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a><a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a><a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast');" style=display:none><i class="fas fa-chevron-up fa-lg"></i></a><span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=https://books.halfrost.com/>Books</a></li><li><a href=https://github.com/halfrost/Halfrost-Field>Github</a></li><li><a href=https://halfrost.me/>About</a></li><li><a href=/index.xml>RSS</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://new.halfrost.com/http2-header-compression/><i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li><li><a class=icon href=https://new.halfrost.com/http2_rfc7541/><i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li><li><a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');"><i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li><li><a class=icon href=#><i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f"><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f&text=HTTP%2f2%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b8%be%e4%be%8b"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f&title=HTTP%2f2%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b8%be%e4%be%8b"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f&is_video=false&description=HTTP%2f2%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b8%be%e4%be%8b"><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=HTTP%2f2%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b8%be%e4%be%8b&body=Check out this article: https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f"><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f&title=HTTP%2f2%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b8%be%e4%be%8b"><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f&title=HTTP%2f2%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b8%be%e4%be%8b"><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f&title=HTTP%2f2%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b8%be%e4%be%8b"><i class="fab fa-stumbleupon" aria-hidden=true></i></a></li><li><a class=icon href="http://digg.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f&title=HTTP%2f2%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b8%be%e4%be%8b"><i class="fab fa-digg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f&name=HTTP%2f2%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b8%be%e4%be%8b&description=%e5%9c%a8%e4%b8%8a%e7%af%87%e6%96%87%e7%ab%a0%e4%b8%ad%ef%bc%8c%e5%85%b7%e4%bd%93%e8%af%b4%e6%98%8e%e4%ba%86%20HPACK%20%e7%ae%97%e6%b3%95%e4%b8%ad%e7%9a%84%208%20%e7%a7%8d%e5%9c%ba%e6%99%af%287%20%e7%a7%8d%20Name-value%20%e7%9a%84%e5%9c%ba%e6%99%af%20%2b%201%20%e7%a7%8d%e5%8a%a8%e6%80%81%e8%a1%a8%e6%9b%b4%e6%96%b0%e5%9c%ba%e6%99%af%29%e3%80%82%0a%20%e5%8a%a8%e6%80%81%e8%a1%a8%e5%a4%a7%e5%b0%8f%e6%9b%b4%e6%96%b0%e6%9c%89%e4%b8%a4%e7%a7%8d%e6%96%b9%e5%bc%8f%ef%bc%8c%e4%b8%80%e7%a7%8d%e6%98%af%e5%9c%a8%20HEADERS%20%e5%b8%a7%e4%b8%ad%e7%9b%b4%e6%8e%a5%e4%bf%ae%e6%94%b9%28%e2%80%9c001%e2%80%9d%203%20%e4%bd%8d%e6%a8%a1%e5%bc%8f%e5%bc%80%e5%a7%8b%29%ef%bc%8c%e5%8f%a6%e5%a4%96%e4%b8%80%e7%a7%8d%e6%96%b9%e5%bc%8f%e6%98%af%e9%80%9a%e8%bf%87%20SETTINGS%20%e5%b8%a7%e4%b8%ad%e7%9a%84%20SETTINGS_HEADER_TABLE_SIZE%20%e4%b8%ad%e8%ae%be%e7%bd%ae%e7%9a%84%e3%80%82%0a%20%e5%9c%a8%e4%bb%8b%e7%bb%8d%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b9%8b%e5%89%8d%ef%bc%8c%e9%9c%80%e8%a6%81%e5%85%88%e6%9d%a5%e7%9c%8b%e7%9c%8b%e9%9d%99%e6%80%81%e8%a1%a8%e7%9a%84%e5%ae%9a%e4%b9%89%e5%92%8c%20HTTP%2f2%20%e4%b8%ad%e9%9c%8d%e5%a4%ab%e6%9b%bc%e7%bc%96%e7%a0%81%e7%9a%84%e5%ae%9a%e4%b9%89%e3%80%82%0a%e4%b8%80.%20%e9%9d%99%e6%80%81%e8%a1%a8%e5%ae%9a%e4%b9%89%20%e9%9d%99%e6%80%81%e8%a1%a8%ef%bc%88%e8%af%b7%e5%8f%82%e9%98%85%e7%ac%ac%202.3.1%20%e8%8a%82%ef%bc%89%e5%8c%85%e5%90%ab%e4%b8%80%e4%b8%aa%e9%a2%84%e5%ae%9a%e4%b9%89%e4%b8%94%e4%b8%8d%e5%8f%af%e6%9b%b4%e6%94%b9%e7%9a%84%20header%20%e5%ad%97%e6%ae%b5%e5%88%97%e8%a1%a8%e3%80%82%0a%e9%9d%99%e6%80%81%e8%a1%a8%e6%98%af%e6%a0%b9%e6%8d%ae%e6%b5%81%e8%a1%8c%e7%bd%91%e7%ab%99%e4%bd%bf%e7%94%a8%e7%9a%84%e6%9c%80%e9%a2%91%e7%b9%81%e7%9a%84%20header%20%e5%ad%97%e6%ae%b5%e5%88%9b%e5%bb%ba%e7%9a%84%ef%bc%8c%e5%b9%b6%e6%b7%bb%e5%8a%a0%e4%ba%86%20HTTP%2f2%20%e7%89%b9%e5%ae%9a%e7%9a%84%e4%bc%aa%20header%20%e5%ad%97%e6%ae%b5%ef%bc%88%e8%af%b7%e5%8f%82%e8%a7%81%20%5bHTTP2%5d%e7%9a%84%208.1.2.1%20%e8%8a%82%ef%bc%89%e3%80%82%e5%af%b9%e4%ba%8e%e5%85%b7%e6%9c%89%e4%b8%80%e4%ba%9b%e9%a2%91%e7%b9%81%e5%80%bc%e7%9a%84%20header%20%e5%ad%97%e6%ae%b5%ef%bc%8c%e4%b8%ba%e6%af%8f%e4%b8%aa%e8%bf%99%e4%ba%9b%e9%a2%91%e7%b9%81%e5%80%bc%e6%b7%bb%e5%8a%a0%e4%ba%86%e4%b8%80%e4%b8%aa%e6%9d%a1%e7%9b%ae%e3%80%82%e5%af%b9%e4%ba%8e%e5%85%b6%e4%bb%96%e6%a0%87%e9%a2%98%e5%ad%97%e6%ae%b5%ef%bc%8c%e6%b7%bb%e5%8a%a0%e4%ba%86%e5%b8%a6%e6%9c%89%e7%a9%ba%e5%80%bc%e7%9a%84%e6%9d%a1%e7%9b%ae%e3%80%82%0a%e8%a1%a8%201%20%e5%88%97%e5%87%ba%e4%ba%86%e6%9e%84%e6%88%90%e9%9d%99%e6%80%81%e8%a1%a8%e7%9a%84%e9%a2%84%e5%ae%9a%e4%b9%89%20header%20%e5%ad%97%e6%ae%b5%ef%bc%8c%e5%b9%b6%e6%8f%90%e4%be%9b%e4%ba%86%e6%af%8f%e4%b8%aa%e6%9d%a1%e7%9b%ae%e7%9a%84%e7%b4%a2%e5%bc%95%e3%80%82%0a%20%20%20Index%20Header%20Name%20Header%20Value%20%20%20%20%201%20%3aauthority%20%20%20%202%20%3amethod%20GET%20%20%203%20%3amethod%20POST%20%20%204%20%3apath%20%2f%20%20%205%20%3apath%20%2findex."><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f&t=HTTP%2f2%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b8%be%e4%be%8b"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><a href=#一-静态表定义>一. 静态表定义</a></li><li><a href=#二-霍夫曼编码>二. 霍夫曼编码</a><ul><li><a href=#1-霍夫曼算法>1. 霍夫曼算法</a></li><li><a href=#2-霍夫曼编码在-http2-中的定义>2. 霍夫曼编码在 HTTP/2 中的定义</a></li></ul></li><li><a href=#三-例子>三. 例子</a><ul><li><a href=#1-整数表示的示例>1. 整数表示的示例</a></li><li><a href=#1-使用-5-位前缀对-10-进行编码>(1). 使用 5 位前缀对 10 进行编码</a></li><li><a href=#2-使用-5-位前缀对-1337-进行编码>(2). 使用 5 位前缀对 1337 进行编码</a></li><li><a href=#3-从八位字节边界开始对-42-进行编码>(3). 从八位字节边界开始对 42 进行编码</a></li><li><a href=#2-header-字段表示的示例>2. header 字段表示的示例</a></li><li><a href=#1-带索引的字面-header-字段>(1). 带索引的字面 header 字段</a></li><li><a href=#2-没有索引的字面-header-字段>(2). 没有索引的字面 header 字段</a></li><li><a href=#3-从不索引的字面-header-字段>(3). 从不索引的字面 header 字段</a></li><li><a href=#4-索引的-header-字段>(4). 索引的 header 字段</a></li><li><a href=#3-没有霍夫曼编码请求的示例>3. 没有霍夫曼编码请求的示例</a></li><li><a href=#1-第一个请求>(1). 第一个请求</a></li><li><a href=#2-第二个请求>(2). 第二个请求</a></li><li><a href=#3-第三个请求>(3). 第三个请求</a></li><li><a href=#4-有霍夫曼编码请求的示例>4. 有霍夫曼编码请求的示例</a></li><li><a href=#1-第一个请求-1>(1). 第一个请求</a></li><li><a href=#2-第二个请求-1>(2). 第二个请求</a></li><li><a href=#3-第三个请求-1>(3). 第三个请求</a></li><li><a href=#5-没有霍夫曼编码响应的示例>5. 没有霍夫曼编码响应的示例</a></li><li><a href=#1-第一个响应>(1). 第一个响应</a></li><li><a href=#2-第二个响应>(2). 第二个响应</a></li><li><a href=#3-第三个响应>(3). 第三个响应</a></li><li><a href=#6-有霍夫曼编码响应的示例>6. 有霍夫曼编码响应的示例</a></li><li><a href=#1-第一个响应-1>(1). 第一个响应</a></li><li><a href=#2-第二个响应-1>(2). 第二个响应</a></li><li><a href=#3-第三个响应-1>(3). 第三个响应</a></li><li><a href=#7-一些抓包的例子>7. 一些抓包的例子</a></li><li><a href=#8-hpack-优化效果>8. HPACK 优化效果</a></li></ul></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">HTTP/2 HPACK 实际应用举例</h1><div class=meta><div class=postdate><time datetime="2019-07-14 07:37:00 +0000 UTC" itemprop=datePublished>Jul 14</time></div><div class=article-category><i class="fas fa-archive"></i><a class=category-link href=/categories/protocol>Protocol</a>
,
<a class=category-link href=/categories/http>HTTP</a>
,
<a class=category-link href=/categories/http/2>HTTP/2</a></div><div class=article-tag><i class="fas fa-tag"></i><a class=tag-link href=/tags/protocol rel=tag>Protocol</a>
,
<a class=tag-link href=/tags/http rel=tag>HTTP</a>
,
<a class=tag-link href=/tags/http/2 rel=tag>HTTP/2</a></div></div></header><div class=content itemprop=articleBody><p>在上篇文章中，具体说明了 HPACK 算法中的 8 种场景(7 种 Name-value 的场景 + 1 种动态表更新场景)。</p><blockquote><p>动态表大小更新有两种方式，一种是在 HEADERS 帧中直接修改(“001” 3 位模式开始)，另外一种方式是通过 SETTINGS 帧中的 SETTINGS_HEADER_TABLE_SIZE 中设置的。</p></blockquote><p>在介绍 HPACK 实际应用之前，需要先来看看静态表的定义和 HTTP/2 中霍夫曼编码的定义。</p><h2 id=一-静态表定义>一. 静态表定义</h2><p>静态表（请参阅<a href=https://github.com/halfrost/Halfrost-Field/blob/master/contents/Protocol/HTTP:2_Header-Compression.md#1-%E9%9D%99%E6%80%81%E8%A1%A8>第 2.3.1 节</a>）包含一个预定义且不可更改的 header 字段列表。</p><p>静态表是根据流行网站使用的最频繁的 header 字段创建的，并添加了 HTTP/2 特定的伪 header 字段（请参见 <a href=https://github.com/halfrost/Halfrost-Field/blob/master/contents/Protocol/HTTP:2-HTTP-Semantics.md#2-http-header-fields>[HTTP2]的 8.1.2.1 节</a>）。对于具有一些频繁值的 header 字段，为每个这些频繁值添加了一个条目。对于其他标题字段，添加了带有空值的条目。</p><p>表 1 列出了构成静态表的预定义 header 字段，并提供了每个条目的索引。</p><table><thead><tr><th align=center>Index</th><th align=center>Header Name</th><th align=center>Header Value</th></tr></thead><tbody><tr><td align=center>1</td><td align=center>:authority</td><td align=center></td></tr><tr><td align=center>2</td><td align=center>:method</td><td align=center>GET</td></tr><tr><td align=center>3</td><td align=center>:method</td><td align=center>POST</td></tr><tr><td align=center>4</td><td align=center>:path</td><td align=center>/</td></tr><tr><td align=center>5</td><td align=center>:path</td><td align=center>/index.html</td></tr><tr><td align=center>6</td><td align=center>:scheme</td><td align=center>http</td></tr><tr><td align=center>7</td><td align=center>:scheme</td><td align=center>https</td></tr><tr><td align=center>8</td><td align=center>:status</td><td align=center>200</td></tr><tr><td align=center>9</td><td align=center>:status</td><td align=center>204</td></tr><tr><td align=center>10</td><td align=center>:status</td><td align=center>206</td></tr><tr><td align=center>11</td><td align=center>:status</td><td align=center>304</td></tr><tr><td align=center>12</td><td align=center>:status</td><td align=center>400</td></tr><tr><td align=center>13</td><td align=center>:status</td><td align=center>404</td></tr><tr><td align=center>14</td><td align=center>:status</td><td align=center>500</td></tr><tr><td align=center>15</td><td align=center>accept-charset</td><td align=center></td></tr><tr><td align=center>16</td><td align=center>accept-encoding</td><td align=center>gzip, deflate</td></tr><tr><td align=center>17</td><td align=center>accept-language</td><td align=center></td></tr><tr><td align=center>18</td><td align=center>accept-ranges</td><td align=center></td></tr><tr><td align=center>19</td><td align=center>accept</td><td align=center></td></tr><tr><td align=center>20</td><td align=center>access-control-allow-origin</td><td align=center></td></tr><tr><td align=center>21</td><td align=center>age</td><td align=center></td></tr><tr><td align=center>22</td><td align=center>allow</td><td align=center></td></tr><tr><td align=center>23</td><td align=center>authorization</td><td align=center></td></tr><tr><td align=center>24</td><td align=center>cache-control</td><td align=center></td></tr><tr><td align=center>25</td><td align=center>content-disposition</td><td align=center></td></tr><tr><td align=center>26</td><td align=center>content-encoding</td><td align=center></td></tr><tr><td align=center>27</td><td align=center>content-language</td><td align=center></td></tr><tr><td align=center>28</td><td align=center>content-length</td><td align=center></td></tr><tr><td align=center>29</td><td align=center>content-location</td><td align=center></td></tr><tr><td align=center>30</td><td align=center>content-range</td><td align=center></td></tr><tr><td align=center>31</td><td align=center>content-type</td><td align=center></td></tr><tr><td align=center>32</td><td align=center>cookie</td><td align=center></td></tr><tr><td align=center>33</td><td align=center>date</td><td align=center></td></tr><tr><td align=center>34</td><td align=center>etag</td><td align=center></td></tr><tr><td align=center>35</td><td align=center>expect</td><td align=center></td></tr><tr><td align=center>36</td><td align=center>expires</td><td align=center></td></tr><tr><td align=center>37</td><td align=center>from</td><td align=center></td></tr><tr><td align=center>38</td><td align=center>host</td><td align=center></td></tr><tr><td align=center>39</td><td align=center>if-match</td><td align=center></td></tr><tr><td align=center>40</td><td align=center>if-modified-since</td><td align=center></td></tr><tr><td align=center>41</td><td align=center>if-none-match</td><td align=center></td></tr><tr><td align=center>42</td><td align=center>if-range</td><td align=center></td></tr><tr><td align=center>43</td><td align=center>if-unmodified-since</td><td align=center></td></tr><tr><td align=center>44</td><td align=center>last-modified</td><td align=center></td></tr><tr><td align=center>45</td><td align=center>link</td><td align=center></td></tr><tr><td align=center>46</td><td align=center>location</td><td align=center></td></tr><tr><td align=center>47</td><td align=center>max-forwards</td><td align=center></td></tr><tr><td align=center>48</td><td align=center>proxy-authenticate</td><td align=center></td></tr><tr><td align=center>49</td><td align=center>proxy-authorization</td><td align=center></td></tr><tr><td align=center>50</td><td align=center>range</td><td align=center></td></tr><tr><td align=center>51</td><td align=center>referer</td><td align=center></td></tr><tr><td align=center>52</td><td align=center>refresh</td><td align=center></td></tr><tr><td align=center>53</td><td align=center>retry-after</td><td align=center></td></tr><tr><td align=center>54</td><td align=center>server</td><td align=center></td></tr><tr><td align=center>55</td><td align=center>set-cookie</td><td align=center></td></tr><tr><td align=center>56</td><td align=center>strict-transport-security</td><td align=center></td></tr><tr><td align=center>57</td><td align=center>transfer-encoding</td><td align=center></td></tr><tr><td align=center>58</td><td align=center>user-agent</td><td align=center></td></tr><tr><td align=center>59</td><td align=center>vary</td><td align=center></td></tr><tr><td align=center>60</td><td align=center>via</td><td align=center></td></tr><tr><td align=center>61</td><td align=center>www-authenticate</td><td align=center></td></tr></tbody></table><h2 id=二-霍夫曼编码>二. 霍夫曼编码</h2><h3 id=1-霍夫曼算法>1. 霍夫曼算法</h3><p>如果每个字符都是等长的编码形式，是否有一种算法能保证大幅压缩这些数据？等长的编码形式首先面临的一个问题是如何避免解压的时候出现歧义误读。</p><p>霍夫曼在 1952 年发现了最优前缀码的算法，算法的核心思想是：出现概率比较大的符号采用较短的编码，概率较小的符号采用较长的编码。</p><p>举个例子，一篇文章中有很多单词，我们讲所有字母出现的频率都统计出来，以 a、b、c、d、e、f 这 6 个字母为例，它们的出现频率分别如下：</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/133_1.png alt></p><p>第一步先从这些频率中选取频率最小的 2 个，进行合并。左子树小，右子树大。合并成新的节点以后，再放回原有的节点中。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/133_2.png alt></p><p>重复第一步，直到所有节点都合并到一棵树上。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/133_3.png alt></p><p>最后给每个左子树的指针上编码为 0，右子树的指针上编码为 1。以上 6 个字母的最终编码是 a = 0, b = 101, c = 100, d = 111, e = 1101, f = 1100 。</p><h3 id=2-霍夫曼编码在-http2-中的定义>2. 霍夫曼编码在 HTTP/2 中的定义</h3><p>当使用霍夫曼编码对字符串字面进行编码时，使用以下霍夫曼代码（请参见<a href=https://github.com/halfrost/Halfrost-Field/blob/master/contents/Protocol/HTTP:2_Header-Compression.md#2-string-literal-representation>第 5.2 节</a>）。</p><p>此霍夫曼代码是从大量 HTTP header 样本获得的统计信息中生成的。这是规范的霍夫曼代码（请参见 <a href=https://tools.ietf.org/html/rfc7541#ref-CANONICAL>[CANONICAL]</a>），需要进行一些调整以确保没有符号具有唯一的代码长度。</p><p>表中的每一行均定义用于表示符号的代码：</p><p>sym：要表示的符号。它是八位字节的十进制值，可能以ASCII表示形式为前缀。特定的符号 “EOS” 用于指示字符串字面的结尾。</p><p>code as bits：符号的霍夫曼编码，表示为以2为基的整数，在最高有效位（MSB）上对齐。</p><p>code as hex：符号的霍夫曼编码，以十六进制整数表示，在最低有效位（LSB）上对齐。</p><p>len：代表符号的代码的位数。</p><p>例如，符号 47 的代码（对应于 ASCII 字符 “/”）由 6 位 “0”，“1”，“1”，“0”，“0”，“0”组成。这对应于以 6 位编码的值 0x18（以十六进制表示）。</p><table><thead><tr><th align=right>sym</th><th align=left>code as bitsaligned to MSB</th><th align=right>code as hex aligned to LSB</th><th align=center>len in bits</th></tr></thead><tbody><tr><td align=right>( 0)</td><td align=left>|11111111|11000</td><td align=right>1ff8</td><td align=center>[13]</td></tr><tr><td align=right>( 1)</td><td align=left>|11111111|11111111|1011000</td><td align=right>7fffd8</td><td align=center>[23]</td></tr><tr><td align=right>( 2)</td><td align=left>|11111111|11111111|11111110|0010</td><td align=right>fffffe2</td><td align=center>[28]</td></tr><tr><td align=right>( 3)</td><td align=left>|11111111|11111111|11111110|0011</td><td align=right>fffffe3</td><td align=center>[28]</td></tr><tr><td align=right>( 4)</td><td align=left>|11111111|11111111|11111110|0100</td><td align=right>fffffe4</td><td align=center>[28]</td></tr><tr><td align=right>( 5)</td><td align=left>|11111111|11111111|11111110|0101</td><td align=right>fffffe5</td><td align=center>[28]</td></tr><tr><td align=right>( 6)</td><td align=left>|11111111|11111111|11111110|0110</td><td align=right>fffffe6</td><td align=center>[28]</td></tr><tr><td align=right>( 7)</td><td align=left>|11111111|11111111|11111110|0111</td><td align=right>fffffe7</td><td align=center>[28]</td></tr><tr><td align=right>( 8)</td><td align=left>|11111111|11111111|11111110|1000</td><td align=right>fffffe8</td><td align=center>[28]</td></tr><tr><td align=right>( 9)</td><td align=left>|11111111|11111111|11101010</td><td align=right>ffffea</td><td align=center>[24]</td></tr><tr><td align=right>( 10)</td><td align=left>|11111111|11111111|11111111|111100</td><td align=right>3ffffffc</td><td align=center>[30]</td></tr><tr><td align=right>( 11)</td><td align=left>|11111111|11111111|11111110|1001</td><td align=right>fffffe9</td><td align=center>[28]</td></tr><tr><td align=right>( 12)</td><td align=left>|11111111|11111111|11111110|1010</td><td align=right>fffffea</td><td align=center>[28]</td></tr><tr><td align=right>( 13)</td><td align=left>|11111111|11111111|11111111|111101</td><td align=right>3ffffffd</td><td align=center>[30]</td></tr><tr><td align=right>( 14)</td><td align=left>|11111111|11111111|11111110|1011</td><td align=right>fffffeb</td><td align=center>[28]</td></tr><tr><td align=right>( 15)</td><td align=left>|11111111|11111111|11111110|1100</td><td align=right>fffffec</td><td align=center>[28]</td></tr><tr><td align=right>( 16)</td><td align=left>|11111111|11111111|11111110|1101</td><td align=right>fffffed</td><td align=center>[28]</td></tr><tr><td align=right>( 17)</td><td align=left>|11111111|11111111|11111110|1110</td><td align=right>fffffee</td><td align=center>[28]</td></tr><tr><td align=right>( 18)</td><td align=left>|11111111|11111111|11111110|1111</td><td align=right>fffffef</td><td align=center>[28]</td></tr><tr><td align=right>( 19)</td><td align=left>|11111111|11111111|11111111|0000</td><td align=right>ffffff0</td><td align=center>[28]</td></tr><tr><td align=right>( 20)</td><td align=left>|11111111|11111111|11111111|0001</td><td align=right>ffffff1</td><td align=center>[28]</td></tr><tr><td align=right>( 21)</td><td align=left>|11111111|11111111|11111111|0010</td><td align=right>ffffff2</td><td align=center>[28]</td></tr><tr><td align=right>( 22)</td><td align=left>|11111111|11111111|11111111|111110</td><td align=right>3ffffffe</td><td align=center>[30]</td></tr><tr><td align=right>( 23)</td><td align=left>|11111111|11111111|11111111|0011</td><td align=right>ffffff3</td><td align=center>[28]</td></tr><tr><td align=right>( 24)</td><td align=left>|11111111|11111111|11111111|0100</td><td align=right>ffffff4</td><td align=center>[28]</td></tr><tr><td align=right>( 25)</td><td align=left>|11111111|11111111|11111111|0101</td><td align=right>ffffff5</td><td align=center>[28]</td></tr><tr><td align=right>( 26)</td><td align=left>|11111111|11111111|11111111|0110</td><td align=right>ffffff6</td><td align=center>[28]</td></tr><tr><td align=right>( 27)</td><td align=left>|11111111|11111111|11111111|0111</td><td align=right>ffffff7</td><td align=center>[28]</td></tr><tr><td align=right>( 28)</td><td align=left>|11111111|11111111|11111111|1000</td><td align=right>ffffff8</td><td align=center>[28]</td></tr><tr><td align=right>( 29)</td><td align=left>|11111111|11111111|11111111|1001</td><td align=right>ffffff9</td><td align=center>[28]</td></tr><tr><td align=right>( 30)</td><td align=left>|11111111|11111111|11111111|1010</td><td align=right>ffffffa</td><td align=center>[28]</td></tr><tr><td align=right>( 31)</td><td align=left>|11111111|11111111|11111111|1011</td><td align=right>ffffffb</td><td align=center>[28]</td></tr><tr><td align=right>' ' ( 32)</td><td align=left>|010100</td><td align=right>14</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;!&rsquo; ( 33)</td><td align=left>|11111110|00</td><td align=right>3f8</td><td align=center>[10]</td></tr><tr><td align=right>&lsquo;"&rsquo; ( 34)</td><td align=left>|11111110|01</td><td align=right>3f9</td><td align=center>[10]</td></tr><tr><td align=right>&lsquo;#&rsquo; ( 35)</td><td align=left>|11111111|1010</td><td align=right>ffa</td><td align=center>[12]</td></tr><tr><td align=right>&lsquo;$&rsquo; ( 36)</td><td align=left>|11111111|11001</td><td align=right>1ff9</td><td align=center>[13]</td></tr><tr><td align=right>&lsquo;%&rsquo; ( 37)</td><td align=left>|010101</td><td align=right>15</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;&&rsquo; ( 38)</td><td align=left>|11111000</td><td align=right>f8</td><td align=center>[ 8]</td></tr><tr><td align=right>'&rsquo;&rsquo; ( 39)</td><td align=left>|11111111|010</td><td align=right>7fa</td><td align=center>[11]</td></tr><tr><td align=right>&lsquo;(&rsquo; ( 40)</td><td align=left>|11111110|10</td><td align=right>3fa</td><td align=center>[10]</td></tr><tr><td align=right>&lsquo;)&rsquo; ( 41)</td><td align=left>|11111110|11</td><td align=right>3fb</td><td align=center>[10]</td></tr><tr><td align=right>&lsquo;*&rsquo; ( 42)</td><td align=left>|11111001</td><td align=right>f9</td><td align=center>[ 8]</td></tr><tr><td align=right>&lsquo;+&rsquo; ( 43)</td><td align=left>|11111111|011</td><td align=right>7fb</td><td align=center>[11]</td></tr><tr><td align=right>&lsquo;,&rsquo; ( 44)</td><td align=left>|11111010</td><td align=right>fa</td><td align=center>[ 8]</td></tr><tr><td align=right>&lsquo;-&rsquo; ( 45)</td><td align=left>|010110</td><td align=right>16</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;.&rsquo; ( 46)</td><td align=left>|010111</td><td align=right>17</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;/&rsquo; ( 47)</td><td align=left>|011000</td><td align=right>18</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;0&rsquo; ( 48)</td><td align=left>|00000</td><td align=right>0</td><td align=center>[ 5]</td></tr><tr><td align=right>&lsquo;1&rsquo; ( 49)</td><td align=left>|00001</td><td align=right>1</td><td align=center>[ 5]</td></tr><tr><td align=right>&lsquo;2&rsquo; ( 50)</td><td align=left>|00010</td><td align=right>2</td><td align=center>[ 5]</td></tr><tr><td align=right>&lsquo;3&rsquo; ( 51)</td><td align=left>|011001</td><td align=right>19</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;4&rsquo; ( 52)</td><td align=left>|011010</td><td align=right>1a</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;5&rsquo; ( 53)</td><td align=left>|011011</td><td align=right>1b</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;6&rsquo; ( 54)</td><td align=left>|011100</td><td align=right>1c</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;7&rsquo; ( 55)</td><td align=left>|011101</td><td align=right>1d</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;8&rsquo; ( 56)</td><td align=left>|011110</td><td align=right>1e</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;9&rsquo; ( 57)</td><td align=left>|011111</td><td align=right>1f</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;:&rsquo; ( 58)</td><td align=left>|1011100</td><td align=right>5c</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;;&rsquo; ( 59)</td><td align=left>|11111011</td><td align=right>fb</td><td align=center>[ 8]</td></tr><tr><td align=right>&lsquo;&lt;&rsquo; ( 60)</td><td align=left>|11111111|1111100</td><td align=right>7ffc</td><td align=center>[15]</td></tr><tr><td align=right>&lsquo;=&rsquo; ( 61)</td><td align=left>|100000</td><td align=right>20</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;>&rsquo; ( 62)</td><td align=left>|11111111|1011</td><td align=right>ffb</td><td align=center>[12]</td></tr><tr><td align=right>&lsquo;?&rsquo; ( 63)</td><td align=left>|11111111|00</td><td align=right>3fc</td><td align=center>[10]</td></tr><tr><td align=right>&lsquo;@&rsquo; ( 64)</td><td align=left>|11111111|11010</td><td align=right>1ffa</td><td align=center>[13]</td></tr><tr><td align=right>&lsquo;A&rsquo; ( 65)</td><td align=left>|100001</td><td align=right>21</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;B&rsquo; ( 66)</td><td align=left>|1011101</td><td align=right>5d</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;C&rsquo; ( 67)</td><td align=left>|1011110</td><td align=right>5e</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;D&rsquo; ( 68)</td><td align=left>|1011111</td><td align=right>5f</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;E&rsquo; ( 69)</td><td align=left>|1100000</td><td align=right>60</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;F&rsquo; ( 70)</td><td align=left>|1100001</td><td align=right>61</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;G&rsquo; ( 71)</td><td align=left>|1100010</td><td align=right>62</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;H&rsquo; ( 72)</td><td align=left>|1100011</td><td align=right>63</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;I&rsquo; ( 73)</td><td align=left>|1100100</td><td align=right>64</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;J&rsquo; ( 74)</td><td align=left>|1100101</td><td align=right>65</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;K&rsquo; ( 75)</td><td align=left>|1100110</td><td align=right>66</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;L&rsquo; ( 76)</td><td align=left>|1100111</td><td align=right>67</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;M&rsquo; ( 77)</td><td align=left>|1101000</td><td align=right>68</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;N&rsquo; ( 78)</td><td align=left>|1101001</td><td align=right>69</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;O&rsquo; ( 79)</td><td align=left>|1101010</td><td align=right>6a</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;P&rsquo; ( 80)</td><td align=left>|1101011</td><td align=right>6b</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;Q&rsquo; ( 81)</td><td align=left>|1101100</td><td align=right>6c</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;R&rsquo; ( 82)</td><td align=left>|1101101</td><td align=right>6d</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;S&rsquo; ( 83)</td><td align=left>|1101110</td><td align=right>6e</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;T&rsquo; ( 84)</td><td align=left>|1101111</td><td align=right>6f</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;U&rsquo; ( 85)</td><td align=left>|1110000</td><td align=right>70</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;V&rsquo; ( 86)</td><td align=left>|1110001</td><td align=right>71</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;W&rsquo; ( 87)</td><td align=left>|1110010</td><td align=right>72</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;X&rsquo; ( 88)</td><td align=left>|11111100</td><td align=right>fc</td><td align=center>[ 8]</td></tr><tr><td align=right>&lsquo;Y&rsquo; ( 89)</td><td align=left>|1110011</td><td align=right>73</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;Z&rsquo; ( 90)</td><td align=left>|11111101</td><td align=right>fd</td><td align=center>[ 8]</td></tr><tr><td align=right>&lsquo;[&rsquo; ( 91)</td><td align=left>|11111111|11011</td><td align=right>1ffb</td><td align=center>[13]</td></tr><tr><td align=right>&lsquo;' ( 92)</td><td align=left>|11111111|11111110|000</td><td align=right>7fff0</td><td align=center>[19]</td></tr><tr><td align=right>&lsquo;]&rsquo; ( 93)</td><td align=left>|11111111|11100</td><td align=right>1ffc</td><td align=center>[13]</td></tr><tr><td align=right>&lsquo;^&rsquo; ( 94)</td><td align=left>|11111111|111100</td><td align=right>3ffc</td><td align=center>[14]</td></tr><tr><td align=right>&lsquo;_&rsquo; ( 95)</td><td align=left>|100010</td><td align=right>22</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;`&rsquo; ( 96) | |11111111|1111101 | 7ffd | [15] |</td><td></td><td></td><td></td></tr><tr><td align=right>&lsquo;a&rsquo; ( 97)</td><td align=left>|00011</td><td align=right>3</td><td align=center>[ 5]</td></tr><tr><td align=right>&lsquo;b&rsquo; ( 98)</td><td align=left>|100011</td><td align=right>23</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;c&rsquo; ( 99)</td><td align=left>|00100</td><td align=right>4</td><td align=center>[ 5]</td></tr><tr><td align=right>&rsquo;d&rsquo; (100)</td><td align=left>|100100</td><td align=right>24</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;e&rsquo; (101)</td><td align=left>|00101</td><td align=right>5</td><td align=center>[ 5]</td></tr><tr><td align=right>&lsquo;f&rsquo; (102)</td><td align=left>|100101</td><td align=right>25</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;g&rsquo; (103)</td><td align=left>|100110</td><td align=right>26</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;h&rsquo; (104)</td><td align=left>|100111</td><td align=right>27</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;i&rsquo; (105)</td><td align=left>|00110</td><td align=right>6</td><td align=center>[ 5]</td></tr><tr><td align=right>&lsquo;j&rsquo; (106)</td><td align=left>|1110100</td><td align=right>74</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;k&rsquo; (107)</td><td align=left>|1110101</td><td align=right>75</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;l&rsquo; (108)</td><td align=left>|101000</td><td align=right>28</td><td align=center>[ 6]</td></tr><tr><td align=right>&rsquo;m&rsquo; (109)</td><td align=left>|101001</td><td align=right>29</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;n&rsquo; (110)</td><td align=left>|101010</td><td align=right>2a</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;o&rsquo; (111)</td><td align=left>|00111</td><td align=right>7</td><td align=center>[ 5]</td></tr><tr><td align=right>&lsquo;p&rsquo; (112)</td><td align=left>|101011</td><td align=right>2b</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;q&rsquo; (113)</td><td align=left>|1110110</td><td align=right>76</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;r&rsquo; (114)</td><td align=left>|101100</td><td align=right>2c</td><td align=center>[ 6]</td></tr><tr><td align=right>&rsquo;s&rsquo; (115)</td><td align=left>|01000</td><td align=right>8</td><td align=center>[ 5]</td></tr><tr><td align=right>&rsquo;t&rsquo; (116)</td><td align=left>|01001</td><td align=right>9</td><td align=center>[ 5]</td></tr><tr><td align=right>&lsquo;u&rsquo; (117)</td><td align=left>|101101</td><td align=right>2d</td><td align=center>[ 6]</td></tr><tr><td align=right>&lsquo;v&rsquo; (118)</td><td align=left>|1110111</td><td align=right>77</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;w&rsquo; (119)</td><td align=left>|1111000</td><td align=right>78</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;x&rsquo; (120)</td><td align=left>|1111001</td><td align=right>79</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;y&rsquo; (121)</td><td align=left>|1111010</td><td align=right>7a</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;z&rsquo; (122)</td><td align=left>|1111011</td><td align=right>7b</td><td align=center>[ 7]</td></tr><tr><td align=right>&lsquo;{&rsquo; (123)</td><td align=left>|11111111|1111110</td><td align=right>7ffe</td><td align=center>[15]</td></tr><tr><td align=right>'</td><td align=left>' (124)</td><td align=right>|11111111|100</td><td align=center>7fc</td></tr><tr><td align=right>&lsquo;}&rsquo; (125)</td><td align=left>|11111111|111101</td><td align=right>3ffd</td><td align=center>[14]</td></tr><tr><td align=right>&lsquo;~&rsquo; (126)</td><td align=left>|11111111|11101</td><td align=right>1ffd</td><td align=center>[13]</td></tr><tr><td align=right>(127)</td><td align=left>|11111111|11111111|11111111|1100</td><td align=right>ffffffc</td><td align=center>[28]</td></tr><tr><td align=right>(128)</td><td align=left>|11111111|11111110|0110</td><td align=right>fffe6</td><td align=center>[20]</td></tr><tr><td align=right>(129)</td><td align=left>|11111111|11111111|010010</td><td align=right>3fffd2</td><td align=center>[22]</td></tr><tr><td align=right>(130)</td><td align=left>|11111111|11111110|0111</td><td align=right>fffe7</td><td align=center>[20]</td></tr><tr><td align=right>(131)</td><td align=left>|11111111|11111110|1000</td><td align=right>fffe8</td><td align=center>[20]</td></tr><tr><td align=right>(132)</td><td align=left>|11111111|11111111|010011</td><td align=right>3fffd3</td><td align=center>[22]</td></tr><tr><td align=right>(133)</td><td align=left>|11111111|11111111|010100</td><td align=right>3fffd4</td><td align=center>[22]</td></tr><tr><td align=right>(134)</td><td align=left>|11111111|11111111|010101</td><td align=right>3fffd5</td><td align=center>[22]</td></tr><tr><td align=right>(135)</td><td align=left>|11111111|11111111|1011001</td><td align=right>7fffd9</td><td align=center>[23]</td></tr><tr><td align=right>(136)</td><td align=left>|11111111|11111111|010110</td><td align=right>3fffd6</td><td align=center>[22]</td></tr><tr><td align=right>(137)</td><td align=left>|11111111|11111111|1011010</td><td align=right>7fffda</td><td align=center>[23]</td></tr><tr><td align=right>(138)</td><td align=left>|11111111|11111111|1011011</td><td align=right>7fffdb</td><td align=center>[23]</td></tr><tr><td align=right>(139)</td><td align=left>|11111111|11111111|1011100</td><td align=right>7fffdc</td><td align=center>[23]</td></tr><tr><td align=right>(140)</td><td align=left>|11111111|11111111|1011101</td><td align=right>7fffdd</td><td align=center>[23]</td></tr><tr><td align=right>(141)</td><td align=left>|11111111|11111111|1011110</td><td align=right>7fffde</td><td align=center>[23]</td></tr><tr><td align=right>(142)</td><td align=left>|11111111|11111111|11101011</td><td align=right>ffffeb</td><td align=center>[24]</td></tr><tr><td align=right>(143)</td><td align=left>|11111111|11111111|1011111</td><td align=right>7fffdf</td><td align=center>[23]</td></tr><tr><td align=right>(144)</td><td align=left>|11111111|11111111|11101100</td><td align=right>ffffec</td><td align=center>[24]</td></tr><tr><td align=right>(145)</td><td align=left>|11111111|11111111|11101101</td><td align=right>ffffed</td><td align=center>[24]</td></tr><tr><td align=right>(146)</td><td align=left>|11111111|11111111|010111</td><td align=right>3fffd7</td><td align=center>[22]</td></tr><tr><td align=right>(147)</td><td align=left>|11111111|11111111|1100000</td><td align=right>7fffe0</td><td align=center>[23]</td></tr><tr><td align=right>(148)</td><td align=left>|11111111|11111111|11101110</td><td align=right>ffffee</td><td align=center>[24]</td></tr><tr><td align=right>(149)</td><td align=left>|11111111|11111111|1100001</td><td align=right>7fffe1</td><td align=center>[23]</td></tr><tr><td align=right>(150)</td><td align=left>|11111111|11111111|1100010</td><td align=right>7fffe2</td><td align=center>[23]</td></tr><tr><td align=right>(151)</td><td align=left>|11111111|11111111|1100011</td><td align=right>7fffe3</td><td align=center>[23]</td></tr><tr><td align=right>(152)</td><td align=left>|11111111|11111111|1100100</td><td align=right>7fffe4</td><td align=center>[23]</td></tr><tr><td align=right>(153)</td><td align=left>|11111111|11111110|11100</td><td align=right>1fffdc</td><td align=center>[21]</td></tr><tr><td align=right>(154)</td><td align=left>|11111111|11111111|011000</td><td align=right>3fffd8</td><td align=center>[22]</td></tr><tr><td align=right>(155)</td><td align=left>|11111111|11111111|1100101</td><td align=right>7fffe5</td><td align=center>[23]</td></tr><tr><td align=right>(156)</td><td align=left>|11111111|11111111|011001</td><td align=right>3fffd9</td><td align=center>[22]</td></tr><tr><td align=right>(157)</td><td align=left>|11111111|11111111|1100110</td><td align=right>7fffe6</td><td align=center>[23]</td></tr><tr><td align=right>(158)</td><td align=left>|11111111|11111111|1100111</td><td align=right>7fffe7</td><td align=center>[23]</td></tr><tr><td align=right>(159)</td><td align=left>|11111111|11111111|11101111</td><td align=right>ffffef</td><td align=center>[24]</td></tr><tr><td align=right>(160)</td><td align=left>|11111111|11111111|011010</td><td align=right>3fffda</td><td align=center>[22]</td></tr><tr><td align=right>(161)</td><td align=left>|11111111|11111110|11101</td><td align=right>1fffdd</td><td align=center>[21]</td></tr><tr><td align=right>(162)</td><td align=left>|11111111|11111110|1001</td><td align=right>fffe9</td><td align=center>[20]</td></tr><tr><td align=right>(163)</td><td align=left>|11111111|11111111|011011</td><td align=right>3fffdb</td><td align=center>[22]</td></tr><tr><td align=right>(164)</td><td align=left>|11111111|11111111|011100</td><td align=right>3fffdc</td><td align=center>[22]</td></tr><tr><td align=right>(165)</td><td align=left>|11111111|11111111|1101000</td><td align=right>7fffe8</td><td align=center>[23]</td></tr><tr><td align=right>(166)</td><td align=left>|11111111|11111111|1101001</td><td align=right>7fffe9</td><td align=center>[23]</td></tr><tr><td align=right>(167)</td><td align=left>|11111111|11111110|11110</td><td align=right>1fffde</td><td align=center>[21]</td></tr><tr><td align=right>(168)</td><td align=left>|11111111|11111111|1101010</td><td align=right>7fffea</td><td align=center>[23]</td></tr><tr><td align=right>(169)</td><td align=left>|11111111|11111111|011101</td><td align=right>3fffdd</td><td align=center>[22]</td></tr><tr><td align=right>(170)</td><td align=left>|11111111|11111111|011110</td><td align=right>3fffde</td><td align=center>[22]</td></tr><tr><td align=right>(171)</td><td align=left>|11111111|11111111|11110000</td><td align=right>fffff0</td><td align=center>[24]</td></tr><tr><td align=right>(172)</td><td align=left>|11111111|11111110|11111</td><td align=right>1fffdf</td><td align=center>[21]</td></tr><tr><td align=right>(173)</td><td align=left>|11111111|11111111|011111</td><td align=right>3fffdf</td><td align=center>[22]</td></tr><tr><td align=right>(174)</td><td align=left>|11111111|11111111|1101011</td><td align=right>7fffeb</td><td align=center>[23]</td></tr><tr><td align=right>(175)</td><td align=left>|11111111|11111111|1101100</td><td align=right>7fffec</td><td align=center>[23]</td></tr><tr><td align=right>(176)</td><td align=left>|11111111|11111111|00000</td><td align=right>1fffe0</td><td align=center>[21]</td></tr><tr><td align=right>(177)</td><td align=left>|11111111|11111111|00001</td><td align=right>1fffe1</td><td align=center>[21]</td></tr><tr><td align=right>(178)</td><td align=left>|11111111|11111111|100000</td><td align=right>3fffe0</td><td align=center>[22]</td></tr><tr><td align=right>(179)</td><td align=left>|11111111|11111111|00010</td><td align=right>1fffe2</td><td align=center>[21]</td></tr><tr><td align=right>(180)</td><td align=left>|11111111|11111111|1101101</td><td align=right>7fffed</td><td align=center>[23]</td></tr><tr><td align=right>(181)</td><td align=left>|11111111|11111111|100001</td><td align=right>3fffe1</td><td align=center>[22]</td></tr><tr><td align=right>(182)</td><td align=left>|11111111|11111111|1101110</td><td align=right>7fffee</td><td align=center>[23]</td></tr><tr><td align=right>(183)</td><td align=left>|11111111|11111111|1101111</td><td align=right>7fffef</td><td align=center>[23]</td></tr><tr><td align=right>(184)</td><td align=left>|11111111|11111110|1010</td><td align=right>fffea</td><td align=center>[20]</td></tr><tr><td align=right>(185)</td><td align=left>|11111111|11111111|100010</td><td align=right>3fffe2</td><td align=center>[22]</td></tr><tr><td align=right>(186)</td><td align=left>|11111111|11111111|100011</td><td align=right>3fffe3</td><td align=center>[22]</td></tr><tr><td align=right>(187)</td><td align=left>|11111111|11111111|100100</td><td align=right>3fffe4</td><td align=center>[22]</td></tr><tr><td align=right>(188)</td><td align=left>|11111111|11111111|1110000</td><td align=right>7ffff0</td><td align=center>[23]</td></tr><tr><td align=right>(189)</td><td align=left>|11111111|11111111|100101</td><td align=right>3fffe5</td><td align=center>[22]</td></tr><tr><td align=right>(190)</td><td align=left>|11111111|11111111|100110</td><td align=right>3fffe6</td><td align=center>[22]</td></tr><tr><td align=right>(191)</td><td align=left>|11111111|11111111|1110001</td><td align=right>7ffff1</td><td align=center>[23]</td></tr><tr><td align=right>(192)</td><td align=left>|11111111|11111111|11111000|00</td><td align=right>3ffffe0</td><td align=center>[26]</td></tr><tr><td align=right>(193)</td><td align=left>|11111111|11111111|11111000|01</td><td align=right>3ffffe1</td><td align=center>[26]</td></tr><tr><td align=right>(194)</td><td align=left>|11111111|11111110|1011</td><td align=right>fffeb</td><td align=center>[20]</td></tr><tr><td align=right>(195)</td><td align=left>|11111111|11111110|001</td><td align=right>7fff1</td><td align=center>[19]</td></tr><tr><td align=right>(196)</td><td align=left>|11111111|11111111|100111</td><td align=right>3fffe7</td><td align=center>[22]</td></tr><tr><td align=right>(197)</td><td align=left>|11111111|11111111|1110010</td><td align=right>7ffff2</td><td align=center>[23]</td></tr><tr><td align=right>(198)</td><td align=left>|11111111|11111111|101000</td><td align=right>3fffe8</td><td align=center>[22]</td></tr><tr><td align=right>(199)</td><td align=left>|11111111|11111111|11110110|0</td><td align=right>1ffffec</td><td align=center>[25]</td></tr><tr><td align=right>(200)</td><td align=left>|11111111|11111111|11111000|10</td><td align=right>3ffffe2</td><td align=center>[26]</td></tr><tr><td align=right>(201)</td><td align=left>|11111111|11111111|11111000|11</td><td align=right>3ffffe3</td><td align=center>[26]</td></tr><tr><td align=right>(202)</td><td align=left>|11111111|11111111|11111001|00</td><td align=right>3ffffe4</td><td align=center>[26]</td></tr><tr><td align=right>(203)</td><td align=left>|11111111|11111111|11111011|110</td><td align=right>7ffffde</td><td align=center>[27]</td></tr><tr><td align=right>(204)</td><td align=left>|11111111|11111111|11111011|111</td><td align=right>7ffffdf</td><td align=center>[27]</td></tr><tr><td align=right>(205)</td><td align=left>|11111111|11111111|11111001|01</td><td align=right>3ffffe5</td><td align=center>[26]</td></tr><tr><td align=right>(206)</td><td align=left>|11111111|11111111|11110001</td><td align=right>fffff1</td><td align=center>[24]</td></tr><tr><td align=right>(207)</td><td align=left>|11111111|11111111|11110110|1</td><td align=right>1ffffed</td><td align=center>[25]</td></tr><tr><td align=right>(208)</td><td align=left>|11111111|11111110|010</td><td align=right>7fff2</td><td align=center>[19]</td></tr><tr><td align=right>(209)</td><td align=left>|11111111|11111111|00011</td><td align=right>1fffe3</td><td align=center>[21]</td></tr><tr><td align=right>(210)</td><td align=left>|11111111|11111111|11111001|10</td><td align=right>3ffffe6</td><td align=center>[26]</td></tr><tr><td align=right>(211)</td><td align=left>|11111111|11111111|11111100|000</td><td align=right>7ffffe0</td><td align=center>[27]</td></tr><tr><td align=right>(212)</td><td align=left>|11111111|11111111|11111100|001</td><td align=right>7ffffe1</td><td align=center>[27]</td></tr><tr><td align=right>(213)</td><td align=left>|11111111|11111111|11111001|11</td><td align=right>3ffffe7</td><td align=center>[26]</td></tr><tr><td align=right>(214)</td><td align=left>|11111111|11111111|11111100|010</td><td align=right>7ffffe2</td><td align=center>[27]</td></tr><tr><td align=right>(215)</td><td align=left>|11111111|11111111|11110010</td><td align=right>fffff2</td><td align=center>[24]</td></tr><tr><td align=right>(216)</td><td align=left>|11111111|11111111|00100</td><td align=right>1fffe4</td><td align=center>[21]</td></tr><tr><td align=right>(217)</td><td align=left>|11111111|11111111|00101</td><td align=right>1fffe5</td><td align=center>[21]</td></tr><tr><td align=right>(218)</td><td align=left>|11111111|11111111|11111010|00</td><td align=right>3ffffe8</td><td align=center>[26]</td></tr><tr><td align=right>(219)</td><td align=left>|11111111|11111111|11111010|01</td><td align=right>3ffffe9</td><td align=center>[26]</td></tr><tr><td align=right>(220)</td><td align=left>|11111111|11111111|11111111|1101</td><td align=right>ffffffd</td><td align=center>[28]</td></tr><tr><td align=right>(221)</td><td align=left>|11111111|11111111|11111100|011</td><td align=right>7ffffe3</td><td align=center>[27]</td></tr><tr><td align=right>(222)</td><td align=left>|11111111|11111111|11111100|100</td><td align=right>7ffffe4</td><td align=center>[27]</td></tr><tr><td align=right>(223)</td><td align=left>|11111111|11111111|11111100|101</td><td align=right>7ffffe5</td><td align=center>[27]</td></tr><tr><td align=right>(224)</td><td align=left>|11111111|11111110|1100</td><td align=right>fffec</td><td align=center>[20]</td></tr><tr><td align=right>(225)</td><td align=left>|11111111|11111111|11110011</td><td align=right>fffff3</td><td align=center>[24]</td></tr><tr><td align=right>(226)</td><td align=left>|11111111|11111110|1101</td><td align=right>fffed</td><td align=center>[20]</td></tr><tr><td align=right>(227)</td><td align=left>|11111111|11111111|00110</td><td align=right>1fffe6</td><td align=center>[21]</td></tr><tr><td align=right>(228)</td><td align=left>|11111111|11111111|101001</td><td align=right>3fffe9</td><td align=center>[22]</td></tr><tr><td align=right>(229)</td><td align=left>|11111111|11111111|00111</td><td align=right>1fffe7</td><td align=center>[21]</td></tr><tr><td align=right>(230)</td><td align=left>|11111111|11111111|01000</td><td align=right>1fffe8</td><td align=center>[21]</td></tr><tr><td align=right>(231)</td><td align=left>|11111111|11111111|1110011</td><td align=right>7ffff3</td><td align=center>[23]</td></tr><tr><td align=right>(232)</td><td align=left>|11111111|11111111|101010</td><td align=right>3fffea</td><td align=center>[22]</td></tr><tr><td align=right>(233)</td><td align=left>|11111111|11111111|101011</td><td align=right>3fffeb</td><td align=center>[22]</td></tr><tr><td align=right>(234)</td><td align=left>|11111111|11111111|11110111|0</td><td align=right>1ffffee</td><td align=center>[25]</td></tr><tr><td align=right>(235)</td><td align=left>|11111111|11111111|11110111|1</td><td align=right>1ffffef</td><td align=center>[25]</td></tr><tr><td align=right>(236)</td><td align=left>|11111111|11111111|11110100\</td><td align=right>fffff4</td><td align=center>[24]</td></tr><tr><td align=right>(237)</td><td align=left>|11111111|11111111|11110101\</td><td align=right>fffff5</td><td align=center>[24]</td></tr><tr><td align=right>(238)</td><td align=left>|11111111|11111111|11111010|10</td><td align=right>3ffffea</td><td align=center>[26]</td></tr><tr><td align=right>(239)</td><td align=left>|11111111|11111111|1110100 \</td><td align=right>7ffff4</td><td align=center>[23]</td></tr><tr><td align=right>(240)</td><td align=left>|11111111|11111111|11111010|11</td><td align=right>3ffffeb</td><td align=center>[26]</td></tr><tr><td align=right>(241)</td><td align=left>|11111111|11111111|11111100|110</td><td align=right>7ffffe6</td><td align=center>[27]</td></tr><tr><td align=right>(242)</td><td align=left>|11111111|11111111|11111011|00</td><td align=right>3ffffec</td><td align=center>[26]</td></tr><tr><td align=right>(243)</td><td align=left>|11111111|11111111|11111011|01</td><td align=right>3ffffed</td><td align=center>[26]</td></tr><tr><td align=right>(244)</td><td align=left>|11111111|11111111|11111100|111</td><td align=right>7ffffe7</td><td align=center>[27]</td></tr><tr><td align=right>(245)</td><td align=left>|11111111|11111111|11111101|000</td><td align=right>7ffffe8</td><td align=center>[27]</td></tr><tr><td align=right>(246)</td><td align=left>|11111111|11111111|11111101|001</td><td align=right>7ffffe9</td><td align=center>[27]</td></tr><tr><td align=right>(247)</td><td align=left>|11111111|11111111|11111101|010</td><td align=right>7ffffea</td><td align=center>[27]</td></tr><tr><td align=right>(248)</td><td align=left>|11111111|11111111|11111101|011</td><td align=right>7ffffeb</td><td align=center>[27]</td></tr><tr><td align=right>(249)</td><td align=left>|11111111|11111111|11111111|1110</td><td align=right>ffffffe</td><td align=center>[28]</td></tr><tr><td align=right>(250)</td><td align=left>|11111111|11111111|11111101|100</td><td align=right>7ffffec</td><td align=center>[27]</td></tr><tr><td align=right>(251)</td><td align=left>|11111111|11111111|11111101|101</td><td align=right>7ffffed</td><td align=center>[27]</td></tr><tr><td align=right>(252)</td><td align=left>|11111111|11111111|11111101|110</td><td align=right>7ffffee</td><td align=center>[27]</td></tr><tr><td align=right>(253)</td><td align=left>|11111111|11111111|11111101|111</td><td align=right>7ffffef</td><td align=center>[27]</td></tr><tr><td align=right>(254)</td><td align=left>|11111111|11111111|11111110|000</td><td align=right>7fffff0</td><td align=center>[27]</td></tr><tr><td align=right>(255)</td><td align=left>|11111111|11111111|11111011|10</td><td align=right>3ffffee</td><td align=center>[26]</td></tr><tr><td align=right>EOS (256)</td><td align=left>|11111111|11111111|11111111|111111</td><td align=right>3fffffff</td><td align=center>[30]</td></tr></tbody></table><h2 id=三-例子>三. 例子</h2><p>本章节包含一些示例，这些示例涵盖整数编码，header 字段表示以及使用和不使用霍夫曼编码的请求和响应的 header 字段的整个列表的编码。</p><h3 id=1-整数表示的示例>1. 整数表示的示例</h3><p>本节详细显示了整数值的表示形式（请参见<a href=https://github.com/halfrost/Halfrost-Field/blob/master/contents/Protocol/HTTP:2_Header-Compression.md#1-integer-representation>第 5.1 节</a>）。</p><h3 id=1-使用-5-位前缀对-10-进行编码>(1). 使用 5 位前缀对 10 进行编码</h3><p>10 小于 31（2^5-1），并使用 5 位前缀表示。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>     <span style=color:#ae81ff>0</span>   <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>7</span>
   <span style=color:#f92672>+---+---+---+---+---+---+---+---+</span>
   <span style=color:#f92672>|</span> X <span style=color:#f92672>|</span> X <span style=color:#f92672>|</span> X <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span>   <span style=color:#ae81ff>10</span> stored on <span style=color:#ae81ff>5</span> bits
   <span style=color:#f92672>+---+---+---+---+---+---+---+---+</span>
</code></pre></div><h3 id=2-使用-5-位前缀对-1337-进行编码>(2). 使用 5 位前缀对 1337 进行编码</h3><p>1337 大于 31（2^5-1），并使用 5 位前缀表示。5 位前缀使用其最大值（31）填充。</p><p>I = 1337 - (2^5 - 1) = 1306。I (1306) 大于等于 128。I % 128 == 26，26 + 128 == 154，154 用 8 位表示为: 10011010。I 现在是 10，(1306 / 128 == 10)，用 8 位表示为: 00001010。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>     <span style=color:#ae81ff>0</span>   <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>7</span>
   <span style=color:#f92672>+---+---+---+---+---+---+---+---+</span>
   <span style=color:#f92672>|</span> X <span style=color:#f92672>|</span> X <span style=color:#f92672>|</span> X <span style=color:#f92672>|</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span>  Prefix <span style=color:#f92672>=</span> <span style=color:#ae81ff>31</span>, I <span style=color:#f92672>=</span> <span style=color:#ae81ff>1306</span>
   <span style=color:#f92672>|</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span>  <span style=color:#ae81ff>1306</span><span style=color:#f92672>&gt;=</span><span style=color:#ae81ff>128</span>, encode(<span style=color:#ae81ff>154</span>), I<span style=color:#f92672>=</span><span style=color:#ae81ff>1306</span><span style=color:#f92672>/</span><span style=color:#ae81ff>128</span>
   <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span>  <span style=color:#ae81ff>10</span><span style=color:#f92672>&lt;</span><span style=color:#ae81ff>128</span>, encode(<span style=color:#ae81ff>10</span>), done
   <span style=color:#f92672>+---+---+---+---+---+---+---+---+</span>
</code></pre></div><h3 id=3-从八位字节边界开始对-42-进行编码>(3). 从八位字节边界开始对 42 进行编码</h3><p>42 小于 255 (2^8 - 1) 用 8 位前缀表示。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>     <span style=color:#ae81ff>0</span>   <span style=color:#ae81ff>1</span>   <span style=color:#ae81ff>2</span>   <span style=color:#ae81ff>3</span>   <span style=color:#ae81ff>4</span>   <span style=color:#ae81ff>5</span>   <span style=color:#ae81ff>6</span>   <span style=color:#ae81ff>7</span>
   <span style=color:#f92672>+---+---+---+---+---+---+---+---+</span>
   <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span>   <span style=color:#ae81ff>42</span> stored on <span style=color:#ae81ff>8</span> bits
   <span style=color:#f92672>+---+---+---+---+---+---+---+---+</span>
</code></pre></div><h3 id=2-header-字段表示的示例>2. header 字段表示的示例</h3><p>本节显示了几个独立的表示示例。</p><h3 id=1-带索引的字面-header-字段>(1). 带索引的字面 header 字段</h3><p>header 字段表示使用字面名称 name 和字面值 value。header 字段将添加到动态表。</p><p>需要编码的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>custom<span style=color:#f92672>-</span>key: custom<span style=color:#f92672>-</span>header
</code></pre></div><p>编码数据的十六进制表示：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>400</span>a <span style=color:#ae81ff>6375</span> <span style=color:#ae81ff>7374</span> <span style=color:#ae81ff>6f</span><span style=color:#ae81ff>6</span>d <span style=color:#ae81ff>2</span>d6b <span style=color:#ae81ff>6579</span> <span style=color:#ae81ff>0</span>d63 <span style=color:#ae81ff>7573</span> <span style=color:#f92672>|</span> <span style=color:#960050;background-color:#1e0010>@</span>.custom<span style=color:#f92672>-</span>key.cus
   <span style=color:#ae81ff>746f</span> <span style=color:#ae81ff>6</span>d2d <span style=color:#ae81ff>6865</span> <span style=color:#ae81ff>6164</span> <span style=color:#ae81ff>6572</span>                <span style=color:#f92672>|</span> tom<span style=color:#f92672>-</span>header
</code></pre></div><p>解码过程：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>40</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
   <span style=color:#ae81ff>0</span>a                                      <span style=color:#f92672>|</span>   Literal name (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>)
   <span style=color:#ae81ff>6375</span> <span style=color:#ae81ff>7374</span> <span style=color:#ae81ff>6f</span><span style=color:#ae81ff>6</span>d <span style=color:#ae81ff>2</span>d6b <span style=color:#ae81ff>6579</span>                <span style=color:#f92672>|</span> custom<span style=color:#f92672>-</span>key
   <span style=color:#ae81ff>0</span>d                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>13</span>)
   <span style=color:#ae81ff>6375</span> <span style=color:#ae81ff>7374</span> <span style=color:#ae81ff>6f</span><span style=color:#ae81ff>6</span>d <span style=color:#ae81ff>2</span>d68 <span style=color:#ae81ff>6561</span> <span style=color:#ae81ff>6465</span> <span style=color:#ae81ff>72</span>        <span style=color:#f92672>|</span> custom<span style=color:#f92672>-</span>header
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> custom<span style=color:#f92672>-</span>key:
                                           <span style=color:#f92672>|</span>   custom<span style=color:#f92672>-</span>header
</code></pre></div><p><img src=https://img.halfrost.com/Blog/ArticleImage/133_4.png alt></p><p>由于 H 位传了 0，所以后面字符串用的字面形式表示，即 ASCII 码表示，通过查表可以知道，6375 7374 6f6d 2d6b 6579 表示的值是 custom-key，6375 7374 6f6d 2d68 6561 6465 72 表示的值是 custom-header。</p><p>编码后的动态表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   [  <span style=color:#ae81ff>1</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>55</span>) custom<span style=color:#f92672>-</span>key: custom<span style=color:#f92672>-</span>header
         Table size:  <span style=color:#ae81ff>55</span>
</code></pre></div><p>解码后的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>custom<span style=color:#f92672>-</span>key: custom<span style=color:#f92672>-</span>header
</code></pre></div><h3 id=2-没有索引的字面-header-字段>(2). 没有索引的字面 header 字段</h3><p>header 字段表示使用索引名称 name 和字面值 value。header 字段未添加到动态表。</p><p>需要编码的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>path: <span style=color:#f92672>/</span>sample<span style=color:#f92672>/</span>path
</code></pre></div><p>编码数据的十六进制表示：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>040</span>c <span style=color:#ae81ff>2f</span><span style=color:#ae81ff>73</span> <span style=color:#ae81ff>616</span>d <span style=color:#ae81ff>706</span>c <span style=color:#ae81ff>652f</span> <span style=color:#ae81ff>7061</span> <span style=color:#ae81ff>7468</span>      <span style=color:#f92672>|</span> ..<span style=color:#f92672>/</span>sample<span style=color:#f92672>/</span>path
</code></pre></div><p>解码过程：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>04</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal not indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>)
                                           <span style=color:#f92672>|</span>     <span style=color:#f92672>:</span>path
   <span style=color:#ae81ff>0</span>c                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>12</span>)
   <span style=color:#ae81ff>2f</span><span style=color:#ae81ff>73</span> <span style=color:#ae81ff>616</span>d <span style=color:#ae81ff>706</span>c <span style=color:#ae81ff>652f</span> <span style=color:#ae81ff>7061</span> <span style=color:#ae81ff>7468</span>           <span style=color:#f92672>|</span> <span style=color:#f92672>/</span>sample<span style=color:#f92672>/</span>path
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>path: <span style=color:#f92672>/</span>sample<span style=color:#f92672>/</span>path
</code></pre></div><p><img src=https://img.halfrost.com/Blog/ArticleImage/133_5_.png alt></p><p>由于 H 位传了 0，所以后面字符串用的字面形式表示，即 ASCII 码表示，通过查表可以知道，2f73 616d 706c 652f 7061 7468 表示的值是 /sample/path。由于 :path 存在于静态表中，所以只需要传 index = 4 即可。</p><p>编码后的动态表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=color:#960050;background-color:#1e0010>空</span>
</code></pre></div><p>解码后的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>path: <span style=color:#f92672>/</span>sample<span style=color:#f92672>/</span>path
</code></pre></div><h3 id=3-从不索引的字面-header-字段>(3). 从不索引的字面 header 字段</h3><p>header 字段表示使用字面名称 name 和字面值 value。header 字段不会添加到动态表中，并且如果由中间件重新编码，则必须使用相同的表示形式。</p><p>需要编码的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   password: secret
</code></pre></div><p>编码数据的十六进制表示：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>1008</span> <span style=color:#ae81ff>7061</span> <span style=color:#ae81ff>7373</span> <span style=color:#ae81ff>776f</span> <span style=color:#ae81ff>7264</span> <span style=color:#ae81ff>0673</span> <span style=color:#ae81ff>6563</span> <span style=color:#ae81ff>7265</span> <span style=color:#f92672>|</span> ..password.secre
   <span style=color:#ae81ff>74</span>                                      <span style=color:#f92672>|</span> t
</code></pre></div><p>解码过程：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>10</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal never indexed <span style=color:#f92672>==</span>
   <span style=color:#ae81ff>08</span>                                      <span style=color:#f92672>|</span>   Literal name (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>8</span>)
   <span style=color:#ae81ff>7061</span> <span style=color:#ae81ff>7373</span> <span style=color:#ae81ff>776f</span> <span style=color:#ae81ff>7264</span>                     <span style=color:#f92672>|</span> password
   <span style=color:#ae81ff>06</span>                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>6</span>)
   <span style=color:#ae81ff>7365</span> <span style=color:#ae81ff>6372</span> <span style=color:#ae81ff>6574</span>                          <span style=color:#f92672>|</span> secret
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> password: secret
</code></pre></div><p><img src=https://img.halfrost.com/Blog/ArticleImage/133_6.png alt></p><p>由于 H 位传了 0，所以后面字符串用的字面形式表示，即 ASCII 码表示，通过查表可以知道，7061 7373 776f 7264 表示的值是 password。7365 6372 6574 表示的值是 secret。</p><p>编码后的动态表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=color:#960050;background-color:#1e0010>空</span>
</code></pre></div><p>解码后的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   password: secret
</code></pre></div><h3 id=4-索引的-header-字段>(4). 索引的 header 字段</h3><p>header 字段表示使用静态表中的索引 header 字段。</p><p>需要编码的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>method: GET
</code></pre></div><p>编码数据的十六进制表示：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>82</span>                                      <span style=color:#f92672>|</span> .
</code></pre></div><p>解码过程：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>82</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>method: GET
</code></pre></div><p><img src=https://img.halfrost.com/Blog/ArticleImage/133_7.png alt></p><p>由于 :method 和 GET 都在静态表中，所以用静态表中的 index 即可。</p><p>编码后的动态表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=color:#960050;background-color:#1e0010>空</span>
</code></pre></div><p>解码后的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>method: GET
</code></pre></div><h3 id=3-没有霍夫曼编码请求的示例>3. 没有霍夫曼编码请求的示例</h3><p>本节显示了同一连接上与 HTTP 请求相对应的几个连续的 header 列表。</p><h3 id=1-第一个请求>(1). 第一个请求</h3><p>需要编码的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>method: GET
   :scheme: http
   :path: <span style=color:#f92672>/</span>
   <span style=color:#f92672>:</span>authority: www.example.com
</code></pre></div><p>编码数据的十六进制表示：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>8286</span> <span style=color:#ae81ff>8441</span> <span style=color:#ae81ff>0f</span><span style=color:#ae81ff>77</span> <span style=color:#ae81ff>7777</span> <span style=color:#ae81ff>2e65</span> <span style=color:#ae81ff>7861</span> <span style=color:#ae81ff>6</span>d70 <span style=color:#ae81ff>6</span>c65 <span style=color:#f92672>|</span> ...A.www.example
   <span style=color:#ae81ff>2e63</span> <span style=color:#ae81ff>6f</span><span style=color:#ae81ff>6</span>d                               <span style=color:#f92672>|</span> .com
</code></pre></div><p>解码过程：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>82</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>method: GET
   <span style=color:#ae81ff>86</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>6</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>scheme: http
   <span style=color:#ae81ff>84</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>path: <span style=color:#f92672>/</span>
   <span style=color:#ae81ff>41</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>)
                                           <span style=color:#f92672>|</span>     <span style=color:#f92672>:</span>authority
   <span style=color:#ae81ff>0f</span>                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>15</span>)
   <span style=color:#ae81ff>7777</span> <span style=color:#ae81ff>772</span>e <span style=color:#ae81ff>6578</span> <span style=color:#ae81ff>616</span>d <span style=color:#ae81ff>706</span>c <span style=color:#ae81ff>652</span>e <span style=color:#ae81ff>636f</span> <span style=color:#ae81ff>6</span>d   <span style=color:#f92672>|</span> www.example.com
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>authority:
                                           <span style=color:#f92672>|</span>   www.example.com
</code></pre></div><p>编码后的动态表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   [  <span style=color:#ae81ff>1</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>57</span>) <span style=color:#f92672>:</span>authority: www.example.com
         Table size:  <span style=color:#ae81ff>57</span>
</code></pre></div><p>解码后的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>method: GET
   :scheme: http
   :path: <span style=color:#f92672>/</span>
   <span style=color:#f92672>:</span>authority: www.example.com
</code></pre></div><h3 id=2-第二个请求>(2). 第二个请求</h3><p>需要编码的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>method: GET
   :scheme: http
   :path: <span style=color:#f92672>/</span>
   <span style=color:#f92672>:</span>authority: www.example.com
   cache<span style=color:#f92672>-</span>control: no<span style=color:#f92672>-</span>cache
</code></pre></div><p>编码数据的十六进制表示：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>8286</span> <span style=color:#ae81ff>84</span>be <span style=color:#ae81ff>5808</span> <span style=color:#ae81ff>6e6</span>f <span style=color:#ae81ff>2</span>d63 <span style=color:#ae81ff>6163</span> <span style=color:#ae81ff>6865</span>      <span style=color:#f92672>|</span> ....X.no<span style=color:#f92672>-</span>cache
</code></pre></div><p>解码过程：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>82</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>method: GET
   <span style=color:#ae81ff>86</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>6</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>scheme: http
   <span style=color:#ae81ff>84</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>path: <span style=color:#f92672>/</span>
   be                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>62</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>authority:
                                           <span style=color:#f92672>|</span>   www.example.com
   <span style=color:#ae81ff>58</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>24</span>)
                                           <span style=color:#f92672>|</span>     cache<span style=color:#f92672>-</span>control
   <span style=color:#ae81ff>08</span>                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>8</span>)
   <span style=color:#ae81ff>6e6</span>f <span style=color:#ae81ff>2</span>d63 <span style=color:#ae81ff>6163</span> <span style=color:#ae81ff>6865</span>                     <span style=color:#f92672>|</span> no<span style=color:#f92672>-</span>cache
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> cache<span style=color:#f92672>-</span>control: no<span style=color:#f92672>-</span>cache
</code></pre></div><p>编码后的动态表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   [  <span style=color:#ae81ff>1</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>53</span>) cache<span style=color:#f92672>-</span>control: no<span style=color:#f92672>-</span>cache
   [  <span style=color:#ae81ff>2</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>57</span>) <span style=color:#f92672>:</span>authority: www.example.com
         Table size: <span style=color:#ae81ff>110</span>
</code></pre></div><p>解码后的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>method: GET
   :scheme: http
   :path: <span style=color:#f92672>/</span>
   <span style=color:#f92672>:</span>authority: www.example.com
   cache<span style=color:#f92672>-</span>control: no<span style=color:#f92672>-</span>cache
</code></pre></div><h3 id=3-第三个请求>(3). 第三个请求</h3><p>需要编码的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>method: GET
   :scheme: https
   :path: <span style=color:#f92672>/</span>index.html
   :authority: www.example.com
   custom<span style=color:#f92672>-</span>key: custom<span style=color:#f92672>-</span>value
</code></pre></div><p>编码数据的十六进制表示：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>8287</span> <span style=color:#ae81ff>85</span>bf <span style=color:#ae81ff>400</span>a <span style=color:#ae81ff>6375</span> <span style=color:#ae81ff>7374</span> <span style=color:#ae81ff>6f</span><span style=color:#ae81ff>6</span>d <span style=color:#ae81ff>2</span>d6b <span style=color:#ae81ff>6579</span> <span style=color:#f92672>|</span> ....<span style=color:#960050;background-color:#1e0010>@</span>.custom<span style=color:#f92672>-</span>key
   <span style=color:#ae81ff>0</span>c63 <span style=color:#ae81ff>7573</span> <span style=color:#ae81ff>746f</span> <span style=color:#ae81ff>6</span>d2d <span style=color:#ae81ff>7661</span> <span style=color:#ae81ff>6</span>c75 <span style=color:#ae81ff>65</span>        <span style=color:#f92672>|</span> .custom<span style=color:#f92672>-</span>value
</code></pre></div><p>解码过程：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>82</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>method: GET
   <span style=color:#ae81ff>87</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>7</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>scheme: https
   <span style=color:#ae81ff>85</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>path: <span style=color:#f92672>/</span>index.html
   bf                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>63</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>authority:
                                           <span style=color:#f92672>|</span>   www.example.com
   <span style=color:#ae81ff>40</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
   <span style=color:#ae81ff>0</span>a                                      <span style=color:#f92672>|</span>   Literal name (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>)
   <span style=color:#ae81ff>6375</span> <span style=color:#ae81ff>7374</span> <span style=color:#ae81ff>6f</span><span style=color:#ae81ff>6</span>d <span style=color:#ae81ff>2</span>d6b <span style=color:#ae81ff>6579</span>                <span style=color:#f92672>|</span> custom<span style=color:#f92672>-</span>key
   <span style=color:#ae81ff>0</span>c                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>12</span>)
   <span style=color:#ae81ff>6375</span> <span style=color:#ae81ff>7374</span> <span style=color:#ae81ff>6f</span><span style=color:#ae81ff>6</span>d <span style=color:#ae81ff>2</span>d76 <span style=color:#ae81ff>616</span>c <span style=color:#ae81ff>7565</span>           <span style=color:#f92672>|</span> custom<span style=color:#f92672>-</span>value
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> custom<span style=color:#f92672>-</span>key:
                                           <span style=color:#f92672>|</span>   custom<span style=color:#f92672>-</span>value
</code></pre></div><p>编码后的动态表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   [  <span style=color:#ae81ff>1</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>54</span>) custom<span style=color:#f92672>-</span>key: custom<span style=color:#f92672>-</span>value
   [  <span style=color:#ae81ff>2</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>53</span>) cache<span style=color:#f92672>-</span>control: no<span style=color:#f92672>-</span>cache
   [  <span style=color:#ae81ff>3</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>57</span>) <span style=color:#f92672>:</span>authority: www.example.com
         Table size: <span style=color:#ae81ff>164</span>
</code></pre></div><p>解码后的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>method: GET
   :scheme: https
   :path: <span style=color:#f92672>/</span>index.html
   :authority: www.example.com
   custom<span style=color:#f92672>-</span>key: custom<span style=color:#f92672>-</span>value
</code></pre></div><h3 id=4-有霍夫曼编码请求的示例>4. 有霍夫曼编码请求的示例</h3><p>本节显示与上一节相同的示例，但对字面值 value 使用霍夫曼编码。</p><h3 id=1-第一个请求-1>(1). 第一个请求</h3><p>需要编码的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>method: GET
   :scheme: http
   :path: <span style=color:#f92672>/</span>
   <span style=color:#f92672>:</span>authority: www.example.com
</code></pre></div><p>编码数据的十六进制表示：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>8286</span> <span style=color:#ae81ff>8441</span> <span style=color:#ae81ff>8</span>cf1 e3c2 e5f2 <span style=color:#ae81ff>3</span>a6b a0ab <span style=color:#ae81ff>90f</span><span style=color:#ae81ff>4</span> <span style=color:#f92672>|</span> ...A......<span style=color:#f92672>:</span>k....
   ff                                      <span style=color:#f92672>|</span> .
</code></pre></div><p>解码过程：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>82</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>method: GET
   <span style=color:#ae81ff>86</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>6</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>scheme: http
   <span style=color:#ae81ff>84</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>path: <span style=color:#f92672>/</span>
   <span style=color:#ae81ff>41</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>)
                                           <span style=color:#f92672>|</span>     <span style=color:#f92672>:</span>authority
   <span style=color:#ae81ff>8</span>c                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>12</span>)
                                           <span style=color:#f92672>|</span>     Huffman encoded:
   f1e3 c2e5 f23a <span style=color:#ae81ff>6</span>ba0 ab90 f4ff           <span style=color:#f92672>|</span> .....<span style=color:#f92672>:</span>k.....
                                           <span style=color:#f92672>|</span>     Decoded:
                                           <span style=color:#f92672>|</span> www.example.com
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>authority:
                                           <span style=color:#f92672>|</span>   www.example.com
</code></pre></div><p>编码后的动态表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   [  <span style=color:#ae81ff>1</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>57</span>) <span style=color:#f92672>:</span>authority: www.example.com
         Table size:  <span style=color:#ae81ff>57</span>
</code></pre></div><p>解码后的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>method: GET
   :scheme: http
   :path: <span style=color:#f92672>/</span>
   <span style=color:#f92672>:</span>authority: www.example.com
</code></pre></div><h3 id=2-第二个请求-1>(2). 第二个请求</h3><p>需要编码的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>method: GET
   :scheme: http
   :path: <span style=color:#f92672>/</span>
   <span style=color:#f92672>:</span>authority: www.example.com
   cache<span style=color:#f92672>-</span>control: no<span style=color:#f92672>-</span>cache
</code></pre></div><p>编码数据的十六进制表示：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>8286</span> <span style=color:#ae81ff>84</span>be <span style=color:#ae81ff>5886</span> a8eb <span style=color:#ae81ff>1064</span> <span style=color:#ae81ff>9</span>cbf           <span style=color:#f92672>|</span> ....X....d..
</code></pre></div><p>解码过程：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>82</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>method: GET
   <span style=color:#ae81ff>86</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>6</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>scheme: http
   <span style=color:#ae81ff>84</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>path: <span style=color:#f92672>/</span>
   be                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>62</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>authority:
                                           <span style=color:#f92672>|</span>   www.example.com
   <span style=color:#ae81ff>58</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>24</span>)
                                           <span style=color:#f92672>|</span>     cache<span style=color:#f92672>-</span>control
   <span style=color:#ae81ff>86</span>                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>6</span>)
                                           <span style=color:#f92672>|</span>     Huffman encoded:
   a8eb <span style=color:#ae81ff>1064</span> <span style=color:#ae81ff>9</span>cbf                          <span style=color:#f92672>|</span> ...d..
                                           <span style=color:#f92672>|</span>     Decoded:
                                           <span style=color:#f92672>|</span> no<span style=color:#f92672>-</span>cache
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> cache<span style=color:#f92672>-</span>control: no<span style=color:#f92672>-</span>cache
</code></pre></div><p>编码后的动态表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   [  <span style=color:#ae81ff>1</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>53</span>) cache<span style=color:#f92672>-</span>control: no<span style=color:#f92672>-</span>cache
   [  <span style=color:#ae81ff>2</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>57</span>) <span style=color:#f92672>:</span>authority: www.example.com
         Table size: <span style=color:#ae81ff>110</span>
</code></pre></div><p>解码后的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>method: GET
   :scheme: http
   :path: <span style=color:#f92672>/</span>
   <span style=color:#f92672>:</span>authority: www.example.com
   cache<span style=color:#f92672>-</span>control: no<span style=color:#f92672>-</span>cache
</code></pre></div><h3 id=3-第三个请求-1>(3). 第三个请求</h3><p>需要编码的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>method: GET
   :scheme: https
   :path: <span style=color:#f92672>/</span>index.html
   :authority: www.example.com
   custom<span style=color:#f92672>-</span>key: custom<span style=color:#f92672>-</span>value
</code></pre></div><p>编码数据的十六进制表示：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>8287</span> <span style=color:#ae81ff>85</span>bf <span style=color:#ae81ff>4088</span> <span style=color:#ae81ff>25</span>a8 <span style=color:#ae81ff>49e9</span> <span style=color:#ae81ff>5</span>ba9 <span style=color:#ae81ff>7</span>d7f <span style=color:#ae81ff>8925</span> <span style=color:#f92672>|</span> ....<span style=color:#960050;background-color:#1e0010>@</span>.<span style=color:#f92672>%</span>.I.[.}..<span style=color:#f92672>%</span>
   a849 e95b b8e8 b4bf                     <span style=color:#f92672>|</span> .I.[....
</code></pre></div><p>解码过程：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>82</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>method: GET
   <span style=color:#ae81ff>87</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>7</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>scheme: https
   <span style=color:#ae81ff>85</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>path: <span style=color:#f92672>/</span>index.html
   bf                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>63</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>authority:
                                           <span style=color:#f92672>|</span>   www.example.com
   <span style=color:#ae81ff>40</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
   <span style=color:#ae81ff>88</span>                                      <span style=color:#f92672>|</span>   Literal name (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>8</span>)
                                           <span style=color:#f92672>|</span>     Huffman encoded:
   <span style=color:#ae81ff>25</span>a8 <span style=color:#ae81ff>49e9</span> <span style=color:#ae81ff>5</span>ba9 <span style=color:#ae81ff>7</span>d7f                     <span style=color:#f92672>|</span> <span style=color:#f92672>%</span>.I.[.}.
                                           <span style=color:#f92672>|</span>     Decoded:
                                           <span style=color:#f92672>|</span> custom<span style=color:#f92672>-</span>key
   <span style=color:#ae81ff>89</span>                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>9</span>)
                                           <span style=color:#f92672>|</span>     Huffman encoded:
   <span style=color:#ae81ff>25</span>a8 <span style=color:#ae81ff>49e9</span> <span style=color:#ae81ff>5</span>bb8 e8b4 bf                  <span style=color:#f92672>|</span> <span style=color:#f92672>%</span>.I.[....
                                           <span style=color:#f92672>|</span>     Decoded:
                                           <span style=color:#f92672>|</span> custom<span style=color:#f92672>-</span>value
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> custom<span style=color:#f92672>-</span>key:
                                           <span style=color:#f92672>|</span>   custom<span style=color:#f92672>-</span>value
</code></pre></div><p>编码后的动态表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   [  <span style=color:#ae81ff>1</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>54</span>) custom<span style=color:#f92672>-</span>key: custom<span style=color:#f92672>-</span>value
   [  <span style=color:#ae81ff>2</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>53</span>) cache<span style=color:#f92672>-</span>control: no<span style=color:#f92672>-</span>cache
   [  <span style=color:#ae81ff>3</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>57</span>) <span style=color:#f92672>:</span>authority: www.example.com
         Table size: <span style=color:#ae81ff>164</span>
</code></pre></div><p>解码后的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>method: GET
   :scheme: https
   :path: <span style=color:#f92672>/</span>index.html
   :authority: www.example.com
   custom<span style=color:#f92672>-</span>key: custom<span style=color:#f92672>-</span>value
</code></pre></div><h3 id=5-没有霍夫曼编码响应的示例>5. 没有霍夫曼编码响应的示例</h3><p>本节显示了同一连接上对应于 HTTP 响应的几个连续的 header 列表。 HTTP/2 设置参数 SETTINGS_HEADER_TABLE_SIZE 设置为 256 个八位字节的值，导致某些驱逐条目发生。</p><h3 id=1-第一个响应>(1). 第一个响应</h3><p>需要编码的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>302</span>
   cache<span style=color:#f92672>-</span>control: private
   date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span> GMT
   location: https:<span style=color:#75715e>//www.example.com
</span></code></pre></div><p>编码数据的十六进制表示：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>4803</span> <span style=color:#ae81ff>3330</span> <span style=color:#ae81ff>3258</span> <span style=color:#ae81ff>0770</span> <span style=color:#ae81ff>7269</span> <span style=color:#ae81ff>7661</span> <span style=color:#ae81ff>7465</span> <span style=color:#ae81ff>611</span>d <span style=color:#f92672>|</span> H<span style=color:#ae81ff>.302</span>X.privatea.
   <span style=color:#ae81ff>4</span>d6f <span style=color:#ae81ff>6e2</span>c <span style=color:#ae81ff>2032</span> <span style=color:#ae81ff>3120</span> <span style=color:#ae81ff>4f</span><span style=color:#ae81ff>63</span> <span style=color:#ae81ff>7420</span> <span style=color:#ae81ff>3230</span> <span style=color:#ae81ff>3133</span> <span style=color:#f92672>|</span> Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span>
   <span style=color:#ae81ff>2032</span> <span style=color:#ae81ff>303</span>a <span style=color:#ae81ff>3133</span> <span style=color:#ae81ff>3</span>a32 <span style=color:#ae81ff>3120</span> <span style=color:#ae81ff>474</span>d <span style=color:#ae81ff>546</span>e <span style=color:#ae81ff>1768</span> <span style=color:#f92672>|</span>  <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span> GMTn.h
   <span style=color:#ae81ff>7474</span> <span style=color:#ae81ff>7073</span> <span style=color:#ae81ff>3</span>a2f <span style=color:#ae81ff>2f</span><span style=color:#ae81ff>77</span> <span style=color:#ae81ff>7777</span> <span style=color:#ae81ff>2e65</span> <span style=color:#ae81ff>7861</span> <span style=color:#ae81ff>6</span>d70 <span style=color:#f92672>|</span> ttps:<span style=color:#75715e>//www.examp
</span><span style=color:#75715e></span>   <span style=color:#ae81ff>6</span>c65 <span style=color:#ae81ff>2e63</span> <span style=color:#ae81ff>6f</span><span style=color:#ae81ff>6</span>d                          <span style=color:#f92672>|</span> le.com
</code></pre></div><p>解码过程：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>48</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>8</span>)
                                           <span style=color:#f92672>|</span>     <span style=color:#f92672>:</span>status
   <span style=color:#ae81ff>03</span>                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>)
   <span style=color:#ae81ff>3330</span> <span style=color:#ae81ff>32</span>                                 <span style=color:#f92672>|</span> <span style=color:#ae81ff>302</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>302</span>
   <span style=color:#ae81ff>58</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>24</span>)
                                           <span style=color:#f92672>|</span>     cache<span style=color:#f92672>-</span>control
   <span style=color:#ae81ff>07</span>                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>7</span>)
   <span style=color:#ae81ff>7072</span> <span style=color:#ae81ff>6976</span> <span style=color:#ae81ff>6174</span> <span style=color:#ae81ff>65</span>                       <span style=color:#f92672>|</span> private
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> cache<span style=color:#f92672>-</span>control: private
   <span style=color:#ae81ff>61</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>33</span>)
                                           <span style=color:#f92672>|</span>     date
   <span style=color:#ae81ff>1</span>d                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>29</span>)
   <span style=color:#ae81ff>4</span>d6f <span style=color:#ae81ff>6e2</span>c <span style=color:#ae81ff>2032</span> <span style=color:#ae81ff>3120</span> <span style=color:#ae81ff>4f</span><span style=color:#ae81ff>63</span> <span style=color:#ae81ff>7420</span> <span style=color:#ae81ff>3230</span> <span style=color:#ae81ff>3133</span> <span style=color:#f92672>|</span> Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span>
   <span style=color:#ae81ff>2032</span> <span style=color:#ae81ff>303</span>a <span style=color:#ae81ff>3133</span> <span style=color:#ae81ff>3</span>a32 <span style=color:#ae81ff>3120</span> <span style=color:#ae81ff>474</span>d <span style=color:#ae81ff>54</span>        <span style=color:#f92672>|</span>  <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span> GMT
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span>
                                           <span style=color:#f92672>|</span>   <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span> GMT
   <span style=color:#ae81ff>6</span>e                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>46</span>)
   <span style=color:#ae81ff>17</span>                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>23</span>)
   <span style=color:#ae81ff>6874</span> <span style=color:#ae81ff>7470</span> <span style=color:#ae81ff>733</span>a <span style=color:#ae81ff>2f2f</span> <span style=color:#ae81ff>7777</span> <span style=color:#ae81ff>772</span>e <span style=color:#ae81ff>6578</span> <span style=color:#ae81ff>616</span>d <span style=color:#f92672>|</span> https:<span style=color:#75715e>//www.exam
</span><span style=color:#75715e></span>   <span style=color:#ae81ff>706</span>c <span style=color:#ae81ff>652</span>e <span style=color:#ae81ff>636f</span> <span style=color:#ae81ff>6</span>d                       <span style=color:#f92672>|</span> ple.com
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> location:
                                           <span style=color:#f92672>|</span>   https:<span style=color:#75715e>//www.example.com
</span></code></pre></div><p>编码后的动态表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   [  <span style=color:#ae81ff>1</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>63</span>) location: https:<span style=color:#75715e>//www.example.com
</span><span style=color:#75715e></span>   [  <span style=color:#ae81ff>2</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>65</span>) date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span> GMT
   [  <span style=color:#ae81ff>3</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>52</span>) cache<span style=color:#f92672>-</span>control: private
   [  <span style=color:#ae81ff>4</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>42</span>) <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>302</span>
         Table size: <span style=color:#ae81ff>222</span>
</code></pre></div><p>解码后的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>302</span>
   cache<span style=color:#f92672>-</span>control: private
   date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span> GMT
   location: https:<span style=color:#75715e>//www.example.com
</span></code></pre></div><h3 id=2-第二个响应>(2). 第二个响应</h3><p>从动态表中将（“:status”，“302”）header 字段驱逐出可用空间，以允许添加（“:status”，“307”）header 字段。</p><p>需要编码的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>307</span>
   cache<span style=color:#f92672>-</span>control: private
   date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span> GMT
   location: https:<span style=color:#75715e>//www.example.com
</span></code></pre></div><p>编码数据的十六进制表示：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>4803</span> <span style=color:#ae81ff>3330</span> <span style=color:#ae81ff>37</span>c1 c0bf                     <span style=color:#f92672>|</span> H<span style=color:#ae81ff>.307</span>...
</code></pre></div><p>解码过程：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>48</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>8</span>)
                                           <span style=color:#f92672>|</span>     <span style=color:#f92672>:</span>status
   <span style=color:#ae81ff>03</span>                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>)
   <span style=color:#ae81ff>3330</span> <span style=color:#ae81ff>37</span>                                 <span style=color:#f92672>|</span> <span style=color:#ae81ff>307</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-</span> evict: <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>302</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>307</span>
   c1                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>65</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> cache<span style=color:#f92672>-</span>control: private
   c0                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>64</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span>
                                           <span style=color:#f92672>|</span>   <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span> GMT
   bf                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>63</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> location:
                                           <span style=color:#f92672>|</span>   https:<span style=color:#75715e>//www.example.com
</span></code></pre></div><p>编码后的动态表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   [  <span style=color:#ae81ff>1</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>42</span>) <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>307</span>
   [  <span style=color:#ae81ff>2</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>63</span>) location: https:<span style=color:#75715e>//www.example.com
</span><span style=color:#75715e></span>   [  <span style=color:#ae81ff>3</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>65</span>) date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span> GMT
   [  <span style=color:#ae81ff>4</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>52</span>) cache<span style=color:#f92672>-</span>control: private
         Table size: <span style=color:#ae81ff>222</span>
</code></pre></div><p>解码后的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>307</span>
   cache<span style=color:#f92672>-</span>control: private
   date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span> GMT
   location: https:<span style=color:#75715e>//www.example.com
</span></code></pre></div><h3 id=3-第三个响应>(3). 第三个响应</h3><p>在处理此 header 列表期间，会从动态表中逐出几个 header 字段。</p><p>需要编码的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>200</span>
   cache<span style=color:#f92672>-</span>control: private
   date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>22</span> GMT
   location: https:<span style=color:#75715e>//www.example.com
</span><span style=color:#75715e></span>   content<span style=color:#f92672>-</span>encoding: gzip
   set<span style=color:#f92672>-</span>cookie: foo<span style=color:#f92672>=</span>ASDJKHQKBZXOQWEOPIUAXQWEOIU; max<span style=color:#f92672>-</span>age<span style=color:#f92672>=</span><span style=color:#ae81ff>3600</span>; version<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</code></pre></div><p>编码数据的十六进制表示：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>88</span>c1 <span style=color:#ae81ff>611</span>d <span style=color:#ae81ff>4</span>d6f <span style=color:#ae81ff>6e2</span>c <span style=color:#ae81ff>2032</span> <span style=color:#ae81ff>3120</span> <span style=color:#ae81ff>4f</span><span style=color:#ae81ff>63</span> <span style=color:#ae81ff>7420</span> <span style=color:#f92672>|</span> ..a.Mon, <span style=color:#ae81ff>21</span> Oct
   <span style=color:#ae81ff>3230</span> <span style=color:#ae81ff>3133</span> <span style=color:#ae81ff>2032</span> <span style=color:#ae81ff>303</span>a <span style=color:#ae81ff>3133</span> <span style=color:#ae81ff>3</span>a32 <span style=color:#ae81ff>3220</span> <span style=color:#ae81ff>474</span>d <span style=color:#f92672>|</span> <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>22</span> GM
   <span style=color:#ae81ff>54</span>c0 <span style=color:#ae81ff>5</span>a04 <span style=color:#ae81ff>677</span>a <span style=color:#ae81ff>6970</span> <span style=color:#ae81ff>7738</span> <span style=color:#ae81ff>666f</span> <span style=color:#ae81ff>6f</span><span style=color:#ae81ff>3</span>d <span style=color:#ae81ff>4153</span> <span style=color:#f92672>|</span> T.Z.gzipw8foo<span style=color:#f92672>=</span>AS
   <span style=color:#ae81ff>444</span>a <span style=color:#ae81ff>4</span>b48 <span style=color:#ae81ff>514</span>b <span style=color:#ae81ff>425</span>a <span style=color:#ae81ff>584f</span> <span style=color:#ae81ff>5157</span> <span style=color:#ae81ff>454f</span> <span style=color:#ae81ff>5049</span> <span style=color:#f92672>|</span> DJKHQKBZXOQWEOPI
   <span style=color:#ae81ff>5541</span> <span style=color:#ae81ff>5851</span> <span style=color:#ae81ff>5745</span> <span style=color:#ae81ff>4f</span><span style=color:#ae81ff>49</span> <span style=color:#ae81ff>553</span>b <span style=color:#ae81ff>206</span>d <span style=color:#ae81ff>6178</span> <span style=color:#ae81ff>2</span>d61 <span style=color:#f92672>|</span> UAXQWEOIU; max<span style=color:#f92672>-</span>a
   <span style=color:#ae81ff>6765</span> <span style=color:#ae81ff>3</span>d33 <span style=color:#ae81ff>3630</span> <span style=color:#ae81ff>303</span>b <span style=color:#ae81ff>2076</span> <span style=color:#ae81ff>6572</span> <span style=color:#ae81ff>7369</span> <span style=color:#ae81ff>6f</span><span style=color:#ae81ff>6</span>e <span style=color:#f92672>|</span> ge<span style=color:#f92672>=</span><span style=color:#ae81ff>3600</span>; version
   <span style=color:#ae81ff>3</span>d31                                    <span style=color:#f92672>|</span> <span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</code></pre></div><p>解码过程：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>88</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>8</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>200</span>
   c1                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>65</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> cache<span style=color:#f92672>-</span>control: private
   <span style=color:#ae81ff>61</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>33</span>)
                                           <span style=color:#f92672>|</span>     date
   <span style=color:#ae81ff>1</span>d                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>29</span>)
   <span style=color:#ae81ff>4</span>d6f <span style=color:#ae81ff>6e2</span>c <span style=color:#ae81ff>2032</span> <span style=color:#ae81ff>3120</span> <span style=color:#ae81ff>4f</span><span style=color:#ae81ff>63</span> <span style=color:#ae81ff>7420</span> <span style=color:#ae81ff>3230</span> <span style=color:#ae81ff>3133</span> <span style=color:#f92672>|</span> Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span>
   <span style=color:#ae81ff>2032</span> <span style=color:#ae81ff>303</span>a <span style=color:#ae81ff>3133</span> <span style=color:#ae81ff>3</span>a32 <span style=color:#ae81ff>3220</span> <span style=color:#ae81ff>474</span>d <span style=color:#ae81ff>54</span>        <span style=color:#f92672>|</span>  <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>22</span> GMT
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-</span> evict: cache<span style=color:#f92672>-</span>control:
                                           <span style=color:#f92672>|</span>   private
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span>
                                           <span style=color:#f92672>|</span>   <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>22</span> GMT
   c0                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>64</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> location:
                                           <span style=color:#f92672>|</span>   https:<span style=color:#75715e>//www.example.com
</span><span style=color:#75715e></span>   <span style=color:#ae81ff>5</span>a                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>26</span>)
                                           <span style=color:#f92672>|</span>     content<span style=color:#f92672>-</span>encoding
   <span style=color:#ae81ff>04</span>                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>)
   <span style=color:#ae81ff>677</span>a <span style=color:#ae81ff>6970</span>                               <span style=color:#f92672>|</span> gzip
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-</span> evict: date: Mon, <span style=color:#ae81ff>21</span> Oct
                                           <span style=color:#f92672>|</span>    <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span> GMT
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> content<span style=color:#f92672>-</span>encoding: gzip
   <span style=color:#ae81ff>77</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>55</span>)
                                           <span style=color:#f92672>|</span>     set<span style=color:#f92672>-</span>cookie
   <span style=color:#ae81ff>38</span>                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>56</span>)
   <span style=color:#ae81ff>666f</span> <span style=color:#ae81ff>6f</span><span style=color:#ae81ff>3</span>d <span style=color:#ae81ff>4153</span> <span style=color:#ae81ff>444</span>a <span style=color:#ae81ff>4</span>b48 <span style=color:#ae81ff>514</span>b <span style=color:#ae81ff>425</span>a <span style=color:#ae81ff>584f</span> <span style=color:#f92672>|</span> foo<span style=color:#f92672>=</span>ASDJKHQKBZXO
   <span style=color:#ae81ff>5157</span> <span style=color:#ae81ff>454f</span> <span style=color:#ae81ff>5049</span> <span style=color:#ae81ff>5541</span> <span style=color:#ae81ff>5851</span> <span style=color:#ae81ff>5745</span> <span style=color:#ae81ff>4f</span><span style=color:#ae81ff>49</span> <span style=color:#ae81ff>553</span>b <span style=color:#f92672>|</span> QWEOPIUAXQWEOIU;
   <span style=color:#ae81ff>206</span>d <span style=color:#ae81ff>6178</span> <span style=color:#ae81ff>2</span>d61 <span style=color:#ae81ff>6765</span> <span style=color:#ae81ff>3</span>d33 <span style=color:#ae81ff>3630</span> <span style=color:#ae81ff>303</span>b <span style=color:#ae81ff>2076</span> <span style=color:#f92672>|</span>  max<span style=color:#f92672>-</span>age<span style=color:#f92672>=</span><span style=color:#ae81ff>3600</span>; v
   <span style=color:#ae81ff>6572</span> <span style=color:#ae81ff>7369</span> <span style=color:#ae81ff>6f</span><span style=color:#ae81ff>6</span>e <span style=color:#ae81ff>3</span>d31                     <span style=color:#f92672>|</span> ersion<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-</span> evict: location:
                                           <span style=color:#f92672>|</span>   https:<span style=color:#75715e>//www.example.com
</span><span style=color:#75715e></span>                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-</span> evict: <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>307</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> set<span style=color:#f92672>-</span>cookie: foo<span style=color:#f92672>=</span>ASDJKHQ
                                           <span style=color:#f92672>|</span>   KBZXOQWEOPIUAXQWEOIU; ma
                                           <span style=color:#f92672>|</span>   x<span style=color:#f92672>-</span>age<span style=color:#f92672>=</span><span style=color:#ae81ff>3600</span>; version<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</code></pre></div><p>编码后的动态表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   [  <span style=color:#ae81ff>1</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>98</span>) set<span style=color:#f92672>-</span>cookie: foo<span style=color:#f92672>=</span>ASDJKHQKBZXOQWEOPIUAXQWEOIU;
                    max<span style=color:#f92672>-</span>age<span style=color:#f92672>=</span><span style=color:#ae81ff>3600</span>; version<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
   [  <span style=color:#ae81ff>2</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>52</span>) content<span style=color:#f92672>-</span>encoding: gzip
   [  <span style=color:#ae81ff>3</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>65</span>) date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>22</span> GMT
         Table size: <span style=color:#ae81ff>215</span>
</code></pre></div><p>解码后的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>200</span>
   cache<span style=color:#f92672>-</span>control: private
   date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>22</span> GMT
   location: https:<span style=color:#75715e>//www.example.com
</span><span style=color:#75715e></span>   content<span style=color:#f92672>-</span>encoding: gzip
   set<span style=color:#f92672>-</span>cookie: foo<span style=color:#f92672>=</span>ASDJKHQKBZXOQWEOPIUAXQWEOIU; max<span style=color:#f92672>-</span>age<span style=color:#f92672>=</span><span style=color:#ae81ff>3600</span>; version<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</code></pre></div><h3 id=6-有霍夫曼编码响应的示例>6. 有霍夫曼编码响应的示例</h3><p>本节显示与上一节相同的示例，但对字面值使用霍夫曼编码。HTTP/2 设置参数 SETTINGS_HEADER_TABLE_SIZE 设置为 256 个八位字节的值，导致某些驱逐事件发生。驱逐机制使用已解码字面值的长度，因此发生与上一节相同的驱逐。</p><h3 id=1-第一个响应-1>(1). 第一个响应</h3><p>需要编码的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>302</span>
   cache<span style=color:#f92672>-</span>control: private
   date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span> GMT
   location: https:<span style=color:#75715e>//www.example.com
</span></code></pre></div><p>编码数据的十六进制表示：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>4882</span> <span style=color:#ae81ff>6402</span> <span style=color:#ae81ff>5885</span> aec3 <span style=color:#ae81ff>771</span>a <span style=color:#ae81ff>4</span>b61 <span style=color:#ae81ff>96</span>d0 <span style=color:#ae81ff>7</span>abe <span style=color:#f92672>|</span> H.d.X...w.Ka..z.
   <span style=color:#ae81ff>9410</span> <span style=color:#ae81ff>54</span>d4 <span style=color:#ae81ff>44</span>a8 <span style=color:#ae81ff>2005</span> <span style=color:#ae81ff>9504</span> <span style=color:#ae81ff>0</span>b81 <span style=color:#ae81ff>66e0</span> <span style=color:#ae81ff>82</span>a6 <span style=color:#f92672>|</span> ..T.D. .....f...
   <span style=color:#ae81ff>2</span>d1b ff6e <span style=color:#ae81ff>919</span>d <span style=color:#ae81ff>29</span>ad <span style=color:#ae81ff>1718</span> <span style=color:#ae81ff>63</span>c7 <span style=color:#ae81ff>8f</span><span style=color:#ae81ff>0</span>b <span style=color:#ae81ff>97</span>c8 <span style=color:#f92672>|</span> <span style=color:#f92672>-</span>..n..)...c.....
   e9ae <span style=color:#ae81ff>82</span>ae <span style=color:#ae81ff>43</span>d3                          <span style=color:#f92672>|</span> ....C.
</code></pre></div><p>解码过程：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>48</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>8</span>)
                                           <span style=color:#f92672>|</span>     <span style=color:#f92672>:</span>status
   <span style=color:#ae81ff>82</span>                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>)
                                           <span style=color:#f92672>|</span>     Huffman encoded:
   <span style=color:#ae81ff>6402</span>                                    <span style=color:#f92672>|</span> d.
                                           <span style=color:#f92672>|</span>     Decoded:
                                           <span style=color:#f92672>|</span> <span style=color:#ae81ff>302</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>302</span>
   <span style=color:#ae81ff>58</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>24</span>)
                                           <span style=color:#f92672>|</span>     cache<span style=color:#f92672>-</span>control
   <span style=color:#ae81ff>85</span>                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>)
                                           <span style=color:#f92672>|</span>     Huffman encoded:
   aec3 <span style=color:#ae81ff>771</span>a <span style=color:#ae81ff>4</span>b                            <span style=color:#f92672>|</span> ..w.K
                                           <span style=color:#f92672>|</span>     Decoded:
                                           <span style=color:#f92672>|</span> private
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> cache<span style=color:#f92672>-</span>control: private
   <span style=color:#ae81ff>61</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>33</span>)
                                           <span style=color:#f92672>|</span>     date
   <span style=color:#ae81ff>96</span>                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>22</span>)
                                           <span style=color:#f92672>|</span>     Huffman encoded:
   d07a be94 <span style=color:#ae81ff>1054</span> d444 a820 <span style=color:#ae81ff>05</span><span style=color:#ae81ff>95</span> <span style=color:#ae81ff>040</span>b <span style=color:#ae81ff>8166</span> <span style=color:#f92672>|</span> .z...T.D. .....f
   e082 a62d <span style=color:#ae81ff>1</span>bff                          <span style=color:#f92672>|</span> ...<span style=color:#f92672>-</span>..
                                           <span style=color:#f92672>|</span>     Decoded:
                                           <span style=color:#f92672>|</span> Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span>
                                           <span style=color:#f92672>|</span> GMT
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span>
                                           <span style=color:#f92672>|</span>   <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span> GMT
   <span style=color:#ae81ff>6</span>e                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>46</span>)
                                           <span style=color:#f92672>|</span>     location
   <span style=color:#ae81ff>91</span>                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>17</span>)
                                           <span style=color:#f92672>|</span>     Huffman encoded:
   <span style=color:#ae81ff>9</span>d29 ad17 <span style=color:#ae81ff>1863</span> c78f <span style=color:#ae81ff>0</span>b97 c8e9 ae82 ae43 <span style=color:#f92672>|</span> .)...c.........C
   d3                                      <span style=color:#f92672>|</span> .
                                           <span style=color:#f92672>|</span>     Decoded:
                                           <span style=color:#f92672>|</span> https:<span style=color:#75715e>//www.example.com
</span><span style=color:#75715e></span>                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> location:
                                           <span style=color:#f92672>|</span>   https:<span style=color:#75715e>//www.example.com
</span></code></pre></div><p>编码后的动态表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   [  <span style=color:#ae81ff>1</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>63</span>) location: https:<span style=color:#75715e>//www.example.com
</span><span style=color:#75715e></span>   [  <span style=color:#ae81ff>2</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>65</span>) date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span> GMT
   [  <span style=color:#ae81ff>3</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>52</span>) cache<span style=color:#f92672>-</span>control: private
   [  <span style=color:#ae81ff>4</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>42</span>) <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>302</span>
         Table size: <span style=color:#ae81ff>222</span>
</code></pre></div><p>解码后的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>302</span>
   cache<span style=color:#f92672>-</span>control: private
   date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span> GMT
   location: https:<span style=color:#75715e>//www.example.com
</span></code></pre></div><h3 id=2-第二个响应-1>(2). 第二个响应</h3><p>从动态表中将（“:status”，“302”）头字段驱逐出可用空间，以允许添加（“:status”，“307”）header 字段。</p><p>需要编码的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>307</span>
   cache<span style=color:#f92672>-</span>control: private
   date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span> GMT
   location: https:<span style=color:#75715e>//www.example.com
</span></code></pre></div><p>编码数据的十六进制表示：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>4883</span> <span style=color:#ae81ff>640</span>e ffc1 c0bf                     <span style=color:#f92672>|</span> H.d.....
</code></pre></div><p>解码过程：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>48</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>8</span>)
                                           <span style=color:#f92672>|</span>     <span style=color:#f92672>:</span>status
   <span style=color:#ae81ff>83</span>                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>)
                                           <span style=color:#f92672>|</span>     Huffman encoded:
   <span style=color:#ae81ff>640</span>e ff                                 <span style=color:#f92672>|</span> d..
                                           <span style=color:#f92672>|</span>     Decoded:
                                           <span style=color:#f92672>|</span> <span style=color:#ae81ff>307</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-</span> evict: <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>302</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>307</span>
   c1                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>65</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> cache<span style=color:#f92672>-</span>control: private
   c0                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>64</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span>
                                           <span style=color:#f92672>|</span>   <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span> GMT
   bf                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>63</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> location:
                                           <span style=color:#f92672>|</span>   https:<span style=color:#75715e>//www.example.com
</span></code></pre></div><p>编码后的动态表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   [  <span style=color:#ae81ff>1</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>42</span>) <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>307</span>
   [  <span style=color:#ae81ff>2</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>63</span>) location: https:<span style=color:#75715e>//www.example.com
</span><span style=color:#75715e></span>   [  <span style=color:#ae81ff>3</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>65</span>) date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span> GMT
   [  <span style=color:#ae81ff>4</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>52</span>) cache<span style=color:#f92672>-</span>control: private
         Table size: <span style=color:#ae81ff>222</span>
</code></pre></div><p>解码后的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>307</span>
   cache<span style=color:#f92672>-</span>control: private
   date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span> GMT
   location: https:<span style=color:#75715e>//www.example.com
</span></code></pre></div><h3 id=3-第三个响应-1>(3). 第三个响应</h3><p>在处理此 header 列表期间，会从动态表中逐出几个 header 字段。</p><p>需要编码的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>200</span>
   cache<span style=color:#f92672>-</span>control: private
   date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>22</span> GMT
   location: https:<span style=color:#75715e>//www.example.com
</span><span style=color:#75715e></span>   content<span style=color:#f92672>-</span>encoding: gzip
   set<span style=color:#f92672>-</span>cookie: foo<span style=color:#f92672>=</span>ASDJKHQKBZXOQWEOPIUAXQWEOIU; max<span style=color:#f92672>-</span>age<span style=color:#f92672>=</span><span style=color:#ae81ff>3600</span>; version<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</code></pre></div><p>编码数据的十六进制表示：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>88</span>c1 <span style=color:#ae81ff>6196</span> d07a be94 <span style=color:#ae81ff>1054</span> d444 a820 <span style=color:#ae81ff>05</span><span style=color:#ae81ff>95</span> <span style=color:#f92672>|</span> ..a..z...T.D. ..
   <span style=color:#ae81ff>040</span>b <span style=color:#ae81ff>8166</span> e084 a62d <span style=color:#ae81ff>1</span>bff c05a <span style=color:#ae81ff>839</span>b d9ab <span style=color:#f92672>|</span> ...f...<span style=color:#f92672>-</span>...Z....
   <span style=color:#ae81ff>77</span>ad <span style=color:#ae81ff>94e7</span> <span style=color:#ae81ff>821</span>d d7f2 e6c7 b335 dfdf cd5b <span style=color:#f92672>|</span> w.........<span style=color:#ae81ff>.5</span>...[
   <span style=color:#ae81ff>3960</span> d5af <span style=color:#ae81ff>2708</span> <span style=color:#ae81ff>7f</span><span style=color:#ae81ff>36</span> <span style=color:#ae81ff>72</span>c1 ab27 <span style=color:#ae81ff>0f</span>b5 <span style=color:#ae81ff>291f</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>9</span><span style=color:#960050;background-color:#1e0010>`</span>..<span style=color:#960050;background-color:#1e0010>&#39;</span>.<span style=color:#ae81ff>.6</span>r..<span style=color:#960050;background-color:#1e0010>&#39;</span>..).
   <span style=color:#ae81ff>9587</span> <span style=color:#ae81ff>3160</span> <span style=color:#ae81ff>65</span>c0 <span style=color:#ae81ff>03</span>ed <span style=color:#ae81ff>4</span>ee5 b106 <span style=color:#ae81ff>3</span>d50 <span style=color:#ae81ff>07</span>   <span style=color:#f92672>|</span> .<span style=color:#ae81ff>.1</span><span style=color:#960050;background-color:#1e0010>`</span>e...N...<span style=color:#f92672>=</span>P.
</code></pre></div><p>解码过程：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#ae81ff>88</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>8</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>200</span>
   c1                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>65</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> cache<span style=color:#f92672>-</span>control: private
   <span style=color:#ae81ff>61</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>33</span>)
                                           <span style=color:#f92672>|</span>     date
   <span style=color:#ae81ff>96</span>                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>22</span>)
                                           <span style=color:#f92672>|</span>     Huffman encoded:
   d07a be94 <span style=color:#ae81ff>1054</span> d444 a820 <span style=color:#ae81ff>05</span><span style=color:#ae81ff>95</span> <span style=color:#ae81ff>040</span>b <span style=color:#ae81ff>8166</span> <span style=color:#f92672>|</span> .z...T.D. .....f
   e084 a62d <span style=color:#ae81ff>1</span>bff                          <span style=color:#f92672>|</span> ...<span style=color:#f92672>-</span>..
                                           <span style=color:#f92672>|</span>     Decoded:
                                           <span style=color:#f92672>|</span> Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>22</span>
                                           <span style=color:#f92672>|</span> GMT
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-</span> evict: cache<span style=color:#f92672>-</span>control:
                                           <span style=color:#f92672>|</span>   private
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span>
                                           <span style=color:#f92672>|</span>   <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>22</span> GMT
   c0                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Indexed <span style=color:#f92672>-</span> Add <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>64</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> location:
                                           <span style=color:#f92672>|</span>   https:<span style=color:#75715e>//www.example.com
</span><span style=color:#75715e></span>   <span style=color:#ae81ff>5</span>a                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>26</span>)
                                           <span style=color:#f92672>|</span>     content<span style=color:#f92672>-</span>encoding
   <span style=color:#ae81ff>83</span>                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>)
                                           <span style=color:#f92672>|</span>     Huffman encoded:
   <span style=color:#ae81ff>9</span>bd9 ab                                 <span style=color:#f92672>|</span> ...
                                           <span style=color:#f92672>|</span>     Decoded:
                                           <span style=color:#f92672>|</span> gzip
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-</span> evict: date: Mon, <span style=color:#ae81ff>21</span> Oct
                                           <span style=color:#f92672>|</span>    <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>21</span> GMT
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> content<span style=color:#f92672>-</span>encoding: gzip
   <span style=color:#ae81ff>77</span>                                      <span style=color:#f92672>|</span> <span style=color:#f92672>==</span> Literal indexed <span style=color:#f92672>==</span>
                                           <span style=color:#f92672>|</span>   Indexed name (idx <span style=color:#f92672>=</span> <span style=color:#ae81ff>55</span>)
                                           <span style=color:#f92672>|</span>     set<span style=color:#f92672>-</span>cookie
   ad                                      <span style=color:#f92672>|</span>   Literal value (len <span style=color:#f92672>=</span> <span style=color:#ae81ff>45</span>)
                                           <span style=color:#f92672>|</span>     Huffman encoded:
   <span style=color:#ae81ff>94e7</span> <span style=color:#ae81ff>821</span>d d7f2 e6c7 b335 dfdf cd5b <span style=color:#ae81ff>3960</span> <span style=color:#f92672>|</span> ........<span style=color:#ae81ff>.5</span>...[<span style=color:#ae81ff>9</span><span style=color:#960050;background-color:#1e0010>`</span>
   d5af <span style=color:#ae81ff>2708</span> <span style=color:#ae81ff>7f</span><span style=color:#ae81ff>36</span> <span style=color:#ae81ff>72</span>c1 ab27 <span style=color:#ae81ff>0f</span>b5 <span style=color:#ae81ff>291f</span> <span style=color:#ae81ff>9587</span> <span style=color:#f92672>|</span> ..<span style=color:#960050;background-color:#1e0010>&#39;</span>.<span style=color:#ae81ff>.6</span>r..<span style=color:#960050;background-color:#1e0010>&#39;</span>..)...
   <span style=color:#ae81ff>3160</span> <span style=color:#ae81ff>65</span>c0 <span style=color:#ae81ff>03</span>ed <span style=color:#ae81ff>4</span>ee5 b106 <span style=color:#ae81ff>3</span>d50 <span style=color:#ae81ff>07</span>        <span style=color:#f92672>|</span> <span style=color:#ae81ff>1</span><span style=color:#960050;background-color:#1e0010>`</span>e...N...<span style=color:#f92672>=</span>P.
                                           <span style=color:#f92672>|</span>     Decoded:
                                           <span style=color:#f92672>|</span> foo<span style=color:#f92672>=</span>ASDJKHQKBZXOQWEOPIUAXQ
                                           <span style=color:#f92672>|</span> WEOIU; max<span style=color:#f92672>-</span>age<span style=color:#f92672>=</span><span style=color:#ae81ff>3600</span>; versi
                                           <span style=color:#f92672>|</span> on<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-</span> evict: location:
                                           <span style=color:#f92672>|</span>   https:<span style=color:#75715e>//www.example.com
</span><span style=color:#75715e></span>                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-</span> evict: <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>307</span>
                                           <span style=color:#f92672>|</span> <span style=color:#f92672>-&gt;</span> set<span style=color:#f92672>-</span>cookie: foo<span style=color:#f92672>=</span>ASDJKHQ
                                           <span style=color:#f92672>|</span>   KBZXOQWEOPIUAXQWEOIU; ma
                                           <span style=color:#f92672>|</span>   x<span style=color:#f92672>-</span>age<span style=color:#f92672>=</span><span style=color:#ae81ff>3600</span>; version<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</code></pre></div><p>编码后的动态表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   [  <span style=color:#ae81ff>1</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>98</span>) set<span style=color:#f92672>-</span>cookie: foo<span style=color:#f92672>=</span>ASDJKHQKBZXOQWEOPIUAXQWEOIU;
                    max<span style=color:#f92672>-</span>age<span style=color:#f92672>=</span><span style=color:#ae81ff>3600</span>; version<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
   [  <span style=color:#ae81ff>2</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>52</span>) content<span style=color:#f92672>-</span>encoding: gzip
   [  <span style=color:#ae81ff>3</span>] (s <span style=color:#f92672>=</span>  <span style=color:#ae81ff>65</span>) date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>22</span> GMT
         Table size: <span style=color:#ae81ff>215</span>
</code></pre></div><p>解码后的 header 列表：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c>   <span style=color:#f92672>:</span>status: <span style=color:#ae81ff>200</span>
   cache<span style=color:#f92672>-</span>control: private
   date: Mon, <span style=color:#ae81ff>21</span> Oct <span style=color:#ae81ff>2013</span> <span style=color:#ae81ff>20</span><span style=color:#f92672>:</span><span style=color:#ae81ff>13</span><span style=color:#f92672>:</span><span style=color:#ae81ff>22</span> GMT
   location: https:<span style=color:#75715e>//www.example.com
</span><span style=color:#75715e></span>   content<span style=color:#f92672>-</span>encoding: gzip
   set<span style=color:#f92672>-</span>cookie: foo<span style=color:#f92672>=</span>ASDJKHQKBZXOQWEOPIUAXQWEOIU; max<span style=color:#f92672>-</span>age<span style=color:#f92672>=</span><span style=color:#ae81ff>3600</span>; version<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</code></pre></div><h3 id=7-一些抓包的例子>7. 一些抓包的例子</h3><p>先来看看首次请求中 HPACK 是如何压缩 HEADERS 帧中的首部字段的。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/133_8.png alt></p><p>:method:GET 在静态表中的第 2 项。Name 和 Value 都已经存在了。所以直接用 2 即可表示这一项头部字段。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/133_9.png alt></p><p>相同的，:path:/ 在静态表中的第 4 项。Name 和 Value 都已经存在了。所以直接用 4 即可表示这一项头部字段。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/133_10.png alt></p><p>再来看看第二次请求中，同样是 :method:GET，和第一次请求一样，直接用 2 即可表示这一项头部字段。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/133_11.png alt></p><p>回到首次请求中，if-none-match 首部字段，在静态表中的第 41 项，但是静态表里面没有值。根据前一篇文章讲解的 HPACK 算法，压缩串以 01 开头，101001 是 41，10011110，第一个 1 代表是霍夫曼编码，0011110 代表 30，表明 value 是紧接着的 30 个字节里面的内容。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/133_12.png alt></p><p>还是首次请求，user-agent 首部字段，在静态表中的第 58 项，但是静态表里面没有值。根据前一篇文章讲解的 HPACK 算法，压缩串以 01 开头，111010 是 58，11011011，第一个 1 代表是霍夫曼编码，1011011 代表 91，表明 value 是紧接着的 91 个字节里面的内容。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/133_13.png alt></p><p>到了第二次请求中，user-agent 首部字段在动态表中已经存储了 name 和 value 了，所以直接命中动态表中第 86 项。1010110 代表的就是 86。这个例子可以很明显的看到，动态表大幅缩减了 header 大小。</p><p>对比同一个 HTTP/2 连接中的 2 次相同的请求。可以看到首部大小已经大幅减少了。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/133_14.png alt></p><p>在首次请求中，HAPCK 使得原有的头部减少了 44%。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/133_15.png alt></p><p>在第二次请求中，由于补充了动态表，HAPCK 使得原有的头部减少了 97%。</p><h3 id=8-hpack-优化效果>8. HPACK 优化效果</h3><p>最后，让我们用工具具体测试一下 HPACK 的“威力”。可以使用 <a href=https://nghttp2.org/documentation/h2load-howto.html>h2load 工具测试</a>。</p><p>以下分别是 3 个测试用例，第一个测试用例只请求一次，第二个测试用例请求二次，第三个测试用例请求三次，看每次测试用来能缩小头部字段开销。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/133_16_.png alt></p><p>从上图中可以看到，请求越多，头部字段越来越小。</p><table><thead><tr><th align=center>请求次数</th><th align=center>首部字段占比</th><th align=center>节约百分比</th></tr></thead><tbody><tr><td align=center>1</td><td align=center>1.002%</td><td align=center>29.89%</td></tr><tr><td align=center>2</td><td align=center>0.521%</td><td align=center>63.75%</td></tr><tr><td align=center>3</td><td align=center>0.359%</td><td align=center>75.04%</td></tr><tr><td align=center>5</td><td align=center>0.241%</td><td align=center>83.28%</td></tr><tr><td align=center>10</td><td align=center>0.137%</td><td align=center>90.48%</td></tr><tr><td align=center>20</td><td align=center>0.092%</td><td align=center>93.65%</td></tr><tr><td align=center>30</td><td align=center>0.074%</td><td align=center>94.85%</td></tr><tr><td align=center>50</td><td align=center>0.061%</td><td align=center>95.75%</td></tr><tr><td align=center>100</td><td align=center>0.052%</td><td align=center>96.39%</td></tr></tbody></table><p>由此可以看出 HTTP/2 中的 HPACK 算法对 header 整体的压缩率还是非常不错的。</p><hr><p>Reference：</p><p><a href=https://tools.ietf.org/html/rfc7541>RFC 7541</a></p><blockquote><p>GitHub Repo：<a href=https://github.com/halfrost/Halfrost-Field>Halfrost-Field</a></p><p>Follow: <a href=https://github.com/halfrost>halfrost · GitHub</a></p><p>Source: <a href=https://halfrost.com/http2-hpack-example/>https://halfrost.com/http2-hpack-example/</a></p></blockquote><img src=https://img.halfrost.com/wechat-qr-code.png></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=https://books.halfrost.com/>Books</a></li><li><a href=https://github.com/halfrost/Halfrost-Field>Github</a></li><li><a href=https://halfrost.me/>About</a></li><li><a href=/index.xml>RSS</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#一-静态表定义>一. 静态表定义</a></li><li><a href=#二-霍夫曼编码>二. 霍夫曼编码</a><ul><li><a href=#1-霍夫曼算法>1. 霍夫曼算法</a></li><li><a href=#2-霍夫曼编码在-http2-中的定义>2. 霍夫曼编码在 HTTP/2 中的定义</a></li></ul></li><li><a href=#三-例子>三. 例子</a><ul><li><a href=#1-整数表示的示例>1. 整数表示的示例</a></li><li><a href=#1-使用-5-位前缀对-10-进行编码>(1). 使用 5 位前缀对 10 进行编码</a></li><li><a href=#2-使用-5-位前缀对-1337-进行编码>(2). 使用 5 位前缀对 1337 进行编码</a></li><li><a href=#3-从八位字节边界开始对-42-进行编码>(3). 从八位字节边界开始对 42 进行编码</a></li><li><a href=#2-header-字段表示的示例>2. header 字段表示的示例</a></li><li><a href=#1-带索引的字面-header-字段>(1). 带索引的字面 header 字段</a></li><li><a href=#2-没有索引的字面-header-字段>(2). 没有索引的字面 header 字段</a></li><li><a href=#3-从不索引的字面-header-字段>(3). 从不索引的字面 header 字段</a></li><li><a href=#4-索引的-header-字段>(4). 索引的 header 字段</a></li><li><a href=#3-没有霍夫曼编码请求的示例>3. 没有霍夫曼编码请求的示例</a></li><li><a href=#1-第一个请求>(1). 第一个请求</a></li><li><a href=#2-第二个请求>(2). 第二个请求</a></li><li><a href=#3-第三个请求>(3). 第三个请求</a></li><li><a href=#4-有霍夫曼编码请求的示例>4. 有霍夫曼编码请求的示例</a></li><li><a href=#1-第一个请求-1>(1). 第一个请求</a></li><li><a href=#2-第二个请求-1>(2). 第二个请求</a></li><li><a href=#3-第三个请求-1>(3). 第三个请求</a></li><li><a href=#5-没有霍夫曼编码响应的示例>5. 没有霍夫曼编码响应的示例</a></li><li><a href=#1-第一个响应>(1). 第一个响应</a></li><li><a href=#2-第二个响应>(2). 第二个响应</a></li><li><a href=#3-第三个响应>(3). 第三个响应</a></li><li><a href=#6-有霍夫曼编码响应的示例>6. 有霍夫曼编码响应的示例</a></li><li><a href=#1-第一个响应-1>(1). 第一个响应</a></li><li><a href=#2-第二个响应-1>(2). 第二个响应</a></li><li><a href=#3-第三个响应-1>(3). 第三个响应</a></li><li><a href=#7-一些抓包的例子>7. 一些抓包的例子</a></li><li><a href=#8-hpack-优化效果>8. HPACK 优化效果</a></li></ul></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f"><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f&text=HTTP%2f2%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b8%be%e4%be%8b"><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f&title=HTTP%2f2%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b8%be%e4%be%8b"><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f&is_video=false&description=HTTP%2f2%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b8%be%e4%be%8b"><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=HTTP%2f2%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b8%be%e4%be%8b&body=Check out this article: https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f"><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f&title=HTTP%2f2%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b8%be%e4%be%8b"><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f&title=HTTP%2f2%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b8%be%e4%be%8b"><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f&title=HTTP%2f2%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b8%be%e4%be%8b"><i class="fab fa-stumbleupon fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://digg.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f&title=HTTP%2f2%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b8%be%e4%be%8b"><i class="fab fa-digg fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f&name=HTTP%2f2%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b8%be%e4%be%8b&description=%e5%9c%a8%e4%b8%8a%e7%af%87%e6%96%87%e7%ab%a0%e4%b8%ad%ef%bc%8c%e5%85%b7%e4%bd%93%e8%af%b4%e6%98%8e%e4%ba%86%20HPACK%20%e7%ae%97%e6%b3%95%e4%b8%ad%e7%9a%84%208%20%e7%a7%8d%e5%9c%ba%e6%99%af%287%20%e7%a7%8d%20Name-value%20%e7%9a%84%e5%9c%ba%e6%99%af%20%2b%201%20%e7%a7%8d%e5%8a%a8%e6%80%81%e8%a1%a8%e6%9b%b4%e6%96%b0%e5%9c%ba%e6%99%af%29%e3%80%82%0a%20%e5%8a%a8%e6%80%81%e8%a1%a8%e5%a4%a7%e5%b0%8f%e6%9b%b4%e6%96%b0%e6%9c%89%e4%b8%a4%e7%a7%8d%e6%96%b9%e5%bc%8f%ef%bc%8c%e4%b8%80%e7%a7%8d%e6%98%af%e5%9c%a8%20HEADERS%20%e5%b8%a7%e4%b8%ad%e7%9b%b4%e6%8e%a5%e4%bf%ae%e6%94%b9%28%e2%80%9c001%e2%80%9d%203%20%e4%bd%8d%e6%a8%a1%e5%bc%8f%e5%bc%80%e5%a7%8b%29%ef%bc%8c%e5%8f%a6%e5%a4%96%e4%b8%80%e7%a7%8d%e6%96%b9%e5%bc%8f%e6%98%af%e9%80%9a%e8%bf%87%20SETTINGS%20%e5%b8%a7%e4%b8%ad%e7%9a%84%20SETTINGS_HEADER_TABLE_SIZE%20%e4%b8%ad%e8%ae%be%e7%bd%ae%e7%9a%84%e3%80%82%0a%20%e5%9c%a8%e4%bb%8b%e7%bb%8d%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b9%8b%e5%89%8d%ef%bc%8c%e9%9c%80%e8%a6%81%e5%85%88%e6%9d%a5%e7%9c%8b%e7%9c%8b%e9%9d%99%e6%80%81%e8%a1%a8%e7%9a%84%e5%ae%9a%e4%b9%89%e5%92%8c%20HTTP%2f2%20%e4%b8%ad%e9%9c%8d%e5%a4%ab%e6%9b%bc%e7%bc%96%e7%a0%81%e7%9a%84%e5%ae%9a%e4%b9%89%e3%80%82%0a%e4%b8%80.%20%e9%9d%99%e6%80%81%e8%a1%a8%e5%ae%9a%e4%b9%89%20%e9%9d%99%e6%80%81%e8%a1%a8%ef%bc%88%e8%af%b7%e5%8f%82%e9%98%85%e7%ac%ac%202.3.1%20%e8%8a%82%ef%bc%89%e5%8c%85%e5%90%ab%e4%b8%80%e4%b8%aa%e9%a2%84%e5%ae%9a%e4%b9%89%e4%b8%94%e4%b8%8d%e5%8f%af%e6%9b%b4%e6%94%b9%e7%9a%84%20header%20%e5%ad%97%e6%ae%b5%e5%88%97%e8%a1%a8%e3%80%82%0a%e9%9d%99%e6%80%81%e8%a1%a8%e6%98%af%e6%a0%b9%e6%8d%ae%e6%b5%81%e8%a1%8c%e7%bd%91%e7%ab%99%e4%bd%bf%e7%94%a8%e7%9a%84%e6%9c%80%e9%a2%91%e7%b9%81%e7%9a%84%20header%20%e5%ad%97%e6%ae%b5%e5%88%9b%e5%bb%ba%e7%9a%84%ef%bc%8c%e5%b9%b6%e6%b7%bb%e5%8a%a0%e4%ba%86%20HTTP%2f2%20%e7%89%b9%e5%ae%9a%e7%9a%84%e4%bc%aa%20header%20%e5%ad%97%e6%ae%b5%ef%bc%88%e8%af%b7%e5%8f%82%e8%a7%81%20%5bHTTP2%5d%e7%9a%84%208.1.2.1%20%e8%8a%82%ef%bc%89%e3%80%82%e5%af%b9%e4%ba%8e%e5%85%b7%e6%9c%89%e4%b8%80%e4%ba%9b%e9%a2%91%e7%b9%81%e5%80%bc%e7%9a%84%20header%20%e5%ad%97%e6%ae%b5%ef%bc%8c%e4%b8%ba%e6%af%8f%e4%b8%aa%e8%bf%99%e4%ba%9b%e9%a2%91%e7%b9%81%e5%80%bc%e6%b7%bb%e5%8a%a0%e4%ba%86%e4%b8%80%e4%b8%aa%e6%9d%a1%e7%9b%ae%e3%80%82%e5%af%b9%e4%ba%8e%e5%85%b6%e4%bb%96%e6%a0%87%e9%a2%98%e5%ad%97%e6%ae%b5%ef%bc%8c%e6%b7%bb%e5%8a%a0%e4%ba%86%e5%b8%a6%e6%9c%89%e7%a9%ba%e5%80%bc%e7%9a%84%e6%9d%a1%e7%9b%ae%e3%80%82%0a%e8%a1%a8%201%20%e5%88%97%e5%87%ba%e4%ba%86%e6%9e%84%e6%88%90%e9%9d%99%e6%80%81%e8%a1%a8%e7%9a%84%e9%a2%84%e5%ae%9a%e4%b9%89%20header%20%e5%ad%97%e6%ae%b5%ef%bc%8c%e5%b9%b6%e6%8f%90%e4%be%9b%e4%ba%86%e6%af%8f%e4%b8%aa%e6%9d%a1%e7%9b%ae%e7%9a%84%e7%b4%a2%e5%bc%95%e3%80%82%0a%20%20%20Index%20Header%20Name%20Header%20Value%20%20%20%20%201%20%3aauthority%20%20%20%202%20%3amethod%20GET%20%20%203%20%3amethod%20POST%20%20%204%20%3apath%20%2f%20%20%205%20%3apath%20%2findex."><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fnew.halfrost.com%2fhttp2-hpack-example%2f&t=HTTP%2f2%20HPACK%20%e5%ae%9e%e9%99%85%e5%ba%94%e7%94%a8%e4%b8%be%e4%be%8b"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu class=icon href=# onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden=true></i>Menu</a>
<a id=toc class=icon href=# onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden=true></i>TOC</a>
<a id=share class=icon href=# onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden=true></i>share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i>Top</a></div></div></div><footer id=footer><div class=footer-left><p class=copyright style=float:left;margin-bottom:0><a href=https://github.com/halfrost/Halfrost-Field class=github-repo style=height:18px><span class=gadget-github></span>Star</a>
Copyright &copy;halfrost 2016 - 2021
<a href=http://www.miit.gov.cn/>鄂ICP备16014744号</a></p><br><p class="copyright statistics" style=margin-bottom:20px><span id=busuanzi_container_site_pv>Cumulative Page Views <span id=busuanzi_value_site_pv></span>| Unique Visitors <span id=busuanzi_value_site_uv></span></span></p></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script><script src=/main.min.f870a4d110314b9e50e65f8ac982dc1c9c376c8f1a5083d39c62cfc49073f011.js></script><script async src=/prism.js></script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]},svg:{fontCache:'global'}};</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></html>