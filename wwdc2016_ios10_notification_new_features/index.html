<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=theme-color content="#FFFFFF"><meta http-equiv=x-ua-compatible content="IE=edge"><title>WWDC 2016 Session 笔记 - iOS 10 推送 Notification 新特性 | prometheus</title><meta name=description content="Explore in every moment of the hard thinking"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="WWDC 2016 Session 笔记 - iOS 10 推送 Notification 新特性"><meta property="og:description" content="前言 在今年6月14号苹果WWDC开发者大会上，苹果带来了新的iOS系统——iOS 10。苹果为iOS 10带来了十大项更新。苹果高级副总裁Craig Federighi称此次对iOS的更新是“苹果史上最大的iOS更新”。
 新的屏幕通知查看方式：苹果为iOS 10带来了全新的通知查看功能，即抬起iPhone的屏幕，用户就能看到目前的通知和更新情况。 苹果将Siri开放给第三方开发者: 现在用户可以让Siri实现更多的功能，例如让Siri向自己的联系人发送微信信息等。目前Siri可以直接支持的应用有微信、WhatsApp以及Uber、滴滴、Skype等。 Siri将会更加智能：Siri将拥有更多对语境的意识。基于用户的地点、日历、联系人、联系地址等，Siri会做出智能建议。Siri将越来越成为一个人工智能机器人，具备深度学习功能。 照片应用更新：基于深度学习技术，iOS 10对照片应用有比较大的更新。iOS 10对照片的搜索能力进一步增强，可以检测到新的人物和景色。未来的iPhone能够将相关的照片组织在一起，比如某次旅行的照片、某个周末的照片，并且能够进行自动编辑。iOS 10照片还新增了一个“记忆”标签。 苹果地图：有点类似Siri和照片的更新，苹果地图也增加了很多预测功能，例如苹果地图能够将提供附近的餐厅建议。苹果地图的界面也得到了重新设计，更加的简洁，并增加了交通实时信息。新的苹果地图还将整合在苹果CarPlay中，将为用户提供turn-by-turn导航功能。和Siri一样，地图也将开放给开发者。 苹果音乐：苹果音乐的界面得到了更新，界面会更加简洁、支持多任务，增加最近播放列表。苹果音乐现在已经有1500万付费用户。 HomeKit：iOS 10新增智能家庭应用，支持一键场景模式，HomeKit可以与Siri相连接。  苹果电话：苹果更新了电话功能，来电时可以区别出骚扰电话。
 iMesseage：在iMessage方面，用户可以直接在文本框内发送视频、链接，分享实时照片。另外，苹果还增添了表情预测功能，打出的文字若和表情相符，将会直接推荐相关表情。  以下是我关于关于iOS 10中变化比较大的推送通知的学习笔记。
####目录
 1.Notification User Interface 2.Media Attachments 3.Customize user interface 4.Customize Actions  一. Notification User Interface 让我们先来看看用户推送在iOS X中的样子，如下图
上图这是在锁屏界面下的推送。支持抬起手机唤醒功能。
上图是Banner，可以看到这个推送更加的易读，并且包含更多的内容。
上图是通知中心。从上面三种图可以看到，它们都长一个样。
在iOS 8 中，我们可以给推送增加用户操作，这样使推送更加具有交互性，并且允许用户去处理用户推送更加的迅速。到了iOS 9 中，苹果又再次增加了快速回复功能，进一步的提高了通知的响应性。开发者可以允许用户通过点击推送，并用文字进行回复。再就到了iOS 10 中，推送变得更加给力。因为在iOS X中，推送对iOS系统来说，是很重要的一部分。在日常使用中，我们会经常和推送打交道。推送是我们和设备进行互动非常重要的方式。
在iOS X 中，你可以按压推送，推送就会被展开，展示出更加详细的用户界面。展示出来的详细界面对用户来说，提供了更加有用的信息。用户可以通过点击下面的按钮，来处理一些事件，并且推送的详细界面也会跟着用户的操作进行更新UI界面。
iOS 8 中iMessage支持了快速回复功能，但是你只能看见一条信息，并且你也只能回复一条信息。但是在iOS X中，你可以展开推送，这个时候你就可以看到整个对话的内容了。你可以等待你的朋友回复，你再回复他，并且可以回复很多条。
以上就是iOS X的强大功能。以上的所有功能都能通过iOS X的新API来实现。所有的新特性都能在我们开发者开发的app里面有所体现。
二. Media Attachments 如果经常使用iMessage的朋友们，就会经常收到一些信息，附带了一些照片或者视频，所以推送中能附带这些多媒体是非常重要的。如果推送中包含了这些多媒体信息，可以使用户不用打开app，不用下载就可以快速浏览到内容。众所周知，推送通知中带了push payload，及时去年苹果已经把payload的size提升到了4k bites，但是这么小的容量也无法使用户能发送一张高清的图片，甚至把这张图的缩略图包含在推送通知里面，也不一定放的下去。在iOS X中，我们可以使用新特性来解决这个问题。我们可以通过新的service extensions来解决这个问题。"><meta property="og:type" content="article"><meta property="og:url" content="https://new.halfrost.com/wwdc2016_ios10_notification_new_features/"><meta property="article:published_time" content="2016-06-26T06:22:00+00:00"><meta property="article:modified_time" content="2016-06-26T06:22:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="WWDC 2016 Session 笔记 - iOS 10 推送 Notification 新特性"><meta name=twitter:description content="前言 在今年6月14号苹果WWDC开发者大会上，苹果带来了新的iOS系统——iOS 10。苹果为iOS 10带来了十大项更新。苹果高级副总裁Craig Federighi称此次对iOS的更新是“苹果史上最大的iOS更新”。
 新的屏幕通知查看方式：苹果为iOS 10带来了全新的通知查看功能，即抬起iPhone的屏幕，用户就能看到目前的通知和更新情况。 苹果将Siri开放给第三方开发者: 现在用户可以让Siri实现更多的功能，例如让Siri向自己的联系人发送微信信息等。目前Siri可以直接支持的应用有微信、WhatsApp以及Uber、滴滴、Skype等。 Siri将会更加智能：Siri将拥有更多对语境的意识。基于用户的地点、日历、联系人、联系地址等，Siri会做出智能建议。Siri将越来越成为一个人工智能机器人，具备深度学习功能。 照片应用更新：基于深度学习技术，iOS 10对照片应用有比较大的更新。iOS 10对照片的搜索能力进一步增强，可以检测到新的人物和景色。未来的iPhone能够将相关的照片组织在一起，比如某次旅行的照片、某个周末的照片，并且能够进行自动编辑。iOS 10照片还新增了一个“记忆”标签。 苹果地图：有点类似Siri和照片的更新，苹果地图也增加了很多预测功能，例如苹果地图能够将提供附近的餐厅建议。苹果地图的界面也得到了重新设计，更加的简洁，并增加了交通实时信息。新的苹果地图还将整合在苹果CarPlay中，将为用户提供turn-by-turn导航功能。和Siri一样，地图也将开放给开发者。 苹果音乐：苹果音乐的界面得到了更新，界面会更加简洁、支持多任务，增加最近播放列表。苹果音乐现在已经有1500万付费用户。 HomeKit：iOS 10新增智能家庭应用，支持一键场景模式，HomeKit可以与Siri相连接。  苹果电话：苹果更新了电话功能，来电时可以区别出骚扰电话。
 iMesseage：在iMessage方面，用户可以直接在文本框内发送视频、链接，分享实时照片。另外，苹果还增添了表情预测功能，打出的文字若和表情相符，将会直接推荐相关表情。  以下是我关于关于iOS 10中变化比较大的推送通知的学习笔记。
####目录
 1.Notification User Interface 2.Media Attachments 3.Customize user interface 4.Customize Actions  一. Notification User Interface 让我们先来看看用户推送在iOS X中的样子，如下图
上图这是在锁屏界面下的推送。支持抬起手机唤醒功能。
上图是Banner，可以看到这个推送更加的易读，并且包含更多的内容。
上图是通知中心。从上面三种图可以看到，它们都长一个样。
在iOS 8 中，我们可以给推送增加用户操作，这样使推送更加具有交互性，并且允许用户去处理用户推送更加的迅速。到了iOS 9 中，苹果又再次增加了快速回复功能，进一步的提高了通知的响应性。开发者可以允许用户通过点击推送，并用文字进行回复。再就到了iOS 10 中，推送变得更加给力。因为在iOS X中，推送对iOS系统来说，是很重要的一部分。在日常使用中，我们会经常和推送打交道。推送是我们和设备进行互动非常重要的方式。
在iOS X 中，你可以按压推送，推送就会被展开，展示出更加详细的用户界面。展示出来的详细界面对用户来说，提供了更加有用的信息。用户可以通过点击下面的按钮，来处理一些事件，并且推送的详细界面也会跟着用户的操作进行更新UI界面。
iOS 8 中iMessage支持了快速回复功能，但是你只能看见一条信息，并且你也只能回复一条信息。但是在iOS X中，你可以展开推送，这个时候你就可以看到整个对话的内容了。你可以等待你的朋友回复，你再回复他，并且可以回复很多条。
以上就是iOS X的强大功能。以上的所有功能都能通过iOS X的新API来实现。所有的新特性都能在我们开发者开发的app里面有所体现。
二. Media Attachments 如果经常使用iMessage的朋友们，就会经常收到一些信息，附带了一些照片或者视频，所以推送中能附带这些多媒体是非常重要的。如果推送中包含了这些多媒体信息，可以使用户不用打开app，不用下载就可以快速浏览到内容。众所周知，推送通知中带了push payload，及时去年苹果已经把payload的size提升到了4k bites，但是这么小的容量也无法使用户能发送一张高清的图片，甚至把这张图的缩略图包含在推送通知里面，也不一定放的下去。在iOS X中，我们可以使用新特性来解决这个问题。我们可以通过新的service extensions来解决这个问题。"><link rel=stylesheet href=/css/style-white.min.css><link rel=manifest href=/manifest.json><link rel=stylesheet href=/prism.css><link href=/images/apple-touch-icon-60x60.png rel=apple-touch-icon sizes=60x60><link href=/images/apple-touch-icon-76x76.png rel=apple-touch-icon sizes=76x76><link href=/images/apple-touch-icon-120x120.png rel=apple-touch-icon sizes=120x120><link href=/images/apple-touch-icon-152x152.png rel=apple-touch-icon sizes=152x152><link href=/images/apple-touch-icon-180x180.png rel=apple-touch-icon sizes=180x180><link href=/images/apple-touch-icon-512x512.png rel=apple-touch-icon sizes=512x512><link href=/images/apple-touch-icon-1024x1024.png rel=apple-touch-icon sizes=1024x1024><script async>if('serviceWorker'in navigator){navigator.serviceWorker.register("\/serviceworker-v1.min.a64912b78d282eab1ad3715a0943da21616e5f326f8afea27034784ad445043b.js").then(function(){if(navigator.serviceWorker.controller){console.log('Assets cached by the controlling service worker.');}else{console.log('Please reload this page to allow the service worker to handle network operations.');}}).catch(function(error){console.log('ERROR: '+error);});}else{console.log('Service workers are not supported in the current browser.');}</script><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://new.halfrost.com/images/favicon.ico><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-82753806-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="single-max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a><a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a><a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast');" style=display:none><i class="fas fa-chevron-up fa-lg"></i></a><span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=https://books.halfrost.com/>Books</a></li><li><a href=https://github.com/halfrost/Halfrost-Field>Github</a></li><li><a href=https://halfrost.me/>About</a></li><li><a href=/index.xml>RSS</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://new.halfrost.com/ios_callback_hell_swift/><i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li><li><a class=icon href=https://new.halfrost.com/wwdc2016_ios10_uicollectionview_new_features/><i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li><li><a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');"><i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li><li><a class=icon href=#><i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f"><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f&text=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20iOS%2010%20%e6%8e%a8%e9%80%81%20Notification%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f&title=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20iOS%2010%20%e6%8e%a8%e9%80%81%20Notification%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f&is_video=false&description=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20iOS%2010%20%e6%8e%a8%e9%80%81%20Notification%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20iOS%2010%20%e6%8e%a8%e9%80%81%20Notification%20%e6%96%b0%e7%89%b9%e6%80%a7&body=Check out this article: https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f"><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f&title=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20iOS%2010%20%e6%8e%a8%e9%80%81%20Notification%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f&title=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20iOS%2010%20%e6%8e%a8%e9%80%81%20Notification%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f&title=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20iOS%2010%20%e6%8e%a8%e9%80%81%20Notification%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-stumbleupon" aria-hidden=true></i></a></li><li><a class=icon href="http://digg.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f&title=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20iOS%2010%20%e6%8e%a8%e9%80%81%20Notification%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-digg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f&name=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20iOS%2010%20%e6%8e%a8%e9%80%81%20Notification%20%e6%96%b0%e7%89%b9%e6%80%a7&description=%e5%89%8d%e8%a8%80%20%e5%9c%a8%e4%bb%8a%e5%b9%b46%e6%9c%8814%e5%8f%b7%e8%8b%b9%e6%9e%9cWWDC%e5%bc%80%e5%8f%91%e8%80%85%e5%a4%a7%e4%bc%9a%e4%b8%8a%ef%bc%8c%e8%8b%b9%e6%9e%9c%e5%b8%a6%e6%9d%a5%e4%ba%86%e6%96%b0%e7%9a%84iOS%e7%b3%bb%e7%bb%9f%e2%80%94%e2%80%94iOS%2010%e3%80%82%e8%8b%b9%e6%9e%9c%e4%b8%baiOS%2010%e5%b8%a6%e6%9d%a5%e4%ba%86%e5%8d%81%e5%a4%a7%e9%a1%b9%e6%9b%b4%e6%96%b0%e3%80%82%e8%8b%b9%e6%9e%9c%e9%ab%98%e7%ba%a7%e5%89%af%e6%80%bb%e8%a3%81Craig%20Federighi%e7%a7%b0%e6%ad%a4%e6%ac%a1%e5%af%b9iOS%e7%9a%84%e6%9b%b4%e6%96%b0%e6%98%af%e2%80%9c%e8%8b%b9%e6%9e%9c%e5%8f%b2%e4%b8%8a%e6%9c%80%e5%a4%a7%e7%9a%84iOS%e6%9b%b4%e6%96%b0%e2%80%9d%e3%80%82%0a%20%e6%96%b0%e7%9a%84%e5%b1%8f%e5%b9%95%e9%80%9a%e7%9f%a5%e6%9f%a5%e7%9c%8b%e6%96%b9%e5%bc%8f%ef%bc%9a%e8%8b%b9%e6%9e%9c%e4%b8%baiOS%2010%e5%b8%a6%e6%9d%a5%e4%ba%86%e5%85%a8%e6%96%b0%e7%9a%84%e9%80%9a%e7%9f%a5%e6%9f%a5%e7%9c%8b%e5%8a%9f%e8%83%bd%ef%bc%8c%e5%8d%b3%e6%8a%ac%e8%b5%b7iPhone%e7%9a%84%e5%b1%8f%e5%b9%95%ef%bc%8c%e7%94%a8%e6%88%b7%e5%b0%b1%e8%83%bd%e7%9c%8b%e5%88%b0%e7%9b%ae%e5%89%8d%e7%9a%84%e9%80%9a%e7%9f%a5%e5%92%8c%e6%9b%b4%e6%96%b0%e6%83%85%e5%86%b5%e3%80%82%20%e8%8b%b9%e6%9e%9c%e5%b0%86Siri%e5%bc%80%e6%94%be%e7%bb%99%e7%ac%ac%e4%b8%89%e6%96%b9%e5%bc%80%e5%8f%91%e8%80%85%3a%20%e7%8e%b0%e5%9c%a8%e7%94%a8%e6%88%b7%e5%8f%af%e4%bb%a5%e8%ae%a9Siri%e5%ae%9e%e7%8e%b0%e6%9b%b4%e5%a4%9a%e7%9a%84%e5%8a%9f%e8%83%bd%ef%bc%8c%e4%be%8b%e5%a6%82%e8%ae%a9Siri%e5%90%91%e8%87%aa%e5%b7%b1%e7%9a%84%e8%81%94%e7%b3%bb%e4%ba%ba%e5%8f%91%e9%80%81%e5%be%ae%e4%bf%a1%e4%bf%a1%e6%81%af%e7%ad%89%e3%80%82%e7%9b%ae%e5%89%8dSiri%e5%8f%af%e4%bb%a5%e7%9b%b4%e6%8e%a5%e6%94%af%e6%8c%81%e7%9a%84%e5%ba%94%e7%94%a8%e6%9c%89%e5%be%ae%e4%bf%a1%e3%80%81WhatsApp%e4%bb%a5%e5%8f%8aUber%e3%80%81%e6%bb%b4%e6%bb%b4%e3%80%81Skype%e7%ad%89%e3%80%82%20Siri%e5%b0%86%e4%bc%9a%e6%9b%b4%e5%8a%a0%e6%99%ba%e8%83%bd%ef%bc%9aSiri%e5%b0%86%e6%8b%a5%e6%9c%89%e6%9b%b4%e5%a4%9a%e5%af%b9%e8%af%ad%e5%a2%83%e7%9a%84%e6%84%8f%e8%af%86%e3%80%82%e5%9f%ba%e4%ba%8e%e7%94%a8%e6%88%b7%e7%9a%84%e5%9c%b0%e7%82%b9%e3%80%81%e6%97%a5%e5%8e%86%e3%80%81%e8%81%94%e7%b3%bb%e4%ba%ba%e3%80%81%e8%81%94%e7%b3%bb%e5%9c%b0%e5%9d%80%e7%ad%89%ef%bc%8cSiri%e4%bc%9a%e5%81%9a%e5%87%ba%e6%99%ba%e8%83%bd%e5%bb%ba%e8%ae%ae%e3%80%82Siri%e5%b0%86%e8%b6%8a%e6%9d%a5%e8%b6%8a%e6%88%90%e4%b8%ba%e4%b8%80%e4%b8%aa%e4%ba%ba%e5%b7%a5%e6%99%ba%e8%83%bd%e6%9c%ba%e5%99%a8%e4%ba%ba%ef%bc%8c%e5%85%b7%e5%a4%87%e6%b7%b1%e5%ba%a6%e5%ad%a6%e4%b9%a0%e5%8a%9f%e8%83%bd%e3%80%82%20%e7%85%a7%e7%89%87%e5%ba%94%e7%94%a8%e6%9b%b4%e6%96%b0%ef%bc%9a%e5%9f%ba%e4%ba%8e%e6%b7%b1%e5%ba%a6%e5%ad%a6%e4%b9%a0%e6%8a%80%e6%9c%af%ef%bc%8ciOS%2010%e5%af%b9%e7%85%a7%e7%89%87%e5%ba%94%e7%94%a8%e6%9c%89%e6%af%94%e8%be%83%e5%a4%a7%e7%9a%84%e6%9b%b4%e6%96%b0%e3%80%82iOS%2010%e5%af%b9%e7%85%a7%e7%89%87%e7%9a%84%e6%90%9c%e7%b4%a2%e8%83%bd%e5%8a%9b%e8%bf%9b%e4%b8%80%e6%ad%a5%e5%a2%9e%e5%bc%ba%ef%bc%8c%e5%8f%af%e4%bb%a5%e6%a3%80%e6%b5%8b%e5%88%b0%e6%96%b0%e7%9a%84%e4%ba%ba%e7%89%a9%e5%92%8c%e6%99%af%e8%89%b2%e3%80%82%e6%9c%aa%e6%9d%a5%e7%9a%84iPhone%e8%83%bd%e5%a4%9f%e5%b0%86%e7%9b%b8%e5%85%b3%e7%9a%84%e7%85%a7%e7%89%87%e7%bb%84%e7%bb%87%e5%9c%a8%e4%b8%80%e8%b5%b7%ef%bc%8c%e6%af%94%e5%a6%82%e6%9f%90%e6%ac%a1%e6%97%85%e8%a1%8c%e7%9a%84%e7%85%a7%e7%89%87%e3%80%81%e6%9f%90%e4%b8%aa%e5%91%a8%e6%9c%ab%e7%9a%84%e7%85%a7%e7%89%87%ef%bc%8c%e5%b9%b6%e4%b8%94%e8%83%bd%e5%a4%9f%e8%bf%9b%e8%a1%8c%e8%87%aa%e5%8a%a8%e7%bc%96%e8%be%91%e3%80%82iOS%2010%e7%85%a7%e7%89%87%e8%bf%98%e6%96%b0%e5%a2%9e%e4%ba%86%e4%b8%80%e4%b8%aa%e2%80%9c%e8%ae%b0%e5%bf%86%e2%80%9d%e6%a0%87%e7%ad%be%e3%80%82%20%e8%8b%b9%e6%9e%9c%e5%9c%b0%e5%9b%be%ef%bc%9a%e6%9c%89%e7%82%b9%e7%b1%bb%e4%bc%bcSiri%e5%92%8c%e7%85%a7%e7%89%87%e7%9a%84%e6%9b%b4%e6%96%b0%ef%bc%8c%e8%8b%b9%e6%9e%9c%e5%9c%b0%e5%9b%be%e4%b9%9f%e5%a2%9e%e5%8a%a0%e4%ba%86%e5%be%88%e5%a4%9a%e9%a2%84%e6%b5%8b%e5%8a%9f%e8%83%bd%ef%bc%8c%e4%be%8b%e5%a6%82%e8%8b%b9%e6%9e%9c%e5%9c%b0%e5%9b%be%e8%83%bd%e5%a4%9f%e5%b0%86%e6%8f%90%e4%be%9b%e9%99%84%e8%bf%91%e7%9a%84%e9%a4%90%e5%8e%85%e5%bb%ba%e8%ae%ae%e3%80%82%e8%8b%b9%e6%9e%9c%e5%9c%b0%e5%9b%be%e7%9a%84%e7%95%8c%e9%9d%a2%e4%b9%9f%e5%be%97%e5%88%b0%e4%ba%86%e9%87%8d%e6%96%b0%e8%ae%be%e8%ae%a1%ef%bc%8c%e6%9b%b4%e5%8a%a0%e7%9a%84%e7%ae%80%e6%b4%81%ef%bc%8c%e5%b9%b6%e5%a2%9e%e5%8a%a0%e4%ba%86%e4%ba%a4%e9%80%9a%e5%ae%9e%e6%97%b6%e4%bf%a1%e6%81%af%e3%80%82%e6%96%b0%e7%9a%84%e8%8b%b9%e6%9e%9c%e5%9c%b0%e5%9b%be%e8%bf%98%e5%b0%86%e6%95%b4%e5%90%88%e5%9c%a8%e8%8b%b9%e6%9e%9cCarPlay%e4%b8%ad%ef%bc%8c%e5%b0%86%e4%b8%ba%e7%94%a8%e6%88%b7%e6%8f%90%e4%be%9bturn-by-turn%e5%af%bc%e8%88%aa%e5%8a%9f%e8%83%bd%e3%80%82%e5%92%8cSiri%e4%b8%80%e6%a0%b7%ef%bc%8c%e5%9c%b0%e5%9b%be%e4%b9%9f%e5%b0%86%e5%bc%80%e6%94%be%e7%bb%99%e5%bc%80%e5%8f%91%e8%80%85%e3%80%82%20%e8%8b%b9%e6%9e%9c%e9%9f%b3%e4%b9%90%ef%bc%9a%e8%8b%b9%e6%9e%9c%e9%9f%b3%e4%b9%90%e7%9a%84%e7%95%8c%e9%9d%a2%e5%be%97%e5%88%b0%e4%ba%86%e6%9b%b4%e6%96%b0%ef%bc%8c%e7%95%8c%e9%9d%a2%e4%bc%9a%e6%9b%b4%e5%8a%a0%e7%ae%80%e6%b4%81%e3%80%81%e6%94%af%e6%8c%81%e5%a4%9a%e4%bb%bb%e5%8a%a1%ef%bc%8c%e5%a2%9e%e5%8a%a0%e6%9c%80%e8%bf%91%e6%92%ad%e6%94%be%e5%88%97%e8%a1%a8%e3%80%82%e8%8b%b9%e6%9e%9c%e9%9f%b3%e4%b9%90%e7%8e%b0%e5%9c%a8%e5%b7%b2%e7%bb%8f%e6%9c%891500%e4%b8%87%e4%bb%98%e8%b4%b9%e7%94%a8%e6%88%b7%e3%80%82%20HomeKit%ef%bc%9aiOS%2010%e6%96%b0%e5%a2%9e%e6%99%ba%e8%83%bd%e5%ae%b6%e5%ba%ad%e5%ba%94%e7%94%a8%ef%bc%8c%e6%94%af%e6%8c%81%e4%b8%80%e9%94%ae%e5%9c%ba%e6%99%af%e6%a8%a1%e5%bc%8f%ef%bc%8cHomeKit%e5%8f%af%e4%bb%a5%e4%b8%8eSiri%e7%9b%b8%e8%bf%9e%e6%8e%a5%e3%80%82%20%20%e8%8b%b9%e6%9e%9c%e7%94%b5%e8%af%9d%ef%bc%9a%e8%8b%b9%e6%9e%9c%e6%9b%b4%e6%96%b0%e4%ba%86%e7%94%b5%e8%af%9d%e5%8a%9f%e8%83%bd%ef%bc%8c%e6%9d%a5%e7%94%b5%e6%97%b6%e5%8f%af%e4%bb%a5%e5%8c%ba%e5%88%ab%e5%87%ba%e9%aa%9a%e6%89%b0%e7%94%b5%e8%af%9d%e3%80%82%0a%20iMesseage%ef%bc%9a%e5%9c%a8iMessage%e6%96%b9%e9%9d%a2%ef%bc%8c%e7%94%a8%e6%88%b7%e5%8f%af%e4%bb%a5%e7%9b%b4%e6%8e%a5%e5%9c%a8%e6%96%87%e6%9c%ac%e6%a1%86%e5%86%85%e5%8f%91%e9%80%81%e8%a7%86%e9%a2%91%e3%80%81%e9%93%be%e6%8e%a5%ef%bc%8c%e5%88%86%e4%ba%ab%e5%ae%9e%e6%97%b6%e7%85%a7%e7%89%87%e3%80%82%e5%8f%a6%e5%a4%96%ef%bc%8c%e8%8b%b9%e6%9e%9c%e8%bf%98%e5%a2%9e%e6%b7%bb%e4%ba%86%e8%a1%a8%e6%83%85%e9%a2%84%e6%b5%8b%e5%8a%9f%e8%83%bd%ef%bc%8c%e6%89%93%e5%87%ba%e7%9a%84%e6%96%87%e5%ad%97%e8%8b%a5%e5%92%8c%e8%a1%a8%e6%83%85%e7%9b%b8%e7%ac%a6%ef%bc%8c%e5%b0%86%e4%bc%9a%e7%9b%b4%e6%8e%a5%e6%8e%a8%e8%8d%90%e7%9b%b8%e5%85%b3%e8%a1%a8%e6%83%85%e3%80%82%20%20%e4%bb%a5%e4%b8%8b%e6%98%af%e6%88%91%e5%85%b3%e4%ba%8e%e5%85%b3%e4%ba%8eiOS%2010%e4%b8%ad%e5%8f%98%e5%8c%96%e6%af%94%e8%be%83%e5%a4%a7%e7%9a%84%e6%8e%a8%e9%80%81%e9%80%9a%e7%9f%a5%e7%9a%84%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%e3%80%82%0a%23%23%23%23%e7%9b%ae%e5%bd%95%0a%201.Notification%20User%20Interface%202.Media%20Attachments%203.Customize%20user%20interface%204.Customize%20Actions%20%20%e4%b8%80.%20Notification%20User%20Interface%20%e8%ae%a9%e6%88%91%e4%bb%ac%e5%85%88%e6%9d%a5%e7%9c%8b%e7%9c%8b%e7%94%a8%e6%88%b7%e6%8e%a8%e9%80%81%e5%9c%a8iOS%20X%e4%b8%ad%e7%9a%84%e6%a0%b7%e5%ad%90%ef%bc%8c%e5%a6%82%e4%b8%8b%e5%9b%be%0a%e4%b8%8a%e5%9b%be%e8%bf%99%e6%98%af%e5%9c%a8%e9%94%81%e5%b1%8f%e7%95%8c%e9%9d%a2%e4%b8%8b%e7%9a%84%e6%8e%a8%e9%80%81%e3%80%82%e6%94%af%e6%8c%81%e6%8a%ac%e8%b5%b7%e6%89%8b%e6%9c%ba%e5%94%a4%e9%86%92%e5%8a%9f%e8%83%bd%e3%80%82%0a%e4%b8%8a%e5%9b%be%e6%98%afBanner%ef%bc%8c%e5%8f%af%e4%bb%a5%e7%9c%8b%e5%88%b0%e8%bf%99%e4%b8%aa%e6%8e%a8%e9%80%81%e6%9b%b4%e5%8a%a0%e7%9a%84%e6%98%93%e8%af%bb%ef%bc%8c%e5%b9%b6%e4%b8%94%e5%8c%85%e5%90%ab%e6%9b%b4%e5%a4%9a%e7%9a%84%e5%86%85%e5%ae%b9%e3%80%82%0a%e4%b8%8a%e5%9b%be%e6%98%af%e9%80%9a%e7%9f%a5%e4%b8%ad%e5%bf%83%e3%80%82%e4%bb%8e%e4%b8%8a%e9%9d%a2%e4%b8%89%e7%a7%8d%e5%9b%be%e5%8f%af%e4%bb%a5%e7%9c%8b%e5%88%b0%ef%bc%8c%e5%ae%83%e4%bb%ac%e9%83%bd%e9%95%bf%e4%b8%80%e4%b8%aa%e6%a0%b7%e3%80%82%0a%e5%9c%a8iOS%208%20%e4%b8%ad%ef%bc%8c%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e7%bb%99%e6%8e%a8%e9%80%81%e5%a2%9e%e5%8a%a0%e7%94%a8%e6%88%b7%e6%93%8d%e4%bd%9c%ef%bc%8c%e8%bf%99%e6%a0%b7%e4%bd%bf%e6%8e%a8%e9%80%81%e6%9b%b4%e5%8a%a0%e5%85%b7%e6%9c%89%e4%ba%a4%e4%ba%92%e6%80%a7%ef%bc%8c%e5%b9%b6%e4%b8%94%e5%85%81%e8%ae%b8%e7%94%a8%e6%88%b7%e5%8e%bb%e5%a4%84%e7%90%86%e7%94%a8%e6%88%b7%e6%8e%a8%e9%80%81%e6%9b%b4%e5%8a%a0%e7%9a%84%e8%bf%85%e9%80%9f%e3%80%82%e5%88%b0%e4%ba%86iOS%209%20%e4%b8%ad%ef%bc%8c%e8%8b%b9%e6%9e%9c%e5%8f%88%e5%86%8d%e6%ac%a1%e5%a2%9e%e5%8a%a0%e4%ba%86%e5%bf%ab%e9%80%9f%e5%9b%9e%e5%a4%8d%e5%8a%9f%e8%83%bd%ef%bc%8c%e8%bf%9b%e4%b8%80%e6%ad%a5%e7%9a%84%e6%8f%90%e9%ab%98%e4%ba%86%e9%80%9a%e7%9f%a5%e7%9a%84%e5%93%8d%e5%ba%94%e6%80%a7%e3%80%82%e5%bc%80%e5%8f%91%e8%80%85%e5%8f%af%e4%bb%a5%e5%85%81%e8%ae%b8%e7%94%a8%e6%88%b7%e9%80%9a%e8%bf%87%e7%82%b9%e5%87%bb%e6%8e%a8%e9%80%81%ef%bc%8c%e5%b9%b6%e7%94%a8%e6%96%87%e5%ad%97%e8%bf%9b%e8%a1%8c%e5%9b%9e%e5%a4%8d%e3%80%82%e5%86%8d%e5%b0%b1%e5%88%b0%e4%ba%86iOS%2010%20%e4%b8%ad%ef%bc%8c%e6%8e%a8%e9%80%81%e5%8f%98%e5%be%97%e6%9b%b4%e5%8a%a0%e7%bb%99%e5%8a%9b%e3%80%82%e5%9b%a0%e4%b8%ba%e5%9c%a8iOS%20X%e4%b8%ad%ef%bc%8c%e6%8e%a8%e9%80%81%e5%af%b9iOS%e7%b3%bb%e7%bb%9f%e6%9d%a5%e8%af%b4%ef%bc%8c%e6%98%af%e5%be%88%e9%87%8d%e8%a6%81%e7%9a%84%e4%b8%80%e9%83%a8%e5%88%86%e3%80%82%e5%9c%a8%e6%97%a5%e5%b8%b8%e4%bd%bf%e7%94%a8%e4%b8%ad%ef%bc%8c%e6%88%91%e4%bb%ac%e4%bc%9a%e7%bb%8f%e5%b8%b8%e5%92%8c%e6%8e%a8%e9%80%81%e6%89%93%e4%ba%a4%e9%81%93%e3%80%82%e6%8e%a8%e9%80%81%e6%98%af%e6%88%91%e4%bb%ac%e5%92%8c%e8%ae%be%e5%a4%87%e8%bf%9b%e8%a1%8c%e4%ba%92%e5%8a%a8%e9%9d%9e%e5%b8%b8%e9%87%8d%e8%a6%81%e7%9a%84%e6%96%b9%e5%bc%8f%e3%80%82%0a%e5%9c%a8iOS%20X%20%e4%b8%ad%ef%bc%8c%e4%bd%a0%e5%8f%af%e4%bb%a5%e6%8c%89%e5%8e%8b%e6%8e%a8%e9%80%81%ef%bc%8c%e6%8e%a8%e9%80%81%e5%b0%b1%e4%bc%9a%e8%a2%ab%e5%b1%95%e5%bc%80%ef%bc%8c%e5%b1%95%e7%a4%ba%e5%87%ba%e6%9b%b4%e5%8a%a0%e8%af%a6%e7%bb%86%e7%9a%84%e7%94%a8%e6%88%b7%e7%95%8c%e9%9d%a2%e3%80%82%e5%b1%95%e7%a4%ba%e5%87%ba%e6%9d%a5%e7%9a%84%e8%af%a6%e7%bb%86%e7%95%8c%e9%9d%a2%e5%af%b9%e7%94%a8%e6%88%b7%e6%9d%a5%e8%af%b4%ef%bc%8c%e6%8f%90%e4%be%9b%e4%ba%86%e6%9b%b4%e5%8a%a0%e6%9c%89%e7%94%a8%e7%9a%84%e4%bf%a1%e6%81%af%e3%80%82%e7%94%a8%e6%88%b7%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%e7%82%b9%e5%87%bb%e4%b8%8b%e9%9d%a2%e7%9a%84%e6%8c%89%e9%92%ae%ef%bc%8c%e6%9d%a5%e5%a4%84%e7%90%86%e4%b8%80%e4%ba%9b%e4%ba%8b%e4%bb%b6%ef%bc%8c%e5%b9%b6%e4%b8%94%e6%8e%a8%e9%80%81%e7%9a%84%e8%af%a6%e7%bb%86%e7%95%8c%e9%9d%a2%e4%b9%9f%e4%bc%9a%e8%b7%9f%e7%9d%80%e7%94%a8%e6%88%b7%e7%9a%84%e6%93%8d%e4%bd%9c%e8%bf%9b%e8%a1%8c%e6%9b%b4%e6%96%b0UI%e7%95%8c%e9%9d%a2%e3%80%82%0aiOS%208%20%e4%b8%adiMessage%e6%94%af%e6%8c%81%e4%ba%86%e5%bf%ab%e9%80%9f%e5%9b%9e%e5%a4%8d%e5%8a%9f%e8%83%bd%ef%bc%8c%e4%bd%86%e6%98%af%e4%bd%a0%e5%8f%aa%e8%83%bd%e7%9c%8b%e8%a7%81%e4%b8%80%e6%9d%a1%e4%bf%a1%e6%81%af%ef%bc%8c%e5%b9%b6%e4%b8%94%e4%bd%a0%e4%b9%9f%e5%8f%aa%e8%83%bd%e5%9b%9e%e5%a4%8d%e4%b8%80%e6%9d%a1%e4%bf%a1%e6%81%af%e3%80%82%e4%bd%86%e6%98%af%e5%9c%a8iOS%20X%e4%b8%ad%ef%bc%8c%e4%bd%a0%e5%8f%af%e4%bb%a5%e5%b1%95%e5%bc%80%e6%8e%a8%e9%80%81%ef%bc%8c%e8%bf%99%e4%b8%aa%e6%97%b6%e5%80%99%e4%bd%a0%e5%b0%b1%e5%8f%af%e4%bb%a5%e7%9c%8b%e5%88%b0%e6%95%b4%e4%b8%aa%e5%af%b9%e8%af%9d%e7%9a%84%e5%86%85%e5%ae%b9%e4%ba%86%e3%80%82%e4%bd%a0%e5%8f%af%e4%bb%a5%e7%ad%89%e5%be%85%e4%bd%a0%e7%9a%84%e6%9c%8b%e5%8f%8b%e5%9b%9e%e5%a4%8d%ef%bc%8c%e4%bd%a0%e5%86%8d%e5%9b%9e%e5%a4%8d%e4%bb%96%ef%bc%8c%e5%b9%b6%e4%b8%94%e5%8f%af%e4%bb%a5%e5%9b%9e%e5%a4%8d%e5%be%88%e5%a4%9a%e6%9d%a1%e3%80%82%0a%e4%bb%a5%e4%b8%8a%e5%b0%b1%e6%98%afiOS%20X%e7%9a%84%e5%bc%ba%e5%a4%a7%e5%8a%9f%e8%83%bd%e3%80%82%e4%bb%a5%e4%b8%8a%e7%9a%84%e6%89%80%e6%9c%89%e5%8a%9f%e8%83%bd%e9%83%bd%e8%83%bd%e9%80%9a%e8%bf%87iOS%20X%e7%9a%84%e6%96%b0API%e6%9d%a5%e5%ae%9e%e7%8e%b0%e3%80%82%e6%89%80%e6%9c%89%e7%9a%84%e6%96%b0%e7%89%b9%e6%80%a7%e9%83%bd%e8%83%bd%e5%9c%a8%e6%88%91%e4%bb%ac%e5%bc%80%e5%8f%91%e8%80%85%e5%bc%80%e5%8f%91%e7%9a%84app%e9%87%8c%e9%9d%a2%e6%9c%89%e6%89%80%e4%bd%93%e7%8e%b0%e3%80%82%0a%e4%ba%8c.%20Media%20Attachments%20%e5%a6%82%e6%9e%9c%e7%bb%8f%e5%b8%b8%e4%bd%bf%e7%94%a8iMessage%e7%9a%84%e6%9c%8b%e5%8f%8b%e4%bb%ac%ef%bc%8c%e5%b0%b1%e4%bc%9a%e7%bb%8f%e5%b8%b8%e6%94%b6%e5%88%b0%e4%b8%80%e4%ba%9b%e4%bf%a1%e6%81%af%ef%bc%8c%e9%99%84%e5%b8%a6%e4%ba%86%e4%b8%80%e4%ba%9b%e7%85%a7%e7%89%87%e6%88%96%e8%80%85%e8%a7%86%e9%a2%91%ef%bc%8c%e6%89%80%e4%bb%a5%e6%8e%a8%e9%80%81%e4%b8%ad%e8%83%bd%e9%99%84%e5%b8%a6%e8%bf%99%e4%ba%9b%e5%a4%9a%e5%aa%92%e4%bd%93%e6%98%af%e9%9d%9e%e5%b8%b8%e9%87%8d%e8%a6%81%e7%9a%84%e3%80%82%e5%a6%82%e6%9e%9c%e6%8e%a8%e9%80%81%e4%b8%ad%e5%8c%85%e5%90%ab%e4%ba%86%e8%bf%99%e4%ba%9b%e5%a4%9a%e5%aa%92%e4%bd%93%e4%bf%a1%e6%81%af%ef%bc%8c%e5%8f%af%e4%bb%a5%e4%bd%bf%e7%94%a8%e6%88%b7%e4%b8%8d%e7%94%a8%e6%89%93%e5%bc%80app%ef%bc%8c%e4%b8%8d%e7%94%a8%e4%b8%8b%e8%bd%bd%e5%b0%b1%e5%8f%af%e4%bb%a5%e5%bf%ab%e9%80%9f%e6%b5%8f%e8%a7%88%e5%88%b0%e5%86%85%e5%ae%b9%e3%80%82%e4%bc%97%e6%89%80%e5%91%a8%e7%9f%a5%ef%bc%8c%e6%8e%a8%e9%80%81%e9%80%9a%e7%9f%a5%e4%b8%ad%e5%b8%a6%e4%ba%86push%20payload%ef%bc%8c%e5%8f%8a%e6%97%b6%e5%8e%bb%e5%b9%b4%e8%8b%b9%e6%9e%9c%e5%b7%b2%e7%bb%8f%e6%8a%8apayload%e7%9a%84size%e6%8f%90%e5%8d%87%e5%88%b0%e4%ba%864k%20bites%ef%bc%8c%e4%bd%86%e6%98%af%e8%bf%99%e4%b9%88%e5%b0%8f%e7%9a%84%e5%ae%b9%e9%87%8f%e4%b9%9f%e6%97%a0%e6%b3%95%e4%bd%bf%e7%94%a8%e6%88%b7%e8%83%bd%e5%8f%91%e9%80%81%e4%b8%80%e5%bc%a0%e9%ab%98%e6%b8%85%e7%9a%84%e5%9b%be%e7%89%87%ef%bc%8c%e7%94%9a%e8%87%b3%e6%8a%8a%e8%bf%99%e5%bc%a0%e5%9b%be%e7%9a%84%e7%bc%a9%e7%95%a5%e5%9b%be%e5%8c%85%e5%90%ab%e5%9c%a8%e6%8e%a8%e9%80%81%e9%80%9a%e7%9f%a5%e9%87%8c%e9%9d%a2%ef%bc%8c%e4%b9%9f%e4%b8%8d%e4%b8%80%e5%ae%9a%e6%94%be%e7%9a%84%e4%b8%8b%e5%8e%bb%e3%80%82%e5%9c%a8iOS%20X%e4%b8%ad%ef%bc%8c%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e4%bd%bf%e7%94%a8%e6%96%b0%e7%89%b9%e6%80%a7%e6%9d%a5%e8%a7%a3%e5%86%b3%e8%bf%99%e4%b8%aa%e9%97%ae%e9%a2%98%e3%80%82%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%e6%96%b0%e7%9a%84service%20extensions%e6%9d%a5%e8%a7%a3%e5%86%b3%e8%bf%99%e4%b8%aa%e9%97%ae%e9%a2%98%e3%80%82"><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f&t=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20iOS%2010%20%e6%8e%a8%e9%80%81%20Notification%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#前言>前言</a></li><li><a href=#一-notification-user-interface>一. Notification User Interface</a></li><li><a href=#二-media-attachments>二. Media Attachments</a></li><li><a href=#四customize-actions>四.Customize Actions</a></li></ul></li></ul></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">WWDC 2016 Session 笔记 - iOS 10 推送 Notification 新特性</h1><div class=meta><div class=postdate><time datetime="2016-06-26 06:22:00 +0000 UTC" itemprop=datePublished>Jun 26</time></div><div class=article-category><i class="fas fa-archive"></i><a class=category-link href=/categories/ios>iOS</a>
,
<a class=category-link href=/categories/ios-10>iOS 10</a>
,
<a class=category-link href=/categories/notification>Notification</a>
,
<a class=category-link href=/categories/wwdc2016>WWDC2016</a></div><div class=article-tag><i class="fas fa-tag"></i><a class=tag-link href=/tags/ios rel=tag>iOS</a>
,
<a class=tag-link href=/tags/ios-10 rel=tag>iOS 10</a>
,
<a class=tag-link href=/tags/notification rel=tag>Notification</a>
,
<a class=tag-link href=/tags/wwdc2016 rel=tag>WWDC2016</a></div></div></header><div class=content itemprop=articleBody><h4 id=前言>前言</h4><p>在今年6月14号苹果WWDC开发者大会上，苹果带来了新的iOS系统——iOS 10。苹果为iOS 10带来了十大项更新。苹果高级副总裁Craig Federighi称此次对iOS的更新是“苹果史上最大的iOS更新”。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_2.jpg alt></p><ol><li>新的屏幕通知查看方式：苹果为iOS 10带来了全新的通知查看功能，即抬起iPhone的屏幕，用户就能看到目前的通知和更新情况。</li><li>苹果将Siri开放给第三方开发者: 现在用户可以让Siri实现更多的功能，例如让Siri向自己的联系人发送微信信息等。目前Siri可以直接支持的应用有微信、WhatsApp以及Uber、滴滴、Skype等。</li><li>Siri将会更加智能：Siri将拥有更多对语境的意识。基于用户的地点、日历、联系人、联系地址等，Siri会做出智能建议。Siri将越来越成为一个人工智能机器人，具备深度学习功能。</li><li>照片应用更新：基于深度学习技术，iOS 10对照片应用有比较大的更新。iOS 10对照片的搜索能力进一步增强，可以检测到新的人物和景色。未来的iPhone能够将相关的照片组织在一起，比如某次旅行的照片、某个周末的照片，并且能够进行自动编辑。iOS 10照片还新增了一个“记忆”标签。</li><li>苹果地图：有点类似Siri和照片的更新，苹果地图也增加了很多预测功能，例如苹果地图能够将提供附近的餐厅建议。苹果地图的界面也得到了重新设计，更加的简洁，并增加了交通实时信息。新的苹果地图还将整合在苹果CarPlay中，将为用户提供turn-by-turn导航功能。和Siri一样，地图也将开放给开发者。</li><li>苹果音乐：苹果音乐的界面得到了更新，界面会更加简洁、支持多任务，增加最近播放列表。苹果音乐现在已经有1500万付费用户。</li><li>HomeKit：iOS 10新增智能家庭应用，支持一键场景模式，HomeKit可以与Siri相连接。
<img src=https://img.halfrost.com/Blog/ArticleImage/14_3.jpg alt></li><li>苹果电话：苹果更新了电话功能，来电时可以区别出骚扰电话。<br><img src=https://img.halfrost.com/Blog/ArticleImage/14_4.jpg alt></li><li>iMesseage：在iMessage方面，用户可以直接在文本框内发送视频、链接，分享实时照片。另外，苹果还增添了表情预测功能，打出的文字若和表情相符，将会直接推荐相关表情。</li></ol><p>以下是我关于关于iOS 10中变化比较大的推送通知的学习笔记。</p><p>####目录</p><ul><li>1.Notification User Interface</li><li>2.Media Attachments</li><li>3.Customize user interface</li><li>4.Customize Actions</li></ul><h4 id=一-notification-user-interface>一. Notification User Interface</h4><p>让我们先来看看用户推送在iOS X中的样子，如下图</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_5.png alt></p><p>上图这是在锁屏界面下的推送。支持抬起手机唤醒功能。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_6.jpg alt></p><p>上图是Banner，可以看到这个推送更加的易读，并且包含更多的内容。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_7.png alt></p><p>上图是通知中心。从上面三种图可以看到，它们都长一个样。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_8.jpg alt></p><p>在iOS 8 中，我们可以给推送增加用户操作，这样使推送更加具有交互性，并且允许用户去处理用户推送更加的迅速。到了iOS 9 中，苹果又再次增加了快速回复功能，进一步的提高了通知的响应性。开发者可以允许用户通过点击推送，并用文字进行回复。再就到了iOS 10 中，推送变得更加给力。因为在iOS X中，推送对iOS系统来说，是很重要的一部分。在日常使用中，我们会经常和推送打交道。推送是我们和设备进行互动非常重要的方式。</p><p>在iOS X 中，你可以按压推送，推送就会被展开，展示出更加详细的用户界面。展示出来的详细界面对用户来说，提供了更加有用的信息。用户可以通过点击下面的按钮，来处理一些事件，并且推送的详细界面也会跟着用户的操作进行更新UI界面。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_9.jpeg alt></p><p>iOS 8 中iMessage支持了快速回复功能，但是你只能看见一条信息，并且你也只能回复一条信息。但是在iOS X中，你可以展开推送，这个时候你就可以看到整个对话的内容了。你可以等待你的朋友回复，你再回复他，并且可以回复很多条。</p><p>以上就是iOS X的强大功能。以上的所有功能都能通过iOS X的新API来实现。所有的新特性都能在我们开发者开发的app里面有所体现。</p><h4 id=二-media-attachments>二. Media Attachments</h4><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_10.png alt></p><p>如果经常使用iMessage的朋友们，就会经常收到一些信息，附带了一些照片或者视频，所以推送中能附带这些多媒体是非常重要的。如果推送中包含了这些多媒体信息，可以使用户不用打开app，不用下载就可以快速浏览到内容。众所周知，推送通知中带了push payload，及时去年苹果已经把payload的size提升到了4k bites，但是这么小的容量也无法使用户能发送一张高清的图片，甚至把这张图的缩略图包含在推送通知里面，也不一定放的下去。在iOS X中，我们可以使用新特性来解决这个问题。我们可以通过新的service extensions来解决这个问题。</p><p>为了能去下载service extension 里面的attachment，我们必须去按照如下的要求去设置你的推送通知，使你的推送通知是动态可变的。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>
{
    <span style=color:#960050;background-color:#1e0010>aps:</span> <span style=color:#960050;background-color:#1e0010>{</span>
        <span style=color:#960050;background-color:#1e0010>alert</span> <span style=color:#960050;background-color:#1e0010>:</span> <span style=color:#960050;background-color:#1e0010>{……</span>}
        <span style=color:#960050;background-color:#1e0010>mutable-content</span> <span style=color:#960050;background-color:#1e0010>:</span> <span style=color:#ae81ff>1</span>
    <span style=color:#960050;background-color:#1e0010>}</span>
    <span style=color:#960050;background-color:#1e0010>my-attachment</span> <span style=color:#960050;background-color:#1e0010>:</span> <span style=color:#960050;background-color:#1e0010>https://example.com/phtos.jpg&#34;</span>
<span style=color:#960050;background-color:#1e0010>}</span>
</code></pre></div><p>在上面代码中，可以看到加载了一个mutable-content 的flag，然后我们就可以引用一个链接，把你想加入到推送里面的attachments加入到里面来。在上面的例子里面，我们就加入了一个URL。更复杂的，你甚至可以去加入一个identifier来标示你想加入到推送里面的内容，这个identifier是你app知道的，app能通过拿到identifier，然后知道去你自己的服务器哪里去下载内容。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_11.png alt></p><p>通过设置完上述的部分，推送就被推送到了每个设备的Service Extension那里了。在每个设备里面的Service Extension里面，就可以下载任意想要的attachment了。然后推送就会带着下载好的attachment推送到手机并显示出来了。</p><p>如果来设置Service Extension呢？来看看如下的代码：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift>
<span style=color:#75715e>// Adding an attachment to a user notification</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>NotificationService</span>: UNNotificationServiceExtension {
    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>didReceive</span>(<span style=color:#66d9ef>_</span> request: UNNotificationRequest, withContentHandler contentHandler: (UNNotificationContent) -&gt; Void)
    {
        <span style=color:#66d9ef>let</span> fileURL = <span style=color:#75715e>// ...</span>
        <span style=color:#66d9ef>let</span> attachment = UNNotificationAttachment(identifier: <span style=color:#e6db74>&#34;image&#34;</span>,
                                                  url: fileURL,
                                                  options: <span style=color:#66d9ef>nil</span>)
        <span style=color:#66d9ef>let</span> content = request.content.mutableCopy <span style=color:#66d9ef>as</span>! UNMutableNotificationContent 
        content.attachments = [ attachment ]
        contentHandler(content)
    }
}
</code></pre></div><p>首先定义了一个didReceive的方法，用来接收request，后面跟着withContentHandler的回调函数。
这个NotificationServiceExtension会在收到推送之后，被调用，然后在这个方法里面去下载自己的attachment。下载可以通过URL，或者任何你喜欢的方式。当下载完成之后，就可以创建attachment对象了。创建完UNMutableNotificationContent，我们就可以把这个加入到推送的content中了。最后，通过contentHandler回调，把它传递给iOS系统，iOS 系统就会展示给用户。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_12.png alt></p><p>通过以上的设置，我们就能在推送中看到丰富的媒体信息了。用户并不需要去打开app，也不用去点击下载。</p><p>简单的概述一下Media Attachments：</p><ol><li>新特性使推送支持附带Media Attachments。本地推送和远程推送同时都可支持。</li><li>attachment支持图片，音频，视频，系统会自动提供一套可自定义化的UI，专门针对这3种内容。</li><li>在service extension里面去下载attachment，但是需要注意，service extension会限制下载的时间，并且下载的文件大小也会同样被限制。这里毕竟是一个推送，而不是把所有的内容都推送给用户。所以你应该去推送一些缩小比例之后的版本。比如图片，推送里面附带缩略图，当用户打开app之后，再去下载完整的高清图。视频就附带视频的关键帧或者开头的几秒，当用户打开app之后再去下载完整视频。</li><li>把下载完成的attachment加入到notification中。</li><li>推送里面包含的attachment这些文件，是由系统帮你管理的，系统会把这些文件放在单独的一个地方，然后统一管理。</li><li>额外说明一点，推送的attachment的图片还可以包含GIF图。</li></ol><p>通过以上可以看出，Media Attachments非常的酷，它为我们提供了更加丰富的推送内容。</p><p>接下来我们再来看看如何自定义推送的用户界面</p><p>####三. Customize user interface</p><p>要想创建一个自定义的用户界面，需要用到Notification content extension。</p><p>先来说说下面这个例子的应用场景：</p><p>比如有个朋友在日历中给我了一个聚会的邀请，这个时候就来了推送，推送里面的内容就是包含了聚会的时间地点信息，推送下面有三个按钮，接受，谢绝。下面的例子都以此为例。</p><p>Notification content extension允许开发者加入自定义的界面，在这个界面里面，你可以绘制任何你想要的东西。但是有一个最重要的限制就是，这个自定义的界面没有交互。它们不能接受点击事件，用户并不能点击它们。但是推送通知还是可以继续与用户进行交互，因为用户可以使用notificaiton的actions。extension可以处理这些actions。</p><p>接下来我们就来说说如何自定义界面</p><h5 id=1---推送的四部分>1. 推送的四部分</h5><p>先来看一个日历的推送例子：</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_13.png alt></p><p>上图，整个推送分4段。用户可以通过点击Header里面的icon来打开app，点击取消来取消显示推送。Header的UI是系统提供的一套标准的UI。这套UI会提供给所有的推送通知。</p><p>Header下面是自定义内容，这里就是显示的Notification content extension。在这里，就可以显示任何你想绘制的内容了。你可以展示任何额外的有用的信息给用户。</p><p>content extension下面就是default content。这里是系统的界面。这里的系统界面就是上面推送里面payload里面附带的内容。这也就是iOS 9 之前的推送的样子。</p><p>最下面一段就是notification action了。在这一段，用户可以触发一些操作。并且这些操作还会相应的反映到上面的自定义的推送界面content extension中。</p><h5 id=2创建notification-content-extension>2.创建Notification content extension</h5><p>接下来我们就来看看如何创建一个Notification content extension</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_14.png alt></p><p>第一件事就是去创建一个新的target。创建好了之后，Xcode会自动帮我们生成一个template。template会在新的target里面生成3个文件，一个新的ViewController，main Interface storyboard，info.plist。info.plist中就是可以定义化一些target的配置。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_15.png alt></p><p>打开Notification content extension的ViewController</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift>
<span style=color:#75715e>// Minimal Content Extension</span>
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>NotificationViewController</span>: UIViewController, UNNotificationContentExtension {
    <span style=color:#66d9ef>@IBOutlet</span> <span style=color:#66d9ef>var</span> label: UILabel?
    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>viewDidLoad</span>() {
        <span style=color:#66d9ef>super</span>.viewDidLoad()
        <span style=color:#75715e>// Do any required interface initialization here.</span>
    }
    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>didReceive</span>(<span style=color:#66d9ef>_</span> notification: UNNotification) {
        label?.text = notification.request.content.body
    }
}
</code></pre></div><p>我们会发现，这个ViewController是UIViewController的子类，其实就是一个很普通的ViewController，和我们平时使用的没有啥两样。后面是UNNotificationContentExtension的protocol，这里是系统要求你必须实现的协议。</p><p>UNNotificationContentExtension只有一个required的方法，就是didReceive方法。当推送到达你的设备之后，这个didReceive方法会随着ViewController的生命周期的方法 ，一起被调用。当开发者给推送加上expands的时候，一旦推送送达以后，这时会接到所有的ViewController生命周期的方法，和didReceive方法。这样，我们就可以接收notification object ，接着更新UI。</p><h5 id=3-配置target>3. 配置target</h5><p>接下来，我们需要做的是，告诉iOS系统，推送送达之后，iOS系统如何找到你自定义的Notification content extension。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_16.png alt></p><p>Notification content extension和我们注册notification actions一样，注册的相同的category。这个例子中，我们使用event-invite。值得提到的一点是，这里的extension是可以为一个数组的，里面可以为多个category，这样做的目的是多个category共用同一套UI。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_17.png alt></p><p>上图中，event-invite 和 event-update就共用了一套UI。这样我们就可以把他们打包到一个extension里面来。但是不同的category是独立的，他们可以相应不同的actions。</p><p>通过以上设置，iOS系统就知道了我们的target了。</p><h5 id=4-自定义用户ui界面>4. 自定义用户UI界面</h5><p>接下来我们来自定义UI界面。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift>
<span style=color:#75715e>// Notification Content Extension</span>
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>NotificationViewController</span>: UIViewController, UNNotificationContentExtension {
    <span style=color:#66d9ef>@IBOutlet</span> <span style=color:#66d9ef>var</span> eventTitle: UILabel!
    <span style=color:#66d9ef>@IBOutlet</span> <span style=color:#66d9ef>var</span> eventDate: UILabel!
    <span style=color:#66d9ef>@IBOutlet</span> <span style=color:#66d9ef>var</span> eventLocation: UILabel!
    <span style=color:#66d9ef>@IBOutlet</span> <span style=color:#66d9ef>var</span> eventMessage: UILabel!
    
    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>didReceive</span>(<span style=color:#66d9ef>_</span> notification: UNNotification) {
        <span style=color:#66d9ef>let</span> content = notification.request.content
        
        eventTitle.text = content.title
        eventDate.text = content.subtitle
        eventMessage.text = content.body
        
        <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> location = content.userInfo[<span style=color:#e6db74>&#34;location&#34;</span>] <span style=color:#66d9ef>as</span>? String {
            eventLocation.text = location
        }
    }
}
</code></pre></div><p>上述代码中，我们在stroyboard 里面加入了一些labels 。当接收到推送的时候，我们提取出内容，得到我们想要的内容，然后把这些内容设置到label上面去，并展示出来。在content的userinfo里面我们还能加入一些额外的信息，这些信息是标准的payload无法展示的，比如说位置信息等等。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_18.png alt></p><p>代码完成之后就是如上的样子，中间就是我们自定义的UIView了。但是这样子会有2个问题。第一个问题就是这个自定义的View实在太大了。大量的空白不需要显示出来。第二个问题就是我们自定义的内容和下面默认的推送内容重复了。我们需要去掉一份。</p><h5 id=5改进>5.改进</h5><p>我们先来改进上面说的第二个问题。
这个问题很简单，其实就是一个plist的设置。我们可以在plist里面把默认的content隐藏。设置如下图。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_19.png alt></p><p>再来说说第一个问题，界面大小的问题。
我们可以通过平时我们Resize其他ViewController一样，来Resize这个ViewController。来看看如下的代码。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift>
<span style=color:#75715e>// Notification Content Extension</span>
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>NotificationViewController</span>: UIViewController, UNNotificationContentExtension {
    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>viewDidLoad</span>() {
        
        <span style=color:#66d9ef>super</span>.viewDidLoad()
        <span style=color:#66d9ef>let</span> size = view.bounds.size
        
        preferredContentSize = CGSize(width: size.width, height: size.width <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>)
    }
    
    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>didReceive</span>(<span style=color:#66d9ef>_</span> notification: UNNotification) {
        <span style=color:#75715e>// ...</span>
    }
}
</code></pre></div><p>这里我们也可以加入constraints来做autolayout。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_20.png alt></p><p>解决完上面2个问题，界面就会变成这个样子。看上去比之前好很多了。正常的尺寸，没有多余的空白。没有重复信息。但是这又出现了另外一个问题。当通知展示出来之后，它的大小并不是正常的我们想要的尺寸。iOS系统会去做一个动画来Resize它的大小。如下图，系统会先展现出第一张图，然后紧接着展示第二张图，这个用户体验很差。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_21.png alt></p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_22.png alt></p><p>会出现上面这张图的原因是，在推送送达的那一刻，iOS系统需要知道我们推送界面的最终大小。但是我们自定义的extension在系统打算展示推送通知的那一刻，并还没有启动。所以这个时候，在我们代码都还没有跑起来之前，我们需要告诉iOS系统，我们的View最终要展示的大小。</p><p>现在问题又来了。这些通知会跑在不同的设备上，不同的设备的屏幕尺寸不同。为了解决这个问题，我们需要设置一个content size ratio。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_23.png alt></p><p>这个属性定义了宽和高的比例。当然设置了这个比例以后，也并不是万能的。因为你并不知道你会接受到多长的content。当你仅仅只设置比例，还是不能完整的展示所有的内容。有些时候如果我们可以知道最终的尺寸，那么我们固定尺寸会更好。</p><p>#####6. 进一步美化</p><p>我们可以给这个extension加上Media Attachments。一旦我们加入Media Attachments，我们可以在content extension里面使用这些内容。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift>
<span style=color:#75715e>// Notification Content Extension Attachments</span>
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>NotificationViewController</span>: UIViewController, UNNotificationContentExtension {
    <span style=color:#66d9ef>@IBOutlet</span> <span style=color:#66d9ef>var</span> eventImage: UIImageView!
    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>didReceive</span>(<span style=color:#66d9ef>_</span> notification: UNNotification) {
        <span style=color:#66d9ef>let</span> content = notification.request.content
        <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> attachment = content.attachments.first {
            <span style=color:#66d9ef>if</span> attachment.url.startAccessingSecurityScopedResource() {
                eventImage.image = UIImage(contentsOfFile: attachment.url.path!)
                attachment.url.stopAccessingSecurityScopedResource()
            }
        }
    }
}
</code></pre></div><p>我们可以提取content的attachments。前文提到过，attachment是由系统管理的，系统会把它们单独的管理，这意味着它们存储在我们sandbox之外。所以这里我们要使用attachment之前，我们需要告诉iOS系统，我们需要使用它，并且在使用完毕之后告诉系统我们使用完毕了。对应上述代码就是startAccessingSecurityScopedResource()和stopAccessingSecurityScopedResource()的操作。当我们获取到了attachment的使用权之后，我们就可以使用那个文件获取我们想要的信息了。</p><p>上述例子中，我们从attachment中获取到图片，并展示到UIImageView中。于是notification就变成下面这个样子了。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_24.png alt></p><h4 id=四customize-actions>四.Customize Actions</h4><p>说道这里，我们不得不说一下iOS8开始引入的action的工作原理：
默认系统的Action的处理是，当用户点击的按钮，就把action传递给app，与此同时，推送通知会立即消失。这种做法很方便。</p><p>但是还有一种情况，当用户点击了按钮，希望接受一些日历上的邀请，我们需要把这个操作即时的展示在我们自定义的UI上，这是我们就只能用Notification content extension来处理这些用户点击事件了。这个时候，用户点击完按钮，我们把这个action直接传递给extension，而不是传递给app。当actions传递给extension时，它可以延迟推送通知的消失时间。在这段延迟的时间之内，我们就可以处理用户点击按钮的事件了，并且更新UI，一切都处理完成之后，我们再去让推送通知消失掉。</p><p>这里我们可以运用UNNotificationContentExtension协议的第二个方法，这方法是Optional</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift>
<span style=color:#75715e>// Intercepting notification action response</span>
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>NotificationViewController</span>: UIViewController, UNNotificationContentExtension {
    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>didReceive</span>(<span style=color:#66d9ef>_</span> response: UNNotificationResponse, completionHandler done: (UNNotificationContentExtensionResponseOption) -&gt; Void) {
        server.postEventResponse(response.actionIdentifier) {
            <span style=color:#66d9ef>if</span> response.actionIdentifier == <span style=color:#e6db74>&#34;accept&#34;</span> {
                eventResponse.text = <span style=color:#e6db74>&#34;Going!&#34;</span>
                eventResponse.textColor = UIColor.green()
            } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> response.actionIdentifier == <span style=color:#e6db74>&#34;decline&#34;</span> {
                eventResponse.text = <span style=color:#e6db74>&#34;Not going :(&#34;</span>
                eventResponse.textColor = UIColor.red()
            }
            done(.dismiss)
        }
    }
}
</code></pre></div><p>不用这个方法的时候就可以不声明出来。但是一旦声明了，那么你就需要在这个方法里面处理推送通知里面所有的actions。这就意味着你不能只处理一个action，而不管其他的action。</p><p>在上述代码中，当用户点击了按钮，这个时候我们同步一下服务器信息，当接收到了服务器应答之后，然后我们更新UI。用户点击了“accept”之后，表示接受了这次聚会邀请，于是我们把text的颜色变成绿色。当用户点击了“decline”，表示谢绝，于是我们把text的颜色变成红色。当用户点击之后，更新完界面，我们就让推送通知消失掉。</p><p>这里值得一提的是，如果你还想把这个action传递给app，那么最后的参数应该是这样。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift>done(.dismissAndForwardAction)
</code></pre></div><p>参数设置成这样之后，用户的action就会再传递给app。</p><p>如果此时用户还想输入写文字来评论这条推送，我们该如何做？</p><p>这个输入文字的需求是来自于iOS 9 。这个的使用方法和9是相同的。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift>
<span style=color:#75715e>// Text Input Action</span>
<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>makeEventExtensionCategory</span>() -&gt; UNNotificationCategory {
    <span style=color:#66d9ef>let</span> commentAction = UNTextInputNotificationAction(
        identifier: <span style=color:#e6db74>&#34;comment&#34;</span>,
        title: <span style=color:#e6db74>&#34;Comment&#34;</span>,
        options: [],
        textInputButtonTitle: <span style=color:#e6db74>&#34;Send&#34;</span>,
        textInputPlaceholder: <span style=color:#e6db74>&#34;Type here...&#34;</span>)
    <span style=color:#66d9ef>return</span> UNNotificationCategory(identifier: <span style=color:#e6db74>&#34;event-invite&#34;</span>, actions: [ acceptAction, declineAction, commentAction ],
}
</code></pre></div><p>我们可以创建一个UNTextInputNotificationAction，并把它设置到plist里面的Category中。当推送通知到来之后，用户点击了按钮，textfield就会显示出来。同样的处理action代码如下：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift>
<span style=color:#75715e>// Text input action response</span>
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>NotificationViewController</span>: UIViewController, UNNotificationContentExtension {
    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>didReceive</span>(<span style=color:#66d9ef>_</span> response: UNNotificationResponse,
                      completionHandler done: (UNNotificationContentExtensionResponseOption) -&gt; Void) {
        <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> textResponse = response <span style=color:#66d9ef>as</span>? UNTextInputNotificationResponse {
            server.send(textResponse.userText) {
            }
        }
    }
}
</code></pre></div><p>这个时候当用户点击了评论按钮，就会弹出textfield。</p><p>这里还有一个问题，就是用户点完评论按钮之后，之前的接受和谢绝的按钮就消失了。这个时候用户可能有这个需求，想又评论，又接受或者谢绝。那么我们就需要在下面键盘上加入这两个按钮。如下图这样子。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/14_25.png alt></p><p>这里并没有新的API，还是用原来的API。我们可以使用已经存在的UIKit的API去定制输入的input accessory view。它可以让我们开发者加入自定义的按钮。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift>
<span style=color:#75715e>// Custom input accessory view</span>
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>NotificationViewController</span>: UIViewController, UNNotificationContentExtension {
    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>canBecomeFirstResponder</span>() -&gt; Bool {
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>
    }
    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>var</span> inputAccessoryView: UIView { <span style=color:#66d9ef>get</span> {
        <span style=color:#66d9ef>return</span> inputView
        }
    }
    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>didReceive</span>(<span style=color:#66d9ef>_</span> response: UNNotificationResponse,
                      completionHandler done: (UNNotificationContentExtensionResponseOption) -&gt; Void) {
        <span style=color:#66d9ef>if</span> response.actionIdentifier == <span style=color:#e6db74>&#34;comment&#34;</span> {
            becomeFirstResponder()
            textField.becomeFirstResponder()
        }
    }
}
</code></pre></div><p>解析一下上述的代码。首先我们需要让ViewController BecomeFirstResponder。这里做了2件事情，一是告诉responder chain，我成为了第一响应者，二是告诉iOS系统，我不想使用系统标准的text field。接着就可以创建自定义化的inputAccessoryView。如上图中显示的，带自定义的两个按钮。然后，当extension接受到了用户点击按钮后产生的action，这时自定义的textfield就会变成第一响应者，并且伴随着键盘的弹起。</p><p>注意，这里需要2个becomeFirstResponder，第一个becomeFirstResponder是使viewController变成第一响应者，这样textfield就会出现。第二个becomeFirstResponder是使我们自定义的textfield变成第一响应者，这样键盘才会弹起。</p><p>####总结<br>以上就是iOS X中notification的所有新特性，通过上文，我们学到的以下的知识，总结一下：</p><ol><li>什么是attachment</li><li>如何在service extension中使用attachment</li><li>如何定义content extension的用户UI界面</li><li>如何响应用户操作action</li></ol><p>最后，请大家多多指教。</p><img src=https://img.halfrost.com/wechat-qr-code.png></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=https://books.halfrost.com/>Books</a></li><li><a href=https://github.com/halfrost/Halfrost-Field>Github</a></li><li><a href=https://halfrost.me/>About</a></li><li><a href=/index.xml>RSS</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#前言>前言</a></li><li><a href=#一-notification-user-interface>一. Notification User Interface</a></li><li><a href=#二-media-attachments>二. Media Attachments</a></li><li><a href=#四customize-actions>四.Customize Actions</a></li></ul></li></ul></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f"><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f&text=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20iOS%2010%20%e6%8e%a8%e9%80%81%20Notification%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f&title=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20iOS%2010%20%e6%8e%a8%e9%80%81%20Notification%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f&is_video=false&description=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20iOS%2010%20%e6%8e%a8%e9%80%81%20Notification%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20iOS%2010%20%e6%8e%a8%e9%80%81%20Notification%20%e6%96%b0%e7%89%b9%e6%80%a7&body=Check out this article: https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f"><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f&title=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20iOS%2010%20%e6%8e%a8%e9%80%81%20Notification%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f&title=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20iOS%2010%20%e6%8e%a8%e9%80%81%20Notification%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f&title=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20iOS%2010%20%e6%8e%a8%e9%80%81%20Notification%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-stumbleupon fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://digg.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f&title=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20iOS%2010%20%e6%8e%a8%e9%80%81%20Notification%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-digg fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f&name=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20iOS%2010%20%e6%8e%a8%e9%80%81%20Notification%20%e6%96%b0%e7%89%b9%e6%80%a7&description=%e5%89%8d%e8%a8%80%20%e5%9c%a8%e4%bb%8a%e5%b9%b46%e6%9c%8814%e5%8f%b7%e8%8b%b9%e6%9e%9cWWDC%e5%bc%80%e5%8f%91%e8%80%85%e5%a4%a7%e4%bc%9a%e4%b8%8a%ef%bc%8c%e8%8b%b9%e6%9e%9c%e5%b8%a6%e6%9d%a5%e4%ba%86%e6%96%b0%e7%9a%84iOS%e7%b3%bb%e7%bb%9f%e2%80%94%e2%80%94iOS%2010%e3%80%82%e8%8b%b9%e6%9e%9c%e4%b8%baiOS%2010%e5%b8%a6%e6%9d%a5%e4%ba%86%e5%8d%81%e5%a4%a7%e9%a1%b9%e6%9b%b4%e6%96%b0%e3%80%82%e8%8b%b9%e6%9e%9c%e9%ab%98%e7%ba%a7%e5%89%af%e6%80%bb%e8%a3%81Craig%20Federighi%e7%a7%b0%e6%ad%a4%e6%ac%a1%e5%af%b9iOS%e7%9a%84%e6%9b%b4%e6%96%b0%e6%98%af%e2%80%9c%e8%8b%b9%e6%9e%9c%e5%8f%b2%e4%b8%8a%e6%9c%80%e5%a4%a7%e7%9a%84iOS%e6%9b%b4%e6%96%b0%e2%80%9d%e3%80%82%0a%20%e6%96%b0%e7%9a%84%e5%b1%8f%e5%b9%95%e9%80%9a%e7%9f%a5%e6%9f%a5%e7%9c%8b%e6%96%b9%e5%bc%8f%ef%bc%9a%e8%8b%b9%e6%9e%9c%e4%b8%baiOS%2010%e5%b8%a6%e6%9d%a5%e4%ba%86%e5%85%a8%e6%96%b0%e7%9a%84%e9%80%9a%e7%9f%a5%e6%9f%a5%e7%9c%8b%e5%8a%9f%e8%83%bd%ef%bc%8c%e5%8d%b3%e6%8a%ac%e8%b5%b7iPhone%e7%9a%84%e5%b1%8f%e5%b9%95%ef%bc%8c%e7%94%a8%e6%88%b7%e5%b0%b1%e8%83%bd%e7%9c%8b%e5%88%b0%e7%9b%ae%e5%89%8d%e7%9a%84%e9%80%9a%e7%9f%a5%e5%92%8c%e6%9b%b4%e6%96%b0%e6%83%85%e5%86%b5%e3%80%82%20%e8%8b%b9%e6%9e%9c%e5%b0%86Siri%e5%bc%80%e6%94%be%e7%bb%99%e7%ac%ac%e4%b8%89%e6%96%b9%e5%bc%80%e5%8f%91%e8%80%85%3a%20%e7%8e%b0%e5%9c%a8%e7%94%a8%e6%88%b7%e5%8f%af%e4%bb%a5%e8%ae%a9Siri%e5%ae%9e%e7%8e%b0%e6%9b%b4%e5%a4%9a%e7%9a%84%e5%8a%9f%e8%83%bd%ef%bc%8c%e4%be%8b%e5%a6%82%e8%ae%a9Siri%e5%90%91%e8%87%aa%e5%b7%b1%e7%9a%84%e8%81%94%e7%b3%bb%e4%ba%ba%e5%8f%91%e9%80%81%e5%be%ae%e4%bf%a1%e4%bf%a1%e6%81%af%e7%ad%89%e3%80%82%e7%9b%ae%e5%89%8dSiri%e5%8f%af%e4%bb%a5%e7%9b%b4%e6%8e%a5%e6%94%af%e6%8c%81%e7%9a%84%e5%ba%94%e7%94%a8%e6%9c%89%e5%be%ae%e4%bf%a1%e3%80%81WhatsApp%e4%bb%a5%e5%8f%8aUber%e3%80%81%e6%bb%b4%e6%bb%b4%e3%80%81Skype%e7%ad%89%e3%80%82%20Siri%e5%b0%86%e4%bc%9a%e6%9b%b4%e5%8a%a0%e6%99%ba%e8%83%bd%ef%bc%9aSiri%e5%b0%86%e6%8b%a5%e6%9c%89%e6%9b%b4%e5%a4%9a%e5%af%b9%e8%af%ad%e5%a2%83%e7%9a%84%e6%84%8f%e8%af%86%e3%80%82%e5%9f%ba%e4%ba%8e%e7%94%a8%e6%88%b7%e7%9a%84%e5%9c%b0%e7%82%b9%e3%80%81%e6%97%a5%e5%8e%86%e3%80%81%e8%81%94%e7%b3%bb%e4%ba%ba%e3%80%81%e8%81%94%e7%b3%bb%e5%9c%b0%e5%9d%80%e7%ad%89%ef%bc%8cSiri%e4%bc%9a%e5%81%9a%e5%87%ba%e6%99%ba%e8%83%bd%e5%bb%ba%e8%ae%ae%e3%80%82Siri%e5%b0%86%e8%b6%8a%e6%9d%a5%e8%b6%8a%e6%88%90%e4%b8%ba%e4%b8%80%e4%b8%aa%e4%ba%ba%e5%b7%a5%e6%99%ba%e8%83%bd%e6%9c%ba%e5%99%a8%e4%ba%ba%ef%bc%8c%e5%85%b7%e5%a4%87%e6%b7%b1%e5%ba%a6%e5%ad%a6%e4%b9%a0%e5%8a%9f%e8%83%bd%e3%80%82%20%e7%85%a7%e7%89%87%e5%ba%94%e7%94%a8%e6%9b%b4%e6%96%b0%ef%bc%9a%e5%9f%ba%e4%ba%8e%e6%b7%b1%e5%ba%a6%e5%ad%a6%e4%b9%a0%e6%8a%80%e6%9c%af%ef%bc%8ciOS%2010%e5%af%b9%e7%85%a7%e7%89%87%e5%ba%94%e7%94%a8%e6%9c%89%e6%af%94%e8%be%83%e5%a4%a7%e7%9a%84%e6%9b%b4%e6%96%b0%e3%80%82iOS%2010%e5%af%b9%e7%85%a7%e7%89%87%e7%9a%84%e6%90%9c%e7%b4%a2%e8%83%bd%e5%8a%9b%e8%bf%9b%e4%b8%80%e6%ad%a5%e5%a2%9e%e5%bc%ba%ef%bc%8c%e5%8f%af%e4%bb%a5%e6%a3%80%e6%b5%8b%e5%88%b0%e6%96%b0%e7%9a%84%e4%ba%ba%e7%89%a9%e5%92%8c%e6%99%af%e8%89%b2%e3%80%82%e6%9c%aa%e6%9d%a5%e7%9a%84iPhone%e8%83%bd%e5%a4%9f%e5%b0%86%e7%9b%b8%e5%85%b3%e7%9a%84%e7%85%a7%e7%89%87%e7%bb%84%e7%bb%87%e5%9c%a8%e4%b8%80%e8%b5%b7%ef%bc%8c%e6%af%94%e5%a6%82%e6%9f%90%e6%ac%a1%e6%97%85%e8%a1%8c%e7%9a%84%e7%85%a7%e7%89%87%e3%80%81%e6%9f%90%e4%b8%aa%e5%91%a8%e6%9c%ab%e7%9a%84%e7%85%a7%e7%89%87%ef%bc%8c%e5%b9%b6%e4%b8%94%e8%83%bd%e5%a4%9f%e8%bf%9b%e8%a1%8c%e8%87%aa%e5%8a%a8%e7%bc%96%e8%be%91%e3%80%82iOS%2010%e7%85%a7%e7%89%87%e8%bf%98%e6%96%b0%e5%a2%9e%e4%ba%86%e4%b8%80%e4%b8%aa%e2%80%9c%e8%ae%b0%e5%bf%86%e2%80%9d%e6%a0%87%e7%ad%be%e3%80%82%20%e8%8b%b9%e6%9e%9c%e5%9c%b0%e5%9b%be%ef%bc%9a%e6%9c%89%e7%82%b9%e7%b1%bb%e4%bc%bcSiri%e5%92%8c%e7%85%a7%e7%89%87%e7%9a%84%e6%9b%b4%e6%96%b0%ef%bc%8c%e8%8b%b9%e6%9e%9c%e5%9c%b0%e5%9b%be%e4%b9%9f%e5%a2%9e%e5%8a%a0%e4%ba%86%e5%be%88%e5%a4%9a%e9%a2%84%e6%b5%8b%e5%8a%9f%e8%83%bd%ef%bc%8c%e4%be%8b%e5%a6%82%e8%8b%b9%e6%9e%9c%e5%9c%b0%e5%9b%be%e8%83%bd%e5%a4%9f%e5%b0%86%e6%8f%90%e4%be%9b%e9%99%84%e8%bf%91%e7%9a%84%e9%a4%90%e5%8e%85%e5%bb%ba%e8%ae%ae%e3%80%82%e8%8b%b9%e6%9e%9c%e5%9c%b0%e5%9b%be%e7%9a%84%e7%95%8c%e9%9d%a2%e4%b9%9f%e5%be%97%e5%88%b0%e4%ba%86%e9%87%8d%e6%96%b0%e8%ae%be%e8%ae%a1%ef%bc%8c%e6%9b%b4%e5%8a%a0%e7%9a%84%e7%ae%80%e6%b4%81%ef%bc%8c%e5%b9%b6%e5%a2%9e%e5%8a%a0%e4%ba%86%e4%ba%a4%e9%80%9a%e5%ae%9e%e6%97%b6%e4%bf%a1%e6%81%af%e3%80%82%e6%96%b0%e7%9a%84%e8%8b%b9%e6%9e%9c%e5%9c%b0%e5%9b%be%e8%bf%98%e5%b0%86%e6%95%b4%e5%90%88%e5%9c%a8%e8%8b%b9%e6%9e%9cCarPlay%e4%b8%ad%ef%bc%8c%e5%b0%86%e4%b8%ba%e7%94%a8%e6%88%b7%e6%8f%90%e4%be%9bturn-by-turn%e5%af%bc%e8%88%aa%e5%8a%9f%e8%83%bd%e3%80%82%e5%92%8cSiri%e4%b8%80%e6%a0%b7%ef%bc%8c%e5%9c%b0%e5%9b%be%e4%b9%9f%e5%b0%86%e5%bc%80%e6%94%be%e7%bb%99%e5%bc%80%e5%8f%91%e8%80%85%e3%80%82%20%e8%8b%b9%e6%9e%9c%e9%9f%b3%e4%b9%90%ef%bc%9a%e8%8b%b9%e6%9e%9c%e9%9f%b3%e4%b9%90%e7%9a%84%e7%95%8c%e9%9d%a2%e5%be%97%e5%88%b0%e4%ba%86%e6%9b%b4%e6%96%b0%ef%bc%8c%e7%95%8c%e9%9d%a2%e4%bc%9a%e6%9b%b4%e5%8a%a0%e7%ae%80%e6%b4%81%e3%80%81%e6%94%af%e6%8c%81%e5%a4%9a%e4%bb%bb%e5%8a%a1%ef%bc%8c%e5%a2%9e%e5%8a%a0%e6%9c%80%e8%bf%91%e6%92%ad%e6%94%be%e5%88%97%e8%a1%a8%e3%80%82%e8%8b%b9%e6%9e%9c%e9%9f%b3%e4%b9%90%e7%8e%b0%e5%9c%a8%e5%b7%b2%e7%bb%8f%e6%9c%891500%e4%b8%87%e4%bb%98%e8%b4%b9%e7%94%a8%e6%88%b7%e3%80%82%20HomeKit%ef%bc%9aiOS%2010%e6%96%b0%e5%a2%9e%e6%99%ba%e8%83%bd%e5%ae%b6%e5%ba%ad%e5%ba%94%e7%94%a8%ef%bc%8c%e6%94%af%e6%8c%81%e4%b8%80%e9%94%ae%e5%9c%ba%e6%99%af%e6%a8%a1%e5%bc%8f%ef%bc%8cHomeKit%e5%8f%af%e4%bb%a5%e4%b8%8eSiri%e7%9b%b8%e8%bf%9e%e6%8e%a5%e3%80%82%20%20%e8%8b%b9%e6%9e%9c%e7%94%b5%e8%af%9d%ef%bc%9a%e8%8b%b9%e6%9e%9c%e6%9b%b4%e6%96%b0%e4%ba%86%e7%94%b5%e8%af%9d%e5%8a%9f%e8%83%bd%ef%bc%8c%e6%9d%a5%e7%94%b5%e6%97%b6%e5%8f%af%e4%bb%a5%e5%8c%ba%e5%88%ab%e5%87%ba%e9%aa%9a%e6%89%b0%e7%94%b5%e8%af%9d%e3%80%82%0a%20iMesseage%ef%bc%9a%e5%9c%a8iMessage%e6%96%b9%e9%9d%a2%ef%bc%8c%e7%94%a8%e6%88%b7%e5%8f%af%e4%bb%a5%e7%9b%b4%e6%8e%a5%e5%9c%a8%e6%96%87%e6%9c%ac%e6%a1%86%e5%86%85%e5%8f%91%e9%80%81%e8%a7%86%e9%a2%91%e3%80%81%e9%93%be%e6%8e%a5%ef%bc%8c%e5%88%86%e4%ba%ab%e5%ae%9e%e6%97%b6%e7%85%a7%e7%89%87%e3%80%82%e5%8f%a6%e5%a4%96%ef%bc%8c%e8%8b%b9%e6%9e%9c%e8%bf%98%e5%a2%9e%e6%b7%bb%e4%ba%86%e8%a1%a8%e6%83%85%e9%a2%84%e6%b5%8b%e5%8a%9f%e8%83%bd%ef%bc%8c%e6%89%93%e5%87%ba%e7%9a%84%e6%96%87%e5%ad%97%e8%8b%a5%e5%92%8c%e8%a1%a8%e6%83%85%e7%9b%b8%e7%ac%a6%ef%bc%8c%e5%b0%86%e4%bc%9a%e7%9b%b4%e6%8e%a5%e6%8e%a8%e8%8d%90%e7%9b%b8%e5%85%b3%e8%a1%a8%e6%83%85%e3%80%82%20%20%e4%bb%a5%e4%b8%8b%e6%98%af%e6%88%91%e5%85%b3%e4%ba%8e%e5%85%b3%e4%ba%8eiOS%2010%e4%b8%ad%e5%8f%98%e5%8c%96%e6%af%94%e8%be%83%e5%a4%a7%e7%9a%84%e6%8e%a8%e9%80%81%e9%80%9a%e7%9f%a5%e7%9a%84%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%e3%80%82%0a%23%23%23%23%e7%9b%ae%e5%bd%95%0a%201.Notification%20User%20Interface%202.Media%20Attachments%203.Customize%20user%20interface%204.Customize%20Actions%20%20%e4%b8%80.%20Notification%20User%20Interface%20%e8%ae%a9%e6%88%91%e4%bb%ac%e5%85%88%e6%9d%a5%e7%9c%8b%e7%9c%8b%e7%94%a8%e6%88%b7%e6%8e%a8%e9%80%81%e5%9c%a8iOS%20X%e4%b8%ad%e7%9a%84%e6%a0%b7%e5%ad%90%ef%bc%8c%e5%a6%82%e4%b8%8b%e5%9b%be%0a%e4%b8%8a%e5%9b%be%e8%bf%99%e6%98%af%e5%9c%a8%e9%94%81%e5%b1%8f%e7%95%8c%e9%9d%a2%e4%b8%8b%e7%9a%84%e6%8e%a8%e9%80%81%e3%80%82%e6%94%af%e6%8c%81%e6%8a%ac%e8%b5%b7%e6%89%8b%e6%9c%ba%e5%94%a4%e9%86%92%e5%8a%9f%e8%83%bd%e3%80%82%0a%e4%b8%8a%e5%9b%be%e6%98%afBanner%ef%bc%8c%e5%8f%af%e4%bb%a5%e7%9c%8b%e5%88%b0%e8%bf%99%e4%b8%aa%e6%8e%a8%e9%80%81%e6%9b%b4%e5%8a%a0%e7%9a%84%e6%98%93%e8%af%bb%ef%bc%8c%e5%b9%b6%e4%b8%94%e5%8c%85%e5%90%ab%e6%9b%b4%e5%a4%9a%e7%9a%84%e5%86%85%e5%ae%b9%e3%80%82%0a%e4%b8%8a%e5%9b%be%e6%98%af%e9%80%9a%e7%9f%a5%e4%b8%ad%e5%bf%83%e3%80%82%e4%bb%8e%e4%b8%8a%e9%9d%a2%e4%b8%89%e7%a7%8d%e5%9b%be%e5%8f%af%e4%bb%a5%e7%9c%8b%e5%88%b0%ef%bc%8c%e5%ae%83%e4%bb%ac%e9%83%bd%e9%95%bf%e4%b8%80%e4%b8%aa%e6%a0%b7%e3%80%82%0a%e5%9c%a8iOS%208%20%e4%b8%ad%ef%bc%8c%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e7%bb%99%e6%8e%a8%e9%80%81%e5%a2%9e%e5%8a%a0%e7%94%a8%e6%88%b7%e6%93%8d%e4%bd%9c%ef%bc%8c%e8%bf%99%e6%a0%b7%e4%bd%bf%e6%8e%a8%e9%80%81%e6%9b%b4%e5%8a%a0%e5%85%b7%e6%9c%89%e4%ba%a4%e4%ba%92%e6%80%a7%ef%bc%8c%e5%b9%b6%e4%b8%94%e5%85%81%e8%ae%b8%e7%94%a8%e6%88%b7%e5%8e%bb%e5%a4%84%e7%90%86%e7%94%a8%e6%88%b7%e6%8e%a8%e9%80%81%e6%9b%b4%e5%8a%a0%e7%9a%84%e8%bf%85%e9%80%9f%e3%80%82%e5%88%b0%e4%ba%86iOS%209%20%e4%b8%ad%ef%bc%8c%e8%8b%b9%e6%9e%9c%e5%8f%88%e5%86%8d%e6%ac%a1%e5%a2%9e%e5%8a%a0%e4%ba%86%e5%bf%ab%e9%80%9f%e5%9b%9e%e5%a4%8d%e5%8a%9f%e8%83%bd%ef%bc%8c%e8%bf%9b%e4%b8%80%e6%ad%a5%e7%9a%84%e6%8f%90%e9%ab%98%e4%ba%86%e9%80%9a%e7%9f%a5%e7%9a%84%e5%93%8d%e5%ba%94%e6%80%a7%e3%80%82%e5%bc%80%e5%8f%91%e8%80%85%e5%8f%af%e4%bb%a5%e5%85%81%e8%ae%b8%e7%94%a8%e6%88%b7%e9%80%9a%e8%bf%87%e7%82%b9%e5%87%bb%e6%8e%a8%e9%80%81%ef%bc%8c%e5%b9%b6%e7%94%a8%e6%96%87%e5%ad%97%e8%bf%9b%e8%a1%8c%e5%9b%9e%e5%a4%8d%e3%80%82%e5%86%8d%e5%b0%b1%e5%88%b0%e4%ba%86iOS%2010%20%e4%b8%ad%ef%bc%8c%e6%8e%a8%e9%80%81%e5%8f%98%e5%be%97%e6%9b%b4%e5%8a%a0%e7%bb%99%e5%8a%9b%e3%80%82%e5%9b%a0%e4%b8%ba%e5%9c%a8iOS%20X%e4%b8%ad%ef%bc%8c%e6%8e%a8%e9%80%81%e5%af%b9iOS%e7%b3%bb%e7%bb%9f%e6%9d%a5%e8%af%b4%ef%bc%8c%e6%98%af%e5%be%88%e9%87%8d%e8%a6%81%e7%9a%84%e4%b8%80%e9%83%a8%e5%88%86%e3%80%82%e5%9c%a8%e6%97%a5%e5%b8%b8%e4%bd%bf%e7%94%a8%e4%b8%ad%ef%bc%8c%e6%88%91%e4%bb%ac%e4%bc%9a%e7%bb%8f%e5%b8%b8%e5%92%8c%e6%8e%a8%e9%80%81%e6%89%93%e4%ba%a4%e9%81%93%e3%80%82%e6%8e%a8%e9%80%81%e6%98%af%e6%88%91%e4%bb%ac%e5%92%8c%e8%ae%be%e5%a4%87%e8%bf%9b%e8%a1%8c%e4%ba%92%e5%8a%a8%e9%9d%9e%e5%b8%b8%e9%87%8d%e8%a6%81%e7%9a%84%e6%96%b9%e5%bc%8f%e3%80%82%0a%e5%9c%a8iOS%20X%20%e4%b8%ad%ef%bc%8c%e4%bd%a0%e5%8f%af%e4%bb%a5%e6%8c%89%e5%8e%8b%e6%8e%a8%e9%80%81%ef%bc%8c%e6%8e%a8%e9%80%81%e5%b0%b1%e4%bc%9a%e8%a2%ab%e5%b1%95%e5%bc%80%ef%bc%8c%e5%b1%95%e7%a4%ba%e5%87%ba%e6%9b%b4%e5%8a%a0%e8%af%a6%e7%bb%86%e7%9a%84%e7%94%a8%e6%88%b7%e7%95%8c%e9%9d%a2%e3%80%82%e5%b1%95%e7%a4%ba%e5%87%ba%e6%9d%a5%e7%9a%84%e8%af%a6%e7%bb%86%e7%95%8c%e9%9d%a2%e5%af%b9%e7%94%a8%e6%88%b7%e6%9d%a5%e8%af%b4%ef%bc%8c%e6%8f%90%e4%be%9b%e4%ba%86%e6%9b%b4%e5%8a%a0%e6%9c%89%e7%94%a8%e7%9a%84%e4%bf%a1%e6%81%af%e3%80%82%e7%94%a8%e6%88%b7%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%e7%82%b9%e5%87%bb%e4%b8%8b%e9%9d%a2%e7%9a%84%e6%8c%89%e9%92%ae%ef%bc%8c%e6%9d%a5%e5%a4%84%e7%90%86%e4%b8%80%e4%ba%9b%e4%ba%8b%e4%bb%b6%ef%bc%8c%e5%b9%b6%e4%b8%94%e6%8e%a8%e9%80%81%e7%9a%84%e8%af%a6%e7%bb%86%e7%95%8c%e9%9d%a2%e4%b9%9f%e4%bc%9a%e8%b7%9f%e7%9d%80%e7%94%a8%e6%88%b7%e7%9a%84%e6%93%8d%e4%bd%9c%e8%bf%9b%e8%a1%8c%e6%9b%b4%e6%96%b0UI%e7%95%8c%e9%9d%a2%e3%80%82%0aiOS%208%20%e4%b8%adiMessage%e6%94%af%e6%8c%81%e4%ba%86%e5%bf%ab%e9%80%9f%e5%9b%9e%e5%a4%8d%e5%8a%9f%e8%83%bd%ef%bc%8c%e4%bd%86%e6%98%af%e4%bd%a0%e5%8f%aa%e8%83%bd%e7%9c%8b%e8%a7%81%e4%b8%80%e6%9d%a1%e4%bf%a1%e6%81%af%ef%bc%8c%e5%b9%b6%e4%b8%94%e4%bd%a0%e4%b9%9f%e5%8f%aa%e8%83%bd%e5%9b%9e%e5%a4%8d%e4%b8%80%e6%9d%a1%e4%bf%a1%e6%81%af%e3%80%82%e4%bd%86%e6%98%af%e5%9c%a8iOS%20X%e4%b8%ad%ef%bc%8c%e4%bd%a0%e5%8f%af%e4%bb%a5%e5%b1%95%e5%bc%80%e6%8e%a8%e9%80%81%ef%bc%8c%e8%bf%99%e4%b8%aa%e6%97%b6%e5%80%99%e4%bd%a0%e5%b0%b1%e5%8f%af%e4%bb%a5%e7%9c%8b%e5%88%b0%e6%95%b4%e4%b8%aa%e5%af%b9%e8%af%9d%e7%9a%84%e5%86%85%e5%ae%b9%e4%ba%86%e3%80%82%e4%bd%a0%e5%8f%af%e4%bb%a5%e7%ad%89%e5%be%85%e4%bd%a0%e7%9a%84%e6%9c%8b%e5%8f%8b%e5%9b%9e%e5%a4%8d%ef%bc%8c%e4%bd%a0%e5%86%8d%e5%9b%9e%e5%a4%8d%e4%bb%96%ef%bc%8c%e5%b9%b6%e4%b8%94%e5%8f%af%e4%bb%a5%e5%9b%9e%e5%a4%8d%e5%be%88%e5%a4%9a%e6%9d%a1%e3%80%82%0a%e4%bb%a5%e4%b8%8a%e5%b0%b1%e6%98%afiOS%20X%e7%9a%84%e5%bc%ba%e5%a4%a7%e5%8a%9f%e8%83%bd%e3%80%82%e4%bb%a5%e4%b8%8a%e7%9a%84%e6%89%80%e6%9c%89%e5%8a%9f%e8%83%bd%e9%83%bd%e8%83%bd%e9%80%9a%e8%bf%87iOS%20X%e7%9a%84%e6%96%b0API%e6%9d%a5%e5%ae%9e%e7%8e%b0%e3%80%82%e6%89%80%e6%9c%89%e7%9a%84%e6%96%b0%e7%89%b9%e6%80%a7%e9%83%bd%e8%83%bd%e5%9c%a8%e6%88%91%e4%bb%ac%e5%bc%80%e5%8f%91%e8%80%85%e5%bc%80%e5%8f%91%e7%9a%84app%e9%87%8c%e9%9d%a2%e6%9c%89%e6%89%80%e4%bd%93%e7%8e%b0%e3%80%82%0a%e4%ba%8c.%20Media%20Attachments%20%e5%a6%82%e6%9e%9c%e7%bb%8f%e5%b8%b8%e4%bd%bf%e7%94%a8iMessage%e7%9a%84%e6%9c%8b%e5%8f%8b%e4%bb%ac%ef%bc%8c%e5%b0%b1%e4%bc%9a%e7%bb%8f%e5%b8%b8%e6%94%b6%e5%88%b0%e4%b8%80%e4%ba%9b%e4%bf%a1%e6%81%af%ef%bc%8c%e9%99%84%e5%b8%a6%e4%ba%86%e4%b8%80%e4%ba%9b%e7%85%a7%e7%89%87%e6%88%96%e8%80%85%e8%a7%86%e9%a2%91%ef%bc%8c%e6%89%80%e4%bb%a5%e6%8e%a8%e9%80%81%e4%b8%ad%e8%83%bd%e9%99%84%e5%b8%a6%e8%bf%99%e4%ba%9b%e5%a4%9a%e5%aa%92%e4%bd%93%e6%98%af%e9%9d%9e%e5%b8%b8%e9%87%8d%e8%a6%81%e7%9a%84%e3%80%82%e5%a6%82%e6%9e%9c%e6%8e%a8%e9%80%81%e4%b8%ad%e5%8c%85%e5%90%ab%e4%ba%86%e8%bf%99%e4%ba%9b%e5%a4%9a%e5%aa%92%e4%bd%93%e4%bf%a1%e6%81%af%ef%bc%8c%e5%8f%af%e4%bb%a5%e4%bd%bf%e7%94%a8%e6%88%b7%e4%b8%8d%e7%94%a8%e6%89%93%e5%bc%80app%ef%bc%8c%e4%b8%8d%e7%94%a8%e4%b8%8b%e8%bd%bd%e5%b0%b1%e5%8f%af%e4%bb%a5%e5%bf%ab%e9%80%9f%e6%b5%8f%e8%a7%88%e5%88%b0%e5%86%85%e5%ae%b9%e3%80%82%e4%bc%97%e6%89%80%e5%91%a8%e7%9f%a5%ef%bc%8c%e6%8e%a8%e9%80%81%e9%80%9a%e7%9f%a5%e4%b8%ad%e5%b8%a6%e4%ba%86push%20payload%ef%bc%8c%e5%8f%8a%e6%97%b6%e5%8e%bb%e5%b9%b4%e8%8b%b9%e6%9e%9c%e5%b7%b2%e7%bb%8f%e6%8a%8apayload%e7%9a%84size%e6%8f%90%e5%8d%87%e5%88%b0%e4%ba%864k%20bites%ef%bc%8c%e4%bd%86%e6%98%af%e8%bf%99%e4%b9%88%e5%b0%8f%e7%9a%84%e5%ae%b9%e9%87%8f%e4%b9%9f%e6%97%a0%e6%b3%95%e4%bd%bf%e7%94%a8%e6%88%b7%e8%83%bd%e5%8f%91%e9%80%81%e4%b8%80%e5%bc%a0%e9%ab%98%e6%b8%85%e7%9a%84%e5%9b%be%e7%89%87%ef%bc%8c%e7%94%9a%e8%87%b3%e6%8a%8a%e8%bf%99%e5%bc%a0%e5%9b%be%e7%9a%84%e7%bc%a9%e7%95%a5%e5%9b%be%e5%8c%85%e5%90%ab%e5%9c%a8%e6%8e%a8%e9%80%81%e9%80%9a%e7%9f%a5%e9%87%8c%e9%9d%a2%ef%bc%8c%e4%b9%9f%e4%b8%8d%e4%b8%80%e5%ae%9a%e6%94%be%e7%9a%84%e4%b8%8b%e5%8e%bb%e3%80%82%e5%9c%a8iOS%20X%e4%b8%ad%ef%bc%8c%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e4%bd%bf%e7%94%a8%e6%96%b0%e7%89%b9%e6%80%a7%e6%9d%a5%e8%a7%a3%e5%86%b3%e8%bf%99%e4%b8%aa%e9%97%ae%e9%a2%98%e3%80%82%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%e6%96%b0%e7%9a%84service%20extensions%e6%9d%a5%e8%a7%a3%e5%86%b3%e8%bf%99%e4%b8%aa%e9%97%ae%e9%a2%98%e3%80%82"><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fnew.halfrost.com%2fwwdc2016_ios10_notification_new_features%2f&t=WWDC%202016%20Session%20%e7%ac%94%e8%ae%b0%20-%20iOS%2010%20%e6%8e%a8%e9%80%81%20Notification%20%e6%96%b0%e7%89%b9%e6%80%a7"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu class=icon href=# onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden=true></i>Menu</a>
<a id=toc class=icon href=# onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden=true></i>TOC</a>
<a id=share class=icon href=# onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden=true></i>share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i>Top</a></div></div></div><footer id=footer><div class=footer-left><p class=copyright style=float:left;margin-bottom:0><a href=https://github.com/halfrost/Halfrost-Field class=github-repo style=height:18px><span class=gadget-github></span>Star</a>
Copyright &copy;halfrost 2016 - 2021
<a href=http://www.miit.gov.cn/>鄂ICP备16014744号</a></p><br><p class="copyright statistics" style=margin-bottom:20px><span id=busuanzi_container_site_pv>Cumulative Page Views <span id=busuanzi_value_site_pv></span>| Unique Visitors <span id=busuanzi_value_site_uv></span></span></p></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script><script src=/main.min.f870a4d110314b9e50e65f8ac982dc1c9c376c8f1a5083d39c62cfc49073f011.js></script><script async src=/prism.js></script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]},svg:{fontCache:'global'}};</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></html>