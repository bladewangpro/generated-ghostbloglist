<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=theme-color content="#FFFFFF"><meta http-equiv=x-ua-compatible content="IE=edge"><title>手把手教你从 Core Data 迁移到 Realm | prometheus</title><meta name=description content="Explore in every moment of the hard thinking"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="手把手教你从 Core Data 迁移到 Realm"><meta property="og:description" content="前言 看了这篇文章的标题，也许有些人还不知道Realm是什么，那么我先简单介绍一下这个新生的数据库。号称是用来替代SQLite 和 Core Data的。Realm有以下优点：
  使用方便 Realm并不是基于SQLite的对象关系映射数据库。它是使用自己的持久化引擎，为简单和速度而生。用户们说，他们在数分钟之内就上手了Realm，构建一个app只需要数小时，每个app开发时间至少节约数周的时间。
  快 Realm比其他的对象关系映射型数据库(Object Relational Mapping)，甚至比原生的SQLite更加快，这都得益于它零拷贝的设计。看看iOS用户和Android用户都是怎么评价它的快的Twitter
  跨平台 Realm 支持 iOS 和 OS X (Objective‑C & Swift) 和Android。你可以通过使用相同的model，共享Realm文件到各个平台，Java，Swift，Objective-C。并且在全平台可以使用相同的业务逻辑   优秀的特性 Realm支持先进的特性，如加密，图形查询，轻松的迁移。Realm的API是一个非常适合打造高响应的应用程​​序，并且Realm为我们提供方便的组件，以轻松构建复杂的用户界面
  值得信任 Realm已经获得了银行，医疗保健提供商，复杂的企业app，星巴克这些产品的青睐。
  社区驱动 Realm是Github上星标最多的数据库里面排名第四，仅次于Java 和 Cocoa 的repos。除了核心工程之外，Realm的社区已经编译了上百个app插件和组件
  支持 可以从Realm公司快速获得官方的答案，去编译和支持你的数据库。Realm的团队会在Github, StackOverflow, & Twitter回答大家的各种问题
  下面再发3张令人惊喜的性能对比图
上图是每秒能在20万条数据中进行查询后count的次数。realm每秒可以进行30.9次查询后count。SQLite仅仅只有每秒13.6次查询后的count，相对于Core Data只有可怜的1。
在20万条中进行一次遍历查询，数据和前面的count相似：Realm一秒可以遍历20万条数据31次，而RCore Data只能进行两次查询。 SQLite也只有14次而已。
这是在一次事务每秒插入数据的对比，Realm每秒可以插入9.4万条记录，在这个比较里纯SQLite的性能最好，每秒可以插入17.8万条记录。然而封装了SQLite的FMDB的成绩大概是Realm的一半，4.7万，Core Data就更低了，只有可怜的1.8万。
从以上3张图可以看出Realm优秀的特性。那么我们开始使用Realm吧。第一步就是把本地的数据库换成Realm。
下面是我翻译的一篇手把手教程，那么让我们赶紧通过教程，来把Core Data迁移到Realm吧。
原文 译文 把一个使用core data框架作为数据库存储方式的app，迁移到Realm的确是一件很容易的事情。如果你现在有一个已经用了Core Data的app，并且考虑换成Realm，这个手把手教程正适合你！
很多开发者在用户界面，高度集成了Core Data(有时可能有上千行代码),这时很多人会告诉你转换Core Data到Realm可能会花数小时。Core Data和Realm两者都是把你的数据当成Object看待，所以迁移通常是很直接的过程:把你已经存在的Core Data的代码重构成使用Realm API的过程是很简单的。"><meta property="og:type" content="article"><meta property="og:url" content="https://new.halfrost.com/ios_coredata_to_realm/"><meta property="article:published_time" content="2016-06-02T08:03:00+00:00"><meta property="article:modified_time" content="2016-06-02T08:03:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="手把手教你从 Core Data 迁移到 Realm"><meta name=twitter:description content="前言 看了这篇文章的标题，也许有些人还不知道Realm是什么，那么我先简单介绍一下这个新生的数据库。号称是用来替代SQLite 和 Core Data的。Realm有以下优点：
  使用方便 Realm并不是基于SQLite的对象关系映射数据库。它是使用自己的持久化引擎，为简单和速度而生。用户们说，他们在数分钟之内就上手了Realm，构建一个app只需要数小时，每个app开发时间至少节约数周的时间。
  快 Realm比其他的对象关系映射型数据库(Object Relational Mapping)，甚至比原生的SQLite更加快，这都得益于它零拷贝的设计。看看iOS用户和Android用户都是怎么评价它的快的Twitter
  跨平台 Realm 支持 iOS 和 OS X (Objective‑C & Swift) 和Android。你可以通过使用相同的model，共享Realm文件到各个平台，Java，Swift，Objective-C。并且在全平台可以使用相同的业务逻辑   优秀的特性 Realm支持先进的特性，如加密，图形查询，轻松的迁移。Realm的API是一个非常适合打造高响应的应用程​​序，并且Realm为我们提供方便的组件，以轻松构建复杂的用户界面
  值得信任 Realm已经获得了银行，医疗保健提供商，复杂的企业app，星巴克这些产品的青睐。
  社区驱动 Realm是Github上星标最多的数据库里面排名第四，仅次于Java 和 Cocoa 的repos。除了核心工程之外，Realm的社区已经编译了上百个app插件和组件
  支持 可以从Realm公司快速获得官方的答案，去编译和支持你的数据库。Realm的团队会在Github, StackOverflow, & Twitter回答大家的各种问题
  下面再发3张令人惊喜的性能对比图
上图是每秒能在20万条数据中进行查询后count的次数。realm每秒可以进行30.9次查询后count。SQLite仅仅只有每秒13.6次查询后的count，相对于Core Data只有可怜的1。
在20万条中进行一次遍历查询，数据和前面的count相似：Realm一秒可以遍历20万条数据31次，而RCore Data只能进行两次查询。 SQLite也只有14次而已。
这是在一次事务每秒插入数据的对比，Realm每秒可以插入9.4万条记录，在这个比较里纯SQLite的性能最好，每秒可以插入17.8万条记录。然而封装了SQLite的FMDB的成绩大概是Realm的一半，4.7万，Core Data就更低了，只有可怜的1.8万。
从以上3张图可以看出Realm优秀的特性。那么我们开始使用Realm吧。第一步就是把本地的数据库换成Realm。
下面是我翻译的一篇手把手教程，那么让我们赶紧通过教程，来把Core Data迁移到Realm吧。
原文 译文 把一个使用core data框架作为数据库存储方式的app，迁移到Realm的确是一件很容易的事情。如果你现在有一个已经用了Core Data的app，并且考虑换成Realm，这个手把手教程正适合你！
很多开发者在用户界面，高度集成了Core Data(有时可能有上千行代码),这时很多人会告诉你转换Core Data到Realm可能会花数小时。Core Data和Realm两者都是把你的数据当成Object看待，所以迁移通常是很直接的过程:把你已经存在的Core Data的代码重构成使用Realm API的过程是很简单的。"><link rel=stylesheet href=/css/style-white.min.css><link rel=manifest href=/manifest.json><link rel=stylesheet href=/prism.css><link href=/images/apple-touch-icon-60x60.png rel=apple-touch-icon sizes=60x60><link href=/images/apple-touch-icon-76x76.png rel=apple-touch-icon sizes=76x76><link href=/images/apple-touch-icon-120x120.png rel=apple-touch-icon sizes=120x120><link href=/images/apple-touch-icon-152x152.png rel=apple-touch-icon sizes=152x152><link href=/images/apple-touch-icon-180x180.png rel=apple-touch-icon sizes=180x180><link href=/images/apple-touch-icon-512x512.png rel=apple-touch-icon sizes=512x512><link href=/images/apple-touch-icon-1024x1024.png rel=apple-touch-icon sizes=1024x1024><script async>if('serviceWorker'in navigator){navigator.serviceWorker.register("\/serviceworker-v1.min.a64912b78d282eab1ad3715a0943da21616e5f326f8afea27034784ad445043b.js").then(function(){if(navigator.serviceWorker.controller){console.log('Assets cached by the controlling service worker.');}else{console.log('Please reload this page to allow the service worker to handle network operations.');}}).catch(function(error){console.log('ERROR: '+error);});}else{console.log('Service workers are not supported in the current browser.');}</script><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://new.halfrost.com/images/favicon.ico><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-82753806-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="single-max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a><a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a><a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast');" style=display:none><i class="fas fa-chevron-up fa-lg"></i></a><span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=https://books.halfrost.com/>Books</a></li><li><a href=https://github.com/halfrost/Halfrost-Field>Github</a></li><li><a href=https://halfrost.me/>About</a></li><li><a href=/index.xml>RSS</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://new.halfrost.com/ios_launchpage_logo_fly/><i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li><li><a class=icon href=https://new.halfrost.com/ios_callback_hell_promisekit/><i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li><li><a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');"><i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li><li><a class=icon href=#><i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f"><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f&text=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%20Core%20Data%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Realm"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f&title=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%20Core%20Data%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Realm"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f&is_video=false&description=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%20Core%20Data%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Realm"><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%20Core%20Data%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Realm&body=Check out this article: https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f"><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f&title=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%20Core%20Data%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Realm"><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f&title=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%20Core%20Data%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Realm"><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f&title=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%20Core%20Data%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Realm"><i class="fab fa-stumbleupon" aria-hidden=true></i></a></li><li><a class=icon href="http://digg.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f&title=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%20Core%20Data%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Realm"><i class="fab fa-digg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f&name=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%20Core%20Data%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Realm&description=%e5%89%8d%e8%a8%80%20%e7%9c%8b%e4%ba%86%e8%bf%99%e7%af%87%e6%96%87%e7%ab%a0%e7%9a%84%e6%a0%87%e9%a2%98%ef%bc%8c%e4%b9%9f%e8%ae%b8%e6%9c%89%e4%ba%9b%e4%ba%ba%e8%bf%98%e4%b8%8d%e7%9f%a5%e9%81%93Realm%e6%98%af%e4%bb%80%e4%b9%88%ef%bc%8c%e9%82%a3%e4%b9%88%e6%88%91%e5%85%88%e7%ae%80%e5%8d%95%e4%bb%8b%e7%bb%8d%e4%b8%80%e4%b8%8b%e8%bf%99%e4%b8%aa%e6%96%b0%e7%94%9f%e7%9a%84%e6%95%b0%e6%8d%ae%e5%ba%93%e3%80%82%e5%8f%b7%e7%a7%b0%e6%98%af%e7%94%a8%e6%9d%a5%e6%9b%bf%e4%bb%a3SQLite%20%e5%92%8c%20Core%20Data%e7%9a%84%e3%80%82Realm%e6%9c%89%e4%bb%a5%e4%b8%8b%e4%bc%98%e7%82%b9%ef%bc%9a%0a%20%20%e4%bd%bf%e7%94%a8%e6%96%b9%e4%be%bf%20Realm%e5%b9%b6%e4%b8%8d%e6%98%af%e5%9f%ba%e4%ba%8eSQLite%e7%9a%84%e5%af%b9%e8%b1%a1%e5%85%b3%e7%b3%bb%e6%98%a0%e5%b0%84%e6%95%b0%e6%8d%ae%e5%ba%93%e3%80%82%e5%ae%83%e6%98%af%e4%bd%bf%e7%94%a8%e8%87%aa%e5%b7%b1%e7%9a%84%e6%8c%81%e4%b9%85%e5%8c%96%e5%bc%95%e6%93%8e%ef%bc%8c%e4%b8%ba%e7%ae%80%e5%8d%95%e5%92%8c%e9%80%9f%e5%ba%a6%e8%80%8c%e7%94%9f%e3%80%82%e7%94%a8%e6%88%b7%e4%bb%ac%e8%af%b4%ef%bc%8c%e4%bb%96%e4%bb%ac%e5%9c%a8%e6%95%b0%e5%88%86%e9%92%9f%e4%b9%8b%e5%86%85%e5%b0%b1%e4%b8%8a%e6%89%8b%e4%ba%86Realm%ef%bc%8c%e6%9e%84%e5%bb%ba%e4%b8%80%e4%b8%aaapp%e5%8f%aa%e9%9c%80%e8%a6%81%e6%95%b0%e5%b0%8f%e6%97%b6%ef%bc%8c%e6%af%8f%e4%b8%aaapp%e5%bc%80%e5%8f%91%e6%97%b6%e9%97%b4%e8%87%b3%e5%b0%91%e8%8a%82%e7%ba%a6%e6%95%b0%e5%91%a8%e7%9a%84%e6%97%b6%e9%97%b4%e3%80%82%0a%20%20%e5%bf%ab%20Realm%e6%af%94%e5%85%b6%e4%bb%96%e7%9a%84%e5%af%b9%e8%b1%a1%e5%85%b3%e7%b3%bb%e6%98%a0%e5%b0%84%e5%9e%8b%e6%95%b0%e6%8d%ae%e5%ba%93%28Object%20Relational%20Mapping%29%ef%bc%8c%e7%94%9a%e8%87%b3%e6%af%94%e5%8e%9f%e7%94%9f%e7%9a%84SQLite%e6%9b%b4%e5%8a%a0%e5%bf%ab%ef%bc%8c%e8%bf%99%e9%83%bd%e5%be%97%e7%9b%8a%e4%ba%8e%e5%ae%83%e9%9b%b6%e6%8b%b7%e8%b4%9d%e7%9a%84%e8%ae%be%e8%ae%a1%e3%80%82%e7%9c%8b%e7%9c%8biOS%e7%94%a8%e6%88%b7%e5%92%8cAndroid%e7%94%a8%e6%88%b7%e9%83%bd%e6%98%af%e6%80%8e%e4%b9%88%e8%af%84%e4%bb%b7%e5%ae%83%e7%9a%84%e5%bf%ab%e7%9a%84Twitter%0a%20%20%e8%b7%a8%e5%b9%b3%e5%8f%b0%20Realm%20%e6%94%af%e6%8c%81%20iOS%20%e5%92%8c%20OS%20X%20%28Objective%e2%80%91C%c2%a0%26amp%3b%c2%a0Swift%29%20%e5%92%8cAndroid%e3%80%82%e4%bd%a0%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%e4%bd%bf%e7%94%a8%e7%9b%b8%e5%90%8c%e7%9a%84model%ef%bc%8c%e5%85%b1%e4%ba%abRealm%e6%96%87%e4%bb%b6%e5%88%b0%e5%90%84%e4%b8%aa%e5%b9%b3%e5%8f%b0%ef%bc%8cJava%ef%bc%8cSwift%ef%bc%8cObjective-C%e3%80%82%e5%b9%b6%e4%b8%94%e5%9c%a8%e5%85%a8%e5%b9%b3%e5%8f%b0%e5%8f%af%e4%bb%a5%e4%bd%bf%e7%94%a8%e7%9b%b8%e5%90%8c%e7%9a%84%e4%b8%9a%e5%8a%a1%e9%80%bb%e8%be%91%20%20%20%e4%bc%98%e7%a7%80%e7%9a%84%e7%89%b9%e6%80%a7%20Realm%e6%94%af%e6%8c%81%e5%85%88%e8%bf%9b%e7%9a%84%e7%89%b9%e6%80%a7%ef%bc%8c%e5%a6%82%e5%8a%a0%e5%af%86%ef%bc%8c%e5%9b%be%e5%bd%a2%e6%9f%a5%e8%af%a2%ef%bc%8c%e8%bd%bb%e6%9d%be%e7%9a%84%e8%bf%81%e7%a7%bb%e3%80%82Realm%e7%9a%84API%e6%98%af%e4%b8%80%e4%b8%aa%e9%9d%9e%e5%b8%b8%e9%80%82%e5%90%88%e6%89%93%e9%80%a0%e9%ab%98%e5%93%8d%e5%ba%94%e7%9a%84%e5%ba%94%e7%94%a8%e7%a8%8b%e2%80%8b%e2%80%8b%e5%ba%8f%ef%bc%8c%e5%b9%b6%e4%b8%94Realm%e4%b8%ba%e6%88%91%e4%bb%ac%e6%8f%90%e4%be%9b%e6%96%b9%e4%be%bf%e7%9a%84%e7%bb%84%e4%bb%b6%ef%bc%8c%e4%bb%a5%e8%bd%bb%e6%9d%be%e6%9e%84%e5%bb%ba%e5%a4%8d%e6%9d%82%e7%9a%84%e7%94%a8%e6%88%b7%e7%95%8c%e9%9d%a2%0a%20%20%e5%80%bc%e5%be%97%e4%bf%a1%e4%bb%bb%20Realm%e5%b7%b2%e7%bb%8f%e8%8e%b7%e5%be%97%e4%ba%86%e9%93%b6%e8%a1%8c%ef%bc%8c%e5%8c%bb%e7%96%97%e4%bf%9d%e5%81%a5%e6%8f%90%e4%be%9b%e5%95%86%ef%bc%8c%e5%a4%8d%e6%9d%82%e7%9a%84%e4%bc%81%e4%b8%9aapp%ef%bc%8c%e6%98%9f%e5%b7%b4%e5%85%8b%e8%bf%99%e4%ba%9b%e4%ba%a7%e5%93%81%e7%9a%84%e9%9d%92%e7%9d%90%e3%80%82%0a%20%20%e7%a4%be%e5%8c%ba%e9%a9%b1%e5%8a%a8%20Realm%e6%98%afGithub%e4%b8%8a%e6%98%9f%e6%a0%87%e6%9c%80%e5%a4%9a%e7%9a%84%e6%95%b0%e6%8d%ae%e5%ba%93%e9%87%8c%e9%9d%a2%e6%8e%92%e5%90%8d%e7%ac%ac%e5%9b%9b%ef%bc%8c%e4%bb%85%e6%ac%a1%e4%ba%8eJava%20%e5%92%8c%20Cocoa%20%e7%9a%84repos%e3%80%82%e9%99%a4%e4%ba%86%e6%a0%b8%e5%bf%83%e5%b7%a5%e7%a8%8b%e4%b9%8b%e5%a4%96%ef%bc%8cRealm%e7%9a%84%e7%a4%be%e5%8c%ba%e5%b7%b2%e7%bb%8f%e7%bc%96%e8%af%91%e4%ba%86%e4%b8%8a%e7%99%be%e4%b8%aaapp%e6%8f%92%e4%bb%b6%e5%92%8c%e7%bb%84%e4%bb%b6%0a%20%20%e6%94%af%e6%8c%81%20%e5%8f%af%e4%bb%a5%e4%bb%8eRealm%e5%85%ac%e5%8f%b8%e5%bf%ab%e9%80%9f%e8%8e%b7%e5%be%97%e5%ae%98%e6%96%b9%e7%9a%84%e7%ad%94%e6%a1%88%ef%bc%8c%e5%8e%bb%e7%bc%96%e8%af%91%e5%92%8c%e6%94%af%e6%8c%81%e4%bd%a0%e7%9a%84%e6%95%b0%e6%8d%ae%e5%ba%93%e3%80%82Realm%e7%9a%84%e5%9b%a2%e9%98%9f%e4%bc%9a%e5%9c%a8Github%2c%c2%a0StackOverflow%2c%20%26amp%3b%c2%a0Twitter%e5%9b%9e%e7%ad%94%e5%a4%a7%e5%ae%b6%e7%9a%84%e5%90%84%e7%a7%8d%e9%97%ae%e9%a2%98%0a%20%20%e4%b8%8b%e9%9d%a2%e5%86%8d%e5%8f%913%e5%bc%a0%e4%bb%a4%e4%ba%ba%e6%83%8a%e5%96%9c%e7%9a%84%e6%80%a7%e8%83%bd%e5%af%b9%e6%af%94%e5%9b%be%0a%e4%b8%8a%e5%9b%be%e6%98%af%e6%af%8f%e7%a7%92%e8%83%bd%e5%9c%a820%e4%b8%87%e6%9d%a1%e6%95%b0%e6%8d%ae%e4%b8%ad%e8%bf%9b%e8%a1%8c%e6%9f%a5%e8%af%a2%e5%90%8ecount%e7%9a%84%e6%ac%a1%e6%95%b0%e3%80%82realm%e6%af%8f%e7%a7%92%e5%8f%af%e4%bb%a5%e8%bf%9b%e8%a1%8c30.9%e6%ac%a1%e6%9f%a5%e8%af%a2%e5%90%8ecount%e3%80%82SQLite%e4%bb%85%e4%bb%85%e5%8f%aa%e6%9c%89%e6%af%8f%e7%a7%9213.6%e6%ac%a1%e6%9f%a5%e8%af%a2%e5%90%8e%e7%9a%84count%ef%bc%8c%e7%9b%b8%e5%af%b9%e4%ba%8eCore%20Data%e5%8f%aa%e6%9c%89%e5%8f%af%e6%80%9c%e7%9a%841%e3%80%82%0a%e5%9c%a820%e4%b8%87%e6%9d%a1%e4%b8%ad%e8%bf%9b%e8%a1%8c%e4%b8%80%e6%ac%a1%e9%81%8d%e5%8e%86%e6%9f%a5%e8%af%a2%ef%bc%8c%e6%95%b0%e6%8d%ae%e5%92%8c%e5%89%8d%e9%9d%a2%e7%9a%84count%e7%9b%b8%e4%bc%bc%ef%bc%9aRealm%e4%b8%80%e7%a7%92%e5%8f%af%e4%bb%a5%e9%81%8d%e5%8e%8620%e4%b8%87%e6%9d%a1%e6%95%b0%e6%8d%ae31%e6%ac%a1%ef%bc%8c%e8%80%8cRCore%20Data%e5%8f%aa%e8%83%bd%e8%bf%9b%e8%a1%8c%e4%b8%a4%e6%ac%a1%e6%9f%a5%e8%af%a2%e3%80%82%20SQLite%e4%b9%9f%e5%8f%aa%e6%9c%8914%e6%ac%a1%e8%80%8c%e5%b7%b2%e3%80%82%0a%e8%bf%99%e6%98%af%e5%9c%a8%e4%b8%80%e6%ac%a1%e4%ba%8b%e5%8a%a1%e6%af%8f%e7%a7%92%e6%8f%92%e5%85%a5%e6%95%b0%e6%8d%ae%e7%9a%84%e5%af%b9%e6%af%94%ef%bc%8cRealm%e6%af%8f%e7%a7%92%e5%8f%af%e4%bb%a5%e6%8f%92%e5%85%a59.4%e4%b8%87%e6%9d%a1%e8%ae%b0%e5%bd%95%ef%bc%8c%e5%9c%a8%e8%bf%99%e4%b8%aa%e6%af%94%e8%be%83%e9%87%8c%e7%ba%afSQLite%e7%9a%84%e6%80%a7%e8%83%bd%e6%9c%80%e5%a5%bd%ef%bc%8c%e6%af%8f%e7%a7%92%e5%8f%af%e4%bb%a5%e6%8f%92%e5%85%a517.8%e4%b8%87%e6%9d%a1%e8%ae%b0%e5%bd%95%e3%80%82%e7%84%b6%e8%80%8c%e5%b0%81%e8%a3%85%e4%ba%86SQLite%e7%9a%84FMDB%e7%9a%84%e6%88%90%e7%bb%a9%e5%a4%a7%e6%a6%82%e6%98%afRealm%e7%9a%84%e4%b8%80%e5%8d%8a%ef%bc%8c4.7%e4%b8%87%ef%bc%8cCore%20Data%e5%b0%b1%e6%9b%b4%e4%bd%8e%e4%ba%86%ef%bc%8c%e5%8f%aa%e6%9c%89%e5%8f%af%e6%80%9c%e7%9a%841.8%e4%b8%87%e3%80%82%0a%e4%bb%8e%e4%bb%a5%e4%b8%8a3%e5%bc%a0%e5%9b%be%e5%8f%af%e4%bb%a5%e7%9c%8b%e5%87%baRealm%e4%bc%98%e7%a7%80%e7%9a%84%e7%89%b9%e6%80%a7%e3%80%82%e9%82%a3%e4%b9%88%e6%88%91%e4%bb%ac%e5%bc%80%e5%a7%8b%e4%bd%bf%e7%94%a8Realm%e5%90%a7%e3%80%82%e7%ac%ac%e4%b8%80%e6%ad%a5%e5%b0%b1%e6%98%af%e6%8a%8a%e6%9c%ac%e5%9c%b0%e7%9a%84%e6%95%b0%e6%8d%ae%e5%ba%93%e6%8d%a2%e6%88%90Realm%e3%80%82%0a%e4%b8%8b%e9%9d%a2%e6%98%af%e6%88%91%e7%bf%bb%e8%af%91%e7%9a%84%e4%b8%80%e7%af%87%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e7%a8%8b%ef%bc%8c%e9%82%a3%e4%b9%88%e8%ae%a9%e6%88%91%e4%bb%ac%e8%b5%b6%e7%b4%a7%e9%80%9a%e8%bf%87%e6%95%99%e7%a8%8b%ef%bc%8c%e6%9d%a5%e6%8a%8aCore%20Data%e8%bf%81%e7%a7%bb%e5%88%b0Realm%e5%90%a7%e3%80%82%0a%e5%8e%9f%e6%96%87%20%e8%af%91%e6%96%87%20%e6%8a%8a%e4%b8%80%e4%b8%aa%e4%bd%bf%e7%94%a8core%20data%e6%a1%86%e6%9e%b6%e4%bd%9c%e4%b8%ba%e6%95%b0%e6%8d%ae%e5%ba%93%e5%ad%98%e5%82%a8%e6%96%b9%e5%bc%8f%e7%9a%84app%ef%bc%8c%e8%bf%81%e7%a7%bb%e5%88%b0Realm%e7%9a%84%e7%a1%ae%e6%98%af%e4%b8%80%e4%bb%b6%e5%be%88%e5%ae%b9%e6%98%93%e7%9a%84%e4%ba%8b%e6%83%85%e3%80%82%e5%a6%82%e6%9e%9c%e4%bd%a0%e7%8e%b0%e5%9c%a8%e6%9c%89%e4%b8%80%e4%b8%aa%e5%b7%b2%e7%bb%8f%e7%94%a8%e4%ba%86Core%20Data%e7%9a%84app%ef%bc%8c%e5%b9%b6%e4%b8%94%e8%80%83%e8%99%91%e6%8d%a2%e6%88%90Realm%ef%bc%8c%e8%bf%99%e4%b8%aa%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e7%a8%8b%e6%ad%a3%e9%80%82%e5%90%88%e4%bd%a0%ef%bc%81%0a%e5%be%88%e5%a4%9a%e5%bc%80%e5%8f%91%e8%80%85%e5%9c%a8%e7%94%a8%e6%88%b7%e7%95%8c%e9%9d%a2%ef%bc%8c%e9%ab%98%e5%ba%a6%e9%9b%86%e6%88%90%e4%ba%86Core%20Data%28%e6%9c%89%e6%97%b6%e5%8f%af%e8%83%bd%e6%9c%89%e4%b8%8a%e5%8d%83%e8%a1%8c%e4%bb%a3%e7%a0%81%29%2c%e8%bf%99%e6%97%b6%e5%be%88%e5%a4%9a%e4%ba%ba%e4%bc%9a%e5%91%8a%e8%af%89%e4%bd%a0%e8%bd%ac%e6%8d%a2Core%20Data%e5%88%b0Realm%e5%8f%af%e8%83%bd%e4%bc%9a%e8%8a%b1%e6%95%b0%e5%b0%8f%e6%97%b6%e3%80%82Core%20Data%e5%92%8cRealm%e4%b8%a4%e8%80%85%e9%83%bd%e6%98%af%e6%8a%8a%e4%bd%a0%e7%9a%84%e6%95%b0%e6%8d%ae%e5%bd%93%e6%88%90Object%e7%9c%8b%e5%be%85%ef%bc%8c%e6%89%80%e4%bb%a5%e8%bf%81%e7%a7%bb%e9%80%9a%e5%b8%b8%e6%98%af%e5%be%88%e7%9b%b4%e6%8e%a5%e7%9a%84%e8%bf%87%e7%a8%8b%3a%e6%8a%8a%e4%bd%a0%e5%b7%b2%e7%bb%8f%e5%ad%98%e5%9c%a8%e7%9a%84Core%20Data%e7%9a%84%e4%bb%a3%e7%a0%81%e9%87%8d%e6%9e%84%e6%88%90%e4%bd%bf%e7%94%a8Realm%20API%e7%9a%84%e8%bf%87%e7%a8%8b%e6%98%af%e5%be%88%e7%ae%80%e5%8d%95%e7%9a%84%e3%80%82"><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f&t=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%20Core%20Data%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Realm"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#前言>前言</a></li><li><a href=#原文httpsrealmionewsmigrating-from-core-data-to-realm><a href=https://realm.io/news/migrating-from-core-data-to-realm/>原文</a></a></li><li><a href=#译文>译文</a></li><li><a href=#1移除core-data-framework>1.移除Core Data Framework</a></li><li><a href=#2移除core-data的设置代码>2.移除Core Data的设置代码</a></li><li><a href=#3迁移model文件>3.迁移model文件</a></li><li><a href=#4迁移写操作>4.迁移写操作</a></li><li><a href=#5迁移查询>5.迁移查询</a></li><li><a href=#6迁移用户数据>6.迁移用户数据</a></li><li><a href=#进一步的讨论>进一步的讨论</a></li><li><a href=#结尾>结尾</a></li></ul></li></ul></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">手把手教你从 Core Data 迁移到 Realm</h1><div class=meta><div class=postdate><time datetime="2016-06-02 08:03:00 +0000 UTC" itemprop=datePublished>Jun 02</time></div><div class=article-category><i class="fas fa-archive"></i><a class=category-link href=/categories/ios>iOS</a>
,
<a class=category-link href=/categories/realm>Realm</a>
,
<a class=category-link href=/categories/%E6%95%B0%E6%8D%AE%E5%BA%93>数据库</a>
,
<a class=category-link href=/categories/core-data>Core Data</a></div><div class=article-tag><i class="fas fa-tag"></i><a class=tag-link href=/tags/ios rel=tag>iOS</a>
,
<a class=tag-link href=/tags/realm rel=tag>Realm</a>
,
<a class=tag-link href=/tags/%E6%95%B0%E6%8D%AE%E5%BA%93 rel=tag>数据库</a>
,
<a class=tag-link href=/tags/core-data rel=tag>Core Data</a></div></div></header><div class=content itemprop=articleBody><h4 id=前言>前言</h4><p>看了这篇文章的标题，也许有些人还不知道Realm是什么，那么我先简单介绍一下这个新生的数据库。号称是用来替代SQLite 和 Core Data的。Realm有以下优点：</p><ol><li><p>使用方便
Realm并不是基于SQLite的对象关系映射数据库。它是使用自己的持久化引擎，为简单和速度而生。<a href=https://realm.io/users>用户</a>们说，他们在数分钟之内就上手了Realm，构建一个app只需要数小时，每个app开发时间至少节约数周的时间。</p></li><li><p>快
Realm比其他的对象关系映射型数据库(Object Relational Mapping)，甚至比原生的SQLite更加快，这都得益于它零拷贝的设计。看看<a href=https://realm.io/news/introducing-realm/#fast>iOS</a>用户和<a href=https://realm.io/news/realm-for-android/#realm-for-android>Android</a>用户都是怎么评价它的快的<a href=https://twitter.com/realm/favorites>Twitter</a></p></li><li><p>跨平台
Realm 支持 iOS 和 OS X (<a href=https://static.realm.io/downloads/objc/realm-objc-1.0.0.zip>Objective‑C</a> & <a href=https://static.realm.io/downloads/swift/realm-swift-1.0.0.zip>Swift</a>) 和<a href=https://static.realm.io/downloads/java/realm-java-1.0.0.zip>Android</a>。你可以通过使用相同的model，共享Realm文件到各个平台，Java，Swift，Objective-C。并且在全平台可以使用相同的业务逻辑
 </p></li><li><p>优秀的特性
Realm支持先进的特性，如<a href=https://realm.io/docs/java/latest/#encryption>加密</a>，<a href=https://realm.io/docs/objc/latest/#queries>图形查询</a>，<a href=https://realm.io/docs/swift/latest/#migrations>轻松的迁移</a>。Realm的API是一个非常适合打造高响应的应用程​​序，并且Realm为我们提供方便的组件，以轻松构建复杂的用户界面</p></li><li><p>值得信任
Realm已经获得了银行，医疗保健提供商，复杂的企业app，星巴克这些产品的青睐。</p></li><li><p>社区驱动
Realm是Github上星标最多的数据库里面排名第四，仅次于Java 和 Cocoa 的repos。除了核心工程之外，Realm的社区已经编译了<a href=https://realm.io/addons>上百个app插件和组件</a></p></li><li><p>支持
可以从Realm公司快速获得官方的答案，去编译和支持你的数据库。Realm的团队会在<a href=https://github.com/realm>Github</a>, <a href="https://stackoverflow.com/questions/tagged/realm?sort=newest">StackOverflow</a>, & <a href=https://twitter.com/realm>Twitter</a>回答大家的各种问题</p></li></ol><p>下面再发3张令人惊喜的性能对比图</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/10_2.png alt></p><p>上图是每秒能在20万条数据中进行查询后count的次数。realm每秒可以进行30.9次查询后count。SQLite仅仅只有每秒13.6次查询后的count，相对于Core Data只有可怜的1。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/10_3.png alt></p><p>在20万条中进行一次遍历查询，数据和前面的count相似：Realm一秒可以遍历20万条数据31次，而RCore Data只能进行两次查询。 SQLite也只有14次而已。</p><p><img src=https://img.halfrost.com/Blog/ArticleImage/10_4.png alt></p><p>这是在一次事务每秒插入数据的对比，Realm每秒可以插入9.4万条记录，在这个比较里纯SQLite的性能最好，每秒可以插入17.8万条记录。然而封装了SQLite的FMDB的成绩大概是Realm的一半，4.7万，Core Data就更低了，只有可怜的1.8万。</p><p>从以上3张图可以看出Realm优秀的特性。那么我们开始使用Realm吧。第一步就是把本地的数据库换成Realm。</p><p>下面是我翻译的一篇手把手教程，那么让我们赶紧通过教程，来把Core Data迁移到Realm吧。</p><h4 id=原文httpsrealmionewsmigrating-from-core-data-to-realm><a href=https://realm.io/news/migrating-from-core-data-to-realm/>原文</a></h4><h4 id=译文>译文</h4><p>把一个使用core data框架作为数据库存储方式的app，迁移到Realm的确是一件很容易的事情。如果你现在有一个已经用了Core Data的app，并且考虑换成Realm，这个手把手教程正适合你！</p><p>很多开发者在用户界面，高度集成了Core Data(有时可能有上千行代码),这时很多人会告诉你转换Core Data到Realm可能会花数小时。Core Data和Realm两者都是把你的数据当成Object看待，所以迁移通常是很直接的过程:把你已经存在的Core Data的代码重构成使用Realm API的过程是很简单的。</p><p>迁移后，你会为Realm为你app带来的易用性，速度快，和稳定性而感到兴奋。</p><h4 id=1移除core-data-framework>1.移除Core Data Framework</h4><p>首先，如果你的app当前正在使用Core Data，你需要找出哪些代码是包含了Core Data的代码。这些代码是需要重构的。幸运的是，这里有一个手动的方式去做这件事:你可以手动的在整个代码里面搜索相关的代码，然后删除每个导入了Core Data头文件声明的语句</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec><span style=color:#75715e>#import &lt;CoreData/CoreData.h&gt;
</span></code></pre></div><p>或者</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift>@<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>CoreData</span>;
</code></pre></div><p>一旦这样删除以后，每一行使用了Core Data的将会报一个编译错误，接下来，解决这些编译错误只是时间问题。</p><h4 id=2移除core-data的设置代码>2.移除Core Data的设置代码</h4><p>在Core Data中，对model objects的更改是要通过managed object context object来实现的。而managed object context objects又是被persistent store coordinator object创建的，它们两者又是被managed object model object创建的。</p><p>可以这么说，在你开始思考用Core Data读取，或者写入数据的时候，你通常需要在你的app中的某处去设置依赖的对象，暴露一些Core Data的方法给你的app逻辑使用。无论在你的application delegate中，全局的单例中，或者就是在inline实现中，这些地方都会存在大量的潜在的Core Data 设置代码。</p><p>当你准备转换到Realm时，所有的这些代码都可以删掉。</p><p>在Realm中，所有设置都在你第一次创建一个Realm object的时候就已经都完成了。当然也是可以手动去配置它，就像你指定Realm数据文件存储在你的硬盘的哪个路径下，这些完全都可以在runtime的时候去选择的。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec>RLMRealm <span style=color:#f92672>*</span>defaultRealm <span style=color:#f92672>=</span> [RLMRealm defaultRealm];
</code></pre></div><p>或者</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>let</span> realm = Realm()
</code></pre></div><p>感觉很好吧？</p><h4 id=3迁移model文件>3.迁移model文件</h4><p>在Core Data中，实用的那些类都是被定义成NSManagedObject的子类。这些object的接口都是很标准的，原始的类型(比如NSInteger 和 CGFloat)是不能被使用的，它们必须抽象成一个NSNumber对象。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec><span style=color:#66d9ef>@interface</span> <span style=color:#a6e22e>Dog</span> : <span style=color:#a6e22e>NSManagedObject</span>

<span style=color:#66d9ef>@property</span> (<span style=color:#66d9ef>nonatomic</span>, <span style=color:#66d9ef>copy</span>) NSString <span style=color:#f92672>*</span>name;
<span style=color:#66d9ef>@property</span> (<span style=color:#66d9ef>nonatomic</span>, <span style=color:#66d9ef>strong</span>) NSNumber <span style=color:#f92672>*</span>age;
<span style=color:#66d9ef>@property</span> (<span style=color:#66d9ef>nonatomic</span>, <span style=color:#66d9ef>strong</span>) NSDate <span style=color:#f92672>*</span>birthdate;

<span style=color:#66d9ef>@end</span>

<span style=color:#66d9ef>@implementation</span> <span style=color:#a6e22e>Dog</span>

<span style=color:#66d9ef>@dynamic</span> name;
<span style=color:#66d9ef>@dynamic</span> age;
<span style=color:#66d9ef>@dynamic</span> birthdate;

<span style=color:#66d9ef>@end</span>
</code></pre></div><p>把这些managed object subclasses转换成Realm是非常简单的:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec><span style=color:#66d9ef>@interface</span> <span style=color:#a6e22e>Dog</span> : <span style=color:#a6e22e>RLMObject</span>

<span style=color:#66d9ef>@property</span> NSString <span style=color:#f92672>*</span>uuid;
<span style=color:#66d9ef>@property</span> NSString <span style=color:#f92672>*</span>name;
<span style=color:#66d9ef>@property</span> NSInteger age;
<span style=color:#66d9ef>@property</span> NSDate <span style=color:#f92672>*</span>birthdate;

<span style=color:#66d9ef>@end</span>

<span style=color:#66d9ef>@implementation</span> <span style=color:#a6e22e>Dog</span>

+ (NSString <span style=color:#f92672>*</span>)<span style=color:#a6e22e>primaryKey</span>
{
    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>@&#34;uuid&#34;</span>;
}

+ (NSDictionary <span style=color:#f92672>*</span>)<span style=color:#a6e22e>defaultPropertyValues</span>
{
    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>@{</span> <span style=color:#e6db74>@&#34;uuid&#34;</span> <span style=color:#f92672>:</span> [[NSUUID UUID] UUIDString],
              <span style=color:#e6db74>@&#34;name&#34;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>@&#34;&#34;</span>,
              <span style=color:#e6db74>@&#34;birthdate&#34;</span> <span style=color:#f92672>:</span> [NSDate date]<span style=color:#ae81ff>}</span>;
}

<span style=color:#66d9ef>@end</span>
</code></pre></div><p>或者</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift>
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Dog</span>: Object {
    <span style=color:#66d9ef>dynamic</span> <span style=color:#66d9ef>var</span> uuid = NSUUID().UUIDString
    <span style=color:#66d9ef>dynamic</span> <span style=color:#66d9ef>var</span> name = <span style=color:#e6db74>&#34;&#34;</span>
    <span style=color:#66d9ef>dynamic</span> <span style=color:#66d9ef>var</span> age = <span style=color:#ae81ff>0</span>
    <span style=color:#66d9ef>dynamic</span> <span style=color:#66d9ef>var</span> birthdate = NSDate().date
    
    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>primaryKey</span>() -&gt; String? {
        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;uuid&#34;</span>
    }
}
</code></pre></div><p>完成！这是多么的简单？</p><p>看这些实现，还是有一些Realm的细节需要注意的。</p><p>对于初次使用Realm的人来说，没有必要去指定属性关键字，Realm在内部已经管理了。所以这些类的头文件看上去都很精简。此外，Realm支持简单的数据类型，比如NSInteger 和 CGFloat，所有所有的NSNumber都可以安全的删除。</p><p>另一方面，这有一些关于Realm model的声明额外的说明。</p><ol><li><p>Core Data objects通过内部的NSManagedObjectID属性去唯一标识一个objects，Realm把这个留给开发者去完成。在上面的例子中，我们额外添加了一个名为uuid的属性，然后通过调用 [RLMObject primaryKey]方法去作为这个class的唯一标识。当然，如果你的objects完全不需要唯一标识，这些都可以跳过。</p></li><li><p>在写数据的过程中(这个过程不会太长！),Realm不能处理nil的object的属性。原因是，在[RLMObject defaultPropertyValues]这个类方法中给每个object在最初创建的时候，每个object属性都定义了一系列default值。当然这只是暂时的，我们很高兴的告诉你，在接下来的更新中，我们将会支持Realm object的属性可以为nil。</p></li></ol><h4 id=4迁移写操作>4.迁移写操作</h4><p>如果你不能保存你的数据，这肯定不是一个持久的方案！创建一个新的Core Data对象然后再简单的修改一下它，需要下面这些代码：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec>
<span style=color:#75715e>//Create a new Dog
</span><span style=color:#75715e></span>Dog <span style=color:#f92672>*</span>newDog <span style=color:#f92672>=</span> [NSEntityDescription insertNewObjectForEntityForName:<span style=color:#e6db74>@&#34;Dog&#34;</span> inManagedObjectContext:myContext];
newDog.name <span style=color:#f92672>=</span> <span style=color:#e6db74>@&#34;McGruff&#34;</span>;

<span style=color:#75715e>//Save the new Dog object to disk
</span><span style=color:#75715e></span>NSError <span style=color:#f92672>*</span>saveError <span style=color:#f92672>=</span> nil;
[newDog.managedObjectContext save:<span style=color:#f92672>&amp;</span>saveError];

<span style=color:#75715e>//Rename the Dog
</span><span style=color:#75715e></span>newDog.name <span style=color:#f92672>=</span> <span style=color:#e6db74>@&#34;Pluto&#34;</span>;
[newDog.managedObjectContext save:<span style=color:#f92672>&amp;</span>saveError];
</code></pre></div><p>相比之下，Realm保存的操作是略有不同的，但在相同的范围内修改上面的代码，仍然有相似的地方。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec><span style=color:#75715e>//Create the dog object
</span><span style=color:#75715e></span>Dog <span style=color:#f92672>*</span>newDog <span style=color:#f92672>=</span> [[Dog alloc] init];
newDog.name <span style=color:#f92672>=</span> <span style=color:#e6db74>@&#34;McGruff&#34;</span>;

<span style=color:#75715e>//Save the new Dog object to disk (Using a block for the transaction)
</span><span style=color:#75715e></span>RLMRealm <span style=color:#f92672>*</span>defaultRealm <span style=color:#f92672>=</span> [RLMRealm defaultRealm];
[defaultRealm transactionWithBlock:<span style=color:#f92672>^</span>{
    [defaultRealm addObject:newDog];
}];

<span style=color:#75715e>//Rename the dog (Using open/close methods for the transaction)
</span><span style=color:#75715e></span>[defaultRealm beginWriteTransaction];
newDog.name <span style=color:#f92672>=</span> <span style=color:#e6db74>@&#34;Pluto&#34;</span>;
[defaultRealm commitWriteTransaction];
</code></pre></div><p>或者</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#75715e>//Create the dog object</span>
<span style=color:#66d9ef>let</span> mydog = Dog()
myDog.name = <span style=color:#e6db74>&#34;McGruff&#34;</span>

<span style=color:#75715e>//Save the new Dog object to disk (Using a block for the transaction)</span>
Realm().write {
    realm.add(myDog)
}

<span style=color:#75715e>//Rename the dog (Using open/close methods for the transaction)</span>
Realm().beginWrite()
myDog.name = <span style=color:#e6db74>&#34;Pluto&#34;</span>
Realm().commitWrite()
</code></pre></div><p>完成！我们的数据被保存了！</p><p>明显的不同是，在Realm中，一旦一个objects被添加到一个Realm object中，它就是不可被修改的。为了在修改属性操作的后面执行，Realm object会被保存在一个写的事务中。这种不能被修改的model，保证了在不同线程中读/写 object数据的情况下，数据的一致性。</p><p>Core Data的实现确实可以改变属性，然后调用save方法，对比Realm的实现，只是一些小小的不同罢了。</p><h4 id=5迁移查询>5.迁移查询</h4><p>另一方面，如果你不能检索查询你的数据，这肯定不是一个持久的方案！</p><p>在Core Data的基础实现中，它运用了fetch requests的概念去从硬盘检索数据。一个fetch request object是被当成一个单独的实例化对象去创建的，包含了一些额外的过滤参数，排序条件。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec>
NSManagedObjectContext <span style=color:#f92672>*</span>context <span style=color:#f92672>=</span> self.managedObjectContext;

<span style=color:#75715e>//A fetch request to get all dogs younger than 5 years old, in alphabetical order
</span><span style=color:#75715e></span>NSEntityDescription <span style=color:#f92672>*</span>entity <span style=color:#f92672>=</span> [NSEntityDescription
                               entityForName:<span style=color:#e6db74>@&#34;Dog&#34;</span> inManagedObjectContext:context];

NSPredicate <span style=color:#f92672>*</span>predicate <span style=color:#f92672>=</span> [NSPredicate predicateWithFormat:<span style=color:#e6db74>@&#34;age &lt; 5&#34;</span>];

NSSortDescriptor <span style=color:#f92672>*</span>sortDescriptor <span style=color:#f92672>=</span> [[NSSortDescriptor alloc] initWithKey:<span style=color:#e6db74>@&#34;name&#34;</span> ascending:YES];

NSFetchRequest <span style=color:#f92672>*</span>request <span style=color:#f92672>=</span> [[NSFetchRequest alloc] init];
request.entity <span style=color:#f92672>=</span> entity;
request.predicate <span style=color:#f92672>=</span> predicate;
request.sortDescriptors <span style=color:#f92672>=</span> <span style=color:#ae81ff>@[</span>sortDescriptor<span style=color:#ae81ff>]</span>;

NSError <span style=color:#f92672>*</span>error;
NSArray <span style=color:#f92672>*</span>dogs <span style=color:#f92672>=</span> [moc executeFetchRequest:request error:<span style=color:#f92672>&amp;</span>error];
</code></pre></div><p>虽然这确实挺好，但是需要编写大量的代码！一些聪明的开发者就开发了一些library使这些代码编写的更加容易。比如MagicalRecord。</p><p>对比这些，使用了Realm之后，这些查询的等效代码如下:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec>RLMResults <span style=color:#f92672>*</span>dogs <span style=color:#f92672>=</span> [[Dog objectsWhere:<span style=color:#e6db74>@&#34;age &lt; 5&#34;</span>] sortedResultsUsingProperty:<span style=color:#e6db74>@&#34;name&#34;</span> ascending:YES];
</code></pre></div><p>或者</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=color:#66d9ef>var</span> dogs = Realm().objects(Dog).filter(<span style=color:#e6db74>&#34;age &lt; 5&#34;</span>).sorted(<span style=color:#e6db74>&#34;name&#34;</span>)
</code></pre></div><p>在一行调用了2个方法。对比Core Data将近10行代码。</p><p>当然，相同操作得到的结果是相同的(RLMResults 和 NSArray 基本类似),转换到Realm，由于这些查询都是很独立的，所以查询周围的逻辑只需要重构很少的一部分代码就可以了。</p><h4 id=6迁移用户数据>6.迁移用户数据</h4><p>一旦你所有代码都迁移到Realm，这里还有一个突出的问题，你如何迁移所有用户已经存在在他们设备上的数据，从Core Data迁移到Realm中？</p><p>显然，这是非常复杂的问题，它决定于你的app的功能，还有用户的环境。你处理这种情况可能解决办法每次都不一样。</p><p>目前，我们看到了2种情况:</p><ol><li><p>一旦你迁移到Realm，你可以重新导入Core Data framework到你的app，用原生的NSManagedObject objects去fetch你的用户的Core Data数据，然后手动的把数据传给Realm。你可以把这段迁移的代码永久的留在app中，或者也可以经过非常充足的时间之后，再删除掉。</p></li><li><p>如果用户数据不是不可替代的——举个例子，如果是一些简单的缓存信息，可以通过硬盘上的用户数据重新生成的话，那么可以很简单的就把Core Data数据直接清除掉，当用户下次打开app的时候，一切从0开始。当然这需要经过非常谨慎的考虑，不然的话，会给很多人留下非常坏的用户体验。</p></li></ol><p>最终，决定应该偏向于用户。理想的情况是不要留下Core Data还连接着你的app，但是结果还是要取决于你的情况。好运！</p><h4 id=进一步的讨论>进一步的讨论</h4><p>虽然在移植一个应用程序到Realm过程中，没有真正重要的步骤，但是有一些额外的情况下，你应该知道：</p><h6 id=并发>并发</h6><p>如果你在后台线程做了一些比较重的操作，你可能会发现你需要在线程之间传递Realm object。在Core Data中允许你在线程之间传递managed objects(虽然这样做不是最佳实践)，但是在Realm中，在线程中传递objects是严格禁止的，并且任何企图这样做的，都会抛出一个严重的异常。</p><p>如此来说，对于下面这些情况，是件很容易的事情:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objectivec data-lang=objectivec>
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, <span style=color:#ae81ff>0</span>), <span style=color:#f92672>^</span>{
    <span style=color:#75715e>//Rename the dog in a background queue
</span><span style=color:#75715e></span>    [[RLMRealm defaultRealm] transactionWithBlock:<span style=color:#f92672>^</span>{
        dog.name <span style=color:#f92672>=</span> <span style=color:#e6db74>@&#34;Peanut Wigglebutt&#34;</span>;
    }];
    
    <span style=color:#75715e>//Print the dog&#39;s name on the main queue
</span><span style=color:#75715e></span>    NSString <span style=color:#f92672>*</span>uuid <span style=color:#f92672>=</span> dog.uuid;
    dispatch_async(dispatch_get_main_queue(), <span style=color:#f92672>^</span>{
        Dog <span style=color:#f92672>*</span>localDog <span style=color:#f92672>=</span> [Dog objectForPrimaryKey:uuid];
        NSLog(<span style=color:#e6db74>@&#34;Dog&#39;s name is %@&#34;</span>, localDog.name);
    });
});
</code></pre></div><p>或者</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift>
dispatch_async(queue) {
    <span style=color:#75715e>//Rename the dog in a background queue</span>
    Realm().write {
        dog.name = <span style=color:#e6db74>&#34;Peanut Wigglebutt&#34;</span>
    }
    
    <span style=color:#75715e>//Print the dog&#39;s name on the main queue</span>
    <span style=color:#66d9ef>let</span> uuid = dog.uuid
    dispatch_async(dispatch_get_main_queue()) {
        <span style=color:#66d9ef>let</span> localDog = Realm().objectForPrimaryKey(Dog, uuid)
        println(<span style=color:#e6db74>&#34;Dog&#39;s name is </span><span style=color:#ae81ff>\\</span><span style=color:#e6db74>(localDog.name)&#34;</span>)
    }
}
</code></pre></div><p>虽然Realm objects不能在线程间被传递，但是Realm properties的副本可以在线程中被传递。考虑到Realm从磁盘中检索objects是非常快速的，如果只是简单的通过新线程在存储区中重新refetch相同的object，这只会造成很小的性能损失。在这个例子中，我们取了对象的主键的copy，然后把它从后台队列传递给主队列，然后再通过它在主线程的上下文中重新获取该对象。</p><h6 id=nsfetchedresultscontroller-的等效做法>NSFetchedResultsController 的等效做法</h6><p>相比Core Data的所有缺点，可能使用Core Data最充足的理由就是NSFetchedResultsController——这是一个类，它可以检测到数据存储的变化，并且能自动的把这一变化展示到UI上。</p><p>在写这篇文章的时候，Realm还没有相似的机制。虽然它可以注册一个block，这个block会在数据源发生变化的时候被执行，但是这种"蛮力"的做法对大多数的UI来说都是不友好的。目前，如果你的UI代码很依赖Realm，那么这种做法对你来说就像处理一个breaker一样。</p><p>Realm的cocoa工程师现在正在开发一套通知系统，当一些object的属性被更改的时候，允许我们去注册一个通知，来接收到这些改变。这些特性都会在Realm的Swift and Objective‑C 的未来的更新版本中。</p><p>在此期间，如果现有的通知block API还是没有满足你的需要，但是你还是需要当特定的property被更改了收到一个通知，这里推荐使用神奇的第三方库，名字叫<a href=https://github.com/Roobiq/RBQFetchedResultsController>RBQFetchedResultsController</a>，它能模仿上述功能。除此之外，你还可以通过在objects里面加入setter方法，当setter方法被调用的时候，发送一个广播通知，这样做也能实现相同的功能。</p><h4 id=结尾>结尾</h4><p>Core Data和Realm的在展示数据的时候都是通过model objects，由于这一相似性，得以让我们从Core Data迁移到Realm时非常迅速，简单(并且非常令人满意！)。尽管开始看上去令人怯步，但是实际做起来，就是需要把每个Core Data的方法调用转换成等价的Realm的方法，然后写一个辅助类去帮你迁移用户的数据。这些也都非常简单。</p><p>如果你在你的app中使用Core Data遇到了些困难，需要些更加简单的解决办法，我们强烈推荐你尝试一下Realm，看看它是否适用于你。如果适用，请你告诉我们！</p><p>感谢阅读这篇文章。快去用Realm构建一个令人惊喜的app吧！在这些地方可以联系到我们<a href="https://stackoverflow.com/questions/tagged/realm?sort=newest">StackOverflow</a>, <a href=https://github.com/realm/realm-cocoa>GitHub</a>, or <a href=https://twitter.com/realm>Twitter</a>.</p><img src=https://img.halfrost.com/wechat-qr-code.png></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=https://books.halfrost.com/>Books</a></li><li><a href=https://github.com/halfrost/Halfrost-Field>Github</a></li><li><a href=https://halfrost.me/>About</a></li><li><a href=/index.xml>RSS</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#前言>前言</a></li><li><a href=#原文httpsrealmionewsmigrating-from-core-data-to-realm><a href=https://realm.io/news/migrating-from-core-data-to-realm/>原文</a></a></li><li><a href=#译文>译文</a></li><li><a href=#1移除core-data-framework>1.移除Core Data Framework</a></li><li><a href=#2移除core-data的设置代码>2.移除Core Data的设置代码</a></li><li><a href=#3迁移model文件>3.迁移model文件</a></li><li><a href=#4迁移写操作>4.迁移写操作</a></li><li><a href=#5迁移查询>5.迁移查询</a></li><li><a href=#6迁移用户数据>6.迁移用户数据</a></li><li><a href=#进一步的讨论>进一步的讨论</a></li><li><a href=#结尾>结尾</a></li></ul></li></ul></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f"><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f&text=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%20Core%20Data%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Realm"><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f&title=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%20Core%20Data%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Realm"><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f&is_video=false&description=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%20Core%20Data%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Realm"><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%20Core%20Data%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Realm&body=Check out this article: https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f"><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f&title=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%20Core%20Data%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Realm"><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f&title=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%20Core%20Data%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Realm"><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f&title=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%20Core%20Data%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Realm"><i class="fab fa-stumbleupon fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://digg.com/submit?url=https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f&title=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%20Core%20Data%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Realm"><i class="fab fa-digg fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f&name=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%20Core%20Data%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Realm&description=%e5%89%8d%e8%a8%80%20%e7%9c%8b%e4%ba%86%e8%bf%99%e7%af%87%e6%96%87%e7%ab%a0%e7%9a%84%e6%a0%87%e9%a2%98%ef%bc%8c%e4%b9%9f%e8%ae%b8%e6%9c%89%e4%ba%9b%e4%ba%ba%e8%bf%98%e4%b8%8d%e7%9f%a5%e9%81%93Realm%e6%98%af%e4%bb%80%e4%b9%88%ef%bc%8c%e9%82%a3%e4%b9%88%e6%88%91%e5%85%88%e7%ae%80%e5%8d%95%e4%bb%8b%e7%bb%8d%e4%b8%80%e4%b8%8b%e8%bf%99%e4%b8%aa%e6%96%b0%e7%94%9f%e7%9a%84%e6%95%b0%e6%8d%ae%e5%ba%93%e3%80%82%e5%8f%b7%e7%a7%b0%e6%98%af%e7%94%a8%e6%9d%a5%e6%9b%bf%e4%bb%a3SQLite%20%e5%92%8c%20Core%20Data%e7%9a%84%e3%80%82Realm%e6%9c%89%e4%bb%a5%e4%b8%8b%e4%bc%98%e7%82%b9%ef%bc%9a%0a%20%20%e4%bd%bf%e7%94%a8%e6%96%b9%e4%be%bf%20Realm%e5%b9%b6%e4%b8%8d%e6%98%af%e5%9f%ba%e4%ba%8eSQLite%e7%9a%84%e5%af%b9%e8%b1%a1%e5%85%b3%e7%b3%bb%e6%98%a0%e5%b0%84%e6%95%b0%e6%8d%ae%e5%ba%93%e3%80%82%e5%ae%83%e6%98%af%e4%bd%bf%e7%94%a8%e8%87%aa%e5%b7%b1%e7%9a%84%e6%8c%81%e4%b9%85%e5%8c%96%e5%bc%95%e6%93%8e%ef%bc%8c%e4%b8%ba%e7%ae%80%e5%8d%95%e5%92%8c%e9%80%9f%e5%ba%a6%e8%80%8c%e7%94%9f%e3%80%82%e7%94%a8%e6%88%b7%e4%bb%ac%e8%af%b4%ef%bc%8c%e4%bb%96%e4%bb%ac%e5%9c%a8%e6%95%b0%e5%88%86%e9%92%9f%e4%b9%8b%e5%86%85%e5%b0%b1%e4%b8%8a%e6%89%8b%e4%ba%86Realm%ef%bc%8c%e6%9e%84%e5%bb%ba%e4%b8%80%e4%b8%aaapp%e5%8f%aa%e9%9c%80%e8%a6%81%e6%95%b0%e5%b0%8f%e6%97%b6%ef%bc%8c%e6%af%8f%e4%b8%aaapp%e5%bc%80%e5%8f%91%e6%97%b6%e9%97%b4%e8%87%b3%e5%b0%91%e8%8a%82%e7%ba%a6%e6%95%b0%e5%91%a8%e7%9a%84%e6%97%b6%e9%97%b4%e3%80%82%0a%20%20%e5%bf%ab%20Realm%e6%af%94%e5%85%b6%e4%bb%96%e7%9a%84%e5%af%b9%e8%b1%a1%e5%85%b3%e7%b3%bb%e6%98%a0%e5%b0%84%e5%9e%8b%e6%95%b0%e6%8d%ae%e5%ba%93%28Object%20Relational%20Mapping%29%ef%bc%8c%e7%94%9a%e8%87%b3%e6%af%94%e5%8e%9f%e7%94%9f%e7%9a%84SQLite%e6%9b%b4%e5%8a%a0%e5%bf%ab%ef%bc%8c%e8%bf%99%e9%83%bd%e5%be%97%e7%9b%8a%e4%ba%8e%e5%ae%83%e9%9b%b6%e6%8b%b7%e8%b4%9d%e7%9a%84%e8%ae%be%e8%ae%a1%e3%80%82%e7%9c%8b%e7%9c%8biOS%e7%94%a8%e6%88%b7%e5%92%8cAndroid%e7%94%a8%e6%88%b7%e9%83%bd%e6%98%af%e6%80%8e%e4%b9%88%e8%af%84%e4%bb%b7%e5%ae%83%e7%9a%84%e5%bf%ab%e7%9a%84Twitter%0a%20%20%e8%b7%a8%e5%b9%b3%e5%8f%b0%20Realm%20%e6%94%af%e6%8c%81%20iOS%20%e5%92%8c%20OS%20X%20%28Objective%e2%80%91C%c2%a0%26amp%3b%c2%a0Swift%29%20%e5%92%8cAndroid%e3%80%82%e4%bd%a0%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%e4%bd%bf%e7%94%a8%e7%9b%b8%e5%90%8c%e7%9a%84model%ef%bc%8c%e5%85%b1%e4%ba%abRealm%e6%96%87%e4%bb%b6%e5%88%b0%e5%90%84%e4%b8%aa%e5%b9%b3%e5%8f%b0%ef%bc%8cJava%ef%bc%8cSwift%ef%bc%8cObjective-C%e3%80%82%e5%b9%b6%e4%b8%94%e5%9c%a8%e5%85%a8%e5%b9%b3%e5%8f%b0%e5%8f%af%e4%bb%a5%e4%bd%bf%e7%94%a8%e7%9b%b8%e5%90%8c%e7%9a%84%e4%b8%9a%e5%8a%a1%e9%80%bb%e8%be%91%20%20%20%e4%bc%98%e7%a7%80%e7%9a%84%e7%89%b9%e6%80%a7%20Realm%e6%94%af%e6%8c%81%e5%85%88%e8%bf%9b%e7%9a%84%e7%89%b9%e6%80%a7%ef%bc%8c%e5%a6%82%e5%8a%a0%e5%af%86%ef%bc%8c%e5%9b%be%e5%bd%a2%e6%9f%a5%e8%af%a2%ef%bc%8c%e8%bd%bb%e6%9d%be%e7%9a%84%e8%bf%81%e7%a7%bb%e3%80%82Realm%e7%9a%84API%e6%98%af%e4%b8%80%e4%b8%aa%e9%9d%9e%e5%b8%b8%e9%80%82%e5%90%88%e6%89%93%e9%80%a0%e9%ab%98%e5%93%8d%e5%ba%94%e7%9a%84%e5%ba%94%e7%94%a8%e7%a8%8b%e2%80%8b%e2%80%8b%e5%ba%8f%ef%bc%8c%e5%b9%b6%e4%b8%94Realm%e4%b8%ba%e6%88%91%e4%bb%ac%e6%8f%90%e4%be%9b%e6%96%b9%e4%be%bf%e7%9a%84%e7%bb%84%e4%bb%b6%ef%bc%8c%e4%bb%a5%e8%bd%bb%e6%9d%be%e6%9e%84%e5%bb%ba%e5%a4%8d%e6%9d%82%e7%9a%84%e7%94%a8%e6%88%b7%e7%95%8c%e9%9d%a2%0a%20%20%e5%80%bc%e5%be%97%e4%bf%a1%e4%bb%bb%20Realm%e5%b7%b2%e7%bb%8f%e8%8e%b7%e5%be%97%e4%ba%86%e9%93%b6%e8%a1%8c%ef%bc%8c%e5%8c%bb%e7%96%97%e4%bf%9d%e5%81%a5%e6%8f%90%e4%be%9b%e5%95%86%ef%bc%8c%e5%a4%8d%e6%9d%82%e7%9a%84%e4%bc%81%e4%b8%9aapp%ef%bc%8c%e6%98%9f%e5%b7%b4%e5%85%8b%e8%bf%99%e4%ba%9b%e4%ba%a7%e5%93%81%e7%9a%84%e9%9d%92%e7%9d%90%e3%80%82%0a%20%20%e7%a4%be%e5%8c%ba%e9%a9%b1%e5%8a%a8%20Realm%e6%98%afGithub%e4%b8%8a%e6%98%9f%e6%a0%87%e6%9c%80%e5%a4%9a%e7%9a%84%e6%95%b0%e6%8d%ae%e5%ba%93%e9%87%8c%e9%9d%a2%e6%8e%92%e5%90%8d%e7%ac%ac%e5%9b%9b%ef%bc%8c%e4%bb%85%e6%ac%a1%e4%ba%8eJava%20%e5%92%8c%20Cocoa%20%e7%9a%84repos%e3%80%82%e9%99%a4%e4%ba%86%e6%a0%b8%e5%bf%83%e5%b7%a5%e7%a8%8b%e4%b9%8b%e5%a4%96%ef%bc%8cRealm%e7%9a%84%e7%a4%be%e5%8c%ba%e5%b7%b2%e7%bb%8f%e7%bc%96%e8%af%91%e4%ba%86%e4%b8%8a%e7%99%be%e4%b8%aaapp%e6%8f%92%e4%bb%b6%e5%92%8c%e7%bb%84%e4%bb%b6%0a%20%20%e6%94%af%e6%8c%81%20%e5%8f%af%e4%bb%a5%e4%bb%8eRealm%e5%85%ac%e5%8f%b8%e5%bf%ab%e9%80%9f%e8%8e%b7%e5%be%97%e5%ae%98%e6%96%b9%e7%9a%84%e7%ad%94%e6%a1%88%ef%bc%8c%e5%8e%bb%e7%bc%96%e8%af%91%e5%92%8c%e6%94%af%e6%8c%81%e4%bd%a0%e7%9a%84%e6%95%b0%e6%8d%ae%e5%ba%93%e3%80%82Realm%e7%9a%84%e5%9b%a2%e9%98%9f%e4%bc%9a%e5%9c%a8Github%2c%c2%a0StackOverflow%2c%20%26amp%3b%c2%a0Twitter%e5%9b%9e%e7%ad%94%e5%a4%a7%e5%ae%b6%e7%9a%84%e5%90%84%e7%a7%8d%e9%97%ae%e9%a2%98%0a%20%20%e4%b8%8b%e9%9d%a2%e5%86%8d%e5%8f%913%e5%bc%a0%e4%bb%a4%e4%ba%ba%e6%83%8a%e5%96%9c%e7%9a%84%e6%80%a7%e8%83%bd%e5%af%b9%e6%af%94%e5%9b%be%0a%e4%b8%8a%e5%9b%be%e6%98%af%e6%af%8f%e7%a7%92%e8%83%bd%e5%9c%a820%e4%b8%87%e6%9d%a1%e6%95%b0%e6%8d%ae%e4%b8%ad%e8%bf%9b%e8%a1%8c%e6%9f%a5%e8%af%a2%e5%90%8ecount%e7%9a%84%e6%ac%a1%e6%95%b0%e3%80%82realm%e6%af%8f%e7%a7%92%e5%8f%af%e4%bb%a5%e8%bf%9b%e8%a1%8c30.9%e6%ac%a1%e6%9f%a5%e8%af%a2%e5%90%8ecount%e3%80%82SQLite%e4%bb%85%e4%bb%85%e5%8f%aa%e6%9c%89%e6%af%8f%e7%a7%9213.6%e6%ac%a1%e6%9f%a5%e8%af%a2%e5%90%8e%e7%9a%84count%ef%bc%8c%e7%9b%b8%e5%af%b9%e4%ba%8eCore%20Data%e5%8f%aa%e6%9c%89%e5%8f%af%e6%80%9c%e7%9a%841%e3%80%82%0a%e5%9c%a820%e4%b8%87%e6%9d%a1%e4%b8%ad%e8%bf%9b%e8%a1%8c%e4%b8%80%e6%ac%a1%e9%81%8d%e5%8e%86%e6%9f%a5%e8%af%a2%ef%bc%8c%e6%95%b0%e6%8d%ae%e5%92%8c%e5%89%8d%e9%9d%a2%e7%9a%84count%e7%9b%b8%e4%bc%bc%ef%bc%9aRealm%e4%b8%80%e7%a7%92%e5%8f%af%e4%bb%a5%e9%81%8d%e5%8e%8620%e4%b8%87%e6%9d%a1%e6%95%b0%e6%8d%ae31%e6%ac%a1%ef%bc%8c%e8%80%8cRCore%20Data%e5%8f%aa%e8%83%bd%e8%bf%9b%e8%a1%8c%e4%b8%a4%e6%ac%a1%e6%9f%a5%e8%af%a2%e3%80%82%20SQLite%e4%b9%9f%e5%8f%aa%e6%9c%8914%e6%ac%a1%e8%80%8c%e5%b7%b2%e3%80%82%0a%e8%bf%99%e6%98%af%e5%9c%a8%e4%b8%80%e6%ac%a1%e4%ba%8b%e5%8a%a1%e6%af%8f%e7%a7%92%e6%8f%92%e5%85%a5%e6%95%b0%e6%8d%ae%e7%9a%84%e5%af%b9%e6%af%94%ef%bc%8cRealm%e6%af%8f%e7%a7%92%e5%8f%af%e4%bb%a5%e6%8f%92%e5%85%a59.4%e4%b8%87%e6%9d%a1%e8%ae%b0%e5%bd%95%ef%bc%8c%e5%9c%a8%e8%bf%99%e4%b8%aa%e6%af%94%e8%be%83%e9%87%8c%e7%ba%afSQLite%e7%9a%84%e6%80%a7%e8%83%bd%e6%9c%80%e5%a5%bd%ef%bc%8c%e6%af%8f%e7%a7%92%e5%8f%af%e4%bb%a5%e6%8f%92%e5%85%a517.8%e4%b8%87%e6%9d%a1%e8%ae%b0%e5%bd%95%e3%80%82%e7%84%b6%e8%80%8c%e5%b0%81%e8%a3%85%e4%ba%86SQLite%e7%9a%84FMDB%e7%9a%84%e6%88%90%e7%bb%a9%e5%a4%a7%e6%a6%82%e6%98%afRealm%e7%9a%84%e4%b8%80%e5%8d%8a%ef%bc%8c4.7%e4%b8%87%ef%bc%8cCore%20Data%e5%b0%b1%e6%9b%b4%e4%bd%8e%e4%ba%86%ef%bc%8c%e5%8f%aa%e6%9c%89%e5%8f%af%e6%80%9c%e7%9a%841.8%e4%b8%87%e3%80%82%0a%e4%bb%8e%e4%bb%a5%e4%b8%8a3%e5%bc%a0%e5%9b%be%e5%8f%af%e4%bb%a5%e7%9c%8b%e5%87%baRealm%e4%bc%98%e7%a7%80%e7%9a%84%e7%89%b9%e6%80%a7%e3%80%82%e9%82%a3%e4%b9%88%e6%88%91%e4%bb%ac%e5%bc%80%e5%a7%8b%e4%bd%bf%e7%94%a8Realm%e5%90%a7%e3%80%82%e7%ac%ac%e4%b8%80%e6%ad%a5%e5%b0%b1%e6%98%af%e6%8a%8a%e6%9c%ac%e5%9c%b0%e7%9a%84%e6%95%b0%e6%8d%ae%e5%ba%93%e6%8d%a2%e6%88%90Realm%e3%80%82%0a%e4%b8%8b%e9%9d%a2%e6%98%af%e6%88%91%e7%bf%bb%e8%af%91%e7%9a%84%e4%b8%80%e7%af%87%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e7%a8%8b%ef%bc%8c%e9%82%a3%e4%b9%88%e8%ae%a9%e6%88%91%e4%bb%ac%e8%b5%b6%e7%b4%a7%e9%80%9a%e8%bf%87%e6%95%99%e7%a8%8b%ef%bc%8c%e6%9d%a5%e6%8a%8aCore%20Data%e8%bf%81%e7%a7%bb%e5%88%b0Realm%e5%90%a7%e3%80%82%0a%e5%8e%9f%e6%96%87%20%e8%af%91%e6%96%87%20%e6%8a%8a%e4%b8%80%e4%b8%aa%e4%bd%bf%e7%94%a8core%20data%e6%a1%86%e6%9e%b6%e4%bd%9c%e4%b8%ba%e6%95%b0%e6%8d%ae%e5%ba%93%e5%ad%98%e5%82%a8%e6%96%b9%e5%bc%8f%e7%9a%84app%ef%bc%8c%e8%bf%81%e7%a7%bb%e5%88%b0Realm%e7%9a%84%e7%a1%ae%e6%98%af%e4%b8%80%e4%bb%b6%e5%be%88%e5%ae%b9%e6%98%93%e7%9a%84%e4%ba%8b%e6%83%85%e3%80%82%e5%a6%82%e6%9e%9c%e4%bd%a0%e7%8e%b0%e5%9c%a8%e6%9c%89%e4%b8%80%e4%b8%aa%e5%b7%b2%e7%bb%8f%e7%94%a8%e4%ba%86Core%20Data%e7%9a%84app%ef%bc%8c%e5%b9%b6%e4%b8%94%e8%80%83%e8%99%91%e6%8d%a2%e6%88%90Realm%ef%bc%8c%e8%bf%99%e4%b8%aa%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e7%a8%8b%e6%ad%a3%e9%80%82%e5%90%88%e4%bd%a0%ef%bc%81%0a%e5%be%88%e5%a4%9a%e5%bc%80%e5%8f%91%e8%80%85%e5%9c%a8%e7%94%a8%e6%88%b7%e7%95%8c%e9%9d%a2%ef%bc%8c%e9%ab%98%e5%ba%a6%e9%9b%86%e6%88%90%e4%ba%86Core%20Data%28%e6%9c%89%e6%97%b6%e5%8f%af%e8%83%bd%e6%9c%89%e4%b8%8a%e5%8d%83%e8%a1%8c%e4%bb%a3%e7%a0%81%29%2c%e8%bf%99%e6%97%b6%e5%be%88%e5%a4%9a%e4%ba%ba%e4%bc%9a%e5%91%8a%e8%af%89%e4%bd%a0%e8%bd%ac%e6%8d%a2Core%20Data%e5%88%b0Realm%e5%8f%af%e8%83%bd%e4%bc%9a%e8%8a%b1%e6%95%b0%e5%b0%8f%e6%97%b6%e3%80%82Core%20Data%e5%92%8cRealm%e4%b8%a4%e8%80%85%e9%83%bd%e6%98%af%e6%8a%8a%e4%bd%a0%e7%9a%84%e6%95%b0%e6%8d%ae%e5%bd%93%e6%88%90Object%e7%9c%8b%e5%be%85%ef%bc%8c%e6%89%80%e4%bb%a5%e8%bf%81%e7%a7%bb%e9%80%9a%e5%b8%b8%e6%98%af%e5%be%88%e7%9b%b4%e6%8e%a5%e7%9a%84%e8%bf%87%e7%a8%8b%3a%e6%8a%8a%e4%bd%a0%e5%b7%b2%e7%bb%8f%e5%ad%98%e5%9c%a8%e7%9a%84Core%20Data%e7%9a%84%e4%bb%a3%e7%a0%81%e9%87%8d%e6%9e%84%e6%88%90%e4%bd%bf%e7%94%a8Realm%20API%e7%9a%84%e8%bf%87%e7%a8%8b%e6%98%af%e5%be%88%e7%ae%80%e5%8d%95%e7%9a%84%e3%80%82"><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fnew.halfrost.com%2fios_coredata_to_realm%2f&t=%e6%89%8b%e6%8a%8a%e6%89%8b%e6%95%99%e4%bd%a0%e4%bb%8e%20Core%20Data%20%e8%bf%81%e7%a7%bb%e5%88%b0%20Realm"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu class=icon href=# onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden=true></i>Menu</a>
<a id=toc class=icon href=# onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden=true></i>TOC</a>
<a id=share class=icon href=# onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden=true></i>share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i>Top</a></div></div></div><footer id=footer><div class=footer-left><p class=copyright style=float:left;margin-bottom:0><a href=https://github.com/halfrost/Halfrost-Field class=github-repo style=height:18px><span class=gadget-github></span>Star</a>
Copyright &copy;halfrost 2016 - 2021
<a href=http://www.miit.gov.cn/>鄂ICP备16014744号</a></p><br><p class="copyright statistics" style=margin-bottom:20px><span id=busuanzi_container_site_pv>Cumulative Page Views <span id=busuanzi_value_site_pv></span>| Unique Visitors <span id=busuanzi_value_site_uv></span></span></p></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script><script src=/main.min.f870a4d110314b9e50e65f8ac982dc1c9c376c8f1a5083d39c62cfc49073f011.js></script><script async src=/prism.js></script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]},svg:{fontCache:'global'}};</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></html>